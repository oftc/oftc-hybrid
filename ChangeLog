db          2002/09/06 15:37:15 EDT	(20020906_0)

  Modified files:
    include              s_log.h 
    modules              m_challenge.c m_oper.c 
    src                  s_log.c send.c 
  Log:
  - fixed bug with operlog and foperlog handling. The ConfigFile entries were being
    treated as char filename pointers, instead of strings.
    There was missing log_failed_oper() code.
    log_oper() code was not being called when it should have been.
  
  Revision  Changes    Path
  7.11      +1 -0      ircd-hybrid-7/include/s_log.h
  1.37      +52 -49    ircd-hybrid-7/modules/m_challenge.c
  1.53      +4 -2      ircd-hybrid-7/modules/m_oper.c
  7.44      +83 -49    ircd-hybrid-7/src/s_log.c
  7.206     +0 -1      ircd-hybrid-7/src/send.c



db          2002/09/05 02:05:41 EDT	(20020905_3)

  Modified files:
    modules              m_accept.c m_close.c m_knock.c m_who.c 
                         m_whois.c 
  Log:
  - converted a pile of for() to DLINK_NEXT
  - cleaned up m_who (idea from Androsyn)
  
  Revision  Changes    Path
  1.33      +2 -2      ircd-hybrid-7/modules/m_accept.c
  1.24      +5 -5      ircd-hybrid-7/modules/m_close.c
  1.52      +81 -85    ircd-hybrid-7/modules/m_knock.c
  1.62      +153 -199  ircd-hybrid-7/modules/m_who.c
  1.81      +8 -11     ircd-hybrid-7/modules/m_whois.c



db          2002/09/04 22:48:43 EDT	(20020905_2)

  Modified files:
    modules              m_gline.c 
    src                  s_gline.c 
  Log:
  - If a local oper votes twice on a gline, don't
    do the send-realops, don't send it off of the server, just notice the oper
    and continue.
  
  Revision  Changes    Path
  1.84      +185 -224  ircd-hybrid-7/modules/m_gline.c
  1.23      +35 -35    ircd-hybrid-7/src/s_gline.c



db          2002/09/04 21:30:10 EDT	(20020905_1)

  Modified files:
    include              s_stats.h 
    src                  s_stats.c 
  Log:
  - removed another never used statistic. It wasn't used in hybrid-6 either <g>
  
  Revision  Changes    Path
  7.9       +0 -1      ircd-hybrid-7/include/s_stats.h
  7.22      +2 -2      ircd-hybrid-7/src/s_stats.c



db          2002/09/04 21:10:27 EDT	(20020905_0)

  Modified files:
    include              s_stats.h 
    modules              m_stats.c m_trace.c 
    src                  s_gline.c s_stats.c 
  Log:
  - removed statistics variables never ever used (udp and local client)
    Early versions of hybrid (based on irc2.8) had udp ping port which was removed.
    This is obviously no longer needed.
  - re-worked m_stats to separate stats g from stats G, pending glines vs. placed glines
    also reworked the style. Its a PITA fixing the style, but ever so much easier for editing...
  - cleaned up style in m_trace.c also started introducing DLINK_FOREACH. It does
    not change the code at all, its just a macro. No point doing it all at once.
  
  Revision  Changes    Path
  7.8       +3 -2      ircd-hybrid-7/include/s_stats.h
  1.112     +152 -101  ircd-hybrid-7/modules/m_stats.c
  1.51      +14 -10    ircd-hybrid-7/modules/m_trace.c
  1.22      +4 -6      ircd-hybrid-7/src/s_gline.c
  7.21      +17 -16    ircd-hybrid-7/src/s_stats.c



db          2002/09/03 17:30:52 EDT	(20020903_5)

  Modified files:
    contrib              m_whois.c 
  Log:
  - As pointed out by Lee, fix server hide
  
  Revision  Changes    Path
  1.4       +2 -2      ircd-hybrid-7/contrib/m_whois.c



db          2002/09/03 13:15:44 EDT	(20020903_4)

  Modified files:
    src                  channel_mode.c 
  Log:
  - allow more than four "simple modes" i.e. +isntp but allow only
    one per. i.e. only one +i is allowed, only one -p etc. this matches
    behaviour of hybrid-6
  
  Revision  Changes    Path
  7.61      +6 -2      ircd-hybrid-7/src/channel_mode.c



bill        2002/09/03 10:44:39 EDT	(20020903_3)

  Modified files:
    contrib              m_operspy.c 
  Log:
  - final cleanups
  - added warning for use
  - changed copyright to primarily me, so that no one else gets blamed for this thing =)
  
  Revision  Changes    Path
  1.3       +13 -4     ircd-hybrid-7/contrib/m_operspy.c



bill        2002/09/03 10:27:26 EDT	(20020903_2)

  Modified files:
    contrib              m_operspy.c 
  Log:
  - fixed compiletime warnings
  
  Revision  Changes    Path
  1.2       +9 -7      ircd-hybrid-7/contrib/m_operspy.c



db          2002/09/03 07:24:07 EDT	(20020903_1)

  Modified files:
    src                  messages.tab 
  Log:
  - missing ':' (I thought I fixed this already...)
  
  Revision  Changes    Path
  7.71      +1 -1      ircd-hybrid-7/src/messages.tab



bill        2002/09/03 01:43:38 EDT	(20020903_0)

  Modified files:
    contrib              Makefile.in 
  Added files:
    contrib              m_operspy.c 
  Log:
  - added a neat little toy that I made tonight.  extreme caution should be
    exercised when using this module.
  - modified Makefile to compile operspy automatically
  
  Revision  Changes    Path
  1.35      +1 -0      ircd-hybrid-7/contrib/Makefile.in
  1.1       +552 -0    ircd-hybrid-7/contrib/m_operspy.c (new)



db          2002/09/02 02:34:29 EDT	(20020902_2)

  Modified files:
    src                  s_conf.c 
  Log:
  - ircnet spells it "unauthorized" so I guess we should too.
  
  Revision  Changes    Path
  7.321     +2 -2      ircd-hybrid-7/src/s_conf.c



db          2002/09/02 02:06:49 EDT	(20020902_1)

  Modified files:
    contrib              m_whois.c 
  Log:
  - fixed stupid bug in contrib m_whois.c
    check entire if() for MyConnect() first, this means the glob flag
    is useless. cleaned up.
  
  Revision  Changes    Path
  1.3       +14 -7     ircd-hybrid-7/contrib/m_whois.c



db          2002/09/02 01:34:23 EDT	(20020902_0)

  Modified files:
    contrib              README 
    modules              m_gline.c m_join.c 
    src                  channel_mode.c s_auth.c 
  Log:
  - strengthened warning in README in contrib
  - cleaned up logic in m_join.c to be somewhat saner
  - burst proper channel modes in m_join for persistent channels
  - removed superflous MODE when the SJOIN can do it anyway
  - chm_simple() was missing mode_limit check, thus allowing clients
    to core the server with a pile of +nt-nt+nt etc.
  - commented s_auth.c madness better
  - corrected style in s_auth.c
  
  Revision  Changes    Path
  1.23      +4 -0      ircd-hybrid-7/contrib/README
  1.83      +2 -2      ircd-hybrid-7/modules/m_gline.c
  1.91      +109 -101  ircd-hybrid-7/modules/m_join.c
  7.60      +3 -0      ircd-hybrid-7/src/channel_mode.c
  7.99      +24 -18    ircd-hybrid-7/src/s_auth.c



db          2002/08/28 14:13:36 EDT	(20020828_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  - committed fix as spotted by lee hardy, I also commented a function
    to make it clear
  
  Revision  Changes    Path
  7.59      +17 -11    ircd-hybrid-7/src/channel_mode.c



androsyn    2002/08/28 13:00:15 EDT	(20020828_0)

  Modified files:
    include              irc_string.h 
    src                  channel.c match.c 
  Added files:
    doc                  README.cidr_bans 
  Removed files:
    contrib              README.cidr_bans cidr_bans.diff 
  Log:
  Add CIDR bans.  This does both ipv4 and ipv6 cidr bans
  
  Revision  Changes    Path
  1.2       +0 -17     ircd-hybrid-7/contrib/README.cidr_bans (dead)
  1.4       +0 -142    ircd-hybrid-7/contrib/cidr_bans.diff (dead)
  1.1       +17 -0     ircd-hybrid-7/doc/README.cidr_bans (new)
  7.37      +2 -0      ircd-hybrid-7/include/irc_string.h
  7.327     +8 -3      ircd-hybrid-7/src/channel.c
  7.21      +69 -0     ircd-hybrid-7/src/match.c



androsyn    2002/08/26 19:27:27 EDT	(20020826_0)

  Removed files:
    contrib              README.LMH lmh.diff 
  Log:
  Remove Lee's patch at his request.
  
  Revision  Changes    Path
  1.4       +0 -168    ircd-hybrid-7/contrib/README.LMH (dead)
  1.13      +0 -2580   ircd-hybrid-7/contrib/lmh.diff (dead)



androsyn    2002/08/25 12:21:46 EDT	(20020825_2)

  Modified files:
    adns                 query.c 
  Log:
    Fix a stupid bug that could have potentially overflowed the heap.  This
    never could have happened though, because the zone we are checking is always
    ip6.int.
  
  Revision  Changes    Path
  1.13      +1 -1      ircd-hybrid-7/adns/query.c



lusky       2002/08/25 00:30:09 EDT	(20020825_1)

  Modified files:
    doc                  example.efnet.conf 
  Log:
  - corrected disclaimer in example.efnet.com to per Disciple's rant
  
  Revision  Changes    Path
  7.6       +2 -5      ircd-hybrid-7/doc/example.efnet.conf



lusky       2002/08/25 00:19:53 EDT	(20020825_0)

  Modified files:
    src                  client.c 
  Log:
  - client IPs on exits were always masked (fl)
  
  Revision  Changes    Path
  7.298     +2 -3      ircd-hybrid-7/src/client.c



db          2002/08/22 23:30:31 EDT	(20020823_1)

  Modified files:
    modules              m_whois.c 
  Log:
  - m_whois was also wrong.
    same reasons as m_nick.
  
  Revision  Changes    Path
  1.80      +32 -30    ircd-hybrid-7/modules/m_whois.c



db          2002/08/22 22:26:11 EDT	(20020823_0)

  Modified files:
    modules/core         m_nick.c 
    src                  parse.c 
  Log:
  - the parse fix is incorrect. really that entire parser needs to be
    torn apart and re-thought/re-written. *sigh* the protocol apparently
    =relies= upon empty parv[1] in some cases! we cannot simply blast
    it away as the original fix did. m_nick now checks using BadPtr
    that parv[1] is not NULL or parv[1][0] != '\0' .
    I bet there are other functions that should do the same thing. *ugh*
  
  Revision  Changes    Path
  1.94      +31 -17    ircd-hybrid-7/modules/core/m_nick.c
  7.139     +1 -3      ircd-hybrid-7/src/parse.c



db          2002/08/22 19:08:41 EDT	(20020822_4)

  Modified files:
    src                  tools.c 
  Log:
  - I typoed it here too
  
  Revision  Changes    Path
  7.25      +1 -1      ircd-hybrid-7/src/tools.c



db          2002/08/22 19:06:44 EDT	(20020822_3)

  Modified files:
    include              tools.h 
  Log:
  typoed -> as _
  
  Revision  Changes    Path
  1.18      +1 -1      ircd-hybrid-7/include/tools.h



db          2002/08/22 17:33:57 EDT	(20020822_2)

  Modified files:
    include              tools.h 
    src                  tools.c 
  Log:
  make tools.h match tools.c and correct a bug in dlinkmove
  
  Revision  Changes    Path
  1.17      +9 -1      ircd-hybrid-7/include/tools.h
  7.24      +2 -0      ircd-hybrid-7/src/tools.c



db          2002/08/22 12:08:22 EDT	(20020822_1)

  Modified files:
    src                  s_user.c 
  Log:
  - fixed typo which had 'S' (capital S) instead of lowercase 's'
    reported by Justin Hammond
  
  Revision  Changes    Path
  7.208     +1 -1      ircd-hybrid-7/src/s_user.c



lusky       2002/08/21 22:01:39 EDT	(20020822_0)

  Modified files:
    src                  parse.c 
  Log:
  - check for null arg after :
  
  Revision  Changes    Path
  7.138     +2 -0      ircd-hybrid-7/src/parse.c



lusky       2002/08/21 01:58:04 EDT	(20020821_1)

  Modified files:
    .                    TODO 
  Log:
  - Test commit for new cvsweb
  
  Revision  Changes    Path
  7.74      +0 -1      ircd-hybrid-7/TODO



lusky       2002/08/20 22:01:48 EDT	(20020821_0)

  Modified files:
    .                    RELNOTES 
  Log:
  - Updated RELNOTES for rc3
  
  Revision  Changes    Path
  1.41      +9 -0      ircd-hybrid-7/RELNOTES



db          2002/08/20 15:25:31 EDT	(20020820_5)

  Modified files:
    src                  channel_mode.c 
  Log:
  - more cleanups
  
  Revision  Changes    Path
  7.58      +5 -8      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/08/20 14:03:33 EDT	(20020820_4)

  Modified files:
    src                  hostmask.c 
  Log:
  Set the default ipv6 bitmask to 128
  
  Revision  Changes    Path
  7.71      +1 -1      ircd-hybrid-7/src/hostmask.c



db          2002/08/20 12:42:02 EDT	(20020820_3)

  Modified files:
    include              channel.h patchlevel.h s_conf.h tools.h 
    src                  channel.c channel_mode.c client.c 
                         s_conf.c tools.c 
  Log:
  - fixed ipv6 hash klines
  - cleaned up for() loops with macro
  
  Revision  Changes    Path
  7.118     +3 -1      ircd-hybrid-7/include/channel.h
  7.37      +1 -1      ircd-hybrid-7/include/patchlevel.h
  7.184     +1 -1      ircd-hybrid-7/include/s_conf.h
  1.16      +29 -20    ircd-hybrid-7/include/tools.h
  7.326     +0 -15     ircd-hybrid-7/src/channel.c
  7.57      +14 -14    ircd-hybrid-7/src/channel_mode.c
  7.297     +1 -2      ircd-hybrid-7/src/client.c
  7.320     +15 -17    ircd-hybrid-7/src/s_conf.c
  7.23      +79 -61    ircd-hybrid-7/src/tools.c



db          2002/08/20 01:49:55 EDT	(20020820_2)

  Modified files:
    include              s_conf.h 
    src                  client.c s_conf.c 
  Log:
  - ip_hash() has to know whether its IPV4 or IPV6 form of ip
    so this has to be passed all the way down.
  
  Revision  Changes    Path
  7.183     +1 -1      ircd-hybrid-7/include/s_conf.h
  7.296     +2 -1      ircd-hybrid-7/src/client.c
  7.319     +12 -11    ircd-hybrid-7/src/s_conf.c



db          2002/08/19 21:32:19 EDT	(20020820_1)

  Modified files:
    contrib              m_whois.c 
    include              numeric.h 
  Log:
  - included RPL_WHOISACTUALLY in numeric.h
  - modified contrib version of m_whois.c to use RPL_WHOISACTUALLY
  
  Revision  Changes    Path
  1.2       +2 -12     ircd-hybrid-7/contrib/m_whois.c
  7.29      +1 -0      ircd-hybrid-7/include/numeric.h



db          2002/08/19 21:02:30 EDT	(20020820_0)

  Modified files:
    include              patchlevel.h 
    src                  channel_mode.c messages.tab 
  Log:
  - added 338 to messages.tab
  - add some buffer overflow checks to channel_mode.c
  
  Revision  Changes    Path
  7.36      +1 -1      ircd-hybrid-7/include/patchlevel.h
  7.56      +11 -6     ircd-hybrid-7/src/channel_mode.c
  7.70      +1 -1      ircd-hybrid-7/src/messages.tab



androsyn    2002/08/19 02:42:11 EDT	(20020819_3)

  Modified files:
    src                  s_conf.c 
  Log:
  A slightly less retarded version of hash_ip()
  
  Revision  Changes    Path
  7.318     +22 -12    ircd-hybrid-7/src/s_conf.c



db          2002/08/19 02:06:53 EDT	(20020819_2)

  Modified files:
    src                  hostmask.c 
  Log:
  - cosmetic cleanup. wrapped declarations make my skin itch.
  
  Revision  Changes    Path
  7.70      +6 -2      ircd-hybrid-7/src/hostmask.c



androsyn    2002/08/19 01:24:05 EDT	(20020819_1)

  Modified files:
    contrib              cidr_bans.diff 
  Log:
  Fix a NULL ptr bug in cidr bans
  
  Revision  Changes    Path
  1.3       +7 -9      ircd-hybrid-7/contrib/cidr_bans.diff



db          2002/08/19 01:23:15 EDT	(20020819_0)

  Modified files:
    contrib              Makefile.in README 
  Added files:
    contrib              m_whois.c 
  Log:
  Added Gozems m_whois.c to contrib. It looks better than ours,
  but we have to wait until more testing is done before making it
  the official m_whois, so it will have to wait until 7.1
  
  Revision  Changes    Path
  1.34      +1 -0      ircd-hybrid-7/contrib/Makefile.in
  1.22      +4 -0      ircd-hybrid-7/contrib/README
  1.1       +751 -0    ircd-hybrid-7/contrib/m_whois.c (new)



a1kmm       2002/08/17 03:16:34 EDT	(20020817_1)

  Modified files:
    modules              m_oper.c 
  Log:
  - Re-add the code to look for oper confs by IP as opposed to by host.
  
  Revision  Changes    Path
  1.52      +7 -4      ircd-hybrid-7/modules/m_oper.c



lusky       2002/08/17 01:04:08 EDT	(20020817_0)

  Modified files:
    .                    TODO 
  Log:
  Test commit, new repo should be working now.
  
  Revision  Changes    Path
  7.73      +1 -0      ircd-hybrid-7/TODO



db          2002/08/16 07:07:23 EDT	(20020816_1)

  Modified files:
    modules              m_oper.c 
  Log:
  - thats a major stupid. spotted by wiz/stu
  
  Revision  Changes    Path
  1.51      +12 -16    ircd-hybrid-7/modules/m_oper.c



db          2002/08/15 15:49:29 EDT	(20020815_5)

  Modified files:
    include              numeric.h 
  Log:
  - last minute update. add some documentation for numerics
    from other networks. courtesy Kev and numeric.h from ircu.
  
  Revision  Changes    Path
  7.28      +189 -10   ircd-hybrid-7/include/numeric.h



db          2002/08/15 14:44:27 EDT	(20020815_4)

  Modified files:
    .                    RELNOTES 
  Log:
  - updated release notes. There are a few other changes we made but
    cannot remember them.
  
  Revision  Changes    Path
  1.40      +2 -0      ircd-hybrid-7/RELNOTES



adx         2002/08/15 11:01:04 EDT	(20020815_3)

  Modified files:
    modules              m_cjoin.c m_list.c m_names.c m_whois.c 
                         m_whowas.c 
    modules/core         m_kick.c 
  Log:
  Patch against messages like 401  :No such nick/channel (without nickname specified)
  
  Revision  Changes    Path
  1.47      +13 -7     ircd-hybrid-7/modules/core/m_kick.c
  1.55      +6 -2      ircd-hybrid-7/modules/m_cjoin.c
  1.44      +6 -10     ircd-hybrid-7/modules/m_list.c
  1.44      +6 -2      ircd-hybrid-7/modules/m_names.c
  1.79      +6 -2      ircd-hybrid-7/modules/m_whois.c
  1.28      +7 -5      ircd-hybrid-7/modules/m_whowas.c



db          2002/08/15 10:15:41 EDT	(20020815_2)

  Modified files:
    modules              m_cryptlink.c m_gline.c m_kline.c 
                         m_pong.c 
    src                  client.c hash.c ircdauth.c s_conf.c 
                         s_serv.c s_user.c scache.c 
  Log:
  - pile of corrections to strlcpy() use. the size includes the null byte.
    This was caught by bill. I have done a quicky one pass review while
    applying the patch. need another review.
  
  Revision  Changes    Path
  1.34      +4 -4      ircd-hybrid-7/modules/m_cryptlink.c
  1.82      +69 -114   ircd-hybrid-7/modules/m_gline.c
  1.109     +13 -13    ircd-hybrid-7/modules/m_kline.c
  1.28      +12 -10    ircd-hybrid-7/modules/m_pong.c
  7.295     +3 -3      ircd-hybrid-7/src/client.c
  7.44      +1 -1      ircd-hybrid-7/src/hash.c
  7.49      +2 -2      ircd-hybrid-7/src/ircdauth.c
  7.317     +2 -2      ircd-hybrid-7/src/s_conf.c
  7.269     +2 -2      ircd-hybrid-7/src/s_serv.c
  7.207     +7 -7      ircd-hybrid-7/src/s_user.c
  7.16      +1 -1      ircd-hybrid-7/src/scache.c



db          2002/08/15 09:32:45 EDT	(20020815_1)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - patch submitted by adx to get rid of some compile warnings
  
  Revision  Changes    Path
  1.254     +30 -45    ircd-hybrid-7/src/ircd_parser.y



db          2002/08/15 03:32:15 EDT	(20020815_0)

  Modified files:
    src                  s_serv.c 
  Log:
  Came across some code that has hard coded timeouts instead of the
  CONNECTTIMEOUT, so I thought I'd let you know and include a .diff for
  your convenience :)
  
  ...
  
  Stuart Walsh - stu@ipng.org.uk
  IPng UK      - info@ipng.org.uk - http://ipng.org.uk
  
  Revision  Changes    Path
  7.268     +4 -4      ircd-hybrid-7/src/s_serv.c



db          2002/08/13 15:35:10 EDT	(20020813_1)

  Modified files:
    modules              m_oper.c 
  Log:
  - clean up formatting, compress an if
  
  Revision  Changes    Path
  1.50      +26 -21    ircd-hybrid-7/modules/m_oper.c



db          2002/08/12 22:23:54 EDT	(20020813_0)

  Modified files:
    doc                  example.efnet.conf 
  Log:
  - bunch of fallacies in this document corrected.
  
    NUMBER one, a reconnect time of five minutes on efnet WILL cause
    nick collides.
    NUMBER two, a longer ping time is not a help for a client or server
    as it means more possibility for ghosting etc.
    NUMBER three, a vchan cannot possibly cause any problem at all on efnet
    except look "weird" to the rest of the network.
  
  Revision  Changes    Path
  7.5       +38 -15    ircd-hybrid-7/doc/example.efnet.conf



db          2002/08/12 15:06:36 EDT	(20020812_1)

  Modified files:
    modules              m_info.c 
  Log:
  - remote info is sent for a reason.
    remote admins need to see whats on another server. Perhaps this
    should be limited to an IsAdmin()
  
  Revision  Changes    Path
  1.59      +2 -7      ircd-hybrid-7/modules/m_info.c



androsyn    2002/08/12 12:09:44 EDT	(20020812_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  The send_oplist prototype was wrapped in the wrong ifdef
  
  Revision  Changes    Path
  7.55      +1 -1      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/08/11 11:13:13 EDT	(20020811_2)

  Modified files:
    src                  send.c 
  Log:
  Undo that last commit..
  
  Revision  Changes    Path
  7.204     +3 -3      ircd-hybrid-7/src/send.c



androsyn    2002/08/11 10:46:24 EDT	(20020811_1)

  Modified files:
    src                  send.c 
  Log:
  Fixed a off by one error in send_trim().  If you are using indexes remember
  you start counting at 0 NOT 1
  
  Revision  Changes    Path
  7.203     +3 -3      ircd-hybrid-7/src/send.c



db          2002/08/10 22:29:52 EDT	(20020811_0)

  Modified files:
    doc                  example.efnet.conf 
  Log:
  - disable persistent channels in the efnet conf example
    due to some slight synchronisation problems.
  - reworded slightly "knock" wording.
  - fixed wide line
  
  Revision  Changes    Path
  7.4       +17 -8     ircd-hybrid-7/doc/example.efnet.conf



bill        2002/08/09 11:56:37 EDT	(20020809_2)

  Modified files:
    src                  s_user.c 
  Log:
  Submitted by:   Lee H
  - erm yeah, spoof spoofed users, not everyone.
  
  Revision  Changes    Path
  7.206     +1 -1      ircd-hybrid-7/src/s_user.c



wcampbel    2002/08/08 19:58:19 EDT	(20020809_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  Missed a change from before
  
  Revision  Changes    Path
  7.54      +1 -1      ircd-hybrid-7/src/channel_mode.c



wcampbel    2002/08/08 19:52:10 EDT	(20020809_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  Fix for bans, spotted by users on irc6.qeast and irc.ipv6.homelien.
  This would cause the ban to have to be issued twice in order for the ban
  to take effect.  Unbans were fine.
  
  Submitted by:   Lee
  
  Revision  Changes    Path
  7.53      +7 -7      ircd-hybrid-7/src/channel_mode.c



bill        2002/08/08 13:45:05 EDT	(20020808_2)

  Modified files:
    src                  client.c s_user.c 
  Log:
  - with HIDE_SPOOF_IPS on, mask the ip in the client connect/disconnect notice
  
  Revision  Changes    Path
  7.294     +6 -1      ircd-hybrid-7/src/client.c
  7.205     +4 -0      ircd-hybrid-7/src/s_user.c



bill        2002/08/08 11:43:30 EDT	(20020808_1)

  Modified files:
    modules              m_join.c 
    src                  s_conf.c s_user.c 
  Log:
  Submitted by:   Lee H <lee@leeh.co.uk>
  Reviewed by:    me
  Approved by:    Lee H <lee@leeh.co.uk>
  - fixed inverted IsMember()
  - added lee's gline exemption patch.  this should fix it.
  
  Revision  Changes    Path
  1.90      +2 -2      ircd-hybrid-7/modules/m_join.c
  7.316     +1 -1      ircd-hybrid-7/src/s_conf.c
  7.204     +10 -0     ircd-hybrid-7/src/s_user.c



androsyn    2002/08/07 19:27:30 EDT	(20020808_0)

  Modified files:
    .                    TODO 
  Log:
  test commit
  
  Revision  Changes    Path
  7.63      +0 -0      ircd-hybrid-7/TODO



androsyn    2002/08/07 17:12:40 EDT	(20020807_6)

  Modified files:
    .                    TODO 
  Log:
  test commit..ignore
  
  Revision  Changes    Path
  7.62      +0 -0      ircd-hybrid-7/TODO



androsyn    2002/08/07 13:59:21 EDT	(20020807_5)

  Modified files:
    modules              m_join.c 
  Log:
  Patch from adx, basically don't send any message about a user being in too
  many channels if they attempt to rejoin one they are already on.
  
  Revision  Changes    Path
  1.89      +5 -8      ircd-hybrid-7/modules/m_join.c



bill        2002/08/07 12:53:02 EDT	(20020807_4)

  Modified files:
    modules              m_kline.c 
  Log:
  - cosmetic fix to temporary kline notice
  
  Revision  Changes    Path
  1.108     +2 -2      ircd-hybrid-7/modules/m_kline.c



androsyn    2002/08/06 20:52:35 EDT	(20020807_3)

  Modified files:
    contrib              cidr_bans.diff 
  Log:
  Fix a buglet..
  
  Revision  Changes    Path
  1.2       +1 -1      ircd-hybrid-7/contrib/cidr_bans.diff



androsyn    2002/08/06 20:48:20 EDT	(20020807_2)

  Added files:
    contrib              README.cidr_bans cidr_bans.diff 
  Log:
  Adds support for cidr style ban, exception and invex lists.
  
  Revision  Changes    Path
  1.1       +17 -0     ircd-hybrid-7/contrib/README.cidr_bans (new)
  1.1       +144 -0    ircd-hybrid-7/contrib/cidr_bans.diff (new)



androsyn    2002/08/06 20:26:35 EDT	(20020807_1)

  Modified files:
    src                  linebuf.c 
  Log:
  I thought it was broken because of my stupidity..
  
  Revision  Changes    Path
  7.92      +37 -41    ircd-hybrid-7/src/linebuf.c



androsyn    2002/08/06 20:24:12 EDT	(20020807_0)

  Modified files:
    src                  linebuf.c 
  Log:
  Back out my last linebuf patch..
  
  Revision  Changes    Path
  7.91      +41 -37    ircd-hybrid-7/src/linebuf.c



androsyn    2002/08/05 12:30:41 EDT	(20020805_0)

  Modified files:
    src                  linebuf.c 
  Log:
  This *should* fix linebuf_copy_raw() to work correctly.  Lets hope those old
  issues with ziplinks don't show up again.
  
  Revision  Changes    Path
  7.90      +37 -41    ircd-hybrid-7/src/linebuf.c



androsyn    2002/08/03 18:42:28 EDT	(20020803_2)

  Modified files:
    src                  balloc.c 
  Log:
  Make BlockHeapAlloc() call outofmemory() instead of returning NULL..we
  really want to die if we have a failure here like we do with MyMalloc()
  
  Revision  Changes    Path
  7.38      +2 -2      ircd-hybrid-7/src/balloc.c



androsyn    2002/08/03 18:33:34 EDT	(20020803_1)

  Modified files:
    src                  client.c 
  Log:
  Added a defensive NULL ptr check
  
  Revision  Changes    Path
  7.293     +2 -0      ircd-hybrid-7/src/client.c



androsyn    2002/08/03 17:45:10 EDT	(20020803_0)

  Modified files:
    src                  linebuf.c 
  Log:
  Add a NULL pointer check to linebuf_allocate
  
  Revision  Changes    Path
  7.89      +4 -1      ircd-hybrid-7/src/linebuf.c



leeh        2002/08/02 17:59:01 EDT	(20020802_0)

  Modified files:
    modules              m_knock.c 
  Log:
  - moved knock-disable to +p, +s doesnt make sense.
  
  Revision  Changes    Path
  1.51      +2 -2      ircd-hybrid-7/modules/m_knock.c



leeh        2002/08/01 09:55:09 EDT	(20020801_1)

  Modified files:
    .                    RELNOTES 
    modules              m_kline.c 
  Log:
  - updated relnotes
  - adxs fix for klines such as @foo and foo@
  
  Revision  Changes    Path
  1.39      +6 -2      ircd-hybrid-7/RELNOTES
  1.107     +9 -3      ircd-hybrid-7/modules/m_kline.c



leeh        2002/08/01 09:22:17 EDT	(20020801_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  - allow +/-b desync modes that originate on remote servers to help stop
    problems with desyncs.
  
  Revision  Changes    Path
  7.52      +15 -6     ircd-hybrid-7/src/channel_mode.c



leeh        2002/07/31 18:52:59 EDT	(20020731_5)

  Modified files:
    contrib              m_ltrace.c 
  Log:
  - fixed ltrace wrt HIDE_SPOOF_IPS
  
  Revision  Changes    Path
  1.4       +9 -2      ircd-hybrid-7/contrib/m_ltrace.c



db          2002/07/31 18:52:14 EDT	(20020731_4)

  Modified files:
    src                  parse.c 
  Log:
  - I will double review this when I get back from concert :-)
  - Anyway, this should stop dumping over the end of an input buffer
    I'll test later...
  - Also even if we don't log local clients, we should log remote IMO
  
  Revision  Changes    Path
  7.137     +19 -5     ircd-hybrid-7/src/parse.c



leeh        2002/07/31 14:17:44 EDT	(20020731_3)

  Modified files:
    modules              m_gline.c 
  Log:
  - trigger glines using the original reason.
  
  Revision  Changes    Path
  1.81      +8 -3      ircd-hybrid-7/modules/m_gline.c



leeh        2002/07/31 13:35:33 EDT	(20020731_2)

  Modified files:
    modules              m_gline.c 
  Log:
  - if a user requests a gline for "@host", use "*@host"
  
  Revision  Changes    Path
  1.80      +5 -1      ircd-hybrid-7/modules/m_gline.c



leeh        2002/07/31 13:30:59 EDT	(20020731_1)

  Modified files:
    src                  hostmask.c 
  Log:
  - dont show kline exempt status to remote opers.
  - show spoofed I:, just put the u@h as user@255.255.255.255
  
  Revision  Changes    Path
  7.69      +7 -8      ircd-hybrid-7/src/hostmask.c



leeh        2002/07/31 12:24:11 EDT	(20020731_0)

  Modified files:
    modules              m_admin.c m_away.c m_invite.c m_join.c 
                         m_links.c m_lusers.c m_motd.c m_names.c 
                         m_stats.c m_whois.c 
  Log:
  - allow opers to join channels on split to be consistent with hyb6 (ugh)
  - audited the ms_*() functions for stuff coming from hacked servers that
    should never happen.
  
  Revision  Changes    Path
  1.35      +3 -2      ircd-hybrid-7/modules/m_admin.c
  1.31      +4 -9      ircd-hybrid-7/modules/m_away.c
  1.47      +2 -3      ircd-hybrid-7/modules/m_invite.c
  1.88      +4 -3      ircd-hybrid-7/modules/m_join.c
  1.37      +12 -9     ircd-hybrid-7/modules/m_links.c
  1.23      +4 -2      ircd-hybrid-7/modules/m_lusers.c
  1.30      +2 -2      ircd-hybrid-7/modules/m_motd.c
  1.43      +3 -2      ircd-hybrid-7/modules/m_names.c
  1.111     +3 -2      ircd-hybrid-7/modules/m_stats.c
  1.78      +4 -1      ircd-hybrid-7/modules/m_whois.c



leeh        2002/07/30 07:12:43 EDT	(20020730_3)

  Modified files:
    src                  parse.c 
  Log:
  - return -1 on error from client, -2 on error from server so we dont log
    everytime a client sends a command with invalid parms.
  
  Revision  Changes    Path
  7.136     +4 -3      ircd-hybrid-7/src/parse.c



db          2002/07/29 21:43:45 EDT	(20020730_2)

  Modified files:
    src                  packet.c parse.c 
  Log:
  - cleaned up style in packet.c
  - cleaned up style in parse.c
  - added logging of complete input buffer if insufficient parms received.
    We might have a bogus \0 or something, we need to see what we have.
  
  Revision  Changes    Path
  7.89      +9 -5      ircd-hybrid-7/src/packet.c
  7.135     +118 -92   ircd-hybrid-7/src/parse.c



androsyn    2002/07/29 20:47:30 EDT	(20020730_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  The declaration on dir probably shouldn't be wrapped in #ifdef HALFOPS
  
  Revision  Changes    Path
  7.51      +0 -2      ircd-hybrid-7/src/channel_mode.c



greg        2002/07/29 20:31:46 EDT	(20020730_0)

  Modified files:
    src                  client.c 
  Log:
  gcc -I../include -I../adns   -I/usr/local/include -O2 -g -ggdb -DNDEBUG -DIRCD_PREFIX=\"/usr/local/ircd\" -c client.c
  client.c: In function `dead_link':
  client.c:1170: `to' undeclared (first use in this function)
  client.c:1170: (Each undeclared identifier is reported only once
  client.c:1170: for each function it appears in.)
  *** Error code 1
  
  Replaced to with client_p.
  
  Submitted by:   Random EFNet (l)user
  Reviewed by:    make all
  Approved by:    goats
  
  Revision  Changes    Path
  7.292     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/07/28 21:08:17 EDT	(20020729_2)

  Modified files:
    src                  channel_mode.c 
  Log:
  Fill in the UID in the mode_changes array..
  
  Revision  Changes    Path
  7.50      +3 -3      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/07/28 20:27:30 EDT	(20020729_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  Allow for -o+o nick nick as well as -h+h and -v+v
  
  Revision  Changes    Path
  7.49      +0 -25     ircd-hybrid-7/src/channel_mode.c



leeh        2002/07/28 19:43:10 EDT	(20020729_0)

  Modified files:
    src                  channel_mode.c client.c 
  Log:
  - replaced find_client() calls with find_chasing()
  
  Revision  Changes    Path
  7.48      +3 -15     ircd-hybrid-7/src/channel_mode.c
  7.291     +1 -1      ircd-hybrid-7/src/client.c



leeh        2002/07/28 17:37:22 EDT	(20020728_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  - removed some unused vars.
  
  Revision  Changes    Path
  7.47      +1 -7      ircd-hybrid-7/src/channel_mode.c



leeh        2002/07/28 15:19:05 EDT	(20020728_0)

  Modified files:
    include              channel_mode.h 
    src                  channel_mode.c 
  Log:
  - commited the first half of the desync fixes.  this will allow users to
    set +b-b on channels.
  
  Revision  Changes    Path
  7.11      +8 -4      ircd-hybrid-7/include/channel_mode.h
  7.46      +504 -698  ircd-hybrid-7/src/channel_mode.c



androsyn    2002/07/27 15:51:20 EDT	(20020727_1)

  Modified files:
    src                  s_bsd.c 
  Log:
  Don't kick out the errno, just the result of the strerror()
  
  Revision  Changes    Path
  7.171     +2 -2      ircd-hybrid-7/src/s_bsd.c



leeh        2002/07/27 09:27:15 EDT	(20020727_0)

  Modified files:
    modules/core         m_kill.c 
  Log:
  - we were testing IsOperGlobalKill instead of IsOperK in m_kill.c which
    prevented "Ko" opers being able to kill local users.  reported
    by kenny <kenny@psdnetworks.co.uk>
  
  Revision  Changes    Path
  1.66      +3 -3      ircd-hybrid-7/modules/core/m_kill.c



leeh        2002/07/26 12:37:15 EDT	(20020726_1)

  Modified files:
    .                    RELNOTES 
    modules/core         m_nick.c 
    src                  parse.c 
  Log:
  - updated RELNOTES
  - added an ilog() when we drop a server for invalid params
  - extended the 'protection' to ms_nick(), which has varying degrees of
    parameters (3 for nickchange, 9 for introduction)
  
  Revision  Changes    Path
  1.38      +17 -8     ircd-hybrid-7/RELNOTES
  1.93      +20 -2     ircd-hybrid-7/modules/core/m_nick.c
  7.134     +6 -4      ircd-hybrid-7/src/parse.c



leeh        2002/07/26 10:03:30 EDT	(20020726_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  - commited by +eI anti-desync fixes.
  
  Revision  Changes    Path
  7.45      +12 -13    ircd-hybrid-7/src/channel_mode.c



db          2002/07/22 21:01:01 EDT	(20020723_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  - correct bug where users were able to apply such lovely bans as
    !@ yes, thats right you saw it here first. bans and exceptions and invexex
    you too can get one too by ordering a channel_mode.c from K-TEL
    ONLY the best!
  
  Revision  Changes    Path
  7.44      +22 -8     ircd-hybrid-7/src/channel_mode.c



leeh        2002/07/22 18:23:04 EDT	(20020722_3)

  Modified files:
    help/opers           kline 
  Log:
  - documented oper reason.
  
  Revision  Changes    Path
  1.2       +8 -3      ircd-hybrid-7/help/opers/kline



leeh        2002/07/22 17:37:25 EDT	(20020722_2)

  Modified files:
    contrib              lmh.diff 
  Log:
  - made my patch work.
  
  Revision  Changes    Path
  1.12      +110 -90   ircd-hybrid-7/contrib/lmh.diff



db          2002/07/22 01:08:04 EDT	(20020722_1)

  Modified files:
    src                  ircd_lexer.l s_conf.c 
  Log:
  - This fixes the \" case in QSTRING. (an admin wanted this one)
    This allows you to set email as "db@db.net" for example.
  
  Revision  Changes    Path
  1.142     +42 -5     ircd-hybrid-7/src/ircd_lexer.l
  7.315     +41 -43    ircd-hybrid-7/src/s_conf.c



leeh        2002/07/21 20:40:43 EDT	(20020722_0)

  Modified files:
    modules              m_info.c 
  Log:
  - wrapped the "Compiled on" info in #ifndef EFNET
  
  Revision  Changes    Path
  1.58      +3 -1      ircd-hybrid-7/modules/m_info.c



leeh        2002/07/21 17:06:21 EDT	(20020721_7)

  Modified files:
    src                  packet.c 
  Log:
  - parse the data first then check for excess flood, else the whole grace
    period becomes useless.
  
  Revision  Changes    Path
  7.88      +10 -4     ircd-hybrid-7/src/packet.c



leeh        2002/07/21 15:22:10 EDT	(20020721_6)

  Modified files:
    contrib              lmh.diff 
  Log:
  - fixed my diff with the latest commits
  
  Revision  Changes    Path
  1.11      +121 -115  ircd-hybrid-7/contrib/lmh.diff



leeh        2002/07/21 13:53:17 EDT	(20020721_5)

  Modified files:
    src                  packet.c 
  Log:
  - the second half of my flood fixes that splits parsing into three
    loops instead of two.
  
  Revision  Changes    Path
  7.87      +43 -9     ircd-hybrid-7/src/packet.c



db          2002/07/21 13:15:35 EDT	(20020721_4)

  Modified files:
    src                  ircd_lexer.l s_conf.c 
  Log:
  2002-07-21 17:43:31+0200, gozem ->
  > Included is two patches which makes tracking errors in your ircd.conf a bit
  > easier. First one adds a print of which .include we are in and formats the
  > error in yyerror() a little better. Second gives you a warning when using
  > #include instead of .include so don't have to stratch your head wondering
  > why your file is ignored.
  >
  > Output for the first patch is now:
  > -server- "opers.conf", line 185: parse error:  admin_is_a_monkey = yes;
  >
  > And output from second patch:
  > -server- "file.conf", line 87: You probably meant '.include', skipping: #inclu
  de "links.conf"
  >
  > There is a drawback on the first patch. Since we only know the full path to
  > the first file 'ircd.conf' the full patch will be displayed in the error.
  >
  >
  > One more error/miss to report but not fixed. ircd_lexer.l ircd_parser.y
  > s_conf.c randomly uses ilog() and/or sendto_realops_flags() to report
  > errors. This means some errors get visable in ircd.log and some gets visable
  > for the opers online. Sometimes both. A wrapper funtion is needed that
  > always sends to both.
  
  Revision  Changes    Path
  1.141     +18 -1     ircd-hybrid-7/src/ircd_lexer.l
  7.314     +13 -4     ircd-hybrid-7/src/s_conf.c



db          2002/07/21 13:11:21 EDT	(20020721_3)

  Modified files:
    src                  s_conf.c 
  Log:
  - pure and simple style fixes
  
  Revision  Changes    Path
  7.313     +25 -19    ircd-hybrid-7/src/s_conf.c



leeh        2002/07/21 12:17:47 EDT	(20020721_2)

  Modified files:
    modules/core         m_mode.c 
  Log:
  - should be checking parv[n-1][1] is \0, not [0]
  
  Revision  Changes    Path
  1.55      +2 -2      ircd-hybrid-7/modules/core/m_mode.c



a1kmm       2002/07/21 00:55:22 EDT	(20020721_1)

  Modified files:
    src                  linebuf.c packet.c 
  Log:
  - Kill unknowns/servers that send NULL in packets, and notify clients that
    they are.
  
  Revision  Changes    Path
  7.88      +47 -37    ircd-hybrid-7/src/linebuf.c
  7.86      +7 -2      ircd-hybrid-7/src/packet.c



a1kmm       2002/07/20 22:59:43 EDT	(20020721_0)

  Modified files:
    src                  s_serv.c 
  Log:
  - Fixed a core with servers dying while they are being established.
  
  Revision  Changes    Path
  7.267     +2 -1      ircd-hybrid-7/src/s_serv.c



leeh        2002/07/20 11:51:55 EDT	(20020720_3)

  Modified files:
    include              packet.h 
    modules              m_invite.c m_oper.c m_time.c 
    modules/core         m_kick.c m_mode.c 
    src                  packet.c 
  Log:
  - commited the first half of the floodcode fixes.
    - end the grace period in a few more places
    - raise the rate at which we parse commands above the level of flooding
      to 2 per second
    - raise the burst level slightly
  
  Revision  Changes    Path
  7.17      +1 -1      ircd-hybrid-7/include/packet.h
  1.46      +5 -1      ircd-hybrid-7/modules/core/m_kick.c
  1.54      +7 -2      ircd-hybrid-7/modules/core/m_mode.c
  1.46      +5 -1      ircd-hybrid-7/modules/m_invite.c
  1.47      +6 -1      ircd-hybrid-7/modules/m_oper.c
  1.26      +6 -1      ircd-hybrid-7/modules/m_time.c
  7.85      +1 -7      ircd-hybrid-7/src/packet.c



leeh        2002/07/20 11:47:55 EDT	(20020720_2)

  Modified files:
    src                  s_user.c 
  Log:
  - fixed a missing (
  - you cant just detach an oper conf if you dont put anything back in its
    place else youre leaving a user with no class whatsoever, so just dont
    detach the conf at all, as my patch does.
  
  Revision  Changes    Path
  7.203     +1 -6      ircd-hybrid-7/src/s_user.c



db          2002/07/20 09:07:56 EDT	(20020720_1)

  Modified files:
    src                  s_user.c 
  Log:
  - This fixes the deop of oper causing an oper to be tossed off the server
    if they don't have a matching auth{} for their deopered client.
    Note that we have attached a new conf to the client already, so this
    has to be removed in case they re-oper, else we could end up with a link
    list of new confs. (unlikely an oper would be rude but still)
  
  - cleaned up some style() return should always have a ()
    function names should start at the left most char
  
  Revision  Changes    Path
  7.202     +34 -37    ircd-hybrid-7/src/s_user.c



leeh        2002/07/20 06:07:43 EDT	(20020720_0)

  Modified files:
    modules              m_gline.c 
  Log:
  - fix to show oper or server already voted after the gline request.
  
  Revision  Changes    Path
  1.79      +18 -17    ircd-hybrid-7/modules/m_gline.c



androsyn    2002/07/19 11:51:36 EDT	(20020719_5)

  Modified files:
    src                  s_auth.c 
  Log:
  Some extra paranoia in the auth_dns_callback code.
  
  Revision  Changes    Path
  7.98      +10 -10    ircd-hybrid-7/src/s_auth.c



ejb         2002/07/19 09:22:05 EDT	(20020719_4)

  Modified files:
    src                  hostmask.c 
  Log:
  - commited gozem's patch to hostmask.c that should fix the
    ipv6 iline bug.
  
  Submitted by:   Gozem <gozem@linux.nu>
  Reviewed by:    ejb db
  Approved by:    db
  
  Revision  Changes    Path
  7.68      +10 -8     ircd-hybrid-7/src/hostmask.c



leeh        2002/07/19 08:31:49 EDT	(20020719_3)

  Modified files:
    src                  ircd.c 
  Log:
  - helps if I set split_users to the users splitcount and servers to the
    servers splitcount, not the other way round..
  
  Revision  Changes    Path
  7.239     +2 -2      ircd-hybrid-7/src/ircd.c



leeh        2002/07/19 06:56:03 EDT	(20020719_2)

  Modified files:
    modules/core         m_kill.c 
  Log:
  - bitchx determines foreign/local operkill based on the amount of !'s in
    a path, so for remote kills send server!host!user!nick as path.
  
  Revision  Changes    Path
  1.65      +7 -3      ircd-hybrid-7/modules/core/m_kill.c



leeh        2002/07/19 06:11:43 EDT	(20020719_1)

  Modified files:
    modules/core         m_kick.c 
  Log:
  - adxs fix to allow halfops to kick other halfops on -p channels, to sync
    things up with +/-h.
  
  Revision  Changes    Path
  1.45      +7 -3      ircd-hybrid-7/modules/core/m_kick.c



ejb         2002/07/19 00:34:26 EDT	(20020719_0)

  Modified files:
    src                  parse.c 
  Log:
  - reworded invalid arguments message.
  
  Revision  Changes    Path
  7.133     +3 -3      ircd-hybrid-7/src/parse.c



ejb         2002/07/18 12:24:09 EDT	(20020718_7)

  Modified files:
    modules/core         m_server.c 
    src                  parse.c 
  Log:
  - print more verbose notice for servers which send less arguments
    to a command than is required.
  - drop local servers which do this.
  - make m_server require 4 arguments, not 3.
  
  Revision  Changes    Path
  1.87      +2 -2      ircd-hybrid-7/modules/core/m_server.c
  7.132     +23 -7     ircd-hybrid-7/src/parse.c



db          2002/07/18 11:43:18 EDT	(20020718_6)

  Modified files:
    src                  parse.c 
  Log:
  - fixed typo
  
  Revision  Changes    Path
  7.131     +1 -1      ircd-hybrid-7/src/parse.c



db          2002/07/18 11:28:29 EDT	(20020718_5)

  Modified files:
    tools                convertconf.c 
  Log:
  - converted Q line was incorrectly using name= instead of nick= for
    nick jupes. Added code to convert channel jupes into channel=
  
  Revision  Changes    Path
  1.36      +3 -2      ircd-hybrid-7/tools/convertconf.c



leeh        2002/07/18 05:49:07 EDT	(20020718_4)

  Modified files:
    tools                convertconf.c 
  Log:
  - missing a break; that broke things
  
  Revision  Changes    Path
  1.35      +2 -1      ircd-hybrid-7/tools/convertconf.c



db          2002/07/18 03:13:48 EDT	(20020718_3)

  Modified files:
    src                  modules.c 
  Log:
  - This adds (core) to any module listed that is a core module
  
  Revision  Changes    Path
  7.104     +2 -2      ircd-hybrid-7/src/modules.c



db          2002/07/18 03:12:53 EDT	(20020718_2)

  Modified files:
    src                  messages.tab 
  Log:
  - This adds (core) to any module listed that is a core module
  
  Revision  Changes    Path
  7.69      +1 -1      ircd-hybrid-7/src/messages.tab



leeh        2002/07/17 19:31:13 EDT	(20020718_1)

  Modified files:
    doc                  challenge.txt 
  Log:
  - hwys updated challenge.txt
  
  Revision  Changes    Path
  1.9       +333 -191  ircd-hybrid-7/doc/challenge.txt



leeh        2002/07/17 19:09:11 EDT	(20020718_0)

  Modified files:
    modules              m_version.c 
  Log:
  - wrapped 'T' in #ifdef IGNORE_BOGUS_TS
  
  Revision  Changes    Path
  1.39      +3 -1      ircd-hybrid-7/modules/m_version.c



db          2002/07/17 18:02:36 EDT	(20020717_3)

  Modified files:
    modules              m_help.c 
  Log:
  - fixed formatting
  - use fbgets and friends not gets, we have them for a reason
  - log path names of failures. having to use gdb to find a bogus path
    is silly.
  
  Revision  Changes    Path
  1.34      +20 -12    ircd-hybrid-7/modules/m_help.c



leeh        2002/07/17 12:34:48 EDT	(20020717_2)

  Modified files:
    contrib              lmh.diff 
  Log:
  - helps if I run diff with -N.
  
  Revision  Changes    Path
  1.10      +180 -31   ircd-hybrid-7/contrib/lmh.diff



leeh        2002/07/17 12:29:08 EDT	(20020717_1)

  Modified files:
    contrib              lmh.diff 
  Log:
  - fixed my patch to work with current tree
  
  Revision  Changes    Path
  1.9       +114 -297  ircd-hybrid-7/contrib/lmh.diff



leeh        2002/07/17 09:59:01 EDT	(20020717_0)

  Modified files:
    src                  s_conf.c 
  Log:
  - dont allow local admins to see ips in stats c if HIDE_SERVERS_IPS is
    defined, only local admins would have been given the ip, noone else.
  
  Revision  Changes    Path
  7.312     +1 -0      ircd-hybrid-7/src/s_conf.c



db          2002/07/16 18:30:22 EDT	(20020716_3)

  Modified files:
    tools                convertilines.c 
  Log:
  - end of an auth{} block should have a trailing ';'
    uncovered in the rc1
  
  Revision  Changes    Path
  7.3       +1 -1      ircd-hybrid-7/tools/convertilines.c



leeh        2002/07/16 16:26:49 EDT	(20020716_2)

  Modified files:
    include              supported.h 
  Log:
  - fixed RPL_ISUPPORT to accurately report the status of halfops, +eI and
    anonops
  
  Revision  Changes    Path
  1.23      +15 -6     ircd-hybrid-7/include/supported.h



lusky       2002/07/16 11:36:11 EDT	(20020716_1)

  Modified files:
    .                    RELNOTES 
    include              patchlevel.h 
  Log:
  - revved patchlevel to rc1
  
  Revision  Changes    Path
  1.37      +1 -1      ircd-hybrid-7/RELNOTES
  7.34      +1 -1      ircd-hybrid-7/include/patchlevel.h



leeh        2002/07/16 06:35:23 EDT	(20020716_0)

  Modified files:
    .                    INSTALL 
  Log:
  - added an efnut warning to INSTALL and noted the fact convertconf wont
    touch I:, you need convertilines for it.
  
  Revision  Changes    Path
  7.30      +11 -0     ircd-hybrid-7/INSTALL



db          2002/07/15 04:14:34 EDT	(20020715_3)

  Modified files:
    src                  linebuf.c 
  Log:
  - one more time. somehow the wrong code got committed.
  
  Revision  Changes    Path
  7.87      +21 -16    ircd-hybrid-7/src/linebuf.c



androsyn    2002/07/15 03:26:11 EDT	(20020715_2)

  Modified files:
    modules              m_cryptlink.c 
  Log:
  Fixed a bug where we would attempt to pass a NULL rsa key to RSA_size.
  
  Revision  Changes    Path
  1.33      +7 -2      ircd-hybrid-7/modules/m_cryptlink.c



db          2002/07/14 20:49:11 EDT	(20020715_1)

  Modified files:
    src                  linebuf.c 
  Log:
  - This does things right, but has an icky goto...
  
  Revision  Changes    Path
  7.86      +18 -23    ircd-hybrid-7/src/linebuf.c



db          2002/07/14 19:41:01 EDT	(20020715_0)

  Modified files:
    src                  linebuf.c 
  Log:
  - somehow some pre-increments got turned into post-increments
  - size of a \r\n buffer is 2. (apparently)
  
  Revision  Changes    Path
  7.85      +7 -5      ircd-hybrid-7/src/linebuf.c



leeh        2002/07/14 18:11:57 EDT	(20020714_5)

  Modified files:
    contrib              m_opme.c 
  Log:
  - revert the accidental commit of m_opme done earlier..
  
  Revision  Changes    Path
  1.27      +5 -5      ircd-hybrid-7/contrib/m_opme.c



db          2002/07/14 18:00:46 EDT	(20020714_4)

  Modified files:
    src                  linebuf.c 
  Log:
  - Don't try to work with a -1 index!
  
  Revision  Changes    Path
  7.84      +26 -15    ircd-hybrid-7/src/linebuf.c



androsyn    2002/07/14 16:19:45 EDT	(20020714_3)

  Modified files:
    src                  linebuf.c send.c 
  Log:
  Okay..lets try that again.  Changes for the goofy issue with va_list on
  Linux/Alpha and put a test inside #ifndef NDEBUG
  
  Revision  Changes    Path
  7.83      +5 -4      ircd-hybrid-7/src/linebuf.c
  7.202     +23 -23    ircd-hybrid-7/src/send.c



androsyn    2002/07/14 00:10:35 EDT	(20020714_2)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Remove -W flags from the build for upcoming release
  
  Revision  Changes    Path
  7.147     +3 -1      ircd-hybrid-7/autoconf/configure.in
  7.150     +211 -209  ircd-hybrid-7/configure



androsyn    2002/07/13 21:30:29 EDT	(20020714_1)

  Modified files:
    .                    Hybrid-team 
  Log:
  Add scuzzy to Hybrid-team, he has helped us out with a lot of testing and
  debugging.
  
  Revision  Changes    Path
  7.52      +1 -0      ircd-hybrid-7/Hybrid-team



androsyn    2002/07/13 20:12:21 EDT	(20020714_0)

  Modified files:
    .                    configure 
  Log:
  Try that one more time
  
  Revision  Changes    Path
  7.149     +2 -2      ircd-hybrid-7/configure



androsyn    2002/07/13 18:58:52 EDT	(20020713_4)

  Modified files:
    autoconf             configure.in 
    contrib              m_opme.c 
  Log:
  Thats -DNDEBUG not -NDEBUG
  
  Revision  Changes    Path
  7.146     +2 -2      ircd-hybrid-7/autoconf/configure.in
  1.26      +5 -5      ircd-hybrid-7/contrib/m_opme.c



androsyn    2002/07/13 18:54:49 EDT	(20020713_3)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              memory.h 
  Log:
  Disable asserts by default and fix a #endif in memory.h.  This should be
  it before -rc1
  
  Revision  Changes    Path
  7.145     +5 -2      ircd-hybrid-7/autoconf/configure.in
  7.148     +55 -52    ircd-hybrid-7/configure
  7.36      +1 -1      ircd-hybrid-7/include/memory.h



leeh        2002/07/13 07:42:03 EDT	(20020713_2)

  Modified files:
    modules/core         m_server.c 
  Log:
  - squitting leaves when a non-hub introduces one is bad.
  
  Revision  Changes    Path
  1.86      +4 -15     ircd-hybrid-7/modules/core/m_server.c



androsyn    2002/07/13 02:56:39 EDT	(20020713_1)

  Modified files:
    modules/core         m_message.c 
    src                  send.c 
  Log:
  Make PRIVMSG and NOTICE send UIDs for prefixes, when possible
  
  Revision  Changes    Path
  1.99      +6 -2      ircd-hybrid-7/modules/core/m_message.c
  7.201     +23 -10    ircd-hybrid-7/src/send.c



androsyn    2002/07/12 20:48:24 EDT	(20020713_0)

  Modified files:
    src                  client.c 
  Log:
  Make dead_link exit message consistant
  
  Revision  Changes    Path
  7.290     +9 -4      ircd-hybrid-7/src/client.c



androsyn    2002/07/12 15:42:29 EDT	(20020712_12)

  Modified files:
    contrib              lmh.diff 
  Log:
  Updated lmh.diff to apply cleanly
  
  Revision  Changes    Path
  1.8       +137 -124  ircd-hybrid-7/contrib/lmh.diff



androsyn    2002/07/12 12:33:11 EDT	(20020712_11)

  Modified files:
    include              tools.h 
  Log:
  Forgot some more inlines
  
  Revision  Changes    Path
  1.15      +3 -3      ircd-hybrid-7/include/tools.h



androsyn    2002/07/12 12:14:05 EDT	(20020712_10)

  Modified files:
    include              balloc.h 
  Log:
  Removed redudant #ifdefs
  
  Revision  Changes    Path
  1.12      +0 -2      ircd-hybrid-7/include/balloc.h



androsyn    2002/07/12 12:02:44 EDT	(20020712_9)

  Modified files:
    include              tools.h 
  Log:
  GCC called, it wanted its inline's back
  
  Revision  Changes    Path
  1.14      +4 -4      ircd-hybrid-7/include/tools.h



joant       2002/07/11 23:30:09 EDT	(20020712_8)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              tools.h 
    modules              m_kline.c 
    modules/core         m_server.c 
    servlink             servlink.c 
    src                  channel_mode.c motd.c s_serv.c 
    tools                encspeed.c 
  Log:
  - Code cleanup thanks to Forte C v7 warnings.
  - Order of CFLAGS changed in configure to fix Forte problem.
  
  Revision  Changes    Path
  7.144     +5 -5      ircd-hybrid-7/autoconf/configure.in
  7.147     +5 -5      ircd-hybrid-7/configure
  1.13      +7 -7      ircd-hybrid-7/include/tools.h
  1.85      +5 -1      ircd-hybrid-7/modules/core/m_server.c
  1.106     +2 -2      ircd-hybrid-7/modules/m_kline.c
  1.24      +2 -2      ircd-hybrid-7/servlink/servlink.c
  7.43      +2 -2      ircd-hybrid-7/src/channel_mode.c
  7.25      +1 -1      ircd-hybrid-7/src/motd.c
  7.266     +1 -1      ircd-hybrid-7/src/s_serv.c
  7.5       +2 -2      ircd-hybrid-7/tools/encspeed.c



joant       2002/07/11 21:24:05 EDT	(20020712_7)

  Modified files:
    src                  channel.c 
  Log:
  casting pointer arithmetic, better living through pointers
  
  Revision  Changes    Path
  7.325     +1 -1      ircd-hybrid-7/src/channel.c



androsyn    2002/07/11 21:01:23 EDT	(20020712_6)

  Modified files:
    modules/core         m_quit.c 
  Log:
  Instead of saying Client Exit: say Quit:, to be a little more consistant
  with other networks
  
  Revision  Changes    Path
  1.26      +3 -3      ircd-hybrid-7/modules/core/m_quit.c



androsyn    2002/07/11 20:55:16 EDT	(20020712_5)

  Modified files:
    src                  send.c 
  Log:
  Reorder some code so it will get inlined.
  
  Revision  Changes    Path
  7.200     +66 -68    ircd-hybrid-7/src/send.c



androsyn    2002/07/11 20:51:11 EDT	(20020712_4)

  Modified files:
    include              s_conf.h 
    src                  ircd.c listener.c s_conf.c 
  Log:
  Remove the #ifdef for PACE_CONNECT, we define it unconditionally anyways
  so...
  
  Revision  Changes    Path
  7.182     +0 -3      ircd-hybrid-7/include/s_conf.h
  7.238     +0 -2      ircd-hybrid-7/src/ircd.c
  7.70      +0 -2      ircd-hybrid-7/src/listener.c
  7.310     +0 -15     ircd-hybrid-7/src/s_conf.c



androsyn    2002/07/11 20:43:26 EDT	(20020712_3)

  Modified files:
    .                    configure 
    autoconf             acconfig.h configure.in 
    include              balloc.h client.h ircd_defs.h list.h 
                         memory.h setup.h.in 
    src                  balloc.c client.c list.c memory.c 
  Log:
  Rip out the very, very ugly memdebug code..
  
  Revision  Changes    Path
  7.24      +0 -3      ircd-hybrid-7/autoconf/acconfig.h
  7.143     +0 -18     ircd-hybrid-7/autoconf/configure.in
  7.146     +222 -249  ircd-hybrid-7/configure
  1.11      +8 -0      ircd-hybrid-7/include/balloc.h
  7.152     +1 -1      ircd-hybrid-7/include/client.h
  7.31      +0 -13     ircd-hybrid-7/include/ircd_defs.h
  7.15      +3 -9      ircd-hybrid-7/include/list.h
  7.35      +7 -59     ircd-hybrid-7/include/memory.h
  7.56      +0 -3      ircd-hybrid-7/include/setup.h.in
  7.37      +2 -5      ircd-hybrid-7/src/balloc.c
  7.289     +1 -1      ircd-hybrid-7/src/client.c
  7.46      +4 -30     ircd-hybrid-7/src/list.c
  7.38      +3 -133    ircd-hybrid-7/src/memory.c



androsyn    2002/07/11 19:42:01 EDT	(20020712_2)

  Modified files:
    modules              m_accept.c 
  Log:
  Missing semicolon
  
  Revision  Changes    Path
  1.32      +2 -2      ircd-hybrid-7/modules/m_accept.c



leeh        2002/07/11 19:40:29 EDT	(20020712_1)

  Modified files:
    .                    RELNOTES 
    doc                  example.conf example.efnet.conf 
    include              parse.h s_conf.h 
    modules              m_help.c 
    src                  ircd_lexer.l ircd_parser.y parse.c 
                         s_conf.c 
    tools                Makefile.in convertconf.c 
  Log:
  - updated RELNOTES with whatever it is ive done
  - added ConfigFileEntry.use_help
  - ripped remnants of fixklines from tools/Makefile.in
  - some convertconf cleanups
  
  Revision  Changes    Path
  1.36      +2 -1      ircd-hybrid-7/RELNOTES
  7.166     +9 -0      ircd-hybrid-7/doc/example.conf
  7.3       +9 -0      ircd-hybrid-7/doc/example.efnet.conf
  7.15      +1 -0      ircd-hybrid-7/include/parse.h
  7.181     +1 -0      ircd-hybrid-7/include/s_conf.h
  1.33      +19 -12    ircd-hybrid-7/modules/m_help.c
  1.140     +1 -0      ircd-hybrid-7/src/ircd_lexer.l
  1.253     +12 -1     ircd-hybrid-7/src/ircd_parser.y
  7.130     +24 -3     ircd-hybrid-7/src/parse.c
  7.309     +6 -0      ircd-hybrid-7/src/s_conf.c
  7.32      +4 -9      ircd-hybrid-7/tools/Makefile.in
  1.34      +6 -1      ircd-hybrid-7/tools/convertconf.c



androsyn    2002/07/11 19:32:32 EDT	(20020712_0)

  Modified files:
    autoconf             configure.in 
    .                    configure 
  Log:
  Fixed formatting for ./configure --help
  
  Revision  Changes    Path
  7.142     +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.145     +5 -5      ircd-hybrid-7/configure



leeh        2002/07/11 11:27:05 EDT	(20020711_6)

  Modified files:
    modules/core         m_nick.c 
  Log:
  - allow unregistered connections to change the case of their nickname
  
  Revision  Changes    Path
  1.92      +8 -3      ircd-hybrid-7/modules/core/m_nick.c



leeh        2002/07/11 11:01:58 EDT	(20020711_5)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - Joans configure fixes for forte
  
  Revision  Changes    Path
  7.141     +5 -1      ircd-hybrid-7/autoconf/configure.in
  7.144     +216 -212  ircd-hybrid-7/configure



leeh        2002/07/11 09:26:58 EDT	(20020711_4)

  Modified files:
    doc                  example.conf 
    include              memory.h tools.h 
  Log:
  - wrap the inlines in #ifdef __GNUC__, this should fix forte.
  
  Revision  Changes    Path
  7.165     +1 -1      ircd-hybrid-7/doc/example.conf
  7.34      +36 -0     ircd-hybrid-7/include/memory.h
  1.12      +5 -2      ircd-hybrid-7/include/tools.h



leeh        2002/07/11 07:04:38 EDT	(20020711_3)

  Modified files:
    src                  client.c 
  Log:
  - fixed an error with a Debug(), found by sofit <sofit@mail.bg>
  
  Revision  Changes    Path
  7.288     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/07/11 05:23:21 EDT	(20020711_2)

  Modified files:
    include              rsa.h 
  Log:
  Add a newline to the end of rsa.h
  
  Revision  Changes    Path
  7.11      +2 -1      ircd-hybrid-7/include/rsa.h



androsyn    2002/07/11 05:17:20 EDT	(20020711_1)

  Modified files:
    include              memory.h 
  Log:
  Remove the inlines from memory.h that were giving forte c problems..
  
  Revision  Changes    Path
  7.33      +0 -32     ircd-hybrid-7/include/memory.h



lusky       2002/07/10 22:29:03 EDT	(20020711_0)

  Modified files:
    .                    INSTALL RELNOTES 
  Log:
  - fixing hybrid@ subscription instructions
  
  Revision  Changes    Path
  7.29      +3 -3      ircd-hybrid-7/INSTALL
  1.35      +4 -4      ircd-hybrid-7/RELNOTES



leeh        2002/07/10 06:35:08 EDT	(20020710_5)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    doc                  example.efnet.conf 
  Log:
  - but my autoconf changes back :P
  - fixed typo
  
  Revision  Changes    Path
  7.140     +6 -0      ircd-hybrid-7/autoconf/configure.in
  7.143     +6 -0      ircd-hybrid-7/configure
  7.2       +1 -1      ircd-hybrid-7/doc/example.efnet.conf



androsyn    2002/07/10 04:35:14 EDT	(20020710_4)

  Modified files:
    .                    RELNOTES 
  Log:
  Start updating RELNOTES for what *should* be -rc1
  
  Revision  Changes    Path
  1.34      +6 -11     ircd-hybrid-7/RELNOTES



androsyn    2002/07/10 04:31:15 EDT	(20020710_3)

  Modified files:
    include              ircd_defs.h 
  Log:
  Update comments to note that TOPICLEN isn't set here anymore..
  
  Revision  Changes    Path
  7.30      +1 -1      ircd-hybrid-7/include/ircd_defs.h



androsyn    2002/07/10 03:06:25 EDT	(20020710_2)

  Modified files:
    .                    configure 
    autoconf             acconfig.h configure.in 
    include              ircd_defs.h setup.h.in 
  Log:
  Make TOPICLEN configurable via autoconf
  
  Revision  Changes    Path
  7.23      +3 -0      ircd-hybrid-7/autoconf/acconfig.h
  7.139     +15 -0     ircd-hybrid-7/autoconf/configure.in
  7.142     +244 -223  ircd-hybrid-7/configure
  7.29      +0 -1      ircd-hybrid-7/include/ircd_defs.h
  7.55      +3 -0      ircd-hybrid-7/include/setup.h.in



androsyn    2002/07/10 02:48:25 EDT	(20020710_1)

  Modified files:
    .                    configure 
    autoconf             acconfig.h configure.in 
    include              setup.h.in 
  Log:
  Changes to configure for Forte C stuff also added a missing entry in
  acconfig.h for EFNET
  
  Revision  Changes    Path
  7.22      +3 -0      ircd-hybrid-7/autoconf/acconfig.h
  7.138     +8 -8      ircd-hybrid-7/autoconf/configure.in
  7.141     +220 -220  ircd-hybrid-7/configure
  7.54      +3 -3      ircd-hybrid-7/include/setup.h.in



leeh        2002/07/09 20:05:53 EDT	(20020710_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    doc                  Makefile.in example.conf 
    include              client.h config.h 
  Added files:
    doc                  example.efnet.conf 
  Log:
  - added a default efnet config submitted by Disciple.
  - updated various places to reflect this
  - added back #define TS5_ONLY
  
  Revision  Changes    Path
  7.137     +5 -0      ircd-hybrid-7/autoconf/configure.in
  7.140     +5 -0      ircd-hybrid-7/configure
  7.17      +1 -1      ircd-hybrid-7/doc/Makefile.in
  7.164     +1 -1      ircd-hybrid-7/doc/example.conf
  7.1       +923 -0    ircd-hybrid-7/doc/example.efnet.conf (new)
  7.151     +4 -0      ircd-hybrid-7/include/client.h
  7.140     +11 -0     ircd-hybrid-7/include/config.h



leeh        2002/07/09 16:49:31 EDT	(20020709_0)

  Modified files:
    src                  hostmask.c 
  Log:
  - dont show spoofed auth {} during HIDE_SPOOF_IPS
  
  Revision  Changes    Path
  7.67      +5 -2      ircd-hybrid-7/src/hostmask.c



androsyn    2002/07/08 14:45:09 EDT	(20020708_2)

  Modified files:        (Branch: WIN32_WIP)
    adns                 event.c transmit.c 
    contrib              m_clearchan.c m_force.c m_jupe.c 
                         m_ltrace.c m_ojoin.c m_tburst.c 
    include              balloc.h channel.h channel_mode.h 
                         config.h config.h.dist hostmask.h ircd.h 
                         memory.h patchlevel.h s_log.h tools.h 
                         whowas.h 
    modules              Makefile.in m_join.c m_kline.c m_list.c 
                         m_ping.c m_pong.c m_stats.c m_topic.c 
                         m_trace.c m_unkline.c m_who.c 
    modules/core         m_message.c m_nick.c m_server.c m_sjoin.c 
    servlink             Makefile.in 
    src                  .depend adns.c balloc.c channel.c 
                         channel_mode.c fileio.c hash.c hook.c 
                         hostmask.c irc_string.c ircd_parser.y 
                         kdparse.c list.c match.c memory.c 
                         messages.tab modules.c parse.c 
                         s_bsd_devpoll.c s_bsd_kqueue.c s_gline.c 
                         s_log.c s_user.c sprintf_irc.c tools.c 
                         vchannel.c whowas.c 
    tools                Makefile.in 
  Log:
  Merge WIN32_WIP with HEAD
  
  Revision   Changes    Path
  1.15.2.1   +4 -1      ircd-hybrid-7/adns/event.c
  1.10.2.1   +2 -3      ircd-hybrid-7/adns/transmit.c
  1.29.2.1   +2 -3      ircd-hybrid-7/contrib/m_clearchan.c
  1.7.2.1    +184 -54   ircd-hybrid-7/contrib/m_force.c
  1.29.2.1   +6 -7      ircd-hybrid-7/contrib/m_jupe.c
  1.2.2.1    +35 -1     ircd-hybrid-7/contrib/m_ltrace.c
  1.7.2.1    +30 -17    ircd-hybrid-7/contrib/m_ojoin.c
  1.8.2.1    +8 -9      ircd-hybrid-7/contrib/m_tburst.c
  1.9.2.1    +0 -1      ircd-hybrid-7/include/balloc.h
  7.114.2.1  +6 -2      ircd-hybrid-7/include/channel.h
  7.9.2.1    +1 -11     ircd-hybrid-7/include/channel_mode.h
  7.133.2.1  +17 -0     ircd-hybrid-7/include/config.h
  7.57.2.1   +13 -0     ircd-hybrid-7/include/config.h.dist
  1.21.2.1   +2 -1      ircd-hybrid-7/include/hostmask.h
  7.50.2.1   +1 -0      ircd-hybrid-7/include/ircd.h
  7.30.2.1   +49 -15    ircd-hybrid-7/include/memory.h
  7.30.2.1   +1 -1      ircd-hybrid-7/include/patchlevel.h
  7.9.2.1    +1 -0      ircd-hybrid-7/include/s_log.h
  1.9.2.1    +143 -1    ircd-hybrid-7/include/tools.h
  7.8.2.1    +1 -5      ircd-hybrid-7/include/whowas.h
  1.67.2.1   +2 -4      ircd-hybrid-7/modules/Makefile.in
  1.92.2.1   +122 -81   ircd-hybrid-7/modules/core/m_message.c
  1.90.2.1   +9 -3      ircd-hybrid-7/modules/core/m_nick.c
  1.83.2.1   +9 -28     ircd-hybrid-7/modules/core/m_server.c
  1.139.2.1  +4 -4      ircd-hybrid-7/modules/core/m_sjoin.c
  1.85.2.1   +5 -2      ircd-hybrid-7/modules/m_join.c
  1.102.2.1  +92 -79    ircd-hybrid-7/modules/m_kline.c
  1.42.2.1   +7 -7      ircd-hybrid-7/modules/m_list.c
  1.28.2.1   +15 -11    ircd-hybrid-7/modules/m_ping.c
  1.26.2.1   +3 -3      ircd-hybrid-7/modules/m_pong.c
  1.109.2.1  +5 -3      ircd-hybrid-7/modules/m_stats.c
  1.52.2.1   +14 -26    ircd-hybrid-7/modules/m_topic.c
  1.46.2.1   +50 -3     ircd-hybrid-7/modules/m_trace.c
  1.45.2.1   +1 -1      ircd-hybrid-7/modules/m_unkline.c
  1.60.2.1   +37 -16    ircd-hybrid-7/modules/m_who.c
  1.12.2.1   +1 -1      ircd-hybrid-7/servlink/Makefile.in
  7.6.2.1    +0 -1      ircd-hybrid-7/src/.depend
  7.41.2.1   +14 -8     ircd-hybrid-7/src/adns.c
  7.32.2.1   +79 -40    ircd-hybrid-7/src/balloc.c
  7.316.2.1  +75 -2     ircd-hybrid-7/src/channel.c
  7.40.2.1   +381 -524  ircd-hybrid-7/src/channel_mode.c
  7.22.2.1   +45 -6     ircd-hybrid-7/src/fileio.c
  7.41.2.1   +26 -4     ircd-hybrid-7/src/hash.c
  7.15.2.1   +1 -2      ircd-hybrid-7/src/hook.c
  7.64.2.1   +4 -3      ircd-hybrid-7/src/hostmask.c
  7.53.2.1   +6 -0      ircd-hybrid-7/src/irc_string.c
  1.250.2.1  +0 -5      ircd-hybrid-7/src/ircd_parser.y
  7.7.2.1    +3 -2      ircd-hybrid-7/src/kdparse.c
  7.44.2.1   +3 -4      ircd-hybrid-7/src/list.c
  7.19.2.1   +1 -1      ircd-hybrid-7/src/match.c
  7.35.2.1   +3 -3      ircd-hybrid-7/src/memory.c
  7.67.2.1   +1 -2      ircd-hybrid-7/src/messages.tab
  7.102.2.1  +14 -7     ircd-hybrid-7/src/modules.c
  7.127.2.1  +9 -3      ircd-hybrid-7/src/parse.c
  7.14.2.1   +2 -0      ircd-hybrid-7/src/s_bsd_devpoll.c
  1.26.2.1   +1 -1      ircd-hybrid-7/src/s_bsd_kqueue.c
  1.20.2.1   +2 -0      ircd-hybrid-7/src/s_gline.c
  7.41.2.1   +30 -14    ircd-hybrid-7/src/s_log.c
  7.194.2.1  +50 -18    ircd-hybrid-7/src/s_user.c
  7.14.2.1   +6 -0      ircd-hybrid-7/src/sprintf_irc.c
  7.20.2.1   +3 -2      ircd-hybrid-7/src/tools.c
  7.64.2.1   +11 -0     ircd-hybrid-7/src/vchannel.c
  7.18.2.1   +3 -0      ircd-hybrid-7/src/whowas.c
  7.30.2.1   +1 -1      ircd-hybrid-7/tools/Makefile.in



leeh        2002/07/08 08:23:35 EDT	(20020708_1)

  Modified files:
    .                    Hybrid-team 
    contrib              README 
  Log:
  - updated my nick and the README to include andros patch.
  
  Revision  Changes    Path
  7.51      +1 -1      ircd-hybrid-7/Hybrid-team
  1.21      +3 -0      ircd-hybrid-7/contrib/README



androsyn    2002/07/07 20:10:33 EDT	(20020708_0)

  Added files:
    contrib              README.disable_identd disable_identd.diff 
  Log:
  Patch to disable identd requests
  
  Revision  Changes    Path
  1.1       +17 -0     ircd-hybrid-7/contrib/README.disable_identd (new)
  1.1       +87 -0     ircd-hybrid-7/contrib/disable_identd.diff (new)



leeh        2002/07/07 06:30:19 EDT	(20020707_1)

  Modified files:
    contrib              m_jupe.c 
  Log:
  - make_client() adds the new client to unknown_list, so we must search
    and remove it
  
  Revision  Changes    Path
  1.34      +9 -1      ircd-hybrid-7/contrib/m_jupe.c



db          2002/07/07 01:45:09 EDT	(20020707_0)

  Modified files:
    contrib              m_ltrace.c 
    modules              m_trace.c 
  Log:
  - m_ltrace.c was missing the previously global next_client_double()
    I've simply cut and pasted that code. That should shut up that error.
  - m_trace.c I simply tidied up the prototype, no need to split it into two lines.
  
  Revision  Changes    Path
  1.3       +35 -1     ircd-hybrid-7/contrib/m_ltrace.c
  1.50      +2 -3      ircd-hybrid-7/modules/m_trace.c



lusky       2002/07/06 18:25:11 EDT	(20020706_6)

  Modified files:
    include              patchlevel.h 
  Log:
  - revved patchlevel to beta18
  
  Revision  Changes    Path
  7.33      +1 -1      ircd-hybrid-7/include/patchlevel.h



leeh        2002/07/06 18:20:10 EDT	(20020706_5)

  Modified files:
    contrib              m_tburst.c 
  Log:
  - bug in tburst, found by MoeBass
  
  Revision  Changes    Path
  1.11      +4 -2      ircd-hybrid-7/contrib/m_tburst.c



leeh        2002/07/06 16:14:35 EDT	(20020706_4)

  Modified files:
    .                    BUGS RELNOTES 
    contrib              lmh.diff 
    modules              m_kline.c 
  Log:
  - updated RELNOTES and BUGS
  - fixed a truth val in m_kline.c
  - updated my patch wrt the m_kline.c updates
  
  Revision  Changes    Path
  7.50      +1 -4      ircd-hybrid-7/BUGS
  1.33      +11 -11    ircd-hybrid-7/RELNOTES
  1.7       +53 -54    ircd-hybrid-7/contrib/lmh.diff
  1.105     +2 -2      ircd-hybrid-7/modules/m_kline.c



db          2002/07/06 12:58:59 EDT	(20020706_3)

  Modified files:
    modules              m_kline.c 
    src                  hostmask.c kdparse.c 
  Log:
  - This fixes non-redundant dlines for IPV4 at least. The IPV6 dline code is still
    incomplete. I also fixed a number of style problems.
  
  Revision  Changes    Path
  1.104     +92 -79    ircd-hybrid-7/modules/m_kline.c
  7.66      +3 -2      ircd-hybrid-7/src/hostmask.c
  7.8       +3 -2      ircd-hybrid-7/src/kdparse.c



leeh        2002/07/06 10:03:56 EDT	(20020706_2)

  Modified files:
    src                  vchannel.c 
  Log:
  - we dont put ;'s on the end of if()s ;p
  
  Revision  Changes    Path
  7.66      +1 -1      ircd-hybrid-7/src/vchannel.c



leeh        2002/07/06 07:15:30 EDT	(20020706_1)

  Modified files:
    .                    BUGS 
  Log:
  - updated BUGS with the multiple dline bug.
  
  Revision  Changes    Path
  7.49      +2 -3      ircd-hybrid-7/BUGS



leeh        2002/07/06 07:05:04 EDT	(20020706_0)

  Modified files:
    modules              m_ping.c 
  Log:
  - fixed ping for LL
  
  Revision  Changes    Path
  1.29      +15 -11    ircd-hybrid-7/modules/m_ping.c



leeh        2002/07/04 19:21:56 EDT	(20020705_0)

  Modified files:
    contrib              m_jupe.c 
  Log:
  - unused var.
  
  Revision  Changes    Path
  1.33      +1 -2      ircd-hybrid-7/contrib/m_jupe.c



db          2002/07/04 12:07:32 EDT	(20020704_3)

  Modified files:
    contrib              m_jupe.c 
  Log:
  - there is no way we are going to find a client struct we just created
    on the unknowns list!
  
  Revision  Changes    Path
  1.32      +1 -10     ircd-hybrid-7/contrib/m_jupe.c



androsyn    2002/07/04 12:07:25 EDT	(20020704_2)

  Modified files:
    modules/core         m_sjoin.c 
  Log:
  The second half of that goofy spaces in SJOIN bug..
  
  Revision  Changes    Path
  1.140     +4 -4      ircd-hybrid-7/modules/core/m_sjoin.c



androsyn    2002/07/04 09:32:57 EDT	(20020704_1)

  Modified files:
    contrib              m_jupe.c 
  Log:
  If the length of a servername goes over hostlen, it surely is bogus.
  
  Revision  Changes    Path
  1.31      +2 -2      ircd-hybrid-7/contrib/m_jupe.c



androsyn    2002/07/04 09:13:48 EDT	(20020704_0)

  Modified files:
    contrib              m_jupe.c 
  Log:
  This seems to fix the jupe issue..
  
  Revision  Changes    Path
  1.30      +3 -2      ircd-hybrid-7/contrib/m_jupe.c



leeh        2002/07/03 11:03:10 EDT	(20020703_3)

  Modified files:
    modules              m_who.c 
  Log:
  - fixed an issue with invisible users being shown in a /who output.
    this whole code needs a rewrite, but.
  
  Revision  Changes    Path
  1.61      +37 -16    ircd-hybrid-7/modules/m_who.c



leeh        2002/07/03 08:31:31 EDT	(20020703_2)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - retard proofing, it seems the concept of actually specifying a param
    in --with-maxclients is beyond some people.
  
  Revision  Changes    Path
  7.136     +2 -2      ircd-hybrid-7/autoconf/configure.in
  7.139     +2 -2      ircd-hybrid-7/configure



db          2002/07/02 19:58:14 EDT	(20020703_1)

  Modified files:
    modules/core         m_message.c 
  Log:
  - fixed off by one error in too many recipients code in m_message.c
  
  Revision  Changes    Path
  1.98      +9 -12     ircd-hybrid-7/modules/core/m_message.c



db          2002/07/02 19:24:24 EDT	(20020703_0)

  Modified files:
    modules/core         m_message.c 
  Log:
  - fixed stupid bug I introduced with @# oops
  
  Revision  Changes    Path
  1.97      +17 -18    ircd-hybrid-7/modules/core/m_message.c



db          2002/07/02 18:25:02 EDT	(20020702_2)

  Modified files:
    modules/core         m_message.c 
  Log:
  - fix redundant nick/message handling. duplicate nicks/messages should
    simply be ignored. i.e. /msg #channel,#channel hi
    results in "hi" to #channel
  - fix so it properly reports too many targets.
  
  Revision  Changes    Path
  1.96      +54 -42    ircd-hybrid-7/modules/core/m_message.c



leeh        2002/07/02 06:35:28 EDT	(20020702_1)

  Modified files:
    contrib              lmh.diff 
  Log:
  - use CASEMAP instead of CHARSET
  
  Revision  Changes    Path
  1.6       +6 -6      ircd-hybrid-7/contrib/lmh.diff



leeh        2002/07/02 06:22:27 EDT	(20020702_0)

  Modified files:
    contrib              README.LMH lmh.diff 
  Log:
  - updated lmh.diff with andros USE_ASCII_CASEMAP
  
  Revision  Changes    Path
  1.3       +14 -0     ircd-hybrid-7/contrib/README.LMH
  1.5       +182 -87   ircd-hybrid-7/contrib/lmh.diff



db          2002/06/29 00:34:53 EDT	(20020629_0)

  Modified files:
    include              client.h 
    modules              m_trace.c 
    modules/core         m_message.c 
    src                  client.c 
  Log:
  - in fixing m_privmsg.c I noticed a function it used was only used by m_privmsg.c
    moved it from client.c into m_privmsg.c (I bad, I couldn't help it)
    I also noticed a function used in m_trace.c only used in m_trace.c, so
    moved that as well.
  
  Revision  Changes    Path
  7.150     +1 -5      ircd-hybrid-7/include/client.h
  1.95      +47 -15    ircd-hybrid-7/modules/core/m_message.c
  1.49      +38 -1     ircd-hybrid-7/modules/m_trace.c
  7.287     +3 -67     ircd-hybrid-7/src/client.c



db          2002/06/28 14:48:07 EDT	(20020628_1)

  Modified files:
    modules/core         m_message.c 
  Log:
  - fixed other style problems, removed unnecessary casts
  
  Revision  Changes    Path
  1.94      +9 -8      ircd-hybrid-7/modules/core/m_message.c



db          2002/06/28 14:18:51 EDT	(20020628_0)

  Modified files:
    modules/core         m_message.c 
    src                  client.c messages.tab 
  Log:
  - ERR_TOOMANYRECIPIENTS 407 reply was bogus we no longer give
    actual number of recipients actually processed.
  - Fixed a few style problems, and removed unnecessary casts
  
  Revision  Changes    Path
  1.93      +11 -11    ircd-hybrid-7/modules/core/m_message.c
  7.286     +4 -4      ircd-hybrid-7/src/client.c
  7.68      +1 -2      ircd-hybrid-7/src/messages.tab



leeh        2002/06/27 11:16:40 EDT	(20020627_3)

  Modified files:
    include              config.h 
    src                  client.c 
  Log:
  - well fix the QS stuff in 7.1 (agreed with andro)
  
  Revision  Changes    Path
  7.139     +0 -6      ircd-hybrid-7/include/config.h
  7.285     +15 -60    ircd-hybrid-7/src/client.c



androsyn    2002/06/26 22:14:40 EDT	(20020627_2)

  Modified files:
    src                  client.c 
  Log:
  Got the logic on that assert() backwards..how embarrassing
  
  Revision  Changes    Path
  7.284     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/06/26 20:01:30 EDT	(20020627_1)

  Modified files:
    src                  client.c 
  Log:
  Those should be source_p not client_p
  
  Revision  Changes    Path
  7.283     +4 -4      ircd-hybrid-7/src/client.c



leeh        2002/06/26 19:38:59 EDT	(20020627_0)

  Modified files:
    modules              m_kline.c m_unkline.c 
  Log:
  - synced these up to show the same
  
  Revision  Changes    Path
  1.103     +2 -2      ircd-hybrid-7/modules/m_kline.c
  1.47      +3 -3      ircd-hybrid-7/modules/m_unkline.c



androsyn    2002/06/26 18:01:36 EDT	(20020626_7)

  Modified files:
    include              config.h 
    src                  client.c 
  Log:
  Minor little changes regarding the value that we should use for pending
  remote exits
  
  Revision  Changes    Path
  7.138     +6 -0      ircd-hybrid-7/include/config.h
  7.282     +1 -6      ircd-hybrid-7/src/client.c



leeh        2002/06/26 17:35:29 EDT	(20020626_6)

  Modified files:
    src                  client.c 
  Log:
  - exit 15000 clients at once if compiled for efnut.
  
  Revision  Changes    Path
  7.281     +5 -0      ircd-hybrid-7/src/client.c



androsyn    2002/06/26 17:16:15 EDT	(20020626_5)

  Modified files:
    src                  client.c 
  Log:
  Fixed the issue with quit storms making the server completely unresponsive.
  Basically what we do now is, add the clients that need exited to a linked
  list then have an event that will exit them 1500 at a time, rather than
  trying to exit say, 50000 clients at once.
  
  Revision  Changes    Path
  7.280     +60 -15    ircd-hybrid-7/src/client.c



androsyn    2002/06/26 10:20:19 EDT	(20020626_4)

  Modified files:
    src                  client.c 
  Log:
  Add some assert()'s to exit_client() and changed the error message for
  abort_list clients from "Dead link" to "Write error: connection closed"
  
  Revision  Changes    Path
  7.279     +8 -1      ircd-hybrid-7/src/client.c



leeh        2002/06/26 08:16:22 EDT	(20020626_3)

  Modified files:
    modules              m_unkline.c 
  Log:
  - consistency with hyb6 and /kline, only use sptr->name in the notice, not
    n!u@h{o}
  
  Revision  Changes    Path
  1.46      +3 -3      ircd-hybrid-7/modules/m_unkline.c



androsyn    2002/06/25 23:05:48 EDT	(20020626_2)

  Modified files:
    include              ircd.h s_log.h 
    src                  ircd.c ircd_signal.c s_conf.c s_log.c 
  Log:
  Make ircd.log close and open itself on rehash or SIGHUP.  Also clean up some
  formatting
  
  Revision  Changes    Path
  7.51      +1 -0      ircd-hybrid-7/include/ircd.h
  7.10      +1 -0      ircd-hybrid-7/include/s_log.h
  7.237     +1 -1      ircd-hybrid-7/src/ircd.c
  7.12      +10 -5     ircd-hybrid-7/src/ircd_signal.c
  7.308     +1 -0      ircd-hybrid-7/src/s_conf.c
  7.43      +28 -14    ircd-hybrid-7/src/s_log.c



leeh        2002/06/25 19:08:36 EDT	(20020626_1)

  Modified files:
    .                    ChangeLog 
  Log:
  - more updates.
  
  Revision  Changes    Path
  7.3806    +1 -4      ircd-hybrid-7/ChangeLog



leeh        2002/06/25 19:06:55 EDT	(20020626_0)

  Modified files:
    .                    ChangeLog 
    doc                  example.conf index.txt 
  Log:
  - doc updates
  
  Revision  Changes    Path
  7.3804    +13 -53    ircd-hybrid-7/ChangeLog
  7.163     +1 -1      ircd-hybrid-7/doc/example.conf
  1.17      +0 -2      ircd-hybrid-7/doc/index.txt



leeh        2002/06/24 18:06:13 EDT	(20020624_3)

  Modified files:
    modules              m_join.c 
  Log:
  - the juped channel notices wandered off.
  
  Revision  Changes    Path
  1.87      +4 -1      ircd-hybrid-7/modules/m_join.c



leeh        2002/06/24 14:12:22 EDT	(20020624_2)

  Modified files:
    modules/core         m_server.c 
  Log:
  - exit the server that introduced the existing server to us always.
  
  Revision  Changes    Path
  1.84      +9 -28     ircd-hybrid-7/modules/core/m_server.c



db          2002/06/24 00:28:05 EDT	(20020624_1)

  Modified files:
    src                  s_serv.c 
  Log:
  - pure consistency in naming. use local_server_p to keep it obvious.
  
  Revision  Changes    Path
  7.265     +6 -8      ircd-hybrid-7/src/s_serv.c



leeh        2002/06/23 19:02:44 EDT	(20020624_0)

  Modified files:
    src                  send.c 
  Log:
  - removed a spurious IsClosing() that broke sending error messages et al
    to the client.
  
  Revision  Changes    Path
  7.199     +1 -1      ircd-hybrid-7/src/send.c



leeh        2002/06/23 05:22:02 EDT	(20020623_0)

  Modified files:
    help/opers           rehash 
  Log:
  - there is no rehash help (Hwy)
  
  Revision  Changes    Path
  1.2       +0 -1      ircd-hybrid-7/help/opers/rehash



db          2002/06/22 18:39:09 EDT	(20020622_2)

  Modified files:
    src                  s_serv.c 
  Log:
  - same bug was in add_lazylinkchannel() grrr
  
  Revision  Changes    Path
  7.264     +1 -4      ircd-hybrid-7/src/s_serv.c



db          2002/06/22 17:23:08 EDT	(20020622_1)

  Modified files:
    src                  s_serv.c 
  Log:
  - duh. make the comments agree with the arguments to the function.
  
  Revision  Changes    Path
  7.263     +2 -2      ircd-hybrid-7/src/s_serv.c



db          2002/06/22 16:27:45 EDT	(20020622_0)

  Modified files:
    src                  s_serv.c 
  Log:
  - add_lazylinkclient had the wrong assert. Its not a client in the
    first arg, it should always be a locally connected leaf server.
    Changed comments and parm names to make this clear, changed bogus assert.
  
  Revision  Changes    Path
  7.262     +5 -6      ircd-hybrid-7/src/s_serv.c



lusky       2002/06/20 22:33:13 EDT	(20020621_0)

  Modified files:
    include              patchlevel.h 
  Log:
  - revved patchlevel to beta17
  
  Revision  Changes    Path
  7.32      +1 -1      ircd-hybrid-7/include/patchlevel.h



leeh        2002/06/20 17:39:58 EDT	(20020620_1)

  Modified files:
    contrib              README.LMH lmh.diff 
  Log:
  - added true no oper flood to my diff.
  
  Revision  Changes    Path
  1.2       +22 -3     ircd-hybrid-7/contrib/README.LMH
  1.4       +170 -92   ircd-hybrid-7/contrib/lmh.diff



leeh        2002/06/20 14:00:42 EDT	(20020620_0)

  Modified files:
    include              config.h 
    src                  s_conf.c 
  Log:
  - dont allow spoof notices if HIDE_SPOOF_IPS.
  
  Revision  Changes    Path
  7.137     +2 -2      ircd-hybrid-7/include/config.h
  7.307     +2 -0      ircd-hybrid-7/src/s_conf.c



leeh        2002/06/19 16:49:56 EDT	(20020619_3)

  Modified files:
    modules              m_trace.c 
  Log:
  - audited the IP stuff in relation to spoofing and /trace
  
  Revision  Changes    Path
  1.48      +10 -2     ircd-hybrid-7/modules/m_trace.c



leeh        2002/06/19 16:39:07 EDT	(20020619_2)

  Modified files:
    .                    RELNOTES 
    modules              m_trace.c 
    src                  parse.c 
  Log:
  - updated RELNOTES
  - dont show an IP in /trace if HIDE_SPOOF_IPS.
  
  Revision  Changes    Path
  1.32      +12 -10    ircd-hybrid-7/RELNOTES
  1.47      +5 -2      ircd-hybrid-7/modules/m_trace.c
  7.129     +1 -1      ircd-hybrid-7/src/parse.c



leeh        2002/06/19 16:26:39 EDT	(20020619_1)

  Modified files:
    src                  client.c 
  Log:
  - I think ive got this right, hide the IP for servers always if defined
    hide it for spoofs only if SHOW_IP (HIDE_IP would give the spoofed host)
  
  Revision  Changes    Path
  7.278     +1 -2      ircd-hybrid-7/src/client.c



leeh        2002/06/19 16:17:49 EDT	(20020619_0)

  Modified files:
    include              config.h config.h.dist 
    src                  client.c 
  Log:
  - I think I was on craq when I did the HIDE_SERVERS_IPS define.  fixed it.
  - added HIDE_SPOOF_IPS, for efnut.
  - fixed the dead link/sendq notice for servers
  
  Revision  Changes    Path
  7.136     +10 -0     ircd-hybrid-7/include/config.h
  7.58      +13 -0     ircd-hybrid-7/include/config.h.dist
  7.277     +11 -3     ircd-hybrid-7/src/client.c



leeh        2002/06/18 15:16:00 EDT	(20020618_3)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  - update julifuq's contact info.
  
  Revision  Changes    Path
  7.14      +11 -11    ircd-hybrid-7/README.PLATFORMS



androsyn    2002/06/18 13:34:15 EDT	(20020618_2)

  Modified files:
    src                  channel.c channel_mode.c 
  Log:
  Fixed that stupid space showing up in SJOINS
  
  Revision  Changes    Path
  7.324     +1 -4      ircd-hybrid-7/src/channel.c
  7.42      +1 -1      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/06/18 13:25:59 EDT	(20020618_1)

  Modified files:
    src                  channel.c 
  Log:
  Document the goofy mysterious SJOIN space
  
  Revision  Changes    Path
  7.323     +3 -0      ircd-hybrid-7/src/channel.c



leeh        2002/06/18 09:54:20 EDT	(20020618_0)

  Modified files:
    contrib              lmh.diff 
  Log:
  - updated my diff to keep the ip hash table always, for pace connect.
  
  Revision  Changes    Path
  1.3       +122 -98   ircd-hybrid-7/contrib/lmh.diff



leeh        2002/06/17 08:32:59 EDT	(20020617_2)

  Modified files:
    src                  tools.c 
  Log:
  - aaaaaand in tools.c
  
  Revision  Changes    Path
  7.22      +0 -1      ircd-hybrid-7/src/tools.c



db          2002/06/16 22:57:03 EDT	(20020617_1)

  Modified files:
    src                  s_bsd_devpoll.c 
  Log:
  -missing include (reported by Wendy)
  
  Revision  Changes    Path
  7.15      +2 -0      ircd-hybrid-7/src/s_bsd_devpoll.c



db          2002/06/16 22:54:51 EDT	(20020617_0)

  Modified files:
    include              tools.h 
  Log:
  in tools.h we had:
  m->next = NULL;
  m->next = list->head;
  
  That was daft. (spotted by Lee, but we forgot to fix earlier)
  removing the redundant assign might speed things up slightly.
  
  Revision  Changes    Path
  1.11      +0 -1      ircd-hybrid-7/include/tools.h



db          2002/06/16 13:23:55 EDT	(20020616_3)

  Modified files:
    src                  balloc.c 
  Log:
  - fixed a number of style problems. We want function names to begin
    at first char.
    we want to be consistent with if (foo) { oneline; } etc.
    and we want to be consistent with return needing () or not.
  - fixed bug with elemsize causing odd address SIGBUS failures esp. on solaris.
  
  Revision  Changes    Path
  7.36      +66 -32    ircd-hybrid-7/src/balloc.c



leeh        2002/06/16 12:31:30 EDT	(20020616_2)

  Modified files:
    modules              .cvsignore .depend Makefile.in 
    src                  .depend Makefile.in 
  Log:
  - patch via hwy:
    Id is not needed in .depends, when you lose the dependency files (from
    that .cvsignore) you'll have problems recreating them.
  
  Revision  Changes    Path
  1.3       +0 -1      ircd-hybrid-7/modules/.cvsignore
  1.8       +0 -1      ircd-hybrid-7/modules/.depend
  1.69      +1 -3      ircd-hybrid-7/modules/Makefile.in
  7.7       +0 -1      ircd-hybrid-7/src/.depend
  7.112     +1 -4      ircd-hybrid-7/src/Makefile.in



leeh        2002/06/16 10:55:20 EDT	(20020616_1)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - from hwy:
    The enclosed patch fixes the detection of nanosleep(), when it's
    non-existant, it'll actually enable select for the delay loop.
  
  Revision  Changes    Path
  7.135     +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.138     +1 -1      ircd-hybrid-7/configure



leeh        2002/06/15 19:07:53 EDT	(20020616_0)

  Modified files:
    include              config.h 
  Log:
  - define HIDE_SERVERS_IPS by default for efnut.
  
  Revision  Changes    Path
  7.135     +5 -0      ircd-hybrid-7/include/config.h



leeh        2002/06/15 09:09:48 EDT	(20020615_6)

  Modified files:
    modules              m_stats.c 
  Log:
  - hwys fix to correctly show oper/admin status on stats p.
  
  Revision  Changes    Path
  1.110     +5 -3      ircd-hybrid-7/modules/m_stats.c



leeh        2002/06/15 08:54:51 EDT	(20020615_5)

  Modified files:
    contrib              lmh.diff 
  Log:
  - patching in .orig files is bad
  - added a kludge to install xline.conf, as diff doesnt want to add a 0
    byte file.
  
  Revision  Changes    Path
  1.2       +78 -2587  ircd-hybrid-7/contrib/lmh.diff



leeh        2002/06/15 08:33:28 EDT	(20020615_4)

  Modified files:
    contrib              README 
  Added files:
    contrib              README.LMH lmh.diff 
  Removed files:
    contrib              remote-unkline.diff temp-dline.diff 
  Log:
  - nuked my old patches, added my shiny new one along with a readme.
  
  Revision  Changes    Path
  1.20      +8 -6      ircd-hybrid-7/contrib/README
  1.1       +135 -0    ircd-hybrid-7/contrib/README.LMH (new)
  1.1       +4888 -0   ircd-hybrid-7/contrib/lmh.diff (new)
  1.3       +0 -373    ircd-hybrid-7/contrib/remote-unkline.diff (dead)
  1.5       +0 -533    ircd-hybrid-7/contrib/temp-dline.diff (dead)



androsyn    2002/06/15 03:35:52 EDT	(20020615_3)

  Modified files:
    include              memory.h 
  Log:
  Oops..I'll get this right :)
  
  Revision  Changes    Path
  7.32      +19 -12    ircd-hybrid-7/include/memory.h



androsyn    2002/06/15 03:30:44 EDT	(20020615_2)

  Modified files:
    include              memory.h 
    src                  memory.c 
  Log:
  Added inline versions MyMalloc and friends
  
  Revision  Changes    Path
  7.31      +31 -4     ircd-hybrid-7/include/memory.h
  7.37      +2 -2      ircd-hybrid-7/src/memory.c



androsyn    2002/06/15 03:24:50 EDT	(20020615_1)

  Modified files:
    src                  memory.c 
  Log:
  Silly kids, realloc returns a void * not a char *.
  
  Revision  Changes    Path
  7.36      +1 -1      ircd-hybrid-7/src/memory.c



androsyn    2002/06/15 03:20:00 EDT	(20020615_0)

  Modified files:
    src                  fdlist.c hook.c hostmask.c list.c 
                         listener.c s_bsd_kqueue.c s_conf.c 
  Log:
  Remove a few unneeded memset()'s as MyMalloc does this for us already.  Also
  cleaned up a few ugly looking things.
  
  Revision  Changes    Path
  7.31      +0 -1      ircd-hybrid-7/src/fdlist.c
  7.16      +1 -2      ircd-hybrid-7/src/hook.c
  7.65      +1 -1      ircd-hybrid-7/src/hostmask.c
  7.45      +3 -4      ircd-hybrid-7/src/list.c
  7.69      +0 -1      ircd-hybrid-7/src/listener.c
  1.27      +1 -1      ircd-hybrid-7/src/s_bsd_kqueue.c
  7.306     +3 -4      ircd-hybrid-7/src/s_conf.c



leeh        2002/06/14 15:38:12 EDT	(20020614_2)

  Modified files:
    include              client.h 
  Log:
  - unused variable, splat.
  
  Revision  Changes    Path
  7.149     +0 -1      ircd-hybrid-7/include/client.h



leeh        2002/06/14 15:18:51 EDT	(20020614_1)

  Modified files:
    doc                  convertconf-example.conf example.conf 
  Log:
  - doc updates, anonops isnt broken
  
  Revision  Changes    Path
  7.5       +1 -3      ircd-hybrid-7/doc/convertconf-example.conf
  7.162     +1 -3      ircd-hybrid-7/doc/example.conf



leeh        2002/06/14 13:20:00 EDT	(20020614_0)

  Modified files:
    include              channel_mode.h 
    src                  channel_mode.c 
  Log:
  - adxs patch to fix +a and numerous channel_mode.c bugs
  
    as far as im aware, this fixes all of the problems with +a, but we need
    more testing.
  
  Revision  Changes    Path
  7.10      +1 -11     ircd-hybrid-7/include/channel_mode.h
  7.41      +380 -523  ircd-hybrid-7/src/channel_mode.c



db          2002/06/12 15:29:39 EDT	(20020612_3)

  Modified files:
    src                  ircd_parser.y s_conf.c 
  Log:
  - moved yy_aconf back into ircd-parser.y, its not needed in s_conf.c at all
  
  Revision  Changes    Path
  1.252     +0 -2      ircd-hybrid-7/src/ircd_parser.y
  7.305     +0 -1      ircd-hybrid-7/src/s_conf.c



androsyn    2002/06/12 14:57:53 EDT	(20020612_2)

  Modified files:
    src                  sprintf_irc.c 
  Log:
  Make %lu spit out a 0 for 0 instead of 000000000
  
  Revision  Changes    Path
  7.15      +6 -0      ircd-hybrid-7/src/sprintf_irc.c



androsyn    2002/06/11 21:40:23 EDT	(20020612_1)

  Modified files:
    src                  s_user.c 
  Log:
  Revert that last change..i'm not thinking :P
  
  Revision  Changes    Path
  7.201     +10 -6     ircd-hybrid-7/src/s_user.c



androsyn    2002/06/11 20:53:38 EDT	(20020612_0)

  Modified files:
    src                  s_user.c 
  Log:
  Make that not so ugly
  
  Revision  Changes    Path
  7.200     +6 -10     ircd-hybrid-7/src/s_user.c



leeh        2002/06/11 17:37:10 EDT	(20020611_9)

  Modified files:
    src                  s_user.c 
  Log:
  - aaaaand to unidented clients too.  this is slightly unoptimal, but.
  
  Revision  Changes    Path
  7.199     +16 -11    ircd-hybrid-7/src/s_user.c



leeh        2002/06/11 16:29:08 EDT	(20020611_8)

  Modified files:
    src                  s_auth.c 
  Log:
  - auth tweaks.  strip *all* ['s
    strip ~ and ^ from the beginning of the ident
  
  Revision  Changes    Path
  7.97      +5 -1      ircd-hybrid-7/src/s_auth.c



androsyn    2002/06/10 21:49:26 EDT	(20020611_7)

  Modified files:
    contrib              m_clearchan.c m_force.c m_ojoin.c 
                         m_tburst.c 
    include              channel.h 
    src                  channel.c 
  Log:
  Fix contrib related topic things
  
  Revision  Changes    Path
  1.30      +2 -3      ircd-hybrid-7/contrib/m_clearchan.c
  1.14      +2 -2      ircd-hybrid-7/contrib/m_force.c
  1.11      +2 -2      ircd-hybrid-7/contrib/m_ojoin.c
  1.10      +5 -5      ircd-hybrid-7/contrib/m_tburst.c
  7.117     +3 -0      ircd-hybrid-7/include/channel.h
  7.322     +2 -2      ircd-hybrid-7/src/channel.c



androsyn    2002/06/10 21:42:36 EDT	(20020611_6)

  Modified files:
    src                  channel.c 
  Log:
  Don't bother to free the topic if its not set
  
  Revision  Changes    Path
  7.321     +2 -0      ircd-hybrid-7/src/channel.c



androsyn    2002/06/10 21:41:29 EDT	(20020611_5)

  Modified files:
    src                  channel.c 
  Log:
  Free the topic if we are destroying the channel
  
  Revision  Changes    Path
  7.320     +2 -0      ircd-hybrid-7/src/channel.c



androsyn    2002/06/10 21:39:43 EDT	(20020611_4)

  Modified files:
    contrib              m_tburst.c 
    include              channel.h 
    modules              m_topic.c 
    src                  channel.c 
  Log:
  More of the topic changes
  
  Revision  Changes    Path
  1.9       +2 -5      ircd-hybrid-7/contrib/m_tburst.c
  7.116     +1 -3      ircd-hybrid-7/include/channel.h
  1.54      +13 -45    ircd-hybrid-7/modules/m_topic.c
  7.319     +25 -3     ircd-hybrid-7/src/channel.c



androsyn    2002/06/10 21:02:33 EDT	(20020611_3)

  Modified files:
    include              channel.h config.h 
    modules              m_join.c m_list.c m_topic.c 
    src                  channel.c s_serv.c 
  Log:
  Allocate topics from the block heap instead of being part of struct Channel
  
  Revision  Changes    Path
  7.115     +5 -2      ircd-hybrid-7/include/channel.h
  7.134     +2 -0      ircd-hybrid-7/include/config.h
  1.86      +2 -2      ircd-hybrid-7/modules/m_join.c
  1.43      +7 -7      ircd-hybrid-7/modules/m_list.c
  1.53      +43 -23    ircd-hybrid-7/modules/m_topic.c
  7.318     +45 -0     ircd-hybrid-7/src/channel.c
  7.261     +2 -2      ircd-hybrid-7/src/s_serv.c



androsyn    2002/06/10 20:55:13 EDT	(20020611_2)

  Modified files:
    src                  s_user.c 
  Log:
  Missed a random_ping
  
  Revision  Changes    Path
  7.198     +1 -1      ircd-hybrid-7/src/s_user.c



androsyn    2002/06/10 20:00:11 EDT	(20020611_1)

  Modified files:
    include              client.h 
    modules              m_pong.c 
    src                  s_user.c 
  Log:
  Move random_ping into struct LocalUser where it belongs
  
  Revision  Changes    Path
  7.148     +2 -1      ircd-hybrid-7/include/client.h
  1.27      +3 -3      ircd-hybrid-7/modules/m_pong.c
  7.197     +2 -2      ircd-hybrid-7/src/s_user.c



androsyn    2002/06/10 19:56:48 EDT	(20020611_0)

  Modified files:
    include              balloc.h 
    src                  balloc.c 
  Log:
  Remove an unnecessary member of struct MemBlock
  
  Revision  Changes    Path
  1.10      +0 -1      ircd-hybrid-7/include/balloc.h
  7.35      +2 -3      ircd-hybrid-7/src/balloc.c



leeh        2002/06/09 08:03:28 EDT	(20020609_1)

  Modified files:
    contrib              README temp-dline.diff 
  Log:
  - updates to my temp-dline patch, itll now split tdlines/tklines into
    four lists, those to check every minute, hour, day, week - which should
    make them more efficient and help to cope with the demand for longer
    tklines.
  
  Revision  Changes    Path
  1.19      +2 -1      ircd-hybrid-7/contrib/README
  1.4       +257 -77   ircd-hybrid-7/contrib/temp-dline.diff



androsyn    2002/06/08 20:22:30 EDT	(20020609_0)

  Modified files:
    src                  client.c 
  Log:
  We shouldn't call  remove_dependents if source_p->serv == NULL, why
  source_p->serv == NULL i'm not sure
  
  Revision  Changes    Path
  7.276     +2 -1      ircd-hybrid-7/src/client.c



leeh        2002/06/07 19:38:36 EDT	(20020608_2)

  Modified files:
    src                  s_serv.c 
  Log:
  - move the sendto_realops_flags() down till after the server is made
    so the IO doesnt trigger an exit for a server that doesnt have a
    cptr->serv yet.
  
  Revision  Changes    Path
  7.260     +10 -10    ircd-hybrid-7/src/s_serv.c



androsyn    2002/06/07 19:37:39 EDT	(20020608_1)

  Modified files:
    src                  client.c 
  Log:
  We could potentially add a client twice to the abort_list
  
  Revision  Changes    Path
  7.275     +1 -1      ircd-hybrid-7/src/client.c



leeh        2002/06/07 19:13:51 EDT	(20020608_0)

  Modified files:
    contrib              m_force.c 
  Log:
  - err, forcejoin fixes.. cant remember what tho.
  
  Revision  Changes    Path
  1.13      +5 -1      ircd-hybrid-7/contrib/m_force.c



androsyn    2002/06/07 17:59:19 EDT	(20020607_1)

  Modified files:
    src                  hash.c 
  Log:
  Remove a very hideous ugly stupid hack
  
  Revision  Changes    Path
  7.43      +2 -2      ircd-hybrid-7/src/hash.c



leeh        2002/06/07 10:22:46 EDT	(20020607_0)

  Modified files:
    contrib              m_force.c 
  Log:
  - diff by adx for forcepart param thingy
  
  Revision  Changes    Path
  1.12      +2 -2      ircd-hybrid-7/contrib/m_force.c



leeh        2002/06/06 15:28:51 EDT	(20020606_0)

  Modified files:
    include              whowas.h 
  Log:
  - removed a duplicated id for scuzzy.
  
  Revision  Changes    Path
  7.9       +1 -5      ircd-hybrid-7/include/whowas.h



leeh        2002/06/05 09:49:56 EDT	(20020605_0)

  Modified files:
    doc                  example.conf
  Log:
  - doc update, compressed is disabled by default.
  
  Revision  Changes    Path
  7.161     +2 -2      ircd-hybrid-7/doc/example.conf



androsyn    2002/06/04 01:30:18 EDT	(20020604_1)

  Modified files:
    src                  ircd.c modules.c 
  Log:
  Set a default path for modules.  Also do not allow the user to specify a
  particular pathname of a module to load.  They should only be allowed to
  load modules in the search path.  Also reject things with ".." in them.
  
  Revision  Changes    Path
  7.236     +5 -0      ircd-hybrid-7/src/ircd.c
  7.103     +14 -7     ircd-hybrid-7/src/modules.c



androsyn    2002/06/04 00:33:04 EDT	(20020604_0)

  Modified files:
    include              hostmask.h 
  Log:
  Add a newline to the end of the file to make recent versions of gcc shut up.
  
  Revision  Changes    Path
  1.22      +2 -1      ircd-hybrid-7/include/hostmask.h



androsyn    2002/06/03 15:24:16 EDT	(20020603_5)

  Modified files:
    adns                 event.c 
    src                  adns.c 
  Log:
  Minor adns fixes.
  
  Revision  Changes    Path
  1.17      +1 -2      ircd-hybrid-7/adns/event.c
  7.45      +3 -2      ircd-hybrid-7/src/adns.c



androsyn    2002/06/03 14:54:23 EDT	(20020603_4)

  Modified files:
    src                  adns.c 
  Log:
  Doh..left the TCP resolver turned on.
  
  Revision  Changes    Path
  7.44      +2 -2      ircd-hybrid-7/src/adns.c



leeh        2002/06/03 12:04:39 EDT	(20020603_3)

  Modified files:
    contrib              m_force.c temp-dline.diff 
  Log:
  - more contrib updates.
  
  Revision  Changes    Path
  1.11      +7 -1      ircd-hybrid-7/contrib/m_force.c
  1.3       +32 -32    ircd-hybrid-7/contrib/temp-dline.diff



leeh        2002/06/03 11:42:53 EDT	(20020603_2)

  Modified files:
    contrib              m_force.c m_ojoin.c 
  Log:
  - updates.
  
  Revision  Changes    Path
  1.10      +79 -103   ircd-hybrid-7/contrib/m_force.c
  1.10      +24 -20    ircd-hybrid-7/contrib/m_ojoin.c



leeh        2002/06/03 08:15:14 EDT	(20020603_1)

  Modified files:
    modules              Makefile.in 
    servlink             Makefile.in 
    src                  Makefile.in 
    tools                Makefile.in 
  Log:
  - hwys lint fixes
  
  Revision  Changes    Path
  1.68      +1 -1      ircd-hybrid-7/modules/Makefile.in
  1.13      +1 -1      ircd-hybrid-7/servlink/Makefile.in
  7.111     +1 -1      ircd-hybrid-7/src/Makefile.in
  7.31      +1 -1      ircd-hybrid-7/tools/Makefile.in



lusky       2002/06/02 19:23:23 EDT	(20020603_0)

  Modified files:
    include              patchlevel.h 
  Log:
  revved patchlevel to b16
  
  Revision  Changes    Path
  7.31      +1 -1      ircd-hybrid-7/include/patchlevel.h



leeh        2002/06/02 15:38:33 EDT	(20020602_1)

  Added files:
    doc/technical        ts5.txt 
  Log:
  - added ts5 doc, typed in a very very scary looking log prompt..
  
  Revision  Changes    Path
  1.1       +151 -0    ircd-hybrid-7/doc/technical/ts5.txt (new)



leeh        2002/06/02 10:08:10 EDT	(20020602_0)

  Modified files:
    contrib              m_force.c 
  Log:
  - hunt_server returns an int (!= HUNTED_ISME)
  
  Revision  Changes    Path
  1.9       +3 -3      ircd-hybrid-7/contrib/m_force.c



androsyn    2002/06/01 17:58:52 EDT	(20020601_5)

  Modified files:
    .                    RELNOTES 
  Log:
  Updated RELNOTES again
  
  Revision  Changes    Path
  1.31      +1 -0      ircd-hybrid-7/RELNOTES



androsyn    2002/06/01 17:56:35 EDT	(20020601_4)

  Modified files:
    .                    BUGS 
  Log:
  Remove the TCP resolver bug from the list as I fixed it last night
  
  Revision  Changes    Path
  7.48      +1 -5      ircd-hybrid-7/BUGS



androsyn    2002/06/01 17:49:48 EDT	(20020601_3)

  Modified files:
    include              tools.h 
    src                  tools.c 
  Log:
  Inline versions of the dlink functions
  
  Revision  Changes    Path
  1.10      +144 -1    ircd-hybrid-7/include/tools.h
  7.21      +3 -1      ircd-hybrid-7/src/tools.c



db          2002/06/01 14:47:27 EDT	(20020601_2)

  Modified files:
    contrib              m_ojoin.c 
  Log:
  - fixed minor bug in m_ojoin.c
    patch by adx
  
  Revision  Changes    Path
  1.9       +4 -4      ircd-hybrid-7/contrib/m_ojoin.c



androsyn    2002/06/01 01:28:07 EDT	(20020601_1)

  Modified files:
    adns                 event.c transmit.c 
    src                  adns.c 
  Log:
  Fixed the adns tcp resolver.
  
  Revision  Changes    Path
  1.16      +6 -2      ircd-hybrid-7/adns/event.c
  1.11      +2 -3      ircd-hybrid-7/adns/transmit.c
  7.43      +2 -3      ircd-hybrid-7/src/adns.c



androsyn    2002/05/31 22:32:17 EDT	(20020601_0)

  Modified files:
    contrib              m_force.c 
  Log:
  Scuzzy's modifications to allow the forcing of a user into a new channel.
  Also adds support for remote forcing.
  
  Revision  Changes    Path
  1.8       +162 -18   ircd-hybrid-7/contrib/m_force.c



androsyn    2002/05/31 00:49:25 EDT	(20020531_14)

  Modified files:
    src                  s_serv.c 
  Log:
  Doh..another one..
  
  Revision  Changes    Path
  7.259     +1 -1      ircd-hybrid-7/src/s_serv.c



androsyn    2002/05/31 00:44:56 EDT	(20020531_13)

  Modified files:
    src                  s_user.c 
  Log:
  Fixed some inverted if() statements
  
  Revision  Changes    Path
  7.196     +3 -3      ircd-hybrid-7/src/s_user.c



androsyn    2002/05/31 00:16:22 EDT	(20020531_12)

  Modified files:
    contrib              m_ojoin.c 
  Log:
  Fix from scuzzy to make ojoin send the topic to the joining user.
  
  Revision  Changes    Path
  1.8       +10 -1     ircd-hybrid-7/contrib/m_ojoin.c



androsyn    2002/05/30 22:59:26 EDT	(20020531_11)

  Modified files:
    modules/core         m_nick.c 
  Log:
  Add a non-assert failure check
  
  Revision  Changes    Path
  1.91      +9 -3      ircd-hybrid-7/modules/core/m_nick.c



androsyn    2002/05/30 22:21:12 EDT	(20020531_10)

  Modified files:
    src                  client.c hash.c irc_string.c linebuf.c 
                         listener.c match.c packet.c parse.c 
                         s_auth.c s_bsd.c s_conf.c s_gline.c 
                         s_log.c s_serv.c s_user.c vchannel.c 
                         whowas.c 
  Log:
  The rest of the non-assert failure checks..
  
  Revision  Changes    Path
  7.274     +1 -1      ircd-hybrid-7/src/client.c
  7.42      +24 -2     ircd-hybrid-7/src/hash.c
  7.54      +6 -0      ircd-hybrid-7/src/irc_string.c
  7.82      +3 -0      ircd-hybrid-7/src/linebuf.c
  7.68      +11 -5     ircd-hybrid-7/src/listener.c
  7.20      +1 -1      ircd-hybrid-7/src/match.c
  7.84      +5 -1      ircd-hybrid-7/src/packet.c
  7.128     +8 -2      ircd-hybrid-7/src/parse.c
  7.96      +2 -0      ircd-hybrid-7/src/s_auth.c
  7.170     +2 -1      ircd-hybrid-7/src/s_bsd.c
  7.304     +11 -2     ircd-hybrid-7/src/s_conf.c
  1.21      +2 -0      ircd-hybrid-7/src/s_gline.c
  7.42      +2 -0      ircd-hybrid-7/src/s_log.c
  7.258     +19 -4     ircd-hybrid-7/src/s_serv.c
  7.195     +31 -4     ircd-hybrid-7/src/s_user.c
  7.65      +11 -0     ircd-hybrid-7/src/vchannel.c
  7.19      +3 -0      ircd-hybrid-7/src/whowas.c



androsyn    2002/05/30 21:35:41 EDT	(20020531_9)

  Modified files:
    src                  fileio.c 
  Log:
  More non assert failure cleanups..
  
  Revision  Changes    Path
  7.23      +45 -6     ircd-hybrid-7/src/fileio.c



androsyn    2002/05/30 21:29:04 EDT	(20020531_8)

  Modified files:
    src                  fdlist.c 
  Log:
  Remove a pointless assert()
  
  Revision  Changes    Path
  7.30      +1 -2      ircd-hybrid-7/src/fdlist.c



androsyn    2002/05/30 20:36:38 EDT	(20020531_7)

  Modified files:
    src                  client.c 
  Log:
  Same story as before..add non-assert failure checks..
  
  Revision  Changes    Path
  7.273     +5 -2      ircd-hybrid-7/src/client.c



androsyn    2002/05/30 20:32:24 EDT	(20020531_6)

  Modified files:
    src                  channel.c 
  Log:
  Add non-assert failure code..
  
  Revision  Changes    Path
  7.317     +3 -1      ircd-hybrid-7/src/channel.c



androsyn    2002/05/30 20:29:47 EDT	(20020531_5)

  Modified files:
    src                  balloc.c 
  Log:
  Added some non-assert failure code
  
  Revision  Changes    Path
  7.34      +6 -0      ircd-hybrid-7/src/balloc.c



androsyn    2002/05/30 20:25:43 EDT	(20020531_4)

  Modified files:
    src                  adns.c 
  Log:
  Added some failure code in the case of non debug compiles
  
  Revision  Changes    Path
  7.42      +11 -5     ircd-hybrid-7/src/adns.c



androsyn    2002/05/30 20:22:53 EDT	(20020531_3)

  Modified files:
    src                  s_serv.c 
  Log:
  If a you are trying to register a server and its not on the unknown list
  something very bad has happened.  assert() if debugging..exit the client
  otherwise
  
  Revision  Changes    Path
  7.257     +4 -0      ircd-hybrid-7/src/s_serv.c



androsyn    2002/05/30 20:12:36 EDT	(20020531_2)

  Modified files:
    src                  s_serv.c 
  Log:
  Changed "Lost C-Line" to "Lost connect{} block" as we don't have C lines
  anymore...
  
  Revision  Changes    Path
  7.256     +3 -3      ircd-hybrid-7/src/s_serv.c



androsyn    2002/05/30 20:08:43 EDT	(20020531_1)

  Modified files:
    src                  packet.c 
  Log:
  Macros is your friend
  
  Revision  Changes    Path
  7.83      +1 -1      ircd-hybrid-7/src/packet.c



androsyn    2002/05/30 19:55:50 EDT	(20020531_0)

  Modified files:
    src                  client.c 
  Log:
  Don't send QUIT to remote servers for unregistered clients
  
  Revision  Changes    Path
  7.272     +29 -30    ircd-hybrid-7/src/client.c



leeh        2002/05/30 16:14:01 EDT	(20020530_0)

  Modified files:
    src                  client.c 
  Log:
  - fix for the idle client bug found by scuzzy <scuzzy@aniverse.net>
  
    I *think* this is the right fix, but my server decided the idlelimit
    wasnt worth bothering with anymore anyway.
  
  Revision  Changes    Path
  7.271     +1 -1      ircd-hybrid-7/src/client.c



db          2002/05/29 12:13:43 EDT	(20020529_0)

  Modified files:
    src                  balloc.c 
  Log:
  - fixed goof spotted by Jusuf
  
  Revision  Changes    Path
  7.33      +5 -5      ircd-hybrid-7/src/balloc.c



leeh        2002/05/27 18:48:15 EDT	(20020527_1)

  Removed files:
    contrib              vms_lex_yy.c vms_y_tab.c vms_y_tab.h 
  Log:
  - removed for larne
  
  Revision  Changes    Path
  1.4       +0 -3530   ircd-hybrid-7/contrib/vms_lex_yy.c (dead)
  1.5       +0 -4454   ircd-hybrid-7/contrib/vms_y_tab.c (dead)
  1.4       +0 -195    ircd-hybrid-7/contrib/vms_y_tab.h (dead)



leeh        2002/05/27 08:14:54 EDT	(20020527_0)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - dont enable compressed links by default, only when someone sets
    compressed=yes;
  
  Revision  Changes    Path
  1.251     +0 -3      ircd-hybrid-7/src/ircd_parser.y



leeh        2002/05/26 18:49:58 EDT	(20020526_10)

  Modified files:
    contrib              remote-unkline.diff 
  Log:
  - working remote unkline patch
  
  Revision  Changes    Path
  1.2       +68 -89    ircd-hybrid-7/contrib/remote-unkline.diff



androsyn    2002/05/26 17:19:10 EDT	(20020526_9)

  Modified files:        (Branch: WIN32_WIP)
    include              fdlist.h 
    src                  io_unix.c io_win32.c linebuf.c listener.c 
                         s_auth.c s_bsd_select.c 
  Log:
  Yet some more IO changes :)
  
  Revision  Changes    Path
  7.25.2.3  +1 -2      ircd-hybrid-7/include/fdlist.h
  1.1.2.4   +60 -26    ircd-hybrid-7/src/io_unix.c
  1.1.2.3   +43 -16    ircd-hybrid-7/src/io_win32.c
  7.81.2.2  +3 -6      ircd-hybrid-7/src/linebuf.c
  7.67.2.3  +1 -1      ircd-hybrid-7/src/listener.c
  7.95.2.3  +6 -9      ircd-hybrid-7/src/s_auth.c
  7.26.2.2  +22 -24    ircd-hybrid-7/src/s_bsd_select.c



androsyn    2002/05/26 16:13:18 EDT	(20020526_8)

  Modified files:        (Branch: WIN32_WIP)
    include              client.h fdlist.h 
    src                  io_unix.c 
  Log:
  More IO layer stuff..
  
  Revision   Changes    Path
  7.147.2.1  +3 -1      ircd-hybrid-7/include/client.h
  7.25.2.2   +3 -3      ircd-hybrid-7/include/fdlist.h
  1.1.2.3    +58 -12    ircd-hybrid-7/src/io_unix.c



androsyn    2002/05/26 14:54:14 EDT	(20020526_7)

  Modified files:        (Branch: WIN32_WIP)
    src                  io_unix.c io_win32.c listener.c 
  Log:
  Some additional changes on the new IO abstraction layer...
  
  Revision  Changes    Path
  1.1.2.2   +45 -4     ircd-hybrid-7/src/io_unix.c
  1.1.2.2   +36 -4     ircd-hybrid-7/src/io_win32.c
  7.67.2.2  +2 -2      ircd-hybrid-7/src/listener.c



androsyn    2002/05/26 06:56:01 EDT	(20020526_6)

  Modified files:        (Branch: WIN32_WIP)
    include              fdlist.h 
    src                  fdlist.c listener.c s_auth.c s_bsd.c 
                         win32.c 
  Added files:           (Branch: WIN32_WIP)
    include              win32_defs.h 
    src                  io_unix.c io_win32.c 
  Log:
  Started the basic framework for correctly abstracting the IO layer.
  
  Revision   Changes    Path
  7.25.2.1   +19 -0     ircd-hybrid-7/include/fdlist.h
  1.1.2.1    +48 -0     ircd-hybrid-7/include/win32_defs.h (new)
  7.29.2.2   +13 -1     ircd-hybrid-7/src/fdlist.c
  1.1.2.1    +142 -0    ircd-hybrid-7/src/io_unix.c (new)
  1.1.2.1    +178 -0    ircd-hybrid-7/src/io_win32.c (new)
  7.67.2.1   +3 -3      ircd-hybrid-7/src/listener.c
  7.95.2.2   +2 -2      ircd-hybrid-7/src/s_auth.c
  7.169.2.2  +4 -3      ircd-hybrid-7/src/s_bsd.c
  1.1.2.2    +1 -0      ircd-hybrid-7/src/win32.c



androsyn    2002/05/26 03:16:01 EDT	(20020526_5)

  Modified files:        (Branch: WIN32_WIP)
    src                  send.c 
  Log:
  Merge changes from mainline
  
  Revision   Changes    Path
  7.197.2.2  +1 -9      ircd-hybrid-7/src/send.c



androsyn    2002/05/26 03:11:16 EDT	(20020526_4)

  Modified files:
    src                  send.c 
  Log:
  That was an ugly bit of code..
  
  Revision  Changes    Path
  7.198     +1 -8      ircd-hybrid-7/src/send.c



androsyn    2002/05/26 03:04:02 EDT	(20020526_3)

  Modified files:        (Branch: WIN32_WIP)
    .                    configure 
    autoconf             configure.in 
    include              s_conf.h setup.h.in stdinc.h 
    src                  Makefile.in client.c fdlist.c ircd.c 
                         ircd_signal.c linebuf.c md5.c packet.c 
                         s_auth.c s_bsd.c s_bsd_select.c s_conf.c 
                         s_debug.c s_serv.c send.c 
  Log:
  Wad of changes for win32..
  
  Revision   Changes    Path
  7.134.2.1  +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.137.2.1  +1 -1      ircd-hybrid-7/configure
  7.180.2.1  +1 -1      ircd-hybrid-7/include/s_conf.h
  7.53.2.1   +18 -3     ircd-hybrid-7/include/setup.h.in
  1.1.2.1    +16 -1     ircd-hybrid-7/include/stdinc.h
  7.110.2.1  +2 -1      ircd-hybrid-7/src/Makefile.in
  7.270.2.1  +1 -0      ircd-hybrid-7/src/client.c
  7.29.2.1   +8 -1      ircd-hybrid-7/src/fdlist.c
  7.235.2.1  +18 -6     ircd-hybrid-7/src/ircd.c
  7.11.2.1   +5 -1      ircd-hybrid-7/src/ircd_signal.c
  7.81.2.1   +5 -1      ircd-hybrid-7/src/linebuf.c
  1.14.2.1   +1 -1      ircd-hybrid-7/src/md5.c
  7.82.2.1   +6 -0      ircd-hybrid-7/src/packet.c
  7.95.2.1   +3 -2      ircd-hybrid-7/src/s_auth.c
  7.169.2.1  +18 -4     ircd-hybrid-7/src/s_bsd.c
  7.26.2.1   +3 -2      ircd-hybrid-7/src/s_bsd_select.c
  7.303.2.1  +2 -2      ircd-hybrid-7/src/s_conf.c
  7.67.2.1   +5 -4      ircd-hybrid-7/src/s_debug.c
  7.255.2.1  +2 -2      ircd-hybrid-7/src/s_serv.c
  7.197.2.1  +7 -0      ircd-hybrid-7/src/send.c



androsyn    2002/05/26 01:56:21 EDT	(20020526_2)

  Modified files:
    .                    ChangeLog 
  Log:
  Test commit...
  
  Revision  Changes    Path
  7.3700    +4 -1      ircd-hybrid-7/ChangeLog





androsyn    2002/05/26 01:51:24 EDT	(20020526_1)

  Modified files:
    .                    ChangeLog 
  Log:
  Dumb ChangeLog script didn't understand branches...
  
  Revision  Changes    Path
  7.3698    +1 -12     ircd-hybrid-7/ChangeLog




androsyn    2002/05/25 05:05:56 EDT	(20020525_13)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Added a missing mask_our_signal()
  
  Revision  Changes    Path
  7.23      +1 -0      ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2002/05/25 05:00:16 EDT	(20020525_12)

  Modified files:
    src                  ircd_signal.c s_bsd_sigio.c 
  Log:
  Minor cleanups to RT Sigio
  
  Revision  Changes    Path
  7.11      +0 -5      ircd-hybrid-7/src/ircd_signal.c
  7.22      +5 -16     ircd-hybrid-7/src/s_bsd_sigio.c



>>>>>>> 7.3699
androsyn    2002/05/25 02:52:50 EDT	(20020525_11)

  Modified files:
    adns                 setup.c 
  Log:
  Make adns use the generic set non blocking routine
  
  Revision  Changes    Path
  1.27      +2 -10     ircd-hybrid-7/adns/setup.c



androsyn    2002/05/24 23:06:31 EDT	(20020525_10)

  Modified files:
    src                  linebuf.c packet.c send.c 
  Log:
  Change a few write() and read() calls to send() and recv()
  
  Revision  Changes    Path
  7.81      +2 -2      ircd-hybrid-7/src/linebuf.c
  7.82      +5 -5      ircd-hybrid-7/src/packet.c
  7.197     +2 -2      ircd-hybrid-7/src/send.c



androsyn    2002/05/24 21:55:22 EDT	(20020525_9)

  Modified files:
    src                  ircd_lexer.l 
  Log:
  Replace index() with strchr()
  
  Revision  Changes    Path
  1.139     +3 -3      ircd-hybrid-7/src/ircd_lexer.l



androsyn    2002/05/24 21:42:56 EDT	(20020525_8)

  Modified files:
    src                  s_bsd_select.c 
  Log:
  bcopy() people still use bcopy()?!?  Replaced those with memcpy()
  
  Revision  Changes    Path
  7.26      +2 -2      ircd-hybrid-7/src/s_bsd_select.c



androsyn    2002/05/24 21:38:11 EDT	(20020525_7)

  Modified files:
    include              modules.h 
  Log:
  Added missing prototypes..
  
  Revision  Changes    Path
  7.31      +2 -1      ircd-hybrid-7/include/modules.h



androsyn    2002/05/24 21:35:11 EDT	(20020525_6)

  Modified files:
    src                  md5.c 
  Log:
  Seed with something a bit more useful than pids
  
  Revision  Changes    Path
  1.14      +2 -2      ircd-hybrid-7/src/md5.c



androsyn    2002/05/24 21:24:53 EDT	(20020525_5)

  Modified files:
    src                  balloc.c 
  Log:
  Fix the non mmap() case of the block allocator
  
  Revision  Changes    Path
  7.32      +11 -9     ircd-hybrid-7/src/balloc.c



androsyn    2002/05/24 21:22:46 EDT	(20020525_4)

  Modified files:
    src                  event.c ircd.c s_user.c 
  Log:
  Change srandom/random to srand/rand which is a little more common
  
  Revision  Changes    Path
  7.28      +1 -1      ircd-hybrid-7/src/event.c
  7.235     +1 -1      ircd-hybrid-7/src/ircd.c
  7.194     +1 -1      ircd-hybrid-7/src/s_user.c



androsyn    2002/05/24 19:48:39 EDT	(20020525_3)

  Modified files:
    contrib              Makefile.in example_module.c 
                         m_clearchan.c m_flags.c m_force.c 
                         m_jupe.c m_ltrace.c m_map.c m_mkpasswd.c 
                         m_ojoin.c m_opme.c m_tburst.c 
                         spy_admin_notice.c spy_info_notice.c 
                         spy_links_notice.c spy_motd_notice.c 
                         spy_stats_notice.c spy_stats_p_notice.c 
                         spy_trace_notice.c spy_whois_notice.c 
  Log:
  Update contrib for the header changes and update .depend as well
  
  Revision  Changes    Path
  1.33      +1 -1      ircd-hybrid-7/contrib/Makefile.in
  1.6       +2 -3      ircd-hybrid-7/contrib/example_module.c
  1.29      +2 -2      ircd-hybrid-7/contrib/m_clearchan.c
  1.9       +2 -4      ircd-hybrid-7/contrib/m_flags.c
  1.7       +2 -2      ircd-hybrid-7/contrib/m_force.c
  1.29      +2 -2      ircd-hybrid-7/contrib/m_jupe.c
  1.2       +2 -3      ircd-hybrid-7/contrib/m_ltrace.c
  1.12      +2 -4      ircd-hybrid-7/contrib/m_map.c
  1.9       +2 -1      ircd-hybrid-7/contrib/m_mkpasswd.c
  1.7       +2 -1      ircd-hybrid-7/contrib/m_ojoin.c
  1.25      +2 -2      ircd-hybrid-7/contrib/m_opme.c
  1.8       +2 -2      ircd-hybrid-7/contrib/m_tburst.c
  1.6       +2 -2      ircd-hybrid-7/contrib/spy_admin_notice.c
  1.6       +2 -2      ircd-hybrid-7/contrib/spy_info_notice.c
  1.11      +2 -2      ircd-hybrid-7/contrib/spy_links_notice.c
  1.6       +2 -2      ircd-hybrid-7/contrib/spy_motd_notice.c
  1.12      +2 -2      ircd-hybrid-7/contrib/spy_stats_notice.c
  1.4       +2 -2      ircd-hybrid-7/contrib/spy_stats_p_notice.c
  1.6       +2 -2      ircd-hybrid-7/contrib/spy_trace_notice.c
  1.10      +2 -2      ircd-hybrid-7/contrib/spy_whois_notice.c



androsyn    2002/05/24 19:40:18 EDT	(20020525_2)

  Modified files:
    modules              .depend 
    src                  .depend 
  Log:
  Update .depend
  
  Revision  Changes    Path
  1.7       +712 -1    ircd-hybrid-7/modules/.depend
  7.6       +469 -480  ircd-hybrid-7/src/.depend



androsyn    2002/05/24 19:39:15 EDT	(20020525_1)

  Added files:
    include              stdinc.h 
  Log:
  Add stdinc.h
  
  Revision  Changes    Path
  1.1       +101 -0    ircd-hybrid-7/include/stdinc.h (new)



androsyn    2002/05/24 19:35:09 EDT	(20020525_0)

  Modified files:
    adns                 Makefile.in adns.h check.c event.c 
                         general.c parse.c query.c reply.c setup.c 
                         transmit.c types.c 
    include              balloc.h channel.h channel_mode.h 
                         client.h event.h fdlist.h fileio.h hash.h 
                         hostmask.h irc_string.h ircd.h 
                         ircd_defs.h ircd_getopt.h linebuf.h 
                         listener.h m_info.h memory.h modules.h 
                         motd.h msg.h numeric.h packet.h res.h 
                         resv.h rsa.h s_auth.h s_bsd.h s_conf.h 
                         s_debug.h s_gline.h s_misc.h s_serv.h 
                         s_stats.h s_user.h s_zip.h send.h 
                         sprintf_irc.h vchannel.h whowas.h 
    modules              Makefile.in m_accept.c m_admin.c m_away.c 
                         m_capab.c m_cburst.c m_challenge.c 
                         m_cjoin.c m_close.c m_connect.c 
                         m_cryptlink.c m_dmem.c m_drop.c m_eob.c 
                         m_gline.c m_help.c m_info.c m_invite.c 
                         m_ison.c m_join.c m_kline.c m_knock.c 
                         m_links.c m_list.c m_lljoin.c m_llnick.c 
                         m_locops.c m_lusers.c m_motd.c m_names.c 
                         m_nburst.c m_oper.c m_operwall.c m_pass.c 
                         m_ping.c m_pong.c m_post.c m_rehash.c 
                         m_restart.c m_resv.c m_set.c m_stats.c 
                         m_svinfo.c m_testline.c m_time.c 
                         m_topic.c m_trace.c m_unkline.c m_user.c 
                         m_userhost.c m_users.c m_version.c 
                         m_wallops.c m_who.c m_whois.c m_whowas.c 
    modules/core         m_die.c m_kick.c m_kill.c m_message.c 
                         m_mode.c m_nick.c m_part.c m_quit.c 
                         m_server.c m_sjoin.c m_squit.c 
    src                  Makefile.in adns.c balloc.c channel.c 
                         channel_mode.c class.c client.c crypt.c 
                         dynlink.c event.c fdlist.c fileio.c 
                         getopt.c hash.c hook.c hostmask.c 
                         irc_string.c ircd.c ircd_lexer.l 
                         ircd_parser.y ircd_signal.c ircdauth.c 
                         kdparse.c linebuf.c list.c listener.c 
                         m_error.c match.c md5.c memory.c 
                         modules.c motd.c numeric.c packet.c 
                         parse.c restart.c resv.c rsa.c s_auth.c 
                         s_bsd.c s_bsd_devpoll.c s_bsd_kqueue.c 
                         s_bsd_poll.c s_bsd_select.c s_bsd_sigio.c 
                         s_conf.c s_debug.c s_gline.c s_log.c 
                         s_misc.c s_serv.c s_stats.c s_user.c 
                         scache.c send.c snprintf.c sprintf_irc.c 
                         tools.c vchannel.c whowas.c 
  Log:
  Cleaned up the includes a *lot*.  System level includes are(mostly) going
  in include/stdinc.h
  
  Revision  Changes    Path
  1.13      +1 -1      ircd-hybrid-7/adns/Makefile.in
  1.7       +1 -8      ircd-hybrid-7/adns/adns.h
  1.6       +1 -0      ircd-hybrid-7/adns/check.c
  1.15      +1 -9      ircd-hybrid-7/adns/event.c
  1.11      +2 -7      ircd-hybrid-7/adns/general.c
  1.5       +2 -1      ircd-hybrid-7/adns/parse.c
  1.12      +2 -7      ircd-hybrid-7/adns/query.c
  1.8       +2 -3      ircd-hybrid-7/adns/reply.c
  1.26      +1 -13     ircd-hybrid-7/adns/setup.c
  1.10      +2 -6      ircd-hybrid-7/adns/transmit.c
  1.6       +2 -8      ircd-hybrid-7/adns/types.c
  1.9       +7 -14     ircd-hybrid-7/include/balloc.h
  7.114     +0 -7      ircd-hybrid-7/include/channel.h
  7.9       +0 -6      ircd-hybrid-7/include/channel_mode.h
  7.147     +0 -10     ircd-hybrid-7/include/client.h
  1.12      +3 -3      ircd-hybrid-7/include/event.h
  7.25      +0 -9      ircd-hybrid-7/include/fdlist.h
  7.11      +0 -11     ircd-hybrid-7/include/fileio.h
  7.18      +0 -4      ircd-hybrid-7/include/hash.h
  1.21      +4 -0      ircd-hybrid-7/include/hostmask.h
  7.36      +1 -11     ircd-hybrid-7/include/irc_string.h
  7.50      +0 -3      ircd-hybrid-7/include/ircd.h
  7.28      +2 -5      ircd-hybrid-7/include/ircd_defs.h
  1.3       +1 -1      ircd-hybrid-7/include/ircd_getopt.h
  1.23      +0 -2      ircd-hybrid-7/include/linebuf.h
  7.10      +2 -11     ircd-hybrid-7/include/listener.h
  7.40      +1 -2      ircd-hybrid-7/include/m_info.h
  7.30      +0 -2      ircd-hybrid-7/include/memory.h
  7.30      +1 -3      ircd-hybrid-7/include/modules.h
  7.10      +1 -8      ircd-hybrid-7/include/motd.h
  7.41      +1 -6      ircd-hybrid-7/include/msg.h
  7.27      +1 -2      ircd-hybrid-7/include/numeric.h
  7.16      +1 -4      ircd-hybrid-7/include/packet.h
  7.20      +1 -6      ircd-hybrid-7/include/res.h
  1.7       +0 -4      ircd-hybrid-7/include/resv.h
  7.10      +4 -0      ircd-hybrid-7/include/rsa.h
  7.16      +1 -6      ircd-hybrid-7/include/s_auth.h
  7.36      +1 -7      ircd-hybrid-7/include/s_bsd.h
  7.180     +0 -4      ircd-hybrid-7/include/s_conf.h
  7.4       +0 -4      ircd-hybrid-7/include/s_debug.h
  7.11      +1 -8      ircd-hybrid-7/include/s_gline.h
  7.7       +0 -4      ircd-hybrid-7/include/s_misc.h
  7.66      +1 -6      ircd-hybrid-7/include/s_serv.h
  7.7       +0 -3      ircd-hybrid-7/include/s_stats.h
  7.16      +1 -6      ircd-hybrid-7/include/s_user.h
  7.5       +1 -6      ircd-hybrid-7/include/s_zip.h
  7.57      +1 -2      ircd-hybrid-7/include/send.h
  7.8       +0 -1      ircd-hybrid-7/include/sprintf_irc.h
  7.20      +1 -11     ircd-hybrid-7/include/vchannel.h
  7.8       +0 -1      ircd-hybrid-7/include/whowas.h
  1.67      +1 -1      ircd-hybrid-7/modules/Makefile.in
  1.24      +2 -1      ircd-hybrid-7/modules/core/m_die.c
  1.44      +2 -2      ircd-hybrid-7/modules/core/m_kick.c
  1.64      +2 -2      ircd-hybrid-7/modules/core/m_kill.c
  1.92      +2 -2      ircd-hybrid-7/modules/core/m_message.c
  1.53      +2 -1      ircd-hybrid-7/modules/core/m_mode.c
  1.90      +2 -4      ircd-hybrid-7/modules/core/m_nick.c
  1.56      +3 -6      ircd-hybrid-7/modules/core/m_part.c
  1.25      +2 -1      ircd-hybrid-7/modules/core/m_quit.c
  1.83      +2 -3      ircd-hybrid-7/modules/core/m_server.c
  1.139     +2 -4      ircd-hybrid-7/modules/core/m_sjoin.c
  1.45      +2 -2      ircd-hybrid-7/modules/core/m_squit.c
  1.31      +2 -1      ircd-hybrid-7/modules/m_accept.c
  1.34      +2 -1      ircd-hybrid-7/modules/m_admin.c
  1.30      +2 -2      ircd-hybrid-7/modules/m_away.c
  1.28      +2 -1      ircd-hybrid-7/modules/m_capab.c
  1.41      +2 -3      ircd-hybrid-7/modules/m_cburst.c
  1.36      +3 -4      ircd-hybrid-7/modules/m_challenge.c
  1.54      +2 -3      ircd-hybrid-7/modules/m_cjoin.c
  1.23      +2 -1      ircd-hybrid-7/modules/m_close.c
  1.37      +2 -3      ircd-hybrid-7/modules/m_connect.c
  1.32      +3 -6      ircd-hybrid-7/modules/m_cryptlink.c
  1.15      +2 -1      ircd-hybrid-7/modules/m_dmem.c
  1.24      +2 -3      ircd-hybrid-7/modules/m_drop.c
  1.31      +2 -1      ircd-hybrid-7/modules/m_eob.c
  1.78      +2 -10     ircd-hybrid-7/modules/m_gline.c
  1.32      +2 -1      ircd-hybrid-7/modules/m_help.c
  1.57      +2 -5      ircd-hybrid-7/modules/m_info.c
  1.45      +2 -1      ircd-hybrid-7/modules/m_invite.c
  1.28      +2 -1      ircd-hybrid-7/modules/m_ison.c
  1.85      +2 -4      ircd-hybrid-7/modules/m_join.c
  1.102     +2 -9      ircd-hybrid-7/modules/m_kline.c
  1.50      +2 -2      ircd-hybrid-7/modules/m_knock.c
  1.36      +2 -3      ircd-hybrid-7/modules/m_links.c
  1.42      +2 -4      ircd-hybrid-7/modules/m_list.c
  1.57      +2 -4      ircd-hybrid-7/modules/m_lljoin.c
  1.20      +2 -4      ircd-hybrid-7/modules/m_llnick.c
  1.27      +2 -1      ircd-hybrid-7/modules/m_locops.c
  1.22      +2 -1      ircd-hybrid-7/modules/m_lusers.c
  1.29      +2 -4      ircd-hybrid-7/modules/m_motd.c
  1.42      +2 -4      ircd-hybrid-7/modules/m_names.c
  1.17      +2 -4      ircd-hybrid-7/modules/m_nburst.c
  1.46      +2 -3      ircd-hybrid-7/modules/m_oper.c
  1.29      +2 -1      ircd-hybrid-7/modules/m_operwall.c
  1.23      +2 -1      ircd-hybrid-7/modules/m_pass.c
  1.28      +2 -1      ircd-hybrid-7/modules/m_ping.c
  1.26      +2 -1      ircd-hybrid-7/modules/m_pong.c
  1.11      +2 -1      ircd-hybrid-7/modules/m_post.c
  1.40      +2 -1      ircd-hybrid-7/modules/m_rehash.c
  1.23      +2 -1      ircd-hybrid-7/modules/m_restart.c
  1.16      +2 -1      ircd-hybrid-7/modules/m_resv.c
  1.45      +2 -2      ircd-hybrid-7/modules/m_set.c
  1.109     +3 -3      ircd-hybrid-7/modules/m_stats.c
  1.34      +2 -5      ircd-hybrid-7/modules/m_svinfo.c
  1.25      +2 -2      ircd-hybrid-7/modules/m_testline.c
  1.25      +2 -1      ircd-hybrid-7/modules/m_time.c
  1.52      +2 -4      ircd-hybrid-7/modules/m_topic.c
  1.46      +2 -3      ircd-hybrid-7/modules/m_trace.c
  1.45      +2 -5      ircd-hybrid-7/modules/m_unkline.c
  1.23      +2 -2      ircd-hybrid-7/modules/m_user.c
  1.37      +2 -2      ircd-hybrid-7/modules/m_userhost.c
  1.25      +2 -1      ircd-hybrid-7/modules/m_users.c
  1.38      +2 -2      ircd-hybrid-7/modules/m_version.c
  1.29      +2 -1      ircd-hybrid-7/modules/m_wallops.c
  1.60      +3 -3      ircd-hybrid-7/modules/m_who.c
  1.77      +3 -6      ircd-hybrid-7/modules/m_whois.c
  1.27      +2 -4      ircd-hybrid-7/modules/m_whowas.c
  7.110     +1 -1      ircd-hybrid-7/src/Makefile.in
  7.41      +3 -1      ircd-hybrid-7/src/adns.c
  7.31      +14 -16    ircd-hybrid-7/src/balloc.c
  7.316     +2 -3      ircd-hybrid-7/src/channel.c
  7.40      +3 -3      ircd-hybrid-7/src/channel_mode.c
  7.36      +3 -2      ircd-hybrid-7/src/class.c
  7.270     +2 -8      ircd-hybrid-7/src/client.c
  7.4       +1 -3      ircd-hybrid-7/src/crypt.c
  7.3       +1 -16     ircd-hybrid-7/src/dynlink.c
  7.27      +2 -1      ircd-hybrid-7/src/event.c
  7.29      +2 -7      ircd-hybrid-7/src/fdlist.c
  7.22      +2 -8      ircd-hybrid-7/src/fileio.c
  7.14      +1 -4      ircd-hybrid-7/src/getopt.c
  7.41      +1 -11     ircd-hybrid-7/src/hash.c
  7.15      +1 -3      ircd-hybrid-7/src/hook.c
  7.64      +1 -2      ircd-hybrid-7/src/hostmask.c
  7.53      +1 -19     ircd-hybrid-7/src/irc_string.c
  7.234     +1 -28     ircd-hybrid-7/src/ircd.c
  1.138     +1 -17     ircd-hybrid-7/src/ircd_lexer.l
  1.250     +1 -6      ircd-hybrid-7/src/ircd_parser.y
  7.10      +1 -3      ircd-hybrid-7/src/ircd_signal.c
  7.48      +1 -13     ircd-hybrid-7/src/ircdauth.c
  7.7       +1 -6      ircd-hybrid-7/src/kdparse.c
  7.80      +1 -7      ircd-hybrid-7/src/linebuf.c
  7.44      +1 -3      ircd-hybrid-7/src/list.c
  7.67      +1 -8      ircd-hybrid-7/src/listener.c
  7.25      +1 -0      ircd-hybrid-7/src/m_error.c
  7.19      +2 -5      ircd-hybrid-7/src/match.c
  1.13      +1 -6      ircd-hybrid-7/src/md5.c
  7.35      +1 -9      ircd-hybrid-7/src/memory.c
  7.102     +1 -15     ircd-hybrid-7/src/modules.c
  7.24      +1 -4      ircd-hybrid-7/src/motd.c
  7.20      +1 -7      ircd-hybrid-7/src/numeric.c
  7.81      +1 -5      ircd-hybrid-7/src/packet.c
  7.127     +1 -5      ircd-hybrid-7/src/parse.c
  7.21      +1 -2      ircd-hybrid-7/src/restart.c
  7.16      +1 -3      ircd-hybrid-7/src/resv.c
  7.25      +1 -3      ircd-hybrid-7/src/rsa.c
  7.95      +1 -11     ircd-hybrid-7/src/s_auth.c
  7.169     +1 -18     ircd-hybrid-7/src/s_bsd.c
  7.14      +4 -19     ircd-hybrid-7/src/s_bsd_devpoll.c
  1.26      +4 -20     ircd-hybrid-7/src/s_bsd_kqueue.c
  7.54      +4 -22     ircd-hybrid-7/src/s_bsd_poll.c
  7.25      +3 -22     ircd-hybrid-7/src/s_bsd_select.c
  7.21      +3 -22     ircd-hybrid-7/src/s_bsd_sigio.c
  7.303     +1 -15     ircd-hybrid-7/src/s_conf.c
  7.67      +1 -17     ircd-hybrid-7/src/s_debug.c
  1.20      +1 -6      ircd-hybrid-7/src/s_gline.c
  7.41      +6 -11     ircd-hybrid-7/src/s_log.c
  7.29      +1 -9      ircd-hybrid-7/src/s_misc.c
  7.255     +1 -12     ircd-hybrid-7/src/s_serv.c
  7.20      +1 -4      ircd-hybrid-7/src/s_stats.c
  7.193     +1 -12     ircd-hybrid-7/src/s_user.c
  7.15      +1 -2      ircd-hybrid-7/src/scache.c
  7.196     +1 -11     ircd-hybrid-7/src/send.c
  1.6       +1 -6      ircd-hybrid-7/src/snprintf.c
  7.14      +1 -1      ircd-hybrid-7/src/sprintf_irc.c
  7.20      +1 -4      ircd-hybrid-7/src/tools.c
  7.64      +1 -3      ircd-hybrid-7/src/vchannel.c
  7.18      +1 -6      ircd-hybrid-7/src/whowas.c



db          2002/05/24 07:23:45 EDT	(20020524_3)

  Modified files:
    src                  client.c s_bsd.c 
  Log:
  <adx> first, we don't need to send queued data at the beginning of
  +exit_client, because it's going to be sent in close_connection..
  <adx> second, setting a client as dead before calling close_connection is not
  +a good idea
  <adx> because then he/she won't receive a Closing Link message
  <adx> client is set as dead in exit_one_client anyway..
  <adx> there is also sth in s_bsd.c, we're setting client as dead but it is
  +done by exit_client too
  
  - approved db
  
  Revision  Changes    Path
  7.269     +0 -4      ircd-hybrid-7/src/client.c
  7.168     +0 -1      ircd-hybrid-7/src/s_bsd.c



androsyn    2002/05/23 22:39:17 EDT	(20020524_2)

  Modified files:
    modules              m_post.c 
    src                  modules.c 
  Log:
  Add PUT and GET to m_post
  
  Revision  Changes    Path
  1.10      +19 -6     ircd-hybrid-7/modules/m_post.c
  7.101     +2 -0      ircd-hybrid-7/src/modules.c



leeh        2002/05/23 20:31:53 EDT	(20020524_1)

  Modified files:
    modules              m_cjoin.c 
  Log:
  - better fix
  
  Revision  Changes    Path
  1.53      +5 -4      ircd-hybrid-7/modules/m_cjoin.c



androsyn    2002/05/23 20:28:27 EDT	(20020524_0)

  Modified files:
    modules              m_cjoin.c 
  Log:
  /me beats lee over the head with a #endif
  
  Revision  Changes    Path
  1.52      +1 -2      ircd-hybrid-7/modules/m_cjoin.c



leeh        2002/05/23 18:20:17 EDT	(20020523_1)

  Modified files:
    .                    Hybrid-team 
    include              packet.h 
    modules              descrip.mms m_cjoin.c m_kline.c 
    src                  descrip.mms modules.c 
  Log:
  - larnes vms fixes
  - made flood prot a little less anal
  
  Revision  Changes    Path
  7.50      +1 -0      ircd-hybrid-7/Hybrid-team
  7.15      +2 -2      ircd-hybrid-7/include/packet.h
  1.6       +6 -1      ircd-hybrid-7/modules/descrip.mms
  1.51      +7 -1      ircd-hybrid-7/modules/m_cjoin.c
  1.101     +2 -4      ircd-hybrid-7/modules/m_kline.c
  7.10      +3 -2      ircd-hybrid-7/src/descrip.mms
  7.100     +2 -0      ircd-hybrid-7/src/modules.c



leeh        2002/05/23 12:52:21 EDT	(20020523_0)

  Modified files:
    include              setup.h_vms 
    src                  s_debug.c 
  Log:
  - fixes for memory count
  - vms fixes for larne
  
  Revision  Changes    Path
  7.10      +6 -0      ircd-hybrid-7/include/setup.h_vms
  7.66      +4 -6      ircd-hybrid-7/src/s_debug.c



leeh        2002/05/22 09:52:45 EDT	(20020522_0)

  Modified files:
    .                    RELNOTES 
    src                  client.c messages.tab 
  Log:
  - relnotes updates
  - misplaced : in messages.tab
  - an extern shouldnt really be static.. should it?
  
  Revision  Changes    Path
  1.28      +6 -5      ircd-hybrid-7/RELNOTES
  7.268     +3 -2      ircd-hybrid-7/src/client.c
  7.67      +1 -1      ircd-hybrid-7/src/messages.tab



androsyn    2002/05/20 19:07:42 EDT	(20020521_0)

  Modified files:
    include              client.h ircd.h send.h 
    src                  client.c packet.c send.c 
  Log:
  Okay..the abort_list is back.  Someday we will fix this properly *sigh*
  
  Revision  Changes    Path
  7.146     +1 -0      ircd-hybrid-7/include/client.h
  7.49      +1 -0      ircd-hybrid-7/include/ircd.h
  7.56      +0 -2      ircd-hybrid-7/include/send.h
  7.267     +35 -3     ircd-hybrid-7/src/client.c
  7.80      +3 -1      ircd-hybrid-7/src/packet.c
  7.195     +11 -97    ircd-hybrid-7/src/send.c



androsyn    2002/05/20 13:53:54 EDT	(20020520_5)

  Modified files:
    include              channel.h 
    src                  channel.c send.c 
  Log:
  Don't attempt to send to channels you just freed..dumbass
  
  Revision  Changes    Path
  7.113     +1 -1      ircd-hybrid-7/include/channel.h
  7.315     +9 -5      ircd-hybrid-7/src/channel.c
  7.194     +8 -6      ircd-hybrid-7/src/send.c



androsyn    2002/05/20 13:28:43 EDT	(20020520_4)

  Modified files:
    src                  send.c 
  Log:
  Another sanity check
  
  Revision  Changes    Path
  7.193     +3 -1      ircd-hybrid-7/src/send.c



androsyn    2002/05/20 13:11:24 EDT	(20020520_3)

  Modified files:
    src                  send.c 
  Log:
  Add another NULL dlink head check
  
  Revision  Changes    Path
  7.192     +1 -1      ircd-hybrid-7/src/send.c



androsyn    2002/05/20 12:41:15 EDT	(20020520_2)

  Modified files:
    include              client.h ircd.h send.h 
    src                  client.c packet.c send.c 
  Log:
  Remove the abort_list, it was the wrong fix.  Basically what we do now is,
  remove the user from the channel *before* we send the QUIT message to it.
  This new function is called sendto_remove_channels_local().  This function
  does this, also it checks to make sure that while doing the for() loop,
  list->head doesn't end up NULL.
  
  Revision  Changes    Path
  7.145     +0 -1      ircd-hybrid-7/include/client.h
  7.48      +0 -1      ircd-hybrid-7/include/ircd.h
  7.55      +2 -0      ircd-hybrid-7/include/send.h
  7.266     +3 -35     ircd-hybrid-7/src/client.c
  7.79      +1 -3      ircd-hybrid-7/src/packet.c
  7.191     +67 -7     ircd-hybrid-7/src/send.c



androsyn    2002/05/19 20:26:09 EDT	(20020520_1)

  Modified files:
    src                  client.c 
  Log:
  Add a sanity check.
  
  Revision  Changes    Path
  7.265     +1 -0      ircd-hybrid-7/src/client.c



androsyn    2002/05/19 20:22:45 EDT	(20020520_0)

  Modified files:
    src                  client.c 
  Log:
  Don't add clients with IsClosing set to the abort_list
  
  Revision  Changes    Path
  7.264     +4 -0      ircd-hybrid-7/src/client.c



androsyn    2002/05/18 23:42:25 EDT	(20020519_1)

  Modified files:
    src                  client.c ircd.c 
  Log:
  Put the stupid dead_list back..damnit
  
  Revision  Changes    Path
  7.263     +34 -3     ircd-hybrid-7/src/client.c
  7.233     +0 -1      ircd-hybrid-7/src/ircd.c



androsyn    2002/05/18 19:39:01 EDT	(20020519_0)

  Modified files:
    .                    RELNOTES 
  Log:
  Updated RELNOTES
  
  Revision  Changes    Path
  1.27      +1 -0      ircd-hybrid-7/RELNOTES



androsyn    2002/05/18 17:50:58 EDT	(20020518_4)

  Modified files:
    src                  s_auth.c 
  Log:
  Make unlink_auth_request use dlinkFind()
  
  Revision  Changes    Path
  7.93      +5 -15     ircd-hybrid-7/src/s_auth.c



androsyn    2002/05/18 16:58:34 EDT	(20020518_3)

  Modified files:
    src                  client.c 
  Log:
  Remove a stray prototype
  
  Revision  Changes    Path
  7.261     +0 -1      ircd-hybrid-7/src/client.c



androsyn    2002/05/18 16:53:54 EDT	(20020518_2)

  Modified files:
    include              client.h 
    src                  client.c ircd.c 
  Log:
  Remove the dead_list
  
  Revision  Changes    Path
  7.144     +0 -14     ircd-hybrid-7/include/client.h
  7.260     +2 -74     ircd-hybrid-7/src/client.c
  7.232     +0 -1      ircd-hybrid-7/src/ircd.c



androsyn    2002/05/18 03:12:10 EDT	(20020518_1)

  Modified files:
    include              client.h ircd.h 
    src                  client.c ircd.c packet.c send.c 
  Log:
  This *really* fixes the problem of clients getting freed more than once.
  
  Revision  Changes    Path
  7.143     +2 -1      ircd-hybrid-7/include/client.h
  7.47      +1 -1      ircd-hybrid-7/include/ircd.h
  7.259     +55 -0     ircd-hybrid-7/src/client.c
  7.231     +1 -1      ircd-hybrid-7/src/ircd.c
  7.77      +4 -1      ircd-hybrid-7/src/packet.c
  7.190     +47 -80    ircd-hybrid-7/src/send.c



androsyn    2002/05/18 01:42:21 EDT	(20020518_0)

  Modified files:
    src                  listener.c 
  Log:
  Removed bogus warning..
  
  Revision  Changes    Path
  7.66      +0 -12     ircd-hybrid-7/src/listener.c



db          2002/05/17 14:58:53 EDT	(20020517_3)

  Modified files:
    src                  send.c 
  Log:
  ptr->next should be ptr_next
  one never knows when a client will go dead underneath us in a send
  
  Revision  Changes    Path
  7.189     +21 -7     ircd-hybrid-7/src/send.c



db          2002/05/17 14:09:18 EDT	(20020517_2)

  Modified files:
    src                  send.c 
  Log:
  - Don't trust a pointer that can change underneath us
  
  Revision  Changes    Path
  7.188     +7 -3      ircd-hybrid-7/src/send.c



androsyn    2002/05/17 12:08:11 EDT	(20020517_1)

  Modified files:
    src                  client.c 
  Log:
  Removed a few of now redudant mem_frob()'s
  
  Revision  Changes    Path
  7.258     +0 -6      ircd-hybrid-7/src/client.c



androsyn    2002/05/17 12:07:14 EDT	(20020517_0)

  Modified files:
    include              tools.h 
    src                  balloc.c 
  Log:
  Adds a mem_frob() into BlockHeapFree()
  
  Revision  Changes    Path
  1.9       +4 -0      ircd-hybrid-7/include/tools.h
  7.30      +1 -0      ircd-hybrid-7/src/balloc.c



leeh        2002/05/16 15:38:02 EDT	(20020516_7)

  Modified files:
    contrib              m_opme.c 
  Log:
  - *cough*cough* that was a locptr, in my head..
  
  Revision  Changes    Path
  1.24      +6 -6      ircd-hybrid-7/contrib/m_opme.c



leeh        2002/05/16 15:14:49 EDT	(20020516_6)

  Modified files:
    contrib              m_clearchan.c m_force.c m_ojoin.c 
                         m_opme.c 
    modules/core         m_kick.c 
    src                  channel_mode.c 
  Log:
  - fixed a bug in channel_mode.c where to_list instead of loc_to_list was
    being checked.
  - contrib module fixes for #ifdef HALFOPS/VCHANS
  - unused variable in m_kick.c with #undef VCHANS
  
  Revision  Changes    Path
  1.28      +14 -1     ircd-hybrid-7/contrib/m_clearchan.c
  1.6       +3 -1      ircd-hybrid-7/contrib/m_force.c
  1.6       +11 -2     ircd-hybrid-7/contrib/m_ojoin.c
  1.23      +8 -1      ircd-hybrid-7/contrib/m_opme.c
  1.43      +3 -1      ircd-hybrid-7/modules/core/m_kick.c
  7.39      +5 -5      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/05/16 10:45:11 EDT	(20020516_5)

  Modified files:
    src                  balloc.c 
  Log:
  Minor changes to the block heap.
  
  Revision  Changes    Path
  7.29      +12 -7     ircd-hybrid-7/src/balloc.c



androsyn    2002/05/16 09:57:28 EDT	(20020516_4)

  Modified files:
    src                  balloc.c 
  Log:
  This should make the failure case of BlockHeapAlloc() a bit more robust.  If
  we end up with an out of memory condition, we attempt to garbage collect
  the heap and see if that frees anything.
  
  Revision  Changes    Path
  7.28      +10 -12    ircd-hybrid-7/src/balloc.c



androsyn    2002/05/16 06:18:09 EDT	(20020516_3)

  Modified files:
    src                  client.c 
  Log:
  Oops..had the logic backwards...
  
  Revision  Changes    Path
  7.257     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/05/16 06:15:47 EDT	(20020516_2)

  Modified files:
    src                  channel.c 
  Log:
  Go awayy stupid #endif
  
  Revision  Changes    Path
  7.314     +0 -1      ircd-hybrid-7/src/channel.c



androsyn    2002/05/16 02:17:43 EDT	(20020516_1)

  Modified files:
    src                  client.c 
  Log:
  Don't do send_queued_write() if the connection is dead.
  
  Revision  Changes    Path
  7.256     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/05/16 01:53:14 EDT	(20020516_0)

  Modified files:
    src                  channel.c 
  Log:
  Fixed a bug where we would not fully take care of removing a user from a
  channel.  Also added an assert if the usercount in a channel goes below 0
  in sub1_from_channel
  
  Revision  Changes    Path
  7.313     +6 -3      ircd-hybrid-7/src/channel.c



leeh        2002/05/14 07:41:41 EDT	(20020514_1)

  Modified files:
    include              channel.h vchannel.h 
    modules              m_cjoin.c m_invite.c m_join.c m_knock.c 
                         m_list.c m_lljoin.c m_names.c m_topic.c 
                         m_who.c m_whois.c 
    modules/core         m_kick.c m_message.c m_mode.c m_part.c 
                         m_sjoin.c 
    src                  channel.c ircd_parser.y s_serv.c 
                         vchannel.c 
  Log:
  - put vchans under #ifdef VCHANS
  
  Revision  Changes    Path
  7.112     +4 -0      ircd-hybrid-7/include/channel.h
  7.19      +7 -0      ircd-hybrid-7/include/vchannel.h
  1.42      +3 -1      ircd-hybrid-7/modules/core/m_kick.c
  1.91      +6 -3      ircd-hybrid-7/modules/core/m_message.c
  1.52      +6 -2      ircd-hybrid-7/modules/core/m_mode.c
  1.55      +3 -1      ircd-hybrid-7/modules/core/m_part.c
  1.138     +14 -6     ircd-hybrid-7/modules/core/m_sjoin.c
  1.50      +5 -1      ircd-hybrid-7/modules/m_cjoin.c
  1.44      +11 -2     ircd-hybrid-7/modules/m_invite.c
  1.84      +17 -6     ircd-hybrid-7/modules/m_join.c
  1.49      +17 -4     ircd-hybrid-7/modules/m_knock.c
  1.41      +12 -4     ircd-hybrid-7/modules/m_list.c
  1.56      +22 -4     ircd-hybrid-7/modules/m_lljoin.c
  1.41      +13 -3     ircd-hybrid-7/modules/m_names.c
  1.51      +7 -2      ircd-hybrid-7/modules/m_topic.c
  1.59      +14 -3     ircd-hybrid-7/modules/m_who.c
  1.76      +6 -2      ircd-hybrid-7/modules/m_whois.c
  7.312     +13 -1     ircd-hybrid-7/src/channel.c
  1.249     +5 -1      ircd-hybrid-7/src/ircd_parser.y
  7.254     +12 -2     ircd-hybrid-7/src/s_serv.c
  7.63      +3 -0      ircd-hybrid-7/src/vchannel.c



leeh        2002/05/13 19:34:06 EDT	(20020514_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  - splitting if()'s up is BAD.
  
    hotfuq as punishment..?
  
  Revision  Changes    Path
  7.38      +6 -7      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/05/13 00:21:19 EDT	(20020513_1)

  Modified files:
    src                  client.c 
  Log:
  Some more cleanups...
  
  Revision  Changes    Path
  7.255     +2 -6      ircd-hybrid-7/src/client.c



androsyn    2002/05/13 00:04:18 EDT	(20020513_0)

  Modified files:
    src                  client.c 
  Log:
  Added SetDead() to exit_one_client() maybe this will fix this goofy thing
  
  Revision  Changes    Path
  7.254     +1 -1      ircd-hybrid-7/src/client.c



leeh        2002/05/12 17:37:10 EDT	(20020512_4)

  Modified files:
    modules/core         m_sjoin.c 
  Log:
  - yes! align bits of code where I cant see them!
  
  Revision  Changes    Path
  1.137     +2 -2      ircd-hybrid-7/modules/core/m_sjoin.c



leeh        2002/05/12 12:43:52 EDT	(20020512_3)

  Modified files:
    src                  channel.c 
  Log:
  - better channel_member_names for #undef ANONOPS
  
  Revision  Changes    Path
  7.311     +81 -0     ircd-hybrid-7/src/channel.c



leeh        2002/05/12 10:50:53 EDT	(20020512_2)

  Modified files:
    include              channel.h channel_mode.h 
    modules              m_who.c 
    modules/core         m_kick.c m_sjoin.c 
    src                  channel.c channel_mode.c ircd_parser.y 
                         s_serv.c vchannel.c 
  Log:
  - adxs fix for an inverted if() in ircd_parser.y
  - bigger and badder HALFOPS and ANONOPS fixes, run children, run for your
    lives*!&(!
  
  Revision  Changes    Path
  7.111     +6 -0      ircd-hybrid-7/include/channel.h
  7.8       +3 -1      ircd-hybrid-7/include/channel_mode.h
  1.41      +5 -1      ircd-hybrid-7/modules/core/m_kick.c
  1.136     +51 -17    ircd-hybrid-7/modules/core/m_sjoin.c
  1.58      +61 -7     ircd-hybrid-7/modules/m_who.c
  7.310     +22 -0     ircd-hybrid-7/src/channel.c
  7.37      +25 -5     ircd-hybrid-7/src/channel_mode.c
  1.248     +1 -1      ircd-hybrid-7/src/ircd_parser.y
  7.253     +8 -0      ircd-hybrid-7/src/s_serv.c
  7.62      +2 -0      ircd-hybrid-7/src/vchannel.c



leeh        2002/05/12 08:28:17 EDT	(20020512_1)

  Modified files:
    include              channel.h 
  Log:
  - and ve call zis, an invisdible function.
  
  Revision  Changes    Path
  7.110     +0 -15     ircd-hybrid-7/include/channel.h



leeh        2002/05/12 08:15:24 EDT	(20020512_0)

  Modified files:
    .                    README.PLATFORMS 
    include              channel_mode.h config.h config.h.dist 
    src                  channel_mode.c ircd_parser.y s_conf.c 
                         s_debug.c send.c 
  Log:
  - updated README.PLATFORMS for NEXTSTEP
  - added defines for ANONOPS and HALFOPS which will comment out most of the
    actual code.  #ifdef EFNET will #undef these
  
    ill do vchans later.
  
  Revision  Changes    Path
  7.13      +3 -0      ircd-hybrid-7/README.PLATFORMS
  7.7       +5 -0      ircd-hybrid-7/include/channel_mode.h
  7.133     +16 -0     ircd-hybrid-7/include/config.h
  7.57      +16 -0     ircd-hybrid-7/include/config.h.dist
  7.36      +121 -13   ircd-hybrid-7/src/channel_mode.c
  1.247     +4 -0      ircd-hybrid-7/src/ircd_parser.y
  7.302     +4 -0      ircd-hybrid-7/src/s_conf.c
  7.65      +2 -0      ircd-hybrid-7/src/s_debug.c
  7.187     +8 -0      ircd-hybrid-7/src/send.c



leeh        2002/05/11 17:53:34 EDT	(20020511_3)

  Modified files:
    .                    configure 
  Log:
  - rebuilt configure, cheers hwy
  
  Revision  Changes    Path
  7.137     +244 -223  ircd-hybrid-7/configure



leeh        2002/05/11 17:07:28 EDT	(20020511_2)

  Modified files:
    autoconf             configure.in 
    include              setup.h.in 
  Log:
  - fixes.  can somebody please rebuild configure with autoconf2.1x?
  
  Revision  Changes    Path
  7.134     +12 -10    ircd-hybrid-7/autoconf/configure.in
  7.53      +3 -0      ircd-hybrid-7/include/setup.h.in



leeh        2002/05/11 16:43:10 EDT	(20020511_1)

  Modified files:
    autoconf             configure.in 
  Log:
  - added --efnet, will have to rebuild this in a sec on another box
  
  Revision  Changes    Path
  7.133     +10 -0     ircd-hybrid-7/autoconf/configure.in



lusky       2002/05/11 13:23:18 EDT	(20020511_0)

  Modified files:
    include              patchlevel.h 
  Log:
  - rev patchlevel to beta15
  
  Revision  Changes    Path
  7.30      +1 -1      ircd-hybrid-7/include/patchlevel.h



leeh        2002/05/10 15:24:53 EDT	(20020510_0)

  Modified files:
    modules/core         m_server.c 
  Log:
  - commented out the remote squitting of the newly introduced server, this
    wont work at all on large networks without causing havoc.
  
  Approved by:    db
  
  Revision  Changes    Path
  1.82      +16 -5     ircd-hybrid-7/modules/core/m_server.c



leeh        2002/05/09 07:06:55 EDT	(20020509_1)

  Modified files:
    contrib              temp-dline.diff 
  Log:
  - max tdlines at 7days, same as hyb6 patch
  
  Revision  Changes    Path
  1.2       +2 -2      ircd-hybrid-7/contrib/temp-dline.diff



leeh        2002/05/09 06:06:35 EDT	(20020509_0)

  Modified files:
    contrib              m_opme.c 
  Log:
  - reusing ptrs is bad.  silly fl_
  
  Revision  Changes    Path
  1.22      +9 -8      ircd-hybrid-7/contrib/m_opme.c



leeh        2002/05/08 10:40:30 EDT	(20020508_2)

  Modified files:
    contrib              m_opme.c 
  Log:
  - missing +ov stuff, missing local list stuff
  
  Revision  Changes    Path
  1.21      +24 -2     ircd-hybrid-7/contrib/m_opme.c



leeh        2002/05/08 08:19:52 EDT	(20020508_1)

  Modified files:
    contrib              README 
  Added files:
    contrib              temp-dline.diff 
  Log:
  - added my temp dline patch to contrib/
  
  Revision  Changes    Path
  1.18      +1 -0      ircd-hybrid-7/contrib/README
  1.1       +353 -0    ircd-hybrid-7/contrib/temp-dline.diff (new)



androsyn    2002/05/07 22:54:04 EDT	(20020508_0)

  Modified files:
    src                  getopt.c ircd.c 
  Log:
  Remove some remains of DEBUGMODE
  
  Revision  Changes    Path
  7.13      +0 -19     ircd-hybrid-7/src/getopt.c
  7.230     +0 -4      ircd-hybrid-7/src/ircd.c



leeh        2002/05/07 08:50:48 EDT	(20020507_1)

  Modified files:
    modules              m_challenge.c 
  Log:
  - move the IsOper check up, and make it send omotd
  
  Revision  Changes    Path
  1.35      +17 -11    ircd-hybrid-7/modules/m_challenge.c



db          2002/05/07 08:26:29 EDT	(20020507_0)

  Modified files:
    modules              m_challenge.c 
  Log:
  Hi,
  
      The attached diff fixes a bug in the challenge command that will let
  you oper more than once using PK authentication:
  submitted by "wiz", Jason Dambrosio
  
  approved db
  
  Revision  Changes    Path
  1.34      +11 -7     ircd-hybrid-7/modules/m_challenge.c



androsyn    2002/05/06 01:48:48 EDT	(20020506_0)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Add some logging about RT signal queue overflows.  It might be useful for
  this to get noticed by the admin.
  
  Revision  Changes    Path
  7.20      +1 -0      ircd-hybrid-7/src/s_bsd_sigio.c



leeh        2002/05/02 12:58:14 EDT	(20020502_0)

  Modified files:
    doc                  example.conf kline.txt 
                         whats-new.txt 
  Log:
  - misc documentation fixes and updates
  
  Revision  Changes    Path
  7.160     +2 -3      ircd-hybrid-7/doc/example.conf
  1.5       +69 -56    ircd-hybrid-7/doc/kline.txt
  7.36      +39 -17    ircd-hybrid-7/doc/whats-new.txt



leeh        2002/05/01 13:24:05 EDT	(20020501_1)

  Modified files:
    doc                  example.conf
    src                  channel_mode.c s_conf.c 
  Log:
  - added back code that makes restricted do something
  - fixed errors in the config (hi larne!)
  
  Revision  Changes    Path
  7.159     +6 -6      ircd-hybrid-7/doc/example.conf
  7.35      +11 -0     ircd-hybrid-7/src/channel_mode.c
  7.301     +3 -0      ircd-hybrid-7/src/s_conf.c



leeh        2002/05/01 12:36:08 EDT	(20020501_0)

  Modified files:
    doc                  convertconf-example.conf example.conf 
    tools                convertconf.c 
  Log:
  - rewrote nearly all of the config.  ugh.  its still horribly horribly
    long tho.. altho I shaved about 200 lines off.
  - added a '-b' (basic) option to convertconf that wont pull in the other
    blocks.
  - DAMNATION TO THE BRITISH.
  
  Revision  Changes    Path
  7.4       +209 -308  ircd-hybrid-7/doc/convertconf-example.conf
  7.158     +387 -612  ircd-hybrid-7/doc/example.conf
  1.33      +28 -9     ircd-hybrid-7/tools/convertconf.c



leeh        2002/04/30 13:43:20 EDT	(20020430_8)

  Modified files:
    src                  channel_mode.c 
  Log:
  - when +eI are disabled, send RPL_ENDOF(EXCEPT|INVITE)LIST so a client
    doesnt stall.
  
  Revision  Changes    Path
  7.34      +22 -0     ircd-hybrid-7/src/channel_mode.c



leeh        2002/04/30 13:21:25 EDT	(20020430_7)

  Modified files:
    doc                  convertconf-example.conf example.conf 
    src                  packet.c 
  Log:
  - fixed a > that shouldve been >=
  - added back flood control for opers.  will allow a burst of 16 lines,
    then 2 per second afterward.
  
  Revision  Changes    Path
  7.3       +3 -1      ircd-hybrid-7/doc/convertconf-example.conf
  7.157     +3 -1      ircd-hybrid-7/doc/example.conf
  7.76      +21 -4     ircd-hybrid-7/src/packet.c



leeh        2002/04/30 11:18:01 EDT	(20020430_6)

  Modified files:
    modules/core         m_sjoin.c 
  Log:
  - removed the nick chase crap from sjoin
  - better fake direction tracking
  
  Revision  Changes    Path
  1.135     +4 -11     ircd-hybrid-7/modules/core/m_sjoin.c



leeh        2002/04/30 10:29:17 EDT	(20020430_5)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - added code for silly people who dont know that cryptlinks need rsa
    keys, and normal confs need passwords :P
  
  Revision  Changes    Path
  1.246     +23 -5     ircd-hybrid-7/src/ircd_parser.y



leeh        2002/04/30 08:45:03 EDT	(20020430_4)

  Modified files:
    tools                README convertilines.c 
  Log:
  - added a license and updated readme
  
  Revision  Changes    Path
  7.10      +2 -1      ircd-hybrid-7/tools/README
  7.2       +25 -1     ircd-hybrid-7/tools/convertilines.c



leeh        2002/04/30 07:35:02 EDT	(20020430_3)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - missing "r"
  
  Revision  Changes    Path
  1.245     +1 -1      ircd-hybrid-7/src/ircd_parser.y



leeh        2002/04/30 06:46:53 EDT	(20020430_2)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - dont allow vhost="" in the connect {}; not when it sets aftype.
  - when we handle RSA stuff in oper {};, do it in yy_achead, then copy
    it to the other confs for multi user="".
  
  Revision  Changes    Path
  1.244     +27 -15    ircd-hybrid-7/src/ircd_parser.y



leeh        2002/04/29 19:57:26 EDT	(20020430_1)

  Modified files:
    doc                  example.conf
  Log:
  - we dont negotiate ciphers anymore.
  
  Revision  Changes    Path
  7.156     +3 -2      ircd-hybrid-7/doc/example.conf



leeh        2002/04/29 19:05:08 EDT	(20020430_0)

  Modified files:
    doc                  example.conf
  Log:
  - added a warning that example.conf is not for efnet.
  
  Revision  Changes    Path
  7.155     +17 -10    ircd-hybrid-7/doc/example.conf



leeh        2002/04/29 18:30:25 EDT	(20020429_3)

  Modified files:
    include              Makefile.in 
  Log:
  - larnes makefile fix.
  
  Revision  Changes    Path
  1.5       +2 -0      ircd-hybrid-7/include/Makefile.in



androsyn    2002/04/29 18:12:37 EDT	(20020429_2)

  Modified files:
    .                    configure 
    include              setup.h.in 
  Log:
  Rebuilt configure with autoconf 2.13
  
  Revision  Changes      Path
  7.136     +3077 -7081  ircd-hybrid-7/configure
  7.52      +1 -1        ircd-hybrid-7/include/setup.h.in



leeh        2002/04/29 15:59:07 EDT	(20020429_1)

  Modified files:
    include              hostmask.h 
  Log:
  - a 25 line single space indented struct with no linebreaks doesnt
    follow the normal coding style of ircd-hybrid.
  
  Revision  Changes    Path
  1.20      +27 -19    ircd-hybrid-7/include/hostmask.h



leeh        2002/04/29 12:58:07 EDT	(20020429_0)

  Modified files:
    modules              m_operwall.c m_wallops.c 
    modules/core         m_message.c 
  Log:
  - notice opers@server returned to hyb6 methods
  - prefix both a wallops/operwall done by an oper with "OPERWALL -",
    differentiating is pointless.
  
  Revision  Changes    Path
  1.90      +3 -7      ircd-hybrid-7/modules/core/m_message.c
  1.28      +3 -3      ircd-hybrid-7/modules/m_operwall.c
  1.28      +3 -3      ircd-hybrid-7/modules/m_wallops.c



leeh        2002/04/28 12:47:55 EDT	(20020428_7)

  Modified files:
    src                  messages.tab 
  Log:
  - shifted a %d so its a parameter
  
  Revision  Changes    Path
  7.66      +1 -1      ircd-hybrid-7/src/messages.tab



leeh        2002/04/28 12:38:24 EDT	(20020428_6)

  Modified files:
    include              supported.h 
  Log:
  - CASEMAPPING or CHARSET?  who cares, send both.
  
  Revision  Changes    Path
  1.22      +1 -0      ircd-hybrid-7/include/supported.h



leeh        2002/04/28 09:03:45 EDT	(20020428_5)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - set nicklen to (n+1) so nicklen*2 works.
    reported by adx
  
  Revision  Changes      Path
  7.132     +2 -2        ircd-hybrid-7/autoconf/configure.in
  7.135     +7081 -3077  ircd-hybrid-7/configure



androsyn    2002/04/28 04:14:28 EDT	(20020428_4)

  Modified files:
    src                  s_conf.c 
  Log:
  Fixed a potential NULL dereference in the DNS handling code...
  
  Revision  Changes    Path
  7.300     +1 -1      ircd-hybrid-7/src/s_conf.c



leeh        2002/04/27 21:29:09 EDT	(20020428_3)

  Modified files:
    src                  resv.c 
  Log:
  - removed an unneeded +len in MyMalloc()
  
  Revision  Changes    Path
  7.15      +2 -2      ircd-hybrid-7/src/resv.c



androsyn    2002/04/27 20:50:27 EDT	(20020428_2)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Fix the nanosleep check..
  
  Revision  Changes    Path
  7.131     +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.134     +1 -1      ircd-hybrid-7/configure



leeh        2002/04/27 20:26:09 EDT	(20020428_1)

  Modified files:
    .                    README.FIRST README.PLATFORMS RELNOTES 
    modules              m_stats.c 
    src                  s_serv.c 
  Log:
  Fix for GCC on SPARC compiling in 32-bit mode.  The solution is to not let
  GCC move things from the structure pointers in to a register, it apparently
  is too broken to figure out how to do this properly.  Instead, memcpy the
  structure to a local one on the stack, and use it.
  
  The GCC people were given a bug report on this and did nothing.  Considering
  the popularity of the SPARC platform, some shame should go around that a
  lowly IRCD coder had to spend some months trying to work around this, and
  that despite a bug report, the GCC people did/said nothing.
  
  Anyway, this now makes ircd-hybrid-7 work on SPARC systems with GCC.  Great!
  
  Submitted by:   virtual jmallett vDD (with superhotfuq support)
  Reviewed by:    db/leeh
  
  Revision  Changes    Path
  7.33      +0 -7      ircd-hybrid-7/README.FIRST
  7.12      +3 -3      ircd-hybrid-7/README.PLATFORMS
  1.25      +2 -0      ircd-hybrid-7/RELNOTES
  1.108     +9 -7      ircd-hybrid-7/modules/m_stats.c
  7.252     +35 -33    ircd-hybrid-7/src/s_serv.c



leeh        2002/04/27 19:55:49 EDT	(20020428_0)

  Modified files:
    .                    RELNOTES 
  Log:
  - we now have flood control
  
  Revision  Changes    Path
  1.24      +1 -1      ircd-hybrid-7/RELNOTES



db          2002/04/27 16:36:22 EDT	(20020427_4)

  Modified files:
    src                  client.c packet.c 
  Log:
  - ripped out #if 0 code. it looks horrible, and we have copies in cvs repo anyway.
  
  Revision  Changes    Path
  7.253     +0 -20     ircd-hybrid-7/src/client.c
  7.75      +0 -39     ircd-hybrid-7/src/packet.c



leeh        2002/04/27 16:34:34 EDT	(20020427_3)

  Modified files:
    src                  channel_mode.c 
  Log:
  - dont allow users to set unlimited +/-h modes.  if they want to set them,
    they can abide MAXMODEPARAMS and the flood protection.
  
  Approved by:    virtual dianora v2.1
  
  Revision  Changes    Path
  7.33      +1 -2      ircd-hybrid-7/src/channel_mode.c



leeh        2002/04/27 13:59:37 EDT	(20020427_2)

  Modified files:
    include              packet.h 
    modules              m_away.c m_topic.c 
    modules/core         m_message.c m_mode.c m_nick.c m_part.c 
    src                  packet.c s_auth.c s_user.c 
  Log:
  - flood code.
  
  Revision  Changes    Path
  7.14      +10 -4     ircd-hybrid-7/include/packet.h
  1.89      +3 -2      ircd-hybrid-7/modules/core/m_message.c
  1.51      +3 -2      ircd-hybrid-7/modules/core/m_mode.c
  1.89      +4 -2      ircd-hybrid-7/modules/core/m_nick.c
  1.54      +3 -3      ircd-hybrid-7/modules/core/m_part.c
  1.29      +5 -1      ircd-hybrid-7/modules/m_away.c
  1.50      +5 -1      ircd-hybrid-7/modules/m_topic.c
  7.74      +48 -12    ircd-hybrid-7/src/packet.c
  7.92      +1 -1      ircd-hybrid-7/src/s_auth.c
  7.192     +2 -2      ircd-hybrid-7/src/s_user.c



leeh        2002/04/27 08:20:38 EDT	(20020427_1)

  Modified files:
    doc                  vchans.txt 
  Log:
  - brought the vchan doc up to date with how they currently work.
  
  Revision  Changes    Path
  1.2       +54 -76    ircd-hybrid-7/doc/vchans.txt



leeh        2002/04/27 05:30:52 EDT	(20020427_0)

  Modified files:
    contrib              m_jupe.c 
    doc                  whats-new.txt 
    include              supported.h 
  Log:
  - added the 'CALLERID' token to 005, for +g, as agreed with austhex
    developers
  - idiot proofing, dont allow people to jupe their own server.
  
  Revision  Changes    Path
  1.28      +9 -2      ircd-hybrid-7/contrib/m_jupe.c
  7.35      +1 -0      ircd-hybrid-7/doc/whats-new.txt
  1.21      +2 -1      ircd-hybrid-7/include/supported.h



leeh        2002/04/26 11:27:34 EDT	(20020426_5)

  Modified files:
    modules/core         m_nick.c 
    src                  parse.c 
  Log:
  - added an ID collision check, which nukes both clients.
  - ignore ERR_UNKNOWNNICK directed at us from servers.  until we can
    guarantee both servers will do the "right thing" on a nick collision,
    we have to kill both clients, ours and theirs.  unfortunately if BOTH
    servers do this, we get ERR_UNKNOWNNICK.
  
    ugh.
  
  Revision  Changes    Path
  1.88      +26 -2     ircd-hybrid-7/modules/core/m_nick.c
  7.126     +14 -3     ircd-hybrid-7/src/parse.c



leeh        2002/04/26 09:26:30 EDT	(20020426_4)

  Modified files:
    contrib              README 
  Added files:
    contrib              remote-unkline.diff 
  Log:
  - added a patch to give support for remote-unklines.  too late to go in
    src/, so here it is.
  
  Revision  Changes    Path
  1.17      +34 -2     ircd-hybrid-7/contrib/README
  1.1       +394 -0    ircd-hybrid-7/contrib/remote-unkline.diff (new)



leeh        2002/04/26 08:30:38 EDT	(20020426_3)

  Modified files:
    src                  m_error.c 
  Log:
  - only call exit_client() if MyClient(), else you have the situation where
    if you get a command from a remote server we dont know, we exit the
    client, the other server doesnt, and you get a desync.
  
  Revision  Changes    Path
  7.24      +3 -1      ircd-hybrid-7/src/m_error.c



leeh        2002/04/26 07:51:21 EDT	(20020426_2)

  Modified files:
    modules              m_kline.c 
  Log:
  - remote servers cant set klines, we need to be checking !MyClient(), not
    IsServer().
  
  Revision  Changes    Path
  1.100     +5 -4      ircd-hybrid-7/modules/m_kline.c



leeh        2002/04/26 06:52:12 EDT	(20020426_1)

  Modified files:
    modules/core         m_sjoin.c 
  Log:
  - added back the notices for TS change in SJOIN that ran away from home.
  
  Revision  Changes    Path
  1.134     +15 -1     ircd-hybrid-7/modules/core/m_sjoin.c



leeh        2002/04/25 20:47:37 EDT	(20020426_0)

  Modified files:
    .                    RELNOTES 
  Log:
  - brought relnotes upto date
  
  Revision  Changes    Path
  1.23      +9 -0      ircd-hybrid-7/RELNOTES



leeh        2002/04/25 15:37:48 EDT	(20020425_6)

  Modified files:
    modules/core         m_sjoin.c 
  Log:
  - only allow +a in sjoin if enabled.
  
  Revision  Changes    Path
  1.133     +3 -2      ircd-hybrid-7/modules/core/m_sjoin.c



leeh        2002/04/25 13:57:43 EDT	(20020425_5)

  Modified files:
    modules              m_info.c 
  Log:
  - and /info..
  
  Revision  Changes    Path
  1.56      +7 -1      ircd-hybrid-7/modules/m_info.c



leeh        2002/04/25 13:55:22 EDT	(20020425_4)

  Modified files:
    doc                  convertconf-example.conf 
  Log:
  - add it to the example conf convertconf uses too
  
  Revision  Changes    Path
  7.2       +13 -0     ircd-hybrid-7/doc/convertconf-example.conf



leeh        2002/04/25 13:53:25 EDT	(20020425_3)

  Modified files:
    doc                  example.conf
    include              s_conf.h 
    src                  channel_mode.c ircd.c ircd_lexer.l 
                         ircd_parser.y s_conf.c 
  Log:
  - changed the sendto_realops_flags() when +h has changed status to an
    ilog(), we dont want this *every* time we unkline something, ugh.
  - added use_anonops, disabled by default with comments reflecting theyre
    slightly broken.
  - made the use_invex/halfops/anonops/except actually ignore the modes
    from local users if theyre unset (duh!)
  
  Revision  Changes    Path
  7.154     +13 -0     ircd-hybrid-7/doc/example.conf
  7.179     +1 -0      ircd-hybrid-7/include/s_conf.h
  7.32      +39 -9     ircd-hybrid-7/src/channel_mode.c
  7.229     +4 -0      ircd-hybrid-7/src/ircd.c
  1.137     +2 -1      ircd-hybrid-7/src/ircd_lexer.l
  1.243     +31 -6     ircd-hybrid-7/src/ircd_parser.y
  7.299     +6 -3      ircd-hybrid-7/src/s_conf.c



leeh        2002/04/25 12:25:05 EDT	(20020425_2)

  Modified files:
    contrib              m_clearchan.c 
  Log:
  - incrementing sptr->user->joined then calling add_user_to_channel which
    also increments it isnt exactly a good idea
  
  Revision  Changes    Path
  1.27      +1 -3      ircd-hybrid-7/contrib/m_clearchan.c



leeh        2002/04/25 05:38:40 EDT	(20020425_1)

  Modified files:
    src                  client.c 
  Log:
  - ints need a return number..
  
  Revision  Changes    Path
  7.252     +1 -1      ircd-hybrid-7/src/client.c



leeh        2002/04/25 04:54:50 EDT	(20020425_0)

  Modified files:
    src                  client.c 
  Log:
  - a1kmms fix for the core
  
  Revision  Changes    Path
  7.251     +6 -0      ircd-hybrid-7/src/client.c



leeh        2002/04/23 10:26:31 EDT	(20020423_2)

  Modified files:
    include              defaults.h ircd.h 
    modules              m_set.c 
    src                  ircd.c s_auth.c 
  Log:
  - commited my/joans ident stuff
  
  Approved by:    diane
  
  Revision  Changes    Path
  7.5       +2 -0      ircd-hybrid-7/include/defaults.h
  7.46      +1 -0      ircd-hybrid-7/include/ircd.h
  1.44      +25 -1     ircd-hybrid-7/modules/m_set.c
  7.228     +2 -0      ircd-hybrid-7/src/ircd.c
  7.91      +3 -1      ircd-hybrid-7/src/s_auth.c



leeh        2002/04/23 10:25:24 EDT	(20020423_1)

  Modified files:
    contrib              README spy_admin_notice.c 
                         spy_info_notice.c spy_links_notice.c 
                         spy_motd_notice.c 
  Log:
  - updated README wrt ltrace
  - removed some bogus MyConnect(source_p)
  
  Revision  Changes    Path
  1.16      +6 -2      ircd-hybrid-7/contrib/README
  1.5       +2 -3      ircd-hybrid-7/contrib/spy_admin_notice.c
  1.5       +2 -3      ircd-hybrid-7/contrib/spy_info_notice.c
  1.10      +2 -3      ircd-hybrid-7/contrib/spy_links_notice.c
  1.5       +2 -3      ircd-hybrid-7/contrib/spy_motd_notice.c



leeh        2002/04/23 06:34:59 EDT	(20020423_0)

  Modified files:
    contrib              Makefile.in spy_trace_notice.c 
  Added files:
    contrib              m_ltrace.c 
  Log:
  - added a very cutdown version of ltrace, modded spy_trace_notice to
    watch for ltrace too.
  
  Revision  Changes    Path
  1.32      +1 -0      ircd-hybrid-7/contrib/Makefile.in
  1.1       +337 -0    ircd-hybrid-7/contrib/m_ltrace.c (new)
  1.5       +16 -5     ircd-hybrid-7/contrib/spy_trace_notice.c



leeh        2002/04/22 18:16:59 EDT	(20020422_2)

  Modified files:
    src                  s_conf.c 
  Log:
  - english spellings vs american spellings.. made them all the same
  
  Revision  Changes    Path
  7.298     +2 -2      ircd-hybrid-7/src/s_conf.c



leeh        2002/04/22 16:50:18 EDT	(20020422_1)

  Modified files:
    src                  channel.c channel_mode.c 
  Log:
  - fixed two bugs reported by ShadowDog <esast@shadow.no>
    - an +ov user being sent +nick on a +a channel
    - server 'resynced' an opped users +v mode on +a channel, they can
      already see it as theyre opped.
  
  Revision  Changes    Path
  7.309     +8 -0      ircd-hybrid-7/src/channel.c
  7.31      +2 -5      ircd-hybrid-7/src/channel_mode.c



leeh        2002/04/22 13:26:57 EDT	(20020422_0)

  Modified files:
    src                  channel_mode.c 
  Log:
  - re-enabled mode counting for +v
  - moved the post increments to pre increments, to bring the limit back
    down to MAXMODEPARAMS
  - took a couple of magic numbers out back and shot them.
  
  Revision  Changes    Path
  7.30      +7 -8      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/04/21 13:18:23 EDT	(20020421_1)

  Modified files:
    .                    RELNOTES 
  Log:
  Test
  
  Revision  Changes    Path
  1.22      +1 -1      ircd-hybrid-7/RELNOTES



leeh        2002/04/21 08:59:40 EDT	(20020421_0)

  Modified files:
    help/opers           knock 
  Log:
  - s/+s/+p for when you cant knock
  
  Revision  Changes    Path
  1.2       +1 -1      ircd-hybrid-7/help/opers/knock



leeh        2002/04/20 13:47:50 EDT	(20020420_2)

  Modified files:
    include              channel.h 
  Log:
  - redefine REQUIRE_OANDV
  
  Revision  Changes    Path
  7.109     +1 -1      ircd-hybrid-7/include/channel.h



leeh        2002/04/20 13:47:17 EDT	(20020420_1)

  Modified files:
    src                  channel.c 
  Log:
  - add @+users to chptr->chanops when #ifndef REQUIRE_OANDV
  
  Revision  Changes    Path
  7.308     +6 -0      ircd-hybrid-7/src/channel.c



leeh        2002/04/20 13:34:00 EDT	(20020420_0)

  Modified files:
    include              channel.h 
    modules              m_who.c 
    modules/core         m_sjoin.c 
  Log:
  - wrapped some +ov stuff in #ifdef's.
  - removed chptr->ts_winner
  
  Revision  Changes    Path
  7.108     +0 -1      ircd-hybrid-7/include/channel.h
  1.132     +10 -6     ircd-hybrid-7/modules/core/m_sjoin.c
  1.57      +3 -1      ircd-hybrid-7/modules/m_who.c



leeh        2002/04/19 12:21:08 EDT	(20020419_0)

  Modified files:
    include              channel.h 
    modules/core         m_nick.c 
  Log:
  - wrapped chanops_voiced list in an #ifdef
  - mark grace period complete on nickchange
  
  Revision  Changes    Path
  7.107     +3 -1      ircd-hybrid-7/include/channel.h
  1.87      +4 -1      ircd-hybrid-7/modules/core/m_nick.c



leeh        2002/04/18 15:11:10 EDT	(20020418_2)

  Modified files:
    modules              m_who.c 
  Log:
  - dont allow people to use /who <server> when serverhide is enabled.
  
  Revision  Changes    Path
  1.56      +6 -2      ircd-hybrid-7/modules/m_who.c



db          2002/04/18 12:12:15 EDT	(20020418_1)

  Modified files:
    contrib              m_clearchan.c 
    src                  channel.c 
  Log:
  Two patches sent in by adx
  - clear +ov members in channel.c
  - use block heap free in m_clearchan.c
  
  approved db
  
  Revision  Changes    Path
  1.26      +3 -2      ircd-hybrid-7/contrib/m_clearchan.c
  7.307     +6 -0      ircd-hybrid-7/src/channel.c



leeh        2002/04/18 09:15:53 EDT	(20020418_0)

  Modified files:
    modules/core         m_mode.c 
  Log:
  - only call SetFloodDone() when a client sets a mode in a channel, not
    when they set a usermode/query a channels mode
  
  Revision  Changes    Path
  1.50      +7 -3      ircd-hybrid-7/modules/core/m_mode.c



leeh        2002/04/16 22:25:47 EDT	(20020417_2)

  Modified files:
    contrib              m_tburst.c 
    doc                  modes.txt 
    include              channel_mode.h 
    modules              m_invite.c 
  Log:
  - documented in modes.txt that +p also restricts halfops +/-h'ing
  - I commited some debugging stuff to m_tburst.c, removed
  - added macro ParanoidChannel, checks +pi, not just +p
  - made invite use above macro.
  - biscuits.
  
  Revision  Changes    Path
  1.7       +1 -5      ircd-hybrid-7/contrib/m_tburst.c
  7.8       +3 -2      ircd-hybrid-7/doc/modes.txt
  7.6       +3 -0      ircd-hybrid-7/include/channel_mode.h
  1.43      +3 -3      ircd-hybrid-7/modules/m_invite.c



leeh        2002/04/16 21:02:22 EDT	(20020417_1)

  Modified files:
    contrib              m_tburst.c 
    include              channel.h ircd_defs.h 
    src                  channel_mode.c 
  Log:
  - added a strcmp() to tburst, to take account of deltas
  - bumped KEYLEN to 24 (23+1), resolving the problem with the strlcpy()
    only copying 22 chars
  - send chptr->mode.key out (the truncated key) instead of key
    (what was sent in the mode)
  
  Revision  Changes    Path
  1.6       +5 -1      ircd-hybrid-7/contrib/m_tburst.c
  7.106     +1 -1      ircd-hybrid-7/include/channel.h
  7.27      +3 -1      ircd-hybrid-7/include/ircd_defs.h
  7.29      +2 -2      ircd-hybrid-7/src/channel_mode.c



leeh        2002/04/16 20:05:13 EDT	(20020417_0)

  Modified files:
    include              irc_string.h 
    src                  ircd_parser.y match.c s_conf.c 
  Log:
  - duplicated match() into match_esc() and collapse() into collapse_esc()
  - removed escaping from match() and collapse()
  - run collapse_esc() before we add a gecos {};
  - make gecos {}; use match_esc()
  
  Revision  Changes    Path
  7.35      +8 -0      ircd-hybrid-7/include/irc_string.h
  1.242     +1 -0      ircd-hybrid-7/src/ircd_parser.y
  7.18      +122 -39   ircd-hybrid-7/src/match.c
  7.297     +1 -1      ircd-hybrid-7/src/s_conf.c



leeh        2002/04/15 18:51:43 EDT	(20020415_7)

  Modified files:
    .                    RELNOTES 
  Log:
  - updated RELNOTES
  
  Revision  Changes    Path
  1.21      +4 -18     ircd-hybrid-7/RELNOTES



leeh        2002/04/15 14:15:15 EDT	(20020415_6)




leeh        2002/04/15 12:31:41 EDT	(20020415_5)

  Modified files:
    src                  client.c 
  Log:
  - mistook an ifdef for an ifndef
  
  Revision  Changes    Path
  7.250     +2 -2      ircd-hybrid-7/src/client.c



db          2002/04/15 10:17:01 EDT	(20020415_4)

  Modified files:
    doc                  serverhide.txt 
  Log:
  - updated serverhide.txt as amended by Wendy
  approved db
  
  Revision  Changes    Path
  7.4       +1 -4      ircd-hybrid-7/doc/serverhide.txt



db          2002/04/15 02:13:30 EDT	(20020415_3)

  Modified files:
    contrib              m_tburst.c 
  Log:
  speeeeeeeeeelllllliiiinnnnnggggggggg
  
  Revision  Changes    Path
  1.5       +2 -2      ircd-hybrid-7/contrib/m_tburst.c



leeh        2002/04/14 21:14:43 EDT	(20020415_2)

  Modified files:
    src                  client.c s_bsd.c 
  Log:
  - my attempt at the ctrlfd core fix
  
  Revision  Changes    Path
  7.249     +16 -2     ircd-hybrid-7/src/client.c
  7.166     +9 -7      ircd-hybrid-7/src/s_bsd.c



leeh        2002/04/14 20:05:49 EDT	(20020415_1)

  Modified files:
    modules              m_post.c m_resv.c 
    src                  event.c hook.c linebuf.c resv.c 
                         s_bsd_devpoll.c s_bsd_kqueue.c 
                         s_bsd_poll.c s_bsd_select.c s_bsd_sigio.c 
  Log:
  - added more credits back
  
  Approved by: diane
  
  Revision  Changes    Path
  1.9       +2 -2      ircd-hybrid-7/modules/m_post.c
  1.15      +2 -2      ircd-hybrid-7/modules/m_resv.c
  7.26      +20 -1     ircd-hybrid-7/src/event.c
  7.14      +1 -1      ircd-hybrid-7/src/hook.c
  7.79      +2 -1      ircd-hybrid-7/src/linebuf.c
  7.14      +1 -1      ircd-hybrid-7/src/resv.c
  7.13      +2 -1      ircd-hybrid-7/src/s_bsd_devpoll.c
  1.25      +2 -1      ircd-hybrid-7/src/s_bsd_kqueue.c
  7.53      +2 -1      ircd-hybrid-7/src/s_bsd_poll.c
  7.24      +2 -1      ircd-hybrid-7/src/s_bsd_select.c
  7.19      +3 -1      ircd-hybrid-7/src/s_bsd_sigio.c



leeh        2002/04/14 19:46:48 EDT	(20020415_0)

  Modified files:
    src                  crypt.c 
  Log:
  - changing the licenses other people put coder under is a Bad Thing (tm)
  
  Revision  Changes    Path
  7.3       +7 -17     ircd-hybrid-7/src/crypt.c



androsyn    2002/04/14 18:13:49 EDT	(20020414_9)

  Modified files:
    src                  balloc.c 
  Log:
  Fixed the credit lines on this.  Joan originally wrote and she should get
  credit for it.
  
  Revision  Changes    Path
  7.27      +6 -0      ircd-hybrid-7/src/balloc.c



androsyn    2002/04/14 18:10:42 EDT	(20020414_8)

  Modified files:
    src                  adns.c 
  Log:
  Put back my original copyright line....
  
  Revision  Changes    Path
  7.40      +1 -0      ircd-hybrid-7/src/adns.c



leeh        2002/04/14 17:50:17 EDT	(20020414_7)

  Modified files:
    src                  numeric.c 
  Log:
  - hwys fix for the gettext/message locale stuff
  
  Revision  Changes    Path
  7.19      +1 -1      ircd-hybrid-7/src/numeric.c



leeh        2002/04/14 15:42:37 EDT	(20020414_6)

  Modified files:
    contrib              m_force.c m_tburst.c 
  Log:
  - added a license
  
  Revision  Changes    Path
  1.5       +25 -1     ircd-hybrid-7/contrib/m_force.c
  1.4       +25 -1     ircd-hybrid-7/contrib/m_tburst.c



leeh        2002/04/14 10:56:34 EDT	(20020414_5)

  Modified files:
    contrib              m_clearchan.c m_force.c m_ojoin.c 
                         m_opme.c 
    src                  client.c 
  Log:
  - fixed some headers and copyrights.
  
  Revision  Changes    Path
  1.25      +3 -7      ircd-hybrid-7/contrib/m_clearchan.c
  1.4       +2 -2      ircd-hybrid-7/contrib/m_force.c
  1.5       +3 -8      ircd-hybrid-7/contrib/m_ojoin.c
  1.20      +3 -8      ircd-hybrid-7/contrib/m_opme.c
  7.248     +4 -7      ircd-hybrid-7/src/client.c



leeh        2002/04/14 07:06:48 EDT	(20020414_4)

  Modified files:
    modules/core         m_kill.c 
  Log:
  - fixed a bug with only sending :nick KILL instead of :nick!user@host KILL
    to target, reported by jv.
  
  Revision  Changes    Path
  1.63      +17 -8     ircd-hybrid-7/modules/core/m_kill.c



leeh        2002/04/14 05:50:02 EDT	(20020414_3)

  Modified files:
    contrib              m_clearchan.c m_force.c 
  Log:
  - adx's patches to fix clearchan/force.
  
  Revision  Changes    Path
  1.24      +23 -10    ircd-hybrid-7/contrib/m_clearchan.c
  1.3       +2 -2      ircd-hybrid-7/contrib/m_force.c



leeh        2002/04/14 05:39:33 EDT	(20020414_2)

  Modified files:
    src                  channel_mode.c 
  Log:
  - commited a1kmms fix for mode changes:
  
    Looking at that code it seems that nc and mc are mixed up in
    some places. nc should be the number of modes, mc should be
    the number of parameters, so should only get incremented
    when there is an argument to the mode.
  
  Revision  Changes    Path
  7.28      +10 -12    ircd-hybrid-7/src/channel_mode.c



lusky       2002/04/13 23:28:19 EDT	(20020414_1)

  Modified files:
    include              patchlevel.h 
  Log:
  - revved patchlevel to 7beta14
  
  Revision  Changes    Path
  7.29      +1 -1      ircd-hybrid-7/include/patchlevel.h



leeh        2002/04/13 20:11:49 EDT	(20020414_0)

  Modified files:
    .                    RELNOTES 
  Log:
  - brought RELNOTES into sync, cleared b13 notes.
  
  Revision  Changes    Path
  1.20      +4 -11     ircd-hybrid-7/RELNOTES



leeh        2002/04/13 17:12:48 EDT	(20020413_7)

  Modified files:
    include              patchlevel.h 
  Log:
  - nuked release names, playtimes over :(
  
  Revision  Changes    Path
  7.28      +1 -3      ircd-hybrid-7/include/patchlevel.h



androsyn    2002/04/13 11:37:10 EDT	(20020413_6)

  Modified files:
    contrib              m_tburst.c 
  Log:
  Make things a little more consistant.
  
  Revision  Changes    Path
  1.3       +3 -3      ircd-hybrid-7/contrib/m_tburst.c



leeh        2002/04/13 11:30:34 EDT	(20020413_5)

  Modified files:
    contrib              Makefile.in README 
  Log:
  - updated README/Makefile for the modules thatve been repo moved.
  
  Revision  Changes    Path
  1.31      +6 -2      ircd-hybrid-7/contrib/Makefile.in
  1.15      +20 -1     ircd-hybrid-7/contrib/README



leeh        2002/04/13 10:58:02 EDT	(20020413_4)

  Modified files:
    contrib              Makefile.in 
  Log:
  - updated the Makefile to include m_tburst.c, which has been repo moved
  
  Revision  Changes    Path
  1.30      +1 -0      ircd-hybrid-7/contrib/Makefile.in



leeh        2002/04/13 10:46:02 EDT	(20020413_3)

  Modified files:
    src                  ircd.c 
  Log:
  - initialise default_server_capabs to CAP_MASK when we declare it..
    this allows tburst to work.
  
  Revision  Changes    Path
  7.227     +1 -4      ircd-hybrid-7/src/ircd.c



leeh        2002/04/13 09:18:34 EDT	(20020413_2)

  Modified files:
    src                  fileio.c 
    include              fileio.h 
  Log:
  - made file_open and file_close extern, theyre needed by other things
  
  Revision  Changes    Path
  7.10      +3 -0      ircd-hybrid-7/include/fileio.h
  7.21      +2 -2      ircd-hybrid-7/src/fileio.c



leeh        2002/04/13 07:46:07 EDT	(20020413_1)

  Modified files:
    modules              m_topic.c 
  Log:
  - if a *server* is setting a topic, dont try to send a n!u@h
  - why is this code even here?  old tburst code?
  
  Revision  Changes    Path
  1.49      +5 -15     ircd-hybrid-7/modules/m_topic.c



db          2002/04/13 04:36:57 EDT	(20020413_0)

  Modified files:
    .                    Hybrid-team 
    src                  channel_mode.c 
  Log:
  - <adx> +ov users are not shown on /names reply after joining a channel
    <adx> if the channel is +a
  
  - also added adx to list of contributors
  
  approved by db
  
  Revision  Changes    Path
  7.49      +1 -0      ircd-hybrid-7/Hybrid-team
  7.27      +6 -0      ircd-hybrid-7/src/channel_mode.c



db          2002/04/12 17:44:45 EDT	(20020412_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  - Corrected one off error in mode handling code, found by adx
  
  approved -db
  
  Revision  Changes    Path
  7.26      +4 -4      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/04/11 21:05:07 EDT	(20020412_0)

  Modified files:
    doc                  Makefile.in 
    tools                convertconf.c 
  Added files:
    doc                  convertconf-example.conf 
  Log:
  Lee's convertconf patch
  
  Revision  Changes    Path
  7.16      +4 -1      ircd-hybrid-7/doc/Makefile.in
  7.1       +559 -0    ircd-hybrid-7/doc/convertconf-example.conf (new)
  1.32      +19 -20    ircd-hybrid-7/tools/convertconf.c



db          2002/04/11 01:33:40 EDT	(20020411_1)

  Modified files:
    include              patchlevel.h 
  Log:
  - more sensible patchlevel.
  
  Revision  Changes    Path
  7.27      +1 -1      ircd-hybrid-7/include/patchlevel.h



db          2002/04/10 20:07:30 EDT	(20020411_0)

  Modified files:
    modules              m_cburst.c 
    src                  channel.c 
    tools                convertconf.c 
  Log:
  - patches by Lee hardy to fix channel persist
  - and to fix convertconf
  
  Approved db
  
  Revision  Changes    Path
  1.40      +1 -2      ircd-hybrid-7/modules/m_cburst.c
  7.306     +1 -7      ircd-hybrid-7/src/channel.c
  1.31      +0 -189    ircd-hybrid-7/tools/convertconf.c



androsyn    2002/04/10 16:17:40 EDT	(20020410_2)

  Modified files:
    tools                .cvsignore 
  Log:
  Added convertinlines to cvsignore at Hwy's request.
  
  Revision  Changes    Path
  1.2       +1 -0      ircd-hybrid-7/tools/.cvsignore



db          2002/04/10 08:33:09 EDT	(20020410_1)

  Modified files:
    modules/core         m_sjoin.c 
  Log:
  - Committed bug fix sent in by user
  
  WarKnite found out it was caused in
   <WarKnite> m_sjoin.c:813 &chptr->peons should be &chptr->locpeons
  
  Bug found by WarKnite and Stacy. Fix found by WarKnite
  Stacy Schane stacyschane@cox.net
  WarKnite warknite@swbell.net
  
  Revision  Changes    Path
  1.131     +2 -2      ircd-hybrid-7/modules/core/m_sjoin.c



androsyn    2002/04/09 23:01:36 EDT	(20020410_0)

  Modified files:
    src                  parse.c 
  Log:
  Fixes bug reported by adx in do_numeric().  This was a bit of old code that
  didn't get changed with changes in the parser.
  
  Revision  Changes    Path
  7.125     +1 -1      ircd-hybrid-7/src/parse.c



androsyn    2002/04/09 15:52:21 EDT	(20020409_2)

  Modified files:
    autoconf             configure.in 
    .                    configure 
  Log:
  Fix misleading output regarding NICKLEN.
  
  Revision  Changes    Path
  7.130     +4 -4      ircd-hybrid-7/autoconf/configure.in
  7.133     +4 -4      ircd-hybrid-7/configure



db          2002/04/08 22:42:37 EDT	(20020409_1)

  Modified files:
    src                  motd.c 
  Log:
  Fix suggested by Wendy
  - move test for file existence of ircd.motd, so we zero out the motd
    if its not there.
  
  Revision  Changes    Path
  7.23      +14 -15    ircd-hybrid-7/src/motd.c



db          2002/04/08 20:04:32 EDT	(20020409_0)

  Modified files:
    .                    RELNOTES 
    doc                  whats-new.txt 
    include              channel.h supported.h 
    modules              m_join.c 
    modules/core         m_kick.c m_part.c 
    src                  channel.c client.c 
  Log:
  Sent in by Lee
  Approved by db
  
  The patch does the following:
  - fixes persistent channels to actually persist, we fixed them too far and
  broke them
  - removes the perm crap from persistent channels.  we should always
  persist, no matter whether a user parts, quits or falls down a rabbit hole
  into wonderland
  - adds ircd-hybrid-7b14 stuff to RELNOTES
  - adds docs about the $$ and $# stuff to whats-new, as well as updates
  - adds the CHARSET=rfc1459 to 005
  
  Theres still issues with persistent channels, but im too tired atm to do
  anything.  Basically - the event system/cleanup_channels() doesnt cope with
  the fact a channel should persist for at least persist_time.  It uses the
  TS of the channel - so if a user parts a 1 year old channel, itll
  persist.  If the cleanup_channels() event is called 10s later, itll be
  destroyed in that event - we need to add a chptr->ts_persist to mark when
  we started persisting, and use that instead of TS in cleanup_channels().
  
  Revision  Changes    Path
  1.19      +17 -0     ircd-hybrid-7/RELNOTES
  7.34      +28 -21    ircd-hybrid-7/doc/whats-new.txt
  7.105     +1 -1      ircd-hybrid-7/include/channel.h
  1.20      +2 -1      ircd-hybrid-7/include/supported.h
  1.40      +2 -2      ircd-hybrid-7/modules/core/m_kick.c
  1.53      +2 -2      ircd-hybrid-7/modules/core/m_part.c
  1.83      +2 -2      ircd-hybrid-7/modules/m_join.c
  7.305     +5 -7      ircd-hybrid-7/src/channel.c
  7.247     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/04/08 00:13:45 EDT	(20020408_0)

  Modified files:
    src                  fdlist.c 
  Log:
  Fix a potential buffer overflow if some wacky person set nicklen > 128
  
  Revision  Changes    Path
  7.28      +1 -3      ircd-hybrid-7/src/fdlist.c



leeh        2002/04/06 13:09:05 EST	(20020406_5)

  Modified files:
    tools                Makefile.in convertconf.c 
  Added files:
    tools                convertilines.c 
  Removed files:
    tools                ircd.conf ircd.conf.new 
  Log:
  - removed ircd.conf/ircd.conf.new, old convertconf remnants
  - added a proper I: -> auth {}; converter, which groups I: together
    based on classes/spoofs/passwords/flags
  - stripped I: parsing from convertconf, added a notice to people to use
    convertilines
  
  Revision  Changes    Path
  7.30      +9 -3      ircd-hybrid-7/tools/Makefile.in
  1.30      +3 -114    ircd-hybrid-7/tools/convertconf.c
  7.1       +590 -0    ircd-hybrid-7/tools/convertilines.c (new)
  1.6       +0 -40     ircd-hybrid-7/tools/ircd.conf (dead)
  1.13      +0 -177    ircd-hybrid-7/tools/ircd.conf.new (dead)



db          2002/04/06 12:31:04 EST	(20020406_4)

  Modified files:
    .                    INSTALL 
  Log:
    Modified files:
      Hyb7                 INSTALL.sgml
    Log:
    Updated SGML source of INSTALL with Andro's changes
  
  Revision  Changes    Path
  7.28      +20 -17    ircd-hybrid-7/INSTALL



db          2002/04/06 10:37:42 EST	(20020406_3)

  Modified files:
    .                    Hybrid-team 
  Log:
  - Cleaned up just a bit too much. re-added jv
  
  Revision  Changes    Path
  7.48      +1 -0      ircd-hybrid-7/Hybrid-team



db          2002/04/06 09:54:43 EST	(20020406_2)

  Modified files:
    .                    Hybrid-team 
  Log:
  - corrected bills email
    removed and moved older contributors as appropriate.
    Jon, perhaps you can double check.
  
  Revision  Changes    Path
  7.47      +4 -9      ircd-hybrid-7/Hybrid-team



db          2002/04/06 00:36:27 EST	(20020406_1)

  Modified files:
    .                    Hybrid-team 
  Log:
  - Changed Juli's entry
  
  Revision  Changes    Path
  7.46      +1 -1      ircd-hybrid-7/Hybrid-team



androsyn    2002/04/06 00:04:48 EST	(20020406_0)

  Modified files:
    include              channel.h 
    modules/core         m_mode.c m_sjoin.c 
    src                  channel.c channel_mode.c 
  Log:
  Lee's patch..here is the description he gave:
  
  The following patch adds back support for bouncing modes from clients we
  deop on an SJOIN.
  
  Basically - when we bounce a clients status (either halfop or chanop) we
  add a user to a chptr->deopped LL.  Whenever we receive a mode, we search
  this list for the client, ignoring it if theyre found.
  
  Whenever we change a clients membership on a channel (from anything, to
  anything), we scan the deopped list, removing them if theyre there.
  
  Revision  Changes    Path
  7.104     +1 -0      ircd-hybrid-7/include/channel.h
  1.49      +5 -3      ircd-hybrid-7/modules/core/m_mode.c
  1.130     +2 -2      ircd-hybrid-7/modules/core/m_sjoin.c
  7.304     +14 -0     ircd-hybrid-7/src/channel.c
  7.25      +6 -0      ircd-hybrid-7/src/channel_mode.c



db          2002/04/05 11:08:11 EST	(20020405_0)

  Modified files:
    src                  client.c 
  Log:
  - we were removing client from history too late. This meant that a
    nick chase kill could cause a double exit of a client. oops. thanks
    to adx for spotting this one.
  
  Revision  Changes    Path
  7.246     +6 -8      ircd-hybrid-7/src/client.c



db          2002/04/04 14:29:46 EST	(20020404_1)

  Modified files:
    src                  channel.c 
  Log:
  Pointed out by Lee. Two backward tests meant we never expired persistent
  channels nor dropped them. oops.
  
  Revision  Changes    Path
  7.303     +2 -2      ircd-hybrid-7/src/channel.c



androsyn    2002/04/04 08:24:19 EST	(20020404_0)

  Modified files:
    .                    BUGS INSTALL 
    src                  s_bsd_select.c 
  Log:
  Updated INSTALL to reflect the nicklen, maxclients changes.  BUGS to reflect
  that IAuthd is broken beyond repair, in case somebody comes asking.
  s_bsd_select.c to force an #error if HARD_FDLIMIT_ > FD_SETSIZE.
  
  Revision  Changes    Path
  7.47      +3 -0      ircd-hybrid-7/BUGS
  7.27      +17 -6     ircd-hybrid-7/INSTALL
  7.23      +3 -0      ircd-hybrid-7/src/s_bsd_select.c



androsyn    2002/04/03 11:10:24 EST	(20020403_4)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Fixed minor issue with configure and nicklen
  
  Revision  Changes    Path
  7.129     +4 -1      ircd-hybrid-7/autoconf/configure.in
  7.132     +54 -51    ircd-hybrid-7/configure



androsyn    2002/04/03 08:10:31 EST	(20020403_3)

  Modified files:
    .                    configure 
    autoconf             acconfig.h configure.in 
    include              config.h ircd_defs.h setup.h.in 
  Log:
  Added --with-nicklen=X and --with-maxclients=X to configure
  
  Revision  Changes    Path
  7.21      +7 -0      ircd-hybrid-7/autoconf/acconfig.h
  7.128     +33 -0     ircd-hybrid-7/autoconf/configure.in
  7.131     +268 -223  ircd-hybrid-7/configure
  7.132     +5 -3      ircd-hybrid-7/include/config.h
  7.26      +5 -1      ircd-hybrid-7/include/ircd_defs.h
  7.51      +6 -0      ircd-hybrid-7/include/setup.h.in



androsyn    2002/04/03 07:21:24 EST	(20020403_2)

  Modified files:
    .                    INSTALL 
  Log:
  Documented the --enable-small-net stuff.
  
  Revision  Changes    Path
  7.26      +6 -1      ircd-hybrid-7/INSTALL



lusky       2002/04/03 00:35:25 EST	(20020403_1)

  Modified files:
    include              patchlevel.h 
  Log:
  - revved patchlevel to beta13
  
  Revision  Changes    Path
  7.26      +1 -1      ircd-hybrid-7/include/patchlevel.h



androsyn    2002/04/02 23:02:35 EST	(20020403_0)

  Modified files:
    .                    RELNOTES configure 
    autoconf             configure.in 
    include              config.h setup.h.in 
    src                  channel.c client.c linebuf.c list.c 
  Removed files:
    .                    README.small_nets 
  Log:
  Added configure --enable-small-net and removed README.small_nets.
  
  Revision  Changes    Path
  7.7       +0 -13     ircd-hybrid-7/README.small_nets (dead)
  1.18      +3 -1      ircd-hybrid-7/RELNOTES
  7.127     +17 -0     ircd-hybrid-7/autoconf/configure.in
  7.130     +244 -223  ircd-hybrid-7/configure
  7.131     +25 -1     ircd-hybrid-7/include/config.h
  7.50      +4 -4      ircd-hybrid-7/include/setup.h.in
  7.302     +2 -2      ircd-hybrid-7/src/channel.c
  7.245     +2 -2      ircd-hybrid-7/src/client.c
  7.78      +1 -1      ircd-hybrid-7/src/linebuf.c
  7.43      +2 -2      ircd-hybrid-7/src/list.c



androsyn    2002/04/02 11:48:02 EST	(20020402_0)

  Modified files:
    .                    RELNOTES 
  Log:
  Updated RELNOTES for the beta13
  
  Revision  Changes    Path
  1.17      +6 -7      ircd-hybrid-7/RELNOTES



db          2002/03/31 23:52:44 EST	(20020401_0)

  Modified files:
    include              patchlevel.h 
  Log:
  enough goofing around children.
  Ok folks. this is the penultimate one before the rc's
  
  Revision  Changes    Path
  7.25      +1 -1      ircd-hybrid-7/include/patchlevel.h



db          2002/03/30 12:04:28 EST	(20020330_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              modules.h setup.h.in 
  Log:
  configure problems patched by juli pointed out by jusuf
  to do with sharable modules
  
  Revision  Changes    Path
  7.126     +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.129     +1 -1      ircd-hybrid-7/configure
  7.29      +1 -1      ircd-hybrid-7/include/modules.h
  7.49      +3 -0      ircd-hybrid-7/include/setup.h.in



androsyn    2002/03/25 12:01:12 EST	(20020325_1)

  Modified files:
    src                  ircd_parser.y 
  Log:
  Add a bunch of missing semicolons that was causing newer versions of bison
  to cry.
  
  Revision  Changes    Path
  1.241     +49 -49    ircd-hybrid-7/src/ircd_parser.y



androsyn    2002/03/25 10:57:32 EST	(20020325_0)

  Modified files:
    modules              m_knock.c 
  Log:
  Committed Lee's knock patch
  
  Revision  Changes    Path
  1.48      +2 -2      ircd-hybrid-7/modules/m_knock.c



androsyn    2002/03/18 15:06:56 EST	(20020318_0)

  Modified files:
    src                  balloc.c 
  Log:
  Add an assert() for double frees.  This doesn't really help situations where
  the whole heap has been corrupted.  Perhaps I should add something silly
  like a magic number to identify blocks or something?
  
  Revision  Changes    Path
  7.26      +3 -1      ircd-hybrid-7/src/balloc.c



db          2002/03/17 13:10:35 EST	(20020317_0)

  Modified files:
    src                  ircd_signal.c 
  Log:
  jv and I FINALLY figured out why detaching from a running ircd on
  FreeBSD will crash.  Ignoring the SIGTRAP seems to work.  Everyone
  please try it on whatever platforms you have and make sure that it
  doesn't have some negative side effects.
  
  - approved db
  
  Revision  Changes    Path
  7.9       +3 -1      ircd-hybrid-7/src/ircd_signal.c



db          2002/03/14 12:44:15 EST	(20020314_1)

  Modified files:
    src                  parse.c 
  Log:
  To Lee. Write on the blackboard 100 times please "A string is not
  an integer." Thank you.
  
  Revision  Changes    Path
  7.124     +1 -1      ircd-hybrid-7/src/parse.c



db          2002/03/14 09:23:19 EST	(20020314_0)

  Modified files:
    src                  parse.c 
  Log:
  -approved by db
  
  At 10:32 14/03/2002, Lee H wrote:
  This patch will block remote servers from sending our clients numeric 501
  (ERR_UMODEUNKNOWNFLAG), this causes us a problem in hyb7 with csircd,
  which rejects the +a and sends an error back everytime someone opers whos
  an admin.
  
  Revision  Changes    Path
  7.123     +5 -0      ircd-hybrid-7/src/parse.c



db          2002/03/13 08:53:09 EST	(20020313_3)

  Modified files:
    modules/core         m_server.c 
    src                  ircd_parser.y s_serv.c 
  Log:
  Fix by Lee, approved by db
  
  - drop servers that have/introduce servers with invalid servername length
  - don't set a servername > HOSTLEN
  
  Revision  Changes    Path
  1.81      +27 -7     ircd-hybrid-7/modules/core/m_server.c
  1.240     +5 -1      ircd-hybrid-7/src/ircd_parser.y
  7.251     +3 -0      ircd-hybrid-7/src/s_serv.c



androsyn    2002/03/12 23:21:44 EST	(20020313_2)

  Modified files:
    src                  send.c 
  Log:
  Wohali's patch for that double free bug.  She's certainly got more patience
  than I do :P
  
  Revision  Changes    Path
  7.186     +12 -1     ircd-hybrid-7/src/send.c



androsyn    2002/03/12 23:16:13 EST	(20020313_1)

  Modified files:
    modules/core         m_server.c 
  Log:
  Add a warning when a server is introduced with a hostname greater than
  HOSTLEN
  
  Revision  Changes    Path
  1.80      +9 -1      ircd-hybrid-7/modules/core/m_server.c



androsyn    2002/03/12 22:28:09 EST	(20020313_0)

  Modified files:
    include              s_serv.h 
  Log:
  Remove TBURST from the mask as we don't technically support it yet.
  
  Revision  Changes    Path
  7.65      +1 -1      ircd-hybrid-7/include/s_serv.h



androsyn    2002/03/10 20:51:48 EST	(20020311_1)

  Modified files:
    src                  ircd.c 
  Log:
  Make sure irc_sleep returns something useful when using select()
  
  Revision  Changes    Path
  7.226     +1 -1      ircd-hybrid-7/src/ircd.c



androsyn    2002/03/10 20:46:18 EST	(20020311_0)

  Modified files:
    src                  ircd.c 
  Log:
  Fix compile error with select for delay.
  
  Revision  Changes    Path
  7.225     +1 -1      ircd-hybrid-7/src/ircd.c



androsyn    2002/03/09 19:08:34 EST	(20020310_1)

  Modified files:
    src                  s_conf.c 
  Log:
  Removed a dead variable..
  
  Revision  Changes    Path
  7.296     +0 -27     ircd-hybrid-7/src/s_conf.c



androsyn    2002/03/09 19:03:14 EST	(20020310_0)

  Modified files:
    include              packet.h 
    src                  client.c packet.c s_serv.c 
  Log:
  Made client_dopacket() local, removed two dead functions from packet.c,
  fixed a compile warning in s_serv.c
  
  Revision  Changes    Path
  7.13      +0 -1      ircd-hybrid-7/include/packet.h
  7.244     +0 -43     ircd-hybrid-7/src/client.c
  7.73      +1 -0      ircd-hybrid-7/src/packet.c
  7.250     +3 -2      ircd-hybrid-7/src/s_serv.c



androsyn    2002/03/09 18:54:14 EST	(20020309_10)

  Modified files:
    include              client.h 
    src                  client.c 
  Log:
  Made a couple more functions local.
  
  Revision  Changes    Path
  7.142     +0 -2      ircd-hybrid-7/include/client.h
  7.243     +2 -2      ircd-hybrid-7/src/client.c



androsyn    2002/03/09 18:41:33 EST	(20020309_9)

  Modified files:
    include              patchlevel.h 
  Log:
  Once again we change this.
  
  Revision  Changes    Path
  7.24      +1 -1      ircd-hybrid-7/include/patchlevel.h



androsyn    2002/03/09 18:40:18 EST	(20020309_8)

  Modified files:
    include              patchlevel.h 
  Log:
  Changed the relname a bit :P
  
  Revision  Changes    Path
  7.23      +1 -1      ircd-hybrid-7/include/patchlevel.h



androsyn    2002/03/09 18:37:59 EST	(20020309_7)

  Modified files:
    src                  getopt.c ircd.c 
  Log:
  Removed a few stray references to debug.h
  
  Revision  Changes    Path
  7.12      +0 -1      ircd-hybrid-7/src/getopt.c
  7.224     +0 -1      ircd-hybrid-7/src/ircd.c



androsyn    2002/03/09 18:14:13 EST	(20020309_6)

  Modified files:
    include              s_serv.h 
    src                  s_serv.c 
  Log:
  Okay..so I was a little aggressive with that last one.
  
  Revision  Changes    Path
  7.64      +1 -0      ircd-hybrid-7/include/s_serv.h
  7.249     +2 -4      ircd-hybrid-7/src/s_serv.c



androsyn    2002/03/09 18:01:28 EST	(20020309_5)

  Modified files:
    include              s_serv.h 
    src                  s_serv.c 
  Log:
  Changed a few more functions from globals to static
  
  Revision  Changes    Path
  7.63      +0 -2      ircd-hybrid-7/include/s_serv.h
  7.248     +4 -2      ircd-hybrid-7/src/s_serv.c



androsyn    2002/03/09 16:59:37 EST	(20020309_4)

  Modified files:
    src                  send.c 
  Log:
  Remove debug.h from send.c
  
  Revision  Changes    Path
  7.185     +0 -1      ircd-hybrid-7/src/send.c



androsyn    2002/03/09 16:57:11 EST	(20020309_3)

  Modified files:
    src                  .depend Makefile.in m_error.c send.c 
  Removed files:
    include              debug.h 
    src                  debug.c 
  Log:
  Removed debug.c completely.  It was only being used three times so, we just
  replace it with ilog()
  
  Revision  Changes    Path
  1.4       +0 -45     ircd-hybrid-7/include/debug.h (dead)
  7.5       +6 -6      ircd-hybrid-7/src/.depend
  7.109     +0 -1      ircd-hybrid-7/src/Makefile.in
  7.7       +0 -275    ircd-hybrid-7/src/debug.c (dead)
  7.23      +3 -4      ircd-hybrid-7/src/m_error.c
  7.184     +0 -1      ircd-hybrid-7/src/send.c



androsyn    2002/03/09 16:48:46 EST	(20020309_2)

  Modified files:
    adns                 adns.h 
    include              class.h hash.h ircd.h linebuf.h 
                         listener.h md5.h s_auth.h s_conf.h 
                         s_log.h scache.h 
    src                  class.c client.c hash.c ircd.c linebuf.c 
                         listener.c md5.c s_auth.c s_conf.c 
                         s_log.c scache.c sprintf_irc.c 
  Log:
  Clean up a lot of dead code.  Also made a number of functions that were
  declared global as locals, as they were only used within their own object
  file.
  
  Revision  Changes    Path
  1.6       +3 -4      ircd-hybrid-7/adns/adns.h
  7.10      +0 -1      ircd-hybrid-7/include/class.h
  7.17      +0 -2      ircd-hybrid-7/include/hash.h
  7.45      +0 -2      ircd-hybrid-7/include/ircd.h
  1.22      +0 -3      ircd-hybrid-7/include/linebuf.h
  7.9       +0 -1      ircd-hybrid-7/include/listener.h
  1.6       +0 -3      ircd-hybrid-7/include/md5.h
  7.15      +0 -1      ircd-hybrid-7/include/s_auth.h
  7.178     +0 -3      ircd-hybrid-7/include/s_conf.h
  7.9       +0 -1      ircd-hybrid-7/include/s_log.h
  7.7       +0 -1      ircd-hybrid-7/include/scache.h
  7.35      +1 -1      ircd-hybrid-7/src/class.c
  7.242     +0 -14     ircd-hybrid-7/src/client.c
  7.40      +0 -17     ircd-hybrid-7/src/hash.c
  7.223     +1 -3      ircd-hybrid-7/src/ircd.c
  7.77      +2 -69     ircd-hybrid-7/src/linebuf.c
  7.65      +1 -1      ircd-hybrid-7/src/listener.c
  1.12      +5 -19     ircd-hybrid-7/src/md5.c
  7.90      +1 -1      ircd-hybrid-7/src/s_auth.c
  7.295     +1 -165    ircd-hybrid-7/src/s_conf.c
  7.40      +0 -12     ircd-hybrid-7/src/s_log.c
  7.14      +0 -20     ircd-hybrid-7/src/scache.c
  7.13      +1 -1      ircd-hybrid-7/src/sprintf_irc.c



androsyn    2002/03/09 15:57:37 EST	(20020309_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  Make ModeTable static as it is only used in channel_mode.c
  
  Revision  Changes    Path
  7.24      +1 -1      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/03/09 12:03:41 EST	(20020309_0)

  Modified files:
    include              fileio.h 
    src                  fileio.c 
  Log:
  file_open / file_close can be static now, as they only get called in
  fileio.c
  
  Revision  Changes    Path
  7.9       +0 -4      ircd-hybrid-7/include/fileio.h
  7.20      +2 -2      ircd-hybrid-7/src/fileio.c



db          2002/03/07 09:04:35 EST	(20020307_3)

  Modified files:
    .                    INSTALL 
  Log:
  - Corrected email address
  
  Revision  Changes    Path
  7.25      +1 -1      ircd-hybrid-7/INSTALL



db          2002/03/07 08:44:30 EST	(20020307_2)

  Modified files:
    .                    INSTALL 
  Log:
  - Updated INSTALL file as updated by Hwy
  
  Revision  Changes    Path
  7.24      +6 -14     ircd-hybrid-7/INSTALL



db          2002/03/07 01:22:11 EST	(20020307_1)

  Modified files:
    contrib              example_module.c m_flags.c m_jupe.c 
                         m_map.c m_mkpasswd.c spy_admin_notice.c 
                         spy_info_notice.c spy_links_notice.c 
                         spy_motd_notice.c spy_stats_notice.c 
                         spy_stats_p_notice.c spy_trace_notice.c 
                         spy_whois_notice.c 
    include              send.h 
    modules              m_accept.c m_admin.c m_away.c m_capab.c 
                         m_cburst.c m_challenge.c m_cjoin.c 
                         m_close.c m_connect.c m_cryptlink.c 
                         m_dmem.c m_drop.c m_eob.c m_gline.c 
                         m_help.c m_info.c m_invite.c m_ison.c 
                         m_join.c m_kline.c m_knock.c m_links.c 
                         m_list.c m_lljoin.c m_llnick.c m_locops.c 
                         m_lusers.c m_motd.c m_names.c m_nburst.c 
                         m_oper.c m_operwall.c m_pass.c m_ping.c 
                         m_pong.c m_post.c m_rehash.c m_restart.c 
                         m_resv.c m_set.c m_stats.c m_svinfo.c 
                         m_testline.c m_time.c m_topic.c m_trace.c 
                         m_unkline.c m_user.c m_userhost.c 
                         m_users.c m_version.c m_wallops.c m_who.c 
                         m_whois.c m_whowas.c 
    modules/core         m_die.c m_kick.c m_kill.c m_message.c 
                         m_mode.c m_nick.c m_part.c m_quit.c 
                         m_server.c m_sjoin.c m_squit.c 
    src                  send.c 
  Log:
  Integrate a chunk of patches to make things using "" strings 'const
  char *'.  This is basically a no-op change, covering '_version' as used in
  modules, and furthermore, the last two format strings in include/send.h
  and src/send.c.
  
  Reviewed by:    db, joant
  Approved by:    db
  Submitted by:   jmallett
  
  Revision  Changes    Path
  1.5       +1 -1      ircd-hybrid-7/contrib/example_module.c
  1.8       +1 -1      ircd-hybrid-7/contrib/m_flags.c
  1.27      +1 -1      ircd-hybrid-7/contrib/m_jupe.c
  1.11      +1 -1      ircd-hybrid-7/contrib/m_map.c
  1.8       +1 -1      ircd-hybrid-7/contrib/m_mkpasswd.c
  1.4       +1 -1      ircd-hybrid-7/contrib/spy_admin_notice.c
  1.4       +1 -1      ircd-hybrid-7/contrib/spy_info_notice.c
  1.9       +1 -1      ircd-hybrid-7/contrib/spy_links_notice.c
  1.4       +1 -1      ircd-hybrid-7/contrib/spy_motd_notice.c
  1.11      +1 -1      ircd-hybrid-7/contrib/spy_stats_notice.c
  1.3       +1 -1      ircd-hybrid-7/contrib/spy_stats_p_notice.c
  1.4       +1 -1      ircd-hybrid-7/contrib/spy_trace_notice.c
  1.9       +1 -1      ircd-hybrid-7/contrib/spy_whois_notice.c
  7.54      +2 -2      ircd-hybrid-7/include/send.h
  1.23      +1 -1      ircd-hybrid-7/modules/core/m_die.c
  1.39      +1 -1      ircd-hybrid-7/modules/core/m_kick.c
  1.62      +1 -1      ircd-hybrid-7/modules/core/m_kill.c
  1.88      +1 -1      ircd-hybrid-7/modules/core/m_message.c
  1.48      +1 -1      ircd-hybrid-7/modules/core/m_mode.c
  1.86      +1 -1      ircd-hybrid-7/modules/core/m_nick.c
  1.52      +1 -1      ircd-hybrid-7/modules/core/m_part.c
  1.24      +1 -1      ircd-hybrid-7/modules/core/m_quit.c
  1.79      +1 -1      ircd-hybrid-7/modules/core/m_server.c
  1.129     +1 -1      ircd-hybrid-7/modules/core/m_sjoin.c
  1.44      +1 -1      ircd-hybrid-7/modules/core/m_squit.c
  1.30      +1 -1      ircd-hybrid-7/modules/m_accept.c
  1.33      +1 -1      ircd-hybrid-7/modules/m_admin.c
  1.28      +1 -1      ircd-hybrid-7/modules/m_away.c
  1.27      +1 -1      ircd-hybrid-7/modules/m_capab.c
  1.39      +1 -1      ircd-hybrid-7/modules/m_cburst.c
  1.33      +2 -2      ircd-hybrid-7/modules/m_challenge.c
  1.49      +1 -1      ircd-hybrid-7/modules/m_cjoin.c
  1.22      +1 -1      ircd-hybrid-7/modules/m_close.c
  1.36      +1 -1      ircd-hybrid-7/modules/m_connect.c
  1.31      +2 -2      ircd-hybrid-7/modules/m_cryptlink.c
  1.14      +1 -1      ircd-hybrid-7/modules/m_dmem.c
  1.23      +1 -1      ircd-hybrid-7/modules/m_drop.c
  1.30      +1 -1      ircd-hybrid-7/modules/m_eob.c
  1.77      +1 -1      ircd-hybrid-7/modules/m_gline.c
  1.31      +1 -1      ircd-hybrid-7/modules/m_help.c
  1.55      +1 -1      ircd-hybrid-7/modules/m_info.c
  1.42      +1 -1      ircd-hybrid-7/modules/m_invite.c
  1.27      +1 -1      ircd-hybrid-7/modules/m_ison.c
  1.82      +1 -1      ircd-hybrid-7/modules/m_join.c
  1.99      +1 -1      ircd-hybrid-7/modules/m_kline.c
  1.47      +1 -1      ircd-hybrid-7/modules/m_knock.c
  1.35      +1 -1      ircd-hybrid-7/modules/m_links.c
  1.40      +1 -1      ircd-hybrid-7/modules/m_list.c
  1.55      +1 -1      ircd-hybrid-7/modules/m_lljoin.c
  1.19      +1 -1      ircd-hybrid-7/modules/m_llnick.c
  1.26      +1 -1      ircd-hybrid-7/modules/m_locops.c
  1.21      +1 -1      ircd-hybrid-7/modules/m_lusers.c
  1.28      +1 -1      ircd-hybrid-7/modules/m_motd.c
  1.40      +1 -1      ircd-hybrid-7/modules/m_names.c
  1.16      +1 -1      ircd-hybrid-7/modules/m_nburst.c
  1.45      +1 -1      ircd-hybrid-7/modules/m_oper.c
  1.27      +1 -1      ircd-hybrid-7/modules/m_operwall.c
  1.22      +1 -1      ircd-hybrid-7/modules/m_pass.c
  1.27      +1 -1      ircd-hybrid-7/modules/m_ping.c
  1.25      +1 -1      ircd-hybrid-7/modules/m_pong.c
  1.8       +1 -1      ircd-hybrid-7/modules/m_post.c
  1.39      +1 -1      ircd-hybrid-7/modules/m_rehash.c
  1.22      +1 -1      ircd-hybrid-7/modules/m_restart.c
  1.14      +1 -1      ircd-hybrid-7/modules/m_resv.c
  1.43      +1 -1      ircd-hybrid-7/modules/m_set.c
  1.107     +1 -1      ircd-hybrid-7/modules/m_stats.c
  1.33      +1 -1      ircd-hybrid-7/modules/m_svinfo.c
  1.24      +1 -1      ircd-hybrid-7/modules/m_testline.c
  1.24      +1 -1      ircd-hybrid-7/modules/m_time.c
  1.48      +1 -1      ircd-hybrid-7/modules/m_topic.c
  1.45      +1 -1      ircd-hybrid-7/modules/m_trace.c
  1.44      +1 -1      ircd-hybrid-7/modules/m_unkline.c
  1.22      +1 -1      ircd-hybrid-7/modules/m_user.c
  1.36      +1 -1      ircd-hybrid-7/modules/m_userhost.c
  1.24      +1 -1      ircd-hybrid-7/modules/m_users.c
  1.37      +1 -1      ircd-hybrid-7/modules/m_version.c
  1.27      +1 -1      ircd-hybrid-7/modules/m_wallops.c
  1.55      +1 -1      ircd-hybrid-7/modules/m_who.c
  1.75      +1 -1      ircd-hybrid-7/modules/m_whois.c
  1.26      +1 -1      ircd-hybrid-7/modules/m_whowas.c
  7.183     +2 -2      ircd-hybrid-7/src/send.c



androsyn    2002/03/06 23:22:32 EST	(20020307_0)

  Modified files:
    autoconf             configure.in 
    .                    configure 
  Log:
  RT Sigio isn't really experimental anymore it seems to have proven itself
  pretty stable these days.
  
  Revision  Changes    Path
  7.125     +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.128     +1 -1      ircd-hybrid-7/configure



lusky       2002/03/05 23:41:46 EST	(20020306_0)

  Modified files:
    .                    RELNOTES 
    include              patchlevel.h 
  Log:
  - revved patchlevel to 7beta12
  - rearranged release notes
  
  Revision  Changes    Path
  1.16      +9 -9      ircd-hybrid-7/RELNOTES
  7.22      +1 -1      ircd-hybrid-7/include/patchlevel.h



androsyn    2002/03/04 17:45:43 EST	(20020304_1)

  Modified files:
    src                  send.c 
  Log:
  Fixed the stupid bug in sendto_list_remote that cause us to send certain
  messages back to the sender.
  
  Revision  Changes    Path
  7.182     +2 -1      ircd-hybrid-7/src/send.c



leeh        2002/03/04 16:30:00 EST	(20020304_0)

  Modified files:
    modules/core         m_sjoin.c 
    src                  channel.c 
  Log:
  - patch by adx <nizynski@optimus.waw.pl> to correctly add a +ov user to
    &chptr->chanops_voiced
  - make sure for +ov users we send +v as well as +o.. this is icky though, as
    we have to recheck MAXMODEPARAMS..
  
  Revision  Changes    Path
  1.128     +25 -1     ircd-hybrid-7/modules/core/m_sjoin.c
  7.301     +8 -0      ircd-hybrid-7/src/channel.c



enygma      2002/03/01 19:23:59 EST	(20020302_1)

  Modified files:
    src                  modules.c 
  Log:
  A cosmetic problem regarding load_core_modules solved
  
  Revision  Changes    Path
  7.99      +2 -4      ircd-hybrid-7/src/modules.c



leeh        2002/03/01 19:14:28 EST	(20020302_0)

  Modified files:
    .                    TODO 
    contrib              m_jupe.c 
  Log:
  - strncpy_irc -> strlcpy
  
  Revision  Changes    Path
  7.61      +0 -23     ircd-hybrid-7/TODO
  1.26      +3 -3      ircd-hybrid-7/contrib/m_jupe.c



androsyn    2002/03/01 15:23:02 EST	(20020301_7)

  Modified files:
    src                  adns.c channel.c client.c ircd.c 
                         ircd_parser.y s_auth.c s_log.c 
  Log:
  Changed a bunch of eventAdd()'s to eventAddIsh().  I think it is a bad idea
  to have 15 events all coming up at the same time.  This will stagger the
  events a bit.
  
  Revision  Changes    Path
  7.39      +1 -1      ircd-hybrid-7/src/adns.c
  7.300     +1 -1      ircd-hybrid-7/src/channel.c
  7.241     +3 -3      ircd-hybrid-7/src/client.c
  7.222     +11 -11    ircd-hybrid-7/src/ircd.c
  1.239     +1 -1      ircd-hybrid-7/src/ircd_parser.y
  7.89      +1 -1      ircd-hybrid-7/src/s_auth.c
  7.39      +1 -1      ircd-hybrid-7/src/s_log.c



jmallett    2002/03/01 11:03:22 EST	(20020301_6)

  Modified files:
    .                    README.FIRST RELNOTES 
  Log:
  Combine the notices for people who don't read documentation.  In reality,
  if someone can't be bothered reading documentation, should we really
  document this _twice_ on their account?  Sooth, if they aren't reading
  README.FIRST, I don't think they'll read RELNOTES.  The former has a name
  that yells out to be read, the latter is just something people with good
  sense will read.
  
  In short, I've combined the notices into README.FIRST, using the (IMO)
  much nicer formatting from RELNOTES.
  
  Revision  Changes    Path
  7.32      +8 -7      ircd-hybrid-7/README.FIRST
  1.15      +0 -9      ircd-hybrid-7/RELNOTES



androsyn    2002/03/01 09:55:59 EST	(20020301_5)

  Modified files:
    .                    configure 
    autoconf             acconfig.h configure.in 
    include              setup.h.in 
  Log:
  Here are some better autoconf checks for nanosleep()
  
  Revision  Changes    Path
  7.20      +3 -0      ircd-hybrid-7/autoconf/acconfig.h
  7.124     +10 -1     ircd-hybrid-7/autoconf/configure.in
  7.127     +211 -128  ircd-hybrid-7/configure
  7.48      +4 -4      ircd-hybrid-7/include/setup.h.in



androsyn    2002/03/01 09:30:25 EST	(20020301_4)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              setup.h.in 
    src                  ircd.c 
  Log:
  Add a check for nanosleep(). If nanosleep() isn't found we fall back to
  using select() for the delay.  The main reason for this is the fact that
  usleep() tends to be implemented via SIGALRM.
  
  Revision  Changes    Path
  7.123     +2 -0      ircd-hybrid-7/autoconf/configure.in
  7.126     +164 -109  ircd-hybrid-7/configure
  7.47      +4 -2      ircd-hybrid-7/include/setup.h.in
  7.221     +16 -1     ircd-hybrid-7/src/ircd.c



jmallett    2002/03/01 03:52:38 EST	(20020301_3)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  Add notation for broken platforms, and mark GCC/SPARC ones as broken,
  until I see otherwise.
  
  Revision  Changes    Path
  7.10      +8 -5      ircd-hybrid-7/README.PLATFORMS



jmallett    2002/03/01 03:40:04 EST	(20020301_2)

  Modified files:
    .                    README.FIRST 
  Log:
  Back out my previous change.  Further [read: Proper] testing for the bug
  here shows it does in fact exist.  Apologies for the misinformation.  The
  test case was not as simple as I remembered it to be.
  
  Revision  Changes    Path
  7.31      +1 -2      ircd-hybrid-7/README.FIRST



jmallett    2002/03/01 02:41:58 EST	(20020301_1)

  Modified files:
    .                    README.FIRST 
  Log:
  NetBSD's compiler team doesn't suck;  Their version of egcs doesn't break
  on SPARC, unlike newer GCC on OpenBSD and Solaris.
  
  Revision  Changes    Path
  7.30      +2 -1      ircd-hybrid-7/README.FIRST



jmallett    2002/03/01 02:09:16 EST	(20020301_0)

  Modified files:
    adns                 event.c 
    src                  s_auth.c 
  Log:
  Oops, bad juli!
  
  Committing for standards reasons after being up for far too long is a bad
  idea.  Inserting inappropriate casts is worse.
  
  Change some idiocy I did involving use of size_t instead of socklen_t.
  
  And as an aside, I mixed up my ranting about signed vs. unsigned in my last
  commit.
  
  Revision  Changes    Path
  1.14      +2 -2      ircd-hybrid-7/adns/event.c
  7.88      +1 -1      ircd-hybrid-7/src/s_auth.c



ejb         2002/02/28 14:36:48 EST	(20020228_8)

  Modified files:
    include              patchlevel.h 
  Log:
  - added release names!
  
  Revision  Changes    Path
  7.21      +3 -1      ircd-hybrid-7/include/patchlevel.h



wcampbel    2002/02/28 11:14:19 EST	(20020228_7)

  Modified files:
    .                    README.PLATFORMS 
    help/users           notice privmsg 
  Log:
  Cleaned up some formatting in README.PLATFORMS
  Non-opers cannot use username%hostname@server, so don't include
    it in the help files
  
  Revision  Changes    Path
  7.9       +3 -2      ircd-hybrid-7/README.PLATFORMS
  1.2       +3 -3      ircd-hybrid-7/help/users/notice
  1.2       +3 -3      ircd-hybrid-7/help/users/privmsg



leeh        2002/02/28 11:12:22 EST	(20020228_6)

  Modified files:
    .                    INSTALL RELNOTES 
    doc                  example.conf
    src                  ircd_parser.y 
  Log:
  - added a b12 specific section in RELNOTES, noting the recent config change
    I did, also moved the convertklines stuff into there.
  
    we should probably mention that RELNOTES now contains this when we release
    b12, and people should update it when they change something that people
    upgrading to the next beta need to know, such as config file option
    changes, kline format changes etc
  - updated the confs to reflect whois_wait -> pace_wait_simple
  - modified the ilog() for havent_read_conf=yes; slightly.
  
  Revision  Changes    Path
  7.23      +8 -3      ircd-hybrid-7/INSTALL
  1.14      +9 -8      ircd-hybrid-7/RELNOTES
  7.153     +2 -2      ircd-hybrid-7/doc/example.conf
  1.238     +3 -1      ircd-hybrid-7/src/ircd_parser.y



androsyn    2002/02/28 10:54:02 EST	(20020228_5)

  Modified files:
    src                  client.c 
  Log:
  localClient must have fd set to -1 upon creation otherwise it will have all
  sorts of weird problems.
  
  Revision  Changes    Path
  7.240     +2 -0      ircd-hybrid-7/src/client.c



androsyn    2002/02/28 09:12:33 EST	(20020228_4)

  Modified files:
    modules              m_cjoin.c m_kline.c 
  Log:
  Removed a few strncpy()'s for strlcpy()
  
  Revision  Changes    Path
  1.48      +2 -2      ircd-hybrid-7/modules/m_cjoin.c
  1.98      +4 -4      ircd-hybrid-7/modules/m_kline.c



androsyn    2002/02/28 09:03:51 EST	(20020228_3)

  Modified files:
    src                  s_auth.c s_user.c 
  Log:
  Fixed bug with unknown in username and cleaned up some string abuses that
  were still around from strncpy_irc()
  
  Revision  Changes    Path
  7.87      +1 -1      ircd-hybrid-7/src/s_auth.c
  7.191     +2 -8      ircd-hybrid-7/src/s_user.c



leeh        2002/02/28 06:46:46 EST	(20020228_2)

  Modified files:
    include              s_conf.h 
    modules              m_help.c m_info.c m_whois.c m_whowas.c 
    src                  ircd_lexer.l ircd_parser.y s_conf.c 
  Log:
  - renamed whois_wait to pace_wait_simple, and made it applicable to /help
  
  Revision  Changes    Path
  7.177     +1 -1      ircd-hybrid-7/include/s_conf.h
  1.30      +2 -2      ircd-hybrid-7/modules/m_help.c
  1.54      +7 -7      ircd-hybrid-7/modules/m_info.c
  1.74      +2 -2      ircd-hybrid-7/modules/m_whois.c
  1.25      +2 -2      ircd-hybrid-7/modules/m_whowas.c
  1.136     +1 -1      ircd-hybrid-7/src/ircd_lexer.l
  1.237     +4 -4      ircd-hybrid-7/src/ircd_parser.y
  7.294     +1 -1      ircd-hybrid-7/src/s_conf.c



jmallett    2002/02/27 22:02:19 EST	(20020228_1)

  Modified files:
    adns                 event.c 
    src                  dynlink.c s_auth.c s_bsd.c 
  Log:
  Bring back my uintptr_t casts to the code which converts dlsym(3)'s return
  value to something we can make into a function pointer within the bounds
  of the C standard.  This is a hack as such, but it is far more "correct"
  than trying to convert two pointers to eachother, one being a data pointer
  (void*) and one being a function pointer.  Document this as such, as it is
  important to compilers like TenDRA, and also mention that I _do_ have
  something which is correct, but that for POLA sake, and since this will
  work pretty much everywhere, I am choosing not to put it in at this time.
  
  Also, convert casts of socklen_t pointers from 'int*' to 'socklen_t*'.
  Originally these were 'unsigned int*', which is correct on BSDish systems,
  but may not be if for some reason socklen_t is signed (it isn't with BSD
  networking), and really 'size_t foo; use(&foo)' doesn't need to be
  'use((socklen_t *)&foo)', but it doesn't hurt anyway.  If this is causing
  problems on some system, if it does not have socklen_t, we should make
  socklen_t a signed integer on that system using our typedef'd version, as
  it is infinitely more common for these parameters to be 'socklen_t*' which
  is not the same as 'int*'.
  
  The current source tree will now build happily on TenDRA systems again.
  
  Revision  Changes    Path
  1.13      +3 -2      ircd-hybrid-7/adns/event.c
  7.2       +12 -2     ircd-hybrid-7/src/dynlink.c
  7.86      +3 -3      ircd-hybrid-7/src/s_auth.c
  7.165     +3 -3      ircd-hybrid-7/src/s_bsd.c



jmallett    2002/02/27 21:13:18 EST	(20020228_0)

  Modified files:
    .                    RELNOTES 
  Log:
  Add a list of things which have changed since the last beta and which need
  testing to the Release Notes, as suggested by Wohali.
  
  Reviewed by:    wcampbell, on IRC
  
  Revision  Changes    Path
  1.13      +24 -1     ircd-hybrid-7/RELNOTES



androsyn    2002/02/27 14:41:40 EST	(20020227_3)

  Modified files:
    src                  s_auth.c 
  Log:
  Fixed stuff with usernames getting set to unknown.
  
  Revision  Changes    Path
  7.85      +1 -1      ircd-hybrid-7/src/s_auth.c



enygma      2002/02/27 12:51:50 EST	(20020227_2)

  Modified files:
    .                    README.PLATFORMS configure 
    adns                 check.c event.c 
    autoconf             acconfig.h configure.in 
    include              modules.h setup.h.in 
    modules              .depend Makefile.in m_info.c m_oper.c 
    modules/core         m_server.c 
    src                  Makefile.in modules.c parse.c s_auth.c 
                         s_bsd.c s_serv.c send.c 
  Added files:
    src                  dynlink.c 
  Removed files:
    src                  modules-dld.c 
  Log:
  I have modified configure.in to detect shl_load and HP-UX Systems.
  Then I modified modules.c and seperated some functions into dynlink.c
  Rework has been done on some files, where declaration inconsistencies
  existed. Like static int and then only int for the same functions.
  I believe the HP-UX porting is now completed.
  
  Revision  Changes    Path
  7.8       +2 -0      ircd-hybrid-7/README.PLATFORMS
  1.5       +16 -5     ircd-hybrid-7/adns/check.c
  1.12      +2 -2      ircd-hybrid-7/adns/event.c
  7.19      +7 -1      ircd-hybrid-7/autoconf/acconfig.h
  7.122     +83 -5     ircd-hybrid-7/autoconf/configure.in
  7.125     +404 -238  ircd-hybrid-7/configure
  7.28      +7 -0      ircd-hybrid-7/include/modules.h
  7.46      +13 -7     ircd-hybrid-7/include/setup.h.in
  1.6       +1 -697    ircd-hybrid-7/modules/.depend
  1.66      +26 -5     ircd-hybrid-7/modules/Makefile.in
  1.78      +2 -2      ircd-hybrid-7/modules/core/m_server.c
  1.53      +1 -6      ircd-hybrid-7/modules/m_info.c
  1.44      +2 -2      ircd-hybrid-7/modules/m_oper.c
  7.108     +3 -2      ircd-hybrid-7/src/Makefile.in
  7.1       +367 -0    ircd-hybrid-7/src/dynlink.c (new)
  1.18      +0 -606    ircd-hybrid-7/src/modules-dld.c (dead)
  7.98      +34 -277   ircd-hybrid-7/src/modules.c
  7.122     +1 -1      ircd-hybrid-7/src/parse.c
  7.84      +3 -3      ircd-hybrid-7/src/s_auth.c
  7.164     +3 -3      ircd-hybrid-7/src/s_bsd.c
  7.247     +3 -3      ircd-hybrid-7/src/s_serv.c
  7.181     +1 -1      ircd-hybrid-7/src/send.c



androsyn    2002/02/27 12:28:19 EST	(20020227_1)

  Modified files:
    src                  balloc.c 
  Log:
  Correct an inversion of the last #define I committed.
  
  Revision  Changes    Path
  7.25      +1 -1      ircd-hybrid-7/src/balloc.c



androsyn    2002/02/27 12:20:17 EST	(20020227_0)

  Modified files:
    src                  balloc.c 
  Log:
  I hate hpux..did I ever tell you this?
  
  Revision  Changes    Path
  7.24      +7 -0      ircd-hybrid-7/src/balloc.c



wcampbel    2002/02/26 11:44:42 EST	(20020226_0)

  Modified files:
    doc                  example.conf 
  Log:
  Doc corrections to example.conf:
  Make the encrypted = yes; and cryptlink = yes; distinction clearer
  Document the stripping of [ ] from serverinfo fields in LINKS
  
  Revision  Changes    Path
  7.152     +10 -1     ircd-hybrid-7/doc/example.conf



wcampbel    2002/02/25 18:05:02 EST	(20020225_8)

  Modified files:
    contrib              m_flags.c m_mkpasswd.c 
  Log:
  I gave NO ONE permission to put m_flags.c and m_mkpasswd.c under the GPL.
  
  Revision  Changes    Path
  1.7       +23 -15    ircd-hybrid-7/contrib/m_flags.c
  1.7       +5 -18     ircd-hybrid-7/contrib/m_mkpasswd.c



leeh        2002/02/25 17:52:17 EST	(20020225_7)

  Modified files:
    src                  packet.c 
  Log:
  - cleaned up some k+r and single space indenting
  
  Revision  Changes    Path
  7.72      +90 -76    ircd-hybrid-7/src/packet.c



leeh        2002/02/25 16:01:27 EST	(20020225_6)

  Modified files:
    include              resv.h 
    src                  resv.c 
  Log:
  - made resv use strlcpy()
  - bumped RESVNICKLEN to NICKLEN*2
  
  Revision  Changes    Path
  1.6       +6 -2      ircd-hybrid-7/include/resv.h
  7.13      +16 -30    ircd-hybrid-7/src/resv.c



leeh        2002/02/25 15:22:32 EST	(20020225_5)

  Modified files:
    modules/core         m_nick.c 
  Log:
  - nick[NICKLEN + 2] -> nick[NICKLEN]
  
  Revision  Changes    Path
  1.85      +5 -5      ircd-hybrid-7/modules/core/m_nick.c



leeh        2002/02/25 14:56:04 EST	(20020225_4)

  Modified files:
    tools                convertklines.c 
  Log:
  - made convertklines use the new conf format
  - cleanups, added support for oper reasons
  
  Revision  Changes    Path
  7.5       +78 -54    ircd-hybrid-7/tools/convertklines.c



androsyn    2002/02/25 14:12:07 EST	(20020225_3)

  Modified files:
    src                  channel_mode.c 
  Log:
  More stupidity related to people using NICKLEN and abusing strings...
  
  Revision  Changes    Path
  7.23      +4 -4      ircd-hybrid-7/src/channel_mode.c



androsyn    2002/02/25 14:09:40 EST	(20020225_2)

  Modified files:
    src                  resv.c 
  Log:
  Minor cleanup related to NICKLEN changes...
  
  Revision  Changes    Path
  7.12      +3 -3      ircd-hybrid-7/src/resv.c



androsyn    2002/02/25 12:40:46 EST	(20020225_1)

  Modified files:
    src                  whowas.c 
  Log:
  Forgot a NICKLEN+1
  
  Revision  Changes    Path
  7.17      +1 -1      ircd-hybrid-7/src/whowas.c



androsyn    2002/02/25 12:39:22 EST	(20020225_0)

  Modified files:
    include              client.h irc_string.h ircd_defs.h 
                         supported.h 
    modules              m_cryptlink.c m_gline.c m_kline.c 
                         m_pass.c m_stats.c m_topic.c m_unkline.c 
    modules/core         m_nick.c m_part.c m_server.c m_sjoin.c 
    src                  channel_mode.c client.c fileio.c hash.c 
                         irc_string.c ircd_parser.y ircdauth.c 
                         list.c motd.c s_conf.c s_serv.c s_user.c 
                         scache.c whowas.c 
  Log:
  Replace strncpy_irc() with strlcpy().  Change NICKLEN == 10, 9 + 1 for the
  NUL character.  I'm not sure if HOSTLEN and friends will need to be mangled
  as well, but we can explore that later.
  
  Revision  Changes    Path
  7.141     +2 -2      ircd-hybrid-7/include/client.h
  7.34      +0 -5      ircd-hybrid-7/include/irc_string.h
  7.25      +1 -5      ircd-hybrid-7/include/ircd_defs.h
  1.19      +1 -1      ircd-hybrid-7/include/supported.h
  1.84      +5 -9      ircd-hybrid-7/modules/core/m_nick.c
  1.51      +2 -2      ircd-hybrid-7/modules/core/m_part.c
  1.77      +10 -12    ircd-hybrid-7/modules/core/m_server.c
  1.127     +2 -2      ircd-hybrid-7/modules/core/m_sjoin.c
  1.30      +5 -6      ircd-hybrid-7/modules/m_cryptlink.c
  1.76      +11 -13    ircd-hybrid-7/modules/m_gline.c
  1.97      +10 -16    ircd-hybrid-7/modules/m_kline.c
  1.21      +3 -3      ircd-hybrid-7/modules/m_pass.c
  1.106     +2 -2      ircd-hybrid-7/modules/m_stats.c
  1.47      +4 -4      ircd-hybrid-7/modules/m_topic.c
  1.43      +3 -3      ircd-hybrid-7/modules/m_unkline.c
  7.22      +1 -1      ircd-hybrid-7/src/channel_mode.c
  7.239     +3 -4      ircd-hybrid-7/src/client.c
  7.19      +1 -1      ircd-hybrid-7/src/fileio.c
  7.39      +1 -2      ircd-hybrid-7/src/hash.c
  7.52      +0 -19     ircd-hybrid-7/src/irc_string.c
  1.236     +6 -6      ircd-hybrid-7/src/ircd_parser.y
  7.47      +2 -2      ircd-hybrid-7/src/ircdauth.c
  7.42      +1 -1      ircd-hybrid-7/src/list.c
  7.22      +2 -4      ircd-hybrid-7/src/motd.c
  7.293     +3 -4      ircd-hybrid-7/src/s_conf.c
  7.246     +2 -2      ircd-hybrid-7/src/s_serv.c
  7.190     +8 -10     ircd-hybrid-7/src/s_user.c
  7.13      +1 -2      ircd-hybrid-7/src/scache.c
  7.16      +1 -2      ircd-hybrid-7/src/whowas.c



lusky       2002/02/24 15:32:25 EST	(20020224_4)

  Modified files:
    include              config.h config.h.dist patchlevel.h 
    src                  s_log.c 
  Log:
  - revved patchlevel to -7b11
  - fixed compile warning for SYSLOG_USERS
  - cleanup to config.h
  - sync config.h.dist to config.h
  
  Revision  Changes    Path
  7.130     +4 -4      ircd-hybrid-7/include/config.h
  7.56      +28 -27    ircd-hybrid-7/include/config.h.dist
  7.20      +1 -1      ircd-hybrid-7/include/patchlevel.h
  7.38      +1 -1      ircd-hybrid-7/src/s_log.c



leeh        2002/02/24 12:37:42 EST	(20020224_3)

  Modified files:
    src                  client.c 
  Log:
  - also walk the unknowns list for dlines on check_klines()
    (bug reported by Paul Miseiko <teardrop@teardrop.ca>)
  
  Revision  Changes    Path
  7.238     +19 -1     ircd-hybrid-7/src/client.c



db          2002/02/24 12:23:32 EST	(20020224_2)

  Modified files:
    src                  s_user.c send.c 
  Log:
  - Don't bother giving exit_client the socket name in dead_link
    it does not understand the %s convention dead_link() does and just prints
    a '%s' instead. thats dumb.
  - We had one place where we printed "Ghost" instead of "Ghosted client"
    like everywhere else. fixed.
  
  Revision  Changes    Path
  7.189     +1 -1      ircd-hybrid-7/src/s_user.c
  7.180     +1 -1      ircd-hybrid-7/src/send.c



wcampbel    2002/02/23 23:45:04 EST	(20020224_1)

  Modified files:
    doc                  operguide.txt 
  Log:
  Updates to the Oper Guide:
  
  Spelling and Grammar (Hwy)
  ChanFix information (qurve)
  Hybrid 6 information (Hwy)
  
  Revision  Changes    Path
  1.8       +40 -41    ircd-hybrid-7/doc/operguide.txt



a1kmm       2002/02/23 23:44:50 EST	(20020224_0)

  Modified files:
    src                  client.c 
  Log:
  - Added a #if 0 around the expensive asserts for now. Perhaps we want a
    better define system later.
  
  Revision  Changes    Path
  7.237     +2 -0      ircd-hybrid-7/src/client.c



leeh        2002/02/23 16:20:41 EST	(20020223_6)

  Modified files:
    src                  class.c 
  Log:
  - apparently you cant do that, oh well
  
  Revision  Changes    Path
  7.34      +7 -3      ircd-hybrid-7/src/class.c



leeh        2002/02/23 12:54:37 EST	(20020223_5)

  Modified files:
    src                  class.c 
  Log:
  - cleanups to get_client_ping
  
  Revision  Changes    Path
  7.33      +3 -7      ircd-hybrid-7/src/class.c



androsyn    2002/02/23 12:32:45 EST	(20020223_4)

  Modified files:
    src                  s_user.c 
  Log:
  Fix ping cookies..
  
  Revision  Changes    Path
  7.188     +14 -11    ircd-hybrid-7/src/s_user.c



leeh        2002/02/23 10:30:55 EST	(20020223_3)

  Modified files:
    include              config.h config.h.dist 
    src                  client.c 
  Log:
  - added a kludged #define to hide server ips from everyone including admins,
    I dont like this, but *shrug*
  
  Revision  Changes    Path
  7.129     +20 -7     ircd-hybrid-7/include/config.h
  7.55      +20 -7     ircd-hybrid-7/include/config.h.dist
  7.236     +4 -0      ircd-hybrid-7/src/client.c



leeh        2002/02/23 07:58:32 EST	(20020223_2)

  Modified files:
    src                  client.c 
  Log:
  - only check/set IsClosing/IsDead for local connections..
  
  Revision  Changes    Path
  7.235     +4 -6      ircd-hybrid-7/src/client.c



leeh        2002/02/23 06:23:15 EST	(20020223_1)

  Modified files:
    src                  client.c 
  Log:
  - we only set IsDead for local clients
  - the ->localClient->listener is already in the MyConnect() below? - you
    cant try to access it if its not a local client..
  
  Revision  Changes    Path
  7.234     +6 -0      ircd-hybrid-7/src/client.c



a1kmm       2002/02/23 00:29:17 EST	(20020223_0)

  Modified files:
    src                  client.c s_auth.c s_user.c 
  Log:
  - Fixed the bug where we were leaving clients on the auth list until after
    we parsed any commands waiting on their buffer(which meant that if they
    got exited then, they would try to be removed from the list they were
    already being removed from). I cannot get ircd to core using any connection
    flooding or cloning test now.
  - Left in my asserts() I wrote about a week ago. These are more extensive
    and expensive than Androsyn's asserts, and we definitely want them out
    before we release.
  
  Revision  Changes    Path
  7.233     +17 -0     ircd-hybrid-7/src/client.c
  7.83      +3 -2      ircd-hybrid-7/src/s_auth.c
  7.187     +5 -1      ircd-hybrid-7/src/s_user.c



androsyn    2002/02/22 10:24:15 EST	(20020222_0)

  Modified files:
    src                  s_serv.c 
  Log:
  It seems cygwin really does need that damned vfork()
  
  Revision  Changes    Path
  7.245     +4 -1      ircd-hybrid-7/src/s_serv.c



androsyn    2002/02/21 08:47:45 EST	(20020221_1)

  Modified files:
    modules              m_svinfo.c 
  Log:
  Remove a call to time() and replace it with set_time()
  
  Revision  Changes    Path
  1.32      +2 -2      ircd-hybrid-7/modules/m_svinfo.c



wcampbel    2002/02/20 21:47:34 EST	(20020221_0)

  Modified files:
    doc                  operguide.txt 
  Log:
  Update to Riedel's operguide.txt
  
  Submitted by:   Riedel
  
  Revision  Changes    Path
  1.7       +12 -12    ircd-hybrid-7/doc/operguide.txt



androsyn    2002/02/19 13:28:19 EST	(20020219_1)

  Modified files:
    src                  client.c 
  Log:
  Add an assert() that should catch if a client is on the lclient list when we
  try to free it...
  
  Revision  Changes    Path
  7.232     +1 -0      ircd-hybrid-7/src/client.c



androsyn    2002/02/19 10:22:13 EST	(20020219_0)

  Modified files:
    src                  packet.c 
  Log:
  Move an assert up a little bit..
  
  Revision  Changes    Path
  7.71      +4 -3      ircd-hybrid-7/src/packet.c



wcampbel    2002/02/18 17:07:45 EST	(20020218_2)

  Modified files:
    doc                  whats-new.txt 
  Log:
  Documented CAP_PARA...
  
  Revision  Changes    Path
  7.33      +1 -0      ircd-hybrid-7/doc/whats-new.txt



jmallett    2002/02/17 21:32:53 EST	(20020218_1)

  Modified files:
    src                  client.c 
  Log:
  Fix the bug reported by me and Wendy where we try to access the localClient
  structure which may be NULL, outside of a check for MyConnect.  This fixes
  the NULL dereference by putting it inside the if(MyConnect()).
  
  Revision  Changes    Path
  7.231     +12 -12    ircd-hybrid-7/src/client.c



jmallett    2002/02/17 20:30:30 EST	(20020218_0)

  Modified files:
    src                  modules.c 
  Log:
  Finally get around to testing src/modules.c on my old OSX box again.  Fixed
  a typo I managed to dissipate pretty well in the code of the word 'Modules'.
  
  Revision  Changes    Path
  7.97      +4 -4      ircd-hybrid-7/src/modules.c



a1kmm       2002/02/17 04:07:34 EST	(20020217_18)

  Modified files:
    src                  s_serv.c s_user.c 
  Log:
  - If you are removing a client from one list and putting them on to another,
    after you have called send*, you have to check that the client is not dead.
    I have done this for register_local_user and server_estab, but there may be
    other places where we move from one list to another. I would appreciate it if
    someone can check this to make sure it is okay to just return where I do
    etc... and that I don't check too early for IsDead()
  
  Revision  Changes    Path
  7.244     +3 -0      ircd-hybrid-7/src/s_serv.c
  7.186     +5 -2      ircd-hybrid-7/src/s_user.c



a1kmm       2002/02/17 03:34:22 EST	(20020217_17)

  Modified files:
    src                  client.c send.c 
  Log:
  - Do not call exit_client() again if a send error occurs while
    sending the queues for exit_client()
  
  Revision  Changes    Path
  7.230     +1 -2      ircd-hybrid-7/src/client.c
  7.179     +2 -1      ircd-hybrid-7/src/send.c



a1kmm       2002/02/17 03:02:21 EST	(20020217_16)

  Modified files:
    src                  client.c s_bsd.c 
  Log:
  - Don't clean up the listener until the get to free_client. This fixes
    the coredump in user_welcome() when the user has exited.
  
  Revision  Changes    Path
  7.229     +13 -0     ircd-hybrid-7/src/client.c
  7.163     +0 -12     ircd-hybrid-7/src/s_bsd.c



db          2002/02/17 02:29:59 EST	(20020217_15)

  Modified files:
    src                  listener.c 
  Log:
  - mostly cosmetic. prototypes should be on separate lines,
  - make formatting consistent with hybrid 'standard'
  
  Revision  Changes    Path
  7.64      +55 -34    ircd-hybrid-7/src/listener.c



androsyn    2002/02/17 00:39:33 EST	(20020217_14)

  Modified files:
    include              client.h 
    modules              m_trace.c 
    src                  client.c hash.c ircd.c packet.c parse.c 
                         s_auth.c s_bsd.c s_conf.c s_serv.c send.c 
  Log:
  Okay..I know this is a big ass commit, but it was driving me nuts.  I don't
  care if this delays an rc another week or two but its the right thing to do.
  Basically move client_p->fd into client_p->localClient->fd.  If you don't
  like it, tough.
  
  Revision  Changes    Path
  7.140     +5 -4      ircd-hybrid-7/include/client.h
  1.44      +7 -7      ircd-hybrid-7/modules/m_trace.c
  7.228     +8 -12     ircd-hybrid-7/src/client.c
  7.38      +2 -2      ircd-hybrid-7/src/hash.c
  7.220     +0 -1      ircd-hybrid-7/src/ircd.c
  7.70      +6 -6      ircd-hybrid-7/src/packet.c
  7.121     +1 -1      ircd-hybrid-7/src/parse.c
  7.82      +8 -8      ircd-hybrid-7/src/s_auth.c
  7.162     +13 -13    ircd-hybrid-7/src/s_bsd.c
  7.292     +1 -1      ircd-hybrid-7/src/s_conf.c
  7.243     +23 -23    ircd-hybrid-7/src/s_serv.c
  7.178     +6 -6      ircd-hybrid-7/src/send.c



androsyn    2002/02/16 23:58:59 EST	(20020217_13)

  Modified files:
    src                  send.c 
  Log:
  Put the SetDead() back in there..
  
  Revision  Changes    Path
  7.177     +2 -8      ircd-hybrid-7/src/send.c



a1kmm       2002/02/16 23:54:02 EST	(20020217_12)

  Modified files:
    src                  send.c 
  Log:
  - On second thoughts, don't close the fd if it is already -1.
  
  Revision  Changes    Path
  7.176     +5 -2      ircd-hybrid-7/src/send.c



a1kmm       2002/02/16 23:52:25 EST	(20020217_11)

  Modified files:
    src                  send.c 
  Log:
  - Close the fd in dead_link() so we don't get into an infinite loop by trying
    to send from exit_client().
  
  Revision  Changes    Path
  7.175     +4 -0      ircd-hybrid-7/src/send.c



androsyn    2002/02/16 23:38:37 EST	(20020217_10)

  Modified files:
    src                  s_serv.c 
  Log:
  Fixed a minor compile warning with an #ifdef
  
  Revision  Changes    Path
  7.242     +1 -1      ircd-hybrid-7/src/s_serv.c



jmallett    2002/02/16 23:30:48 EST	(20020217_9)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Fix the way configure determines the kind of dl*(3) [or lack thereof] to use
  so that it will work hopefully on the widest variety of systems.
  
  Revision  Changes    Path
  7.121     +3 -2      ircd-hybrid-7/autoconf/configure.in
  7.124     +285 -227  ircd-hybrid-7/configure



jmallett    2002/02/16 23:19:21 EST	(20020217_8)

  Modified files:
    src                  modules.c 
  Log:
  Include dlfcn.h if we have -ldl or dlopen(3), sorry A1kmm!
  
  Revision  Changes    Path
  7.96      +1 -1      ircd-hybrid-7/src/modules.c



jmallett    2002/02/16 23:04:35 EST	(20020217_7)

  Modified files:
    src                  modules.c 
  Log:
  Superfluous checks before including dlfcn.h
  
  Revision  Changes    Path
  7.95      +1 -1      ircd-hybrid-7/src/modules.c



jmallett    2002/02/16 22:56:57 EST	(20020217_6)

  Modified files:
    src                  modules.c 
  Log:
  Move our preprocessor definition for the dl*(3) shims for dyld systems to
  the appropriate location.
  
  Revision  Changes    Path
  7.94      +4 -3      ircd-hybrid-7/src/modules.c



androsyn    2002/02/16 22:11:30 EST	(20020217_5)

  Modified files:
    src                  s_serv.c send.c 
  Log:
  Remove some extra SetDead() calls.  We are going straight into exit_client()
  anyways.
  
  Revision  Changes    Path
  7.241     +0 -1      ircd-hybrid-7/src/s_serv.c
  7.174     +0 -2      ircd-hybrid-7/src/send.c



androsyn    2002/02/16 21:55:25 EST	(20020217_4)

  Modified files:
    src                  s_serv.c 
  Log:
  Fix cygwin from spewing all over the console..
  
  Revision  Changes    Path
  7.240     +2 -1      ircd-hybrid-7/src/s_serv.c



androsyn    2002/02/16 21:48:20 EST	(20020217_3)

  Modified files:
    include              client.h 
    src                  client.c packet.c send.c 
  Log:
  Fixed the double exit_client() stuff I think...
  
  Revision  Changes    Path
  7.139     +2 -0      ircd-hybrid-7/include/client.h
  7.227     +1 -1      ircd-hybrid-7/src/client.c
  7.69      +0 -9      ircd-hybrid-7/src/packet.c
  7.173     +1 -1      ircd-hybrid-7/src/send.c



androsyn    2002/02/16 20:27:37 EST	(20020217_2)

  Modified files:
    src                  s_bsd.c 
  Log:
  Fixed a tyop
  
  Revision  Changes    Path
  7.161     +1 -1      ircd-hybrid-7/src/s_bsd.c



db          2002/02/16 19:54:10 EST	(20020217_1)

  Modified files:
    src                  client.c 
  Log:
  - We have a macro that does what the old code did, so lets use it.
  - cosmetic change only
  
  Revision  Changes    Path
  7.226     +2 -3      ircd-hybrid-7/src/client.c



androsyn    2002/02/16 19:46:02 EST	(20020217_0)

  Modified files:
    src                  s_bsd.c 
  Log:
  close_connection() needs to know about and close all servlink related
  connections including the ctrl connections and any of the pipes.
  
  Revision  Changes    Path
  7.160     +13 -0     ircd-hybrid-7/src/s_bsd.c



a1kmm       2002/02/14 02:06:12 EST	(20020214_1)

  Modified files:
    modules              m_who.c 
  Log:
  - Removed a spurious NUMLISTS define. Although I still wonder why we didn't
    stick to MAX_SUBLISTS.
  
  Revision  Changes    Path
  1.54      +1 -7      ircd-hybrid-7/modules/m_who.c



a1kmm       2002/02/14 00:50:35 EST	(20020214_0)

  Modified files:
    src                  .depend client.c s_serv.c send.c 
  Log:
  - A patch by mrtime14c to fix double frees, with some cleanups by
    Dianora and a minor fix by me.
  
  Revision  Changes    Path
  7.4       +20 -16    ircd-hybrid-7/src/.depend
  7.225     +37 -79    ircd-hybrid-7/src/client.c
  7.239     +1 -1      ircd-hybrid-7/src/s_serv.c
  7.172     +10 -13    ircd-hybrid-7/src/send.c



jmallett    2002/02/13 13:41:20 EST	(20020213_2)

  Modified files:
    include              channel.h 
    modules              m_who.c 
    src                  channel.c channel_mode.c 
  Log:
  Centralize the preprocessor definition that controls how many lists are needed
  depending on OANDV, and make use of it correctly.
  
  Revision  Changes    Path
  7.103     +5 -1      ircd-hybrid-7/include/channel.h
  1.53      +1 -7      ircd-hybrid-7/modules/m_who.c
  7.299     +0 -6      ircd-hybrid-7/src/channel.c
  7.21      +2 -12     ircd-hybrid-7/src/channel_mode.c



jmallett    2002/02/13 13:39:15 EST	(20020213_1)

  Modified files:
    .                    README.FIRST 
  Log:
  Add a big screaming note about the need to make clean or make distclean when
  upgrading.  This probably won't really apply after a release, but still.
  
  Revision  Changes    Path
  7.29      +4 -0      ircd-hybrid-7/README.FIRST



androsyn    2002/02/13 13:16:48 EST	(20020213_0)

  Modified files:
    modules              m_who.c 
    src                  channel.c channel_mode.c 
  Log:
  Fixes the mode bugs we were talking about..
  Submitted by: svatopluk@gmx.de
  
  Revision  Changes    Path
  1.52      +11 -3     ircd-hybrid-7/modules/m_who.c
  7.298     +14 -5     ircd-hybrid-7/src/channel.c
  7.20      +20 -1     ircd-hybrid-7/src/channel_mode.c



jmallett    2002/02/12 09:27:44 EST	(20020212_4)

  Modified files:
    src                  modules.c 
  Log:
  If we want to use 0-6, then modulo by 7, not by 6.
  
  Revision  Changes    Path
  7.93      +1 -1      ircd-hybrid-7/src/modules.c



jmallett    2002/02/12 09:13:36 EST	(20020212_3)

  Modified files:
    src                  modules.c 
  Log:
  Be sure to return NULL from dlerror() if we have no error to speak of.
  
  Revision  Changes    Path
  7.92      +1 -1      ircd-hybrid-7/src/modules.c



jmallett    2002/02/12 09:06:09 EST	(20020212_2)

  Modified files:
    src                  modules.c 
  Log:
  Log when a symbol is defined more than once.  Clarify when our first
  dlopen() is done.  Misc. cleanup of my dl*(3) stuff.
  
  Revision  Changes    Path
  7.91      +16 -11    ircd-hybrid-7/src/modules.c



jmallett    2002/02/12 08:48:06 EST	(20020212_1)

  Modified files:
    .                    README.FIRST 
  Log:
  Add a note about the version of the OSX DevTools required to build ircd-hybrid
  with shared module support properly.
  
  Revision  Changes    Path
  7.28      +4 -5      ircd-hybrid-7/README.FIRST



jmallett    2002/02/12 08:45:28 EST	(20020212_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              setup.h.in 
    src                  modules.c 
  Log:
  I finally sat down and wrote working dl*(3) shims for dyld systems that do
  not have their own. Based on the NSModule(3) manpage, and various header
  files.
  
  Works on OSX 10.0.4 with December 2001 Development Tools.
  
  Revision  Changes    Path
  7.120     +5 -1      ircd-hybrid-7/autoconf/configure.in
  7.123     +330 -213  ircd-hybrid-7/configure
  7.45      +6 -0      ircd-hybrid-7/include/setup.h.in
  7.90      +112 -6    ircd-hybrid-7/src/modules.c



jmallett    2002/02/11 18:06:28 EST	(20020211_0)

  Modified files:
    .                    README.FIRST 
  Log:
  Correct a note about byacc so that people don't feel hopeless when they
  find out their byacc is dying.
  
  Submitted by:   Samuel in Spain (He emailed me about this being unclear)
  
  Revision  Changes    Path
  7.27      +7 -2      ircd-hybrid-7/README.FIRST



db          2002/02/10 18:47:07 EST	(20020210_4)

  Modified files:
    modules              m_who.c 
  Log:
  - cleaner patch for 'who 0'
  
  Revision  Changes    Path
  1.51      +6 -9      ircd-hybrid-7/modules/m_who.c



db          2002/02/10 16:24:35 EST	(20020210_3)

  Modified files:
    modules              m_who.c 
  Log:
  - Stop a /who 0 coring
    it would not core on fbsd because of libc, but does on solaris.
  
  Revision  Changes    Path
  1.50      +8 -6      ircd-hybrid-7/modules/m_who.c



androsyn    2002/02/10 12:26:35 EST	(20020210_2)

  Modified files:
    src                  ircd.c 
  Log:
  Forgot to remove a debugging fprintf().
  
  Revision  Changes    Path
  7.219     +0 -2      ircd-hybrid-7/src/ircd.c



androsyn    2002/02/10 03:49:58 EST	(20020210_1)

  Modified files:
    src                  ircd.c 
  Log:
  Tweaks for the delay on the ioloop.
  
  Revision  Changes    Path
  7.218     +11 -5     ircd-hybrid-7/src/ircd.c



wcampbel    2002/02/09 22:35:11 EST	(20020210_0)

  Modified files:
    include              m_info.h motd.h s_conf.h 
    modules              m_rehash.c 
    src                  ircd.c motd.c 
  Log:
  Removed the remnants of the old help system.
  (U)HELP_MOTD enums, ConfigFileEntry.(u)helpfile elements,
  and calls to (Init|Read)MessageFile() on the help directories.
  
  Approved by:    Diane
  
  Revision  Changes    Path
  7.39      +4 -4      ircd-hybrid-7/include/m_info.h
  7.9       +1 -3      ircd-hybrid-7/include/motd.h
  7.176     +0 -2      ircd-hybrid-7/include/s_conf.h
  1.38      +2 -11     ircd-hybrid-7/modules/m_rehash.c
  7.217     +0 -4      ircd-hybrid-7/src/ircd.c
  7.21      +0 -6      ircd-hybrid-7/src/motd.c



a1kmm       2002/02/09 03:55:35 EST	(20020209_0)

  Modified files:
    src                  hook.c 
  Log:
  - Fixed a reference to memory shortly after it has been freed.
  
  Revision  Changes    Path
  7.13      +1 -1      ircd-hybrid-7/src/hook.c



jmallett    2002/02/08 01:04:27 EST	(20020208_2)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Check for Apple's GCC, rework PICFLAGS a little.
  
  Revision  Changes    Path
  7.119     +25 -23    ircd-hybrid-7/autoconf/configure.in
  7.122     +206 -197  ircd-hybrid-7/configure



lusky       2002/02/07 23:55:56 EST	(20020208_1)

  Modified files:
    include              patchlevel.h 
    src                  adns.c 
  Log:
  - removed unusued dns_cancel_all function
  - revved patchlevel to 7b10
  
  Revision  Changes    Path
  7.19      +1 -1      ircd-hybrid-7/include/patchlevel.h
  7.38      +0 -32     ircd-hybrid-7/src/adns.c



jmallett    2002/02/07 22:26:34 EST	(20020208_0)

  Modified files:
    src                  channel.c 
  Log:
  Bring can_send into the logic that a server can send to a channel, because
  we allow servers to m_message() with a NOTICE, but the NOTICE always
  fails because of course they aren't on that channel. This doesn't affect
  PRIVMSG as that is stopped in m_privmsg().
  
  Explained hastently to: Dianora
  
  Revision  Changes    Path
  7.297     +2 -0      ircd-hybrid-7/src/channel.c



leeh        2002/02/06 10:02:35 EST	(20020206_1)

  Modified files:
    include              s_serv.h 
    modules              m_invite.c 
    src                  adns.c s_serv.c 
  Log:
  - cleaned up K&R/single space indenting in adns.c
  - added CAP_PARA
  - if channel is +p, broadcast invite to CAP_PARA servers
  
  Revision  Changes    Path
  7.62      +2 -1      ircd-hybrid-7/include/s_serv.h
  1.41      +22 -21    ircd-hybrid-7/modules/m_invite.c
  7.37      +104 -87   ircd-hybrid-7/src/adns.c
  7.238     +1 -0      ircd-hybrid-7/src/s_serv.c



ejb         2002/02/05 22:37:53 EST	(20020206_0)

  Added files:
    .                    clean.com 
  Log:
  - Added clean.com .. this is a hack and will go away as soon as i
    have a working top-level descrip.mms for VMS.
  
  Revision  Changes    Path
  1.1       +10 -0     ircd-hybrid-7/clean.com (new)



ejb         2002/02/05 16:46:00 EST	(20020205_8)

  Modified files:
    .                    README.FIRST README.PLATFORMS 
  Log:
  - Added VMS to list of supported platforms.
  
  Revision  Changes    Path
  7.26      +1 -0      ircd-hybrid-7/README.FIRST
  7.7       +13 -12    ircd-hybrid-7/README.PLATFORMS



jmallett    2002/02/05 16:38:53 EST	(20020205_7)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Teach configure to determine whether $CC is SVR4 Source Generation System
  compliant, so we can use a shared interface, such as is done for PICFLAGS
  here. Since I had to add checks for Sun WorkShop anyway, I removed the
  SunOS checks... They didn't really make sense anyway in my opinion. I ran
  this by a few people (both the patches and the idea), and it looked sane
  to them.
  
  Right now we recognize the following SGS-ish compilers:
          o) MIPSpro
          o) Sun WorkShop
          o) TenDRA
  
  Revision  Changes    Path
  7.118     +36 -32    ircd-hybrid-7/autoconf/configure.in
  7.121     +217 -210  ircd-hybrid-7/configure



ejb         2002/02/05 16:34:02 EST	(20020205_6)

  Modified files:
    .                    README.VMS 
    adns                 setup.c 
    include              config.h 
    tools                descrip.mms 
  Log:
  - a few more VMS changes:
     use logical names, not hardcoded paths;
     fixed tools to compile mkpasswd properly;
     use IRCD$CONFDIR:RESOLV.CONF, not []RESOLV.CONF;
     brought README.VMS up to date.
  
  Revision  Changes    Path
  1.11      +22 -15    ircd-hybrid-7/README.VMS
  1.25      +2 -2      ircd-hybrid-7/adns/setup.c
  7.128     +21 -19    ircd-hybrid-7/include/config.h
  7.5       +4 -0      ircd-hybrid-7/tools/descrip.mms



leeh        2002/02/05 15:16:59 EST	(20020205_5)

  Modified files:
    modules              m_invite.c 
  Log:
  - disable invite propagation
  
  Revision  Changes    Path
  1.40      +13 -1     ircd-hybrid-7/modules/m_invite.c



jmallett    2002/02/05 09:37:55 EST	(20020205_4)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Add support for MIPSpro based on what the SGI ABI compiler manpage dictates,
  though MIPSpro will probably play nice with a different set of options... This
  needs tested, but I can't test it, so I'm going to commit it as it doesn't
  break anything that wouldn't already be broken, and hope someone can test it.
  
  Revision  Changes    Path
  7.117     +24 -4     ircd-hybrid-7/autoconf/configure.in
  7.120     +198 -186  ircd-hybrid-7/configure



leeh        2002/02/05 06:42:25 EST	(20020205_3)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - dont allow spaces in network name (breaks 005)
  
  Revision  Changes    Path
  1.235     +5 -0      ircd-hybrid-7/src/ircd_parser.y



wcampbel    2002/02/04 23:04:53 EST	(20020205_2)

  Modified files:
    .                    INSTALL README.FIRST 
  Log:
  Update to INSTALL, reference convertklines
  Cygwin IS currently supported, in a limited way.
  
  Revision  Changes    Path
  7.22      +17 -1     ircd-hybrid-7/INSTALL
  7.25      +1 -2      ircd-hybrid-7/README.FIRST



jmallett    2002/02/04 21:40:24 EST	(20020205_1)

  Modified files:
    tools                viconf.c 
  Log:
  Fix typo, viconf.c["Cant'", "Can't"]
  
  Revision  Changes    Path
  7.4       +2 -2      ircd-hybrid-7/tools/viconf.c



ejb         2002/02/04 21:20:49 EST	(20020205_0)

  Modified files:
    .                    Hybrid-team 
  Log:
  changed my nick & email in Hybrid-team
  
  Revision  Changes    Path
  7.45      +1 -1      ircd-hybrid-7/Hybrid-team



ejb         2002/02/04 16:07:55 EST	(20020204_12)

  Modified files:
    adns                 descrip.mms 
    include              res.h 
    modules              descrip.mms 
    src                  descrip.mms modules.c 
  Added files:
    modules/core         descrip.mms 
  Log:
  - fixed VMS compile; we generate [.modules]core.olb from
    [.modules.core]*.c, and link against [.src]ircd.exe along
    with modules.olb.  NOT tested for runtime yet, also still need
    to fix config.h paths (so binaries can be distributed).
  
  Revision  Changes    Path
  1.2       +2 -1      ircd-hybrid-7/adns/descrip.mms
  7.19      +5 -1      ircd-hybrid-7/include/res.h
  1.1       +18 -0     ircd-hybrid-7/modules/core/descrip.mms (new)
  1.5       +7 -6      ircd-hybrid-7/modules/descrip.mms
  7.9       +3 -2      ircd-hybrid-7/src/descrip.mms
  7.89      +4 -0      ircd-hybrid-7/src/modules.c



androsyn    2002/02/04 14:14:36 EST	(20020204_11)

  Modified files:
    src                  adns.c 
  Log:
  The bugfix that went in -6. Well here it is for -7.
  
  Revision  Changes    Path
  7.36      +1 -4      ircd-hybrid-7/src/adns.c



leeh        2002/02/04 11:57:01 EST	(20020204_10)

  Modified files:
    .                    Hybrid-team 
    modules              .depend 
  Log:
  - added jmallet^3 to hybteam
  
  Revision  Changes    Path
  7.44      +1 -0      ircd-hybrid-7/Hybrid-team
  1.5       +121 -121  ircd-hybrid-7/modules/.depend



jmallett    2002/02/04 11:31:54 EST	(20020204_9)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  Correct my name, s/Joseph/J./
  
  Revision  Changes    Path
  7.6       +5 -5      ircd-hybrid-7/README.PLATFORMS



jmallett    2002/02/04 10:23:00 EST	(20020204_8)

  Modified files:
    .                    configure 
  Log:
  Regenerate configure with autoconf 2.13
  
  Revision  Changes    Path
  7.119     +209 -198  ircd-hybrid-7/configure



jmallett    2002/02/04 10:17:28 EST	(20020204_7)

  Modified files:
    autoconf             configure.in 
  Log:
  Add rtsigio to the list of things we can't find if we can't find any
  selection paradigm. However I am not sure if we should automagically try
  this as it is marked experimental... ?
  
  Revision  Changes    Path
  7.116     +1 -1      ircd-hybrid-7/autoconf/configure.in



androsyn    2002/02/04 07:51:37 EST	(20020204_6)

  Modified files:
    src                  listener.c 
  Log:
  Check errno, before we whine to the oper about being able to accept the
  connection or not.
  
  Revision  Changes    Path
  7.63      +3 -0      ircd-hybrid-7/src/listener.c



androsyn    2002/02/04 02:03:54 EST	(20020204_5)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  This should keep us from calling fcntl() on every read or write.
  
  Revision  Changes    Path
  7.18      +0 -32     ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2002/02/04 01:12:01 EST	(20020204_4)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Back out the changes Andrew made that tried to call the handler in
  comm_setselect() as these are not needed now.
  
  Revision  Changes    Path
  7.17      +0 -7      ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2002/02/04 01:07:59 EST	(20020204_3)

  Modified files:
    src                  s_bsd_sigio.c s_serv.c 
  Log:
  Minor bugfixes with fcntl()
  
  Revision  Changes    Path
  7.16      +4 -6      ircd-hybrid-7/src/s_bsd_sigio.c
  7.237     +2 -2      ircd-hybrid-7/src/s_serv.c



androsyn    2002/02/04 00:17:32 EST	(20020204_2)

  Modified files:
    src                  channel.c client.c linebuf.c 
  Log:
  Some tweaks to the default block heap sizes.. The should reduce initial
  memory consumption by a bit.
  
  Revision  Changes    Path
  7.296     +1 -1      ircd-hybrid-7/src/channel.c
  7.224     +1 -1      ircd-hybrid-7/src/client.c
  7.76      +1 -1      ircd-hybrid-7/src/linebuf.c



androsyn    2002/02/03 23:52:48 EST	(20020204_1)

  Modified files:
    modules              m_rehash.c 
  Log:
  Ponder..who took out cleanup_channels() from rehash channels anyways..
  
  Revision  Changes    Path
  1.37      +2 -1      ircd-hybrid-7/modules/m_rehash.c



androsyn    2002/02/03 23:29:54 EST	(20020204_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              setup.h.in 
    src                  listener.c s_auth.c s_bsd.c s_serv.c 
  Log:
  Fix the RT Sigio code on linux once and for all.  Somebody other than me
  should test this and give me some feedback.
  
  Revision  Changes    Path
  7.115     +3 -3      ircd-hybrid-7/autoconf/configure.in
  7.118     +6 -6      ircd-hybrid-7/configure
  7.44      +4 -31     ircd-hybrid-7/include/setup.h.in
  7.62      +1 -4      ircd-hybrid-7/src/listener.c
  7.81      +2 -5      ircd-hybrid-7/src/s_auth.c
  7.159     +0 -7      ircd-hybrid-7/src/s_bsd.c
  7.236     +3 -9      ircd-hybrid-7/src/s_serv.c



androsyn    2002/02/03 13:58:08 EST	(20020203_0)

  Modified files:
    modules              m_kline.c m_trace.c 
  Log:
  A few changes that will keep code from directly calling time() by itself.
  It now calls set_time(), updating SystemTime(and CurrentTime), and uses
  CurrentTime directly.
  
  Revision  Changes    Path
  1.96      +7 -6      ircd-hybrid-7/modules/m_kline.c
  1.43      +14 -17    ircd-hybrid-7/modules/m_trace.c



leeh        2002/02/02 11:01:14 EST	(20020202_3)

  Modified files:
    help                 Makefile.in 
  Log:
  - dont build index files by default, we can keep them updated and in cvs
  
  Revision  Changes    Path
  1.15      +3 -4      ircd-hybrid-7/help/Makefile.in



leeh        2002/02/02 10:57:02 EST	(20020202_2)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - patch to fix HAVE_SNPRINTF HAVE_VSNPRINTF via Giorgos Keramidas
    <keramida@freebsd.org>
  
  Revision  Changes    Path
  7.114     +2 -2      ircd-hybrid-7/autoconf/configure.in
  7.117     +231 -228  ircd-hybrid-7/configure



leeh        2002/02/02 10:35:01 EST	(20020202_1)

  Modified files:
    include              supported.h 
    src                  s_user.c 
  Log:
  - 005 was exceeding MAPARAMS, so added a second 005 set, which includes the
    missing NETWORK=%s
  
  Revision  Changes    Path
  1.18      +11 -7     ircd-hybrid-7/include/supported.h
  7.185     +6 -1      ircd-hybrid-7/src/s_user.c



leeh        2002/02/02 10:25:46 EST	(20020202_0)

  Modified files:
    src                  parse.c 
  Log:
  - if we were exceeding the param count, we werent stripping off the : (like
    we do if we dont exceed it), so we were ending up with :::: across servers
  
  Revision  Changes    Path
  7.120     +4 -1      ircd-hybrid-7/src/parse.c



wcampbel    2002/02/01 11:48:48 EST	(20020201_1)

  Modified files:
    .                    README.FIRST 
  Log:
  Document the requirement that /etc/ services, protocols, and resolv.conf
  must be readable by the ircd user in order for the server to start.
  
  Revision  Changes    Path
  7.24      +5 -0      ircd-hybrid-7/README.FIRST



wcampbel    2002/01/31 23:13:20 EST	(20020201_0)

  Modified files:
    doc                  challenge.txt 
  Log:
  Updated the challenge/response document from the SGML source.
  
  Revision  Changes    Path
  1.8       +60 -20    ircd-hybrid-7/doc/challenge.txt



leeh        2002/01/30 10:00:02 EST	(20020130_1)

  Modified files:
    include              channel.h 
    modules              m_set.c 
    src                  client.c 
  Log:
  - commited patch to fix check_splitmode() wrt events from
    Giorgos Keramidas <keramida@ceid.upatras.gr>
  
  Revision  Changes    Path
  7.102     +1 -1      ircd-hybrid-7/include/channel.h
  1.42      +4 -4      ircd-hybrid-7/modules/m_set.c
  7.223     +1 -1      ircd-hybrid-7/src/client.c



androsyn    2002/01/30 01:48:17 EST	(20020130_0)

  Modified files:
    src                  ircd.c 
  Log:
  Keep people from starting ircd as root.
  
  Revision  Changes    Path
  7.216     +7 -0      ircd-hybrid-7/src/ircd.c



leeh        2002/01/28 15:58:20 EST	(20020128_0)

  Modified files:
    contrib              example_module.c m_flags.c m_jupe.c 
                         m_map.c m_mkpasswd.c 
  Log:
  - commited hwys patch for contrib/
  
  Revision  Changes    Path
  1.4       +3 -1      ircd-hybrid-7/contrib/example_module.c
  1.6       +3 -1      ircd-hybrid-7/contrib/m_flags.c
  1.25      +3 -1      ircd-hybrid-7/contrib/m_jupe.c
  1.10      +4 -1      ircd-hybrid-7/contrib/m_map.c
  1.6       +3 -1      ircd-hybrid-7/contrib/m_mkpasswd.c



leeh        2002/01/27 14:05:07 EST	(20020127_0)

  Modified files:
    modules              Makefile.in 
  Log:
  - commited hwys fix for the makefile
  
  Revision  Changes    Path
  1.65      +2 -2      ircd-hybrid-7/modules/Makefile.in



db          2002/01/26 15:17:01 EST	(20020126_0)

  Modified files:
    src                  channel.c 
  Log:
  Don't use strlen() when sprintf() already returns it
  
  Revision  Changes    Path
  7.295     +3 -4      ircd-hybrid-7/src/channel.c



leeh        2002/01/23 13:14:09 EST	(20020123_1)

  Modified files:
    src                  s_user.c 
  Log:
  - fixed the invisible stuff reported by andro..
  
  Revision  Changes    Path
  7.184     +6 -9      ircd-hybrid-7/src/s_user.c



leeh        2002/01/23 12:59:27 EST	(20020123_0)

  Modified files:
    src                  s_serv.c 
  Log:
  - added an !IsRegistered check to hunt_server, else we would forward trace
    requests to a client that had sent NICK but not USER
  
  Revision  Changes    Path
  7.235     +8 -0      ircd-hybrid-7/src/s_serv.c



davidt      2002/01/22 12:21:15 EST	(20020122_2)

  Modified files:
    include              client.h 
    src                  client.c 
  Log:
  - Add client_p->free_file and client_p->free_line.
    When exit_client() is called, it records the line/file it was called
    from in the client struct, and if the client has already been added
    to the dead_list, it will fail an assert leaving free_[file|line] to
    be examined.
  - This should be backed out before releasing, all changes are wrapped
    in #ifdef DUPFREEDEBUG
  
  Revision  Changes    Path
  7.138     +17 -1     ircd-hybrid-7/include/client.h
  7.222     +75 -14    ircd-hybrid-7/src/client.c



androsyn    2002/01/22 01:11:36 EST	(20020122_1)

  Modified files:
    src                  s_user.c 
  Log:
  Fixed the ping cookie bug..now we need to fix the negative user count crap..
  
  Revision  Changes    Path
  7.183     +5 -1      ircd-hybrid-7/src/s_user.c



androsyn    2002/01/21 22:02:29 EST	(20020122_0)

  Modified files:
    src                  client.c 
  Log:
  An assert that should catch this double free bug. Basically we check to make
  sure the client isn't already on the dead list.
  
  Revision  Changes    Path
  7.221     +3 -1      ircd-hybrid-7/src/client.c



jmallett    2002/01/20 01:26:45 EST	(20020120_0)

  Modified files:
    include              memory.h 
  Log:
  Add support for pulling in inttypes on VMS for uintptr_t.
  Obtained partially from:        ejb
  
  Revision  Changes    Path
  7.29      +5 -1      ircd-hybrid-7/include/memory.h



leeh        2002/01/16 17:21:20 EST	(20020116_2)

  Modified files:
    modules              m_invite.c 
  Log:
  - check_channel_name returns an int, not null..
  
  Revision  Changes    Path
  1.39      +2 -2      ircd-hybrid-7/modules/m_invite.c



jmallett    2002/01/16 11:02:25 EST	(20020116_1)

  Modified files:
    include              hook.h memory.h 
  Log:
  Move my uintptr_t checks to memory.h, since it works with pointers and
  belongs there moreso than hook.h and now we can build on OpenBSD!
  
  Revision  Changes    Path
  1.14      +0 -8      ircd-hybrid-7/include/hook.h
  7.28      +9 -0      ircd-hybrid-7/include/memory.h



jmallett    2002/01/16 10:48:07 EST	(20020116_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              hook.h setup.h.in 
  Log:
  If we have <inttypes.h> include it for use of uintptr_t. If we don't, we
  check to see if we have uintptr_t normally. If we do not, define it as an
  unsigned long, as that should work on most/all platforms.
  
  Revision  Changes    Path
  7.113     +3 -1      ircd-hybrid-7/autoconf/configure.in
  7.116     +73 -39    ircd-hybrid-7/configure
  1.13      +8 -0      ircd-hybrid-7/include/hook.h
  7.43      +6 -0      ircd-hybrid-7/include/setup.h.in



leeh        2002/01/14 15:17:40 EST	(20020114_1)

  Modified files:
    src                  s_user.c 
  Log:
  - we needed a send_umode() for local clients..
  
  Revision  Changes    Path
  7.182     +4 -2      ircd-hybrid-7/src/s_user.c



androsyn    2002/01/13 19:56:05 EST	(20020114_0)

  Modified files:
    src                  balloc.c 
  Log:
  I will compile before I commit.  I will compile before I commit.
  
  Revision  Changes    Path
  7.23      +1 -1      ircd-hybrid-7/src/balloc.c



leeh        2002/01/13 18:50:00 EST	(20020113_13)

  Modified files:
    src                  s_user.c 
  Log:
  - removing it is better than a debug #if 0
  
  Revision  Changes    Path
  7.181     +1 -4      ircd-hybrid-7/src/s_user.c



leeh        2002/01/13 18:47:22 EST	(20020113_12)

  Modified files:
    src                  s_user.c 
  Log:
  - fixed the double mode crap
  
  Revision  Changes    Path
  7.180     +2 -1      ircd-hybrid-7/src/s_user.c



androsyn    2002/01/13 18:34:01 EST	(20020113_11)

  Modified files:
    src                  balloc.c 
  Log:
  Add a check for mmap() failure.
  
  Revision  Changes    Path
  7.22      +10 -2     ircd-hybrid-7/src/balloc.c



leeh        2002/01/13 18:22:03 EST	(20020113_10)

  Modified files:
    src                  s_user.c 
  Log:
  - fixed a stupid: wed mixed FLAGS_INVISIBLE into both sptr->umodes and
    sptr->flags, so a user being invisible, was never told it unless they
    forced the mode themselves ;)
  
  Revision  Changes    Path
  7.179     +2 -2      ircd-hybrid-7/src/s_user.c



wcampbel    2002/01/13 13:54:47 EST	(20020113_9)

  Modified files:
    .                    BUGS TODO 
    contrib              README 
    doc                  index.txt whats-new.txt 
    tools                README 
  Removed files:
    contrib              build_one 
  Log:
  Doc updates
  Removed build_one, I'm sick of larne's whining
  
  Revision  Changes    Path
  7.46      +4 -5      ircd-hybrid-7/BUGS
  7.60      +0 -2      ircd-hybrid-7/TODO
  1.14      +3 -0      ircd-hybrid-7/contrib/README
  1.3       +0 -31     ircd-hybrid-7/contrib/build_one (dead)
  1.16      +2 -4      ircd-hybrid-7/doc/index.txt
  7.32      +4 -5      ircd-hybrid-7/doc/whats-new.txt
  7.9       +3 -7      ircd-hybrid-7/tools/README



wcampbel    2002/01/13 13:31:47 EST	(20020113_8)

  Modified files:
    .                    Makefile.in RELNOTES 
    doc                  ircd.8 
  Log:
  Reference beta10 rather than beta8
  
  Revision  Changes    Path
  7.38      +2 -2      ircd-hybrid-7/Makefile.in
  1.12      +2 -2      ircd-hybrid-7/RELNOTES
  1.6       +2 -1      ircd-hybrid-7/doc/ircd.8



db          2002/01/13 11:22:15 EST	(20020113_7)

  Modified files:
    src                  channel.c 
  Log:
  Smokey the coder says, only you can stop cute wrong code!
  <   if (who)
  ---
  >   if (who != NULL)
  
  Revision  Changes    Path
  7.294     +1 -1      ircd-hybrid-7/src/channel.c



jmallett    2002/01/13 10:02:22 EST	(20020113_6)

  Modified files:
    modules/core         m_message.c 
  Log:
  Move fl_'s check for a server sending a PRIVMSG into m_privmsg, and just
  return there, instead of going into m_message and _then_ checking for
  PRIVMSG or NOTICE.
  
  Revision  Changes    Path
  1.87      +7 -7      ircd-hybrid-7/modules/core/m_message.c



jmallett    2002/01/13 09:58:27 EST	(20020113_5)

  Modified files:
    modules/core         m_message.c 
  Log:
  As we now check much earlier on to see if a server is trying to PRIVMSG,
  take out the !IsPerson conditional here, so a server can indeed NOTICE a
  channel, in the case of, for example, saying someone cannot be opped at
  this time as the server is in split more (or things like channel flooding
  even!)
  
  Revision  Changes    Path
  1.86      +1 -3      ircd-hybrid-7/modules/core/m_message.c



jmallett    2002/01/13 02:26:14 EST	(20020113_4)

  Modified files:
    .                    ChangeLog 
  Log:
  Cut down on expansion of unintentional #Id# tagging in ChangeLog
  
  Revision  Changes    Path
  7.3332    +2 -2      ircd-hybrid-7/ChangeLog



jmallett    2002/01/13 02:19:27 EST	(20020113_3)

  Modified files:
    src                  hostmask.c 
  Log:
  Fixing some comments, since they'll get fixed eventually anyway:
  - "an possible" -> "a possible"
  
  Revision  Changes    Path
  7.63      +2 -2      ircd-hybrid-7/src/hostmask.c



jmallett    2002/01/13 02:11:13 EST	(20020113_2)

  Modified files:
    contrib              spy_whois_notice.c 
  Log:
  Make spy_whois_notice.c's _version use #Revision#
  
  Revision  Changes    Path
  1.8       +1 -1      ircd-hybrid-7/contrib/spy_whois_notice.c



jmallett    2002/01/13 02:02:37 EST	(20020113_1)

  Modified files:
    include              s_bsd.h 
  Log:
  Update comments about READBUF_SIZE
  
  Revision  Changes    Path
  7.35      +2 -1      ircd-hybrid-7/include/s_bsd.h



androsyn    2002/01/12 19:41:46 EST	(20020113_0)

  Modified files:
    src                  adns.c 
  Log:
  Fixed yet another wacky and weird /rehash dns bug..
  
  Revision  Changes    Path
  7.35      +12 -6     ircd-hybrid-7/src/adns.c



a1kmm       2002/01/12 18:06:07 EST	(20020112_3)

  Modified files:
    src                  channel.c 
  Log:
  - chanops != chanops_voiced
  
  Revision  Changes    Path
  7.293     +1 -1      ircd-hybrid-7/src/channel.c



leeh        2002/01/12 15:08:08 EST	(20020112_2)

  Modified files:
    modules/core         m_message.c 
  Log:
  - servers shouldnt send privmsgs.. we have to allow notices for stuff like
    remote klines etc, but there should be no reason for a privmsg at all
  
  Revision  Changes    Path
  1.85      +3 -9      ircd-hybrid-7/modules/core/m_message.c



jmallett    2002/01/12 13:45:42 EST	(20020112_1)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Portability fixing
  - if the autoconf check for working '-g' failed, don't shove '-g' down the
    IRC_CFLAGS of an unknown compiler, if it does work, add it by default.
    Checks for specific compilers ala TenDRA should be done if it is known
    to produce bad code :)
  
  Revision  Changes    Path
  7.112     +5 -1      ircd-hybrid-7/autoconf/configure.in
  7.115     +184 -180  ircd-hybrid-7/configure



jmallett    2002/01/12 13:38:45 EST	(20020112_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    include              setup.h.in 
    src                  hook.c ircd.c modules.c 
  Log:
  Add still more fixups for using TenDRA out of the box with Hybrid7.
  
  - configure magic to stop autoconf from slamming '-g' into CFLAGS
    just because it doesn't explicitly break compiling NULL files
    Thanks to: Andrew Clausen for helping me think around this
  - configure magic to make autoconf pick up the right types and
    includes on the host system, since autoconf uses CPPFLAGS to
    check for includes and types, and TenDRA does standards checking
    even when acting as a plain preprocessor, or whatever autoconf
    is making it do
  - configure magic to check for <sys/resource.h>, use accordingly.
  - we can't _really_ convert directly between data type pointers to
    function pointers, so convert to a faceless intermediary type first,
    namely uintptr_t (as defined by ISO -- should always exist?).
  
  Revision  Changes    Path
  7.111     +8 -2      ircd-hybrid-7/autoconf/configure.in
  7.114     +195 -192  ircd-hybrid-7/configure
  7.42      +3 -0      ircd-hybrid-7/include/setup.h.in
  7.12      +1 -1      ircd-hybrid-7/src/hook.c
  7.215     +5 -2      ircd-hybrid-7/src/ircd.c
  7.88      +4 -4      ircd-hybrid-7/src/modules.c



wcampbel    2002/01/10 23:00:04 EST	(20020111_0)

  Modified files:
    doc                  example.conf 
  Log:
  Corrected some of the items that Lee recently changed in the parser.
  It's still not properly done...this whole doc MUST be rewritten soon.
  
  Revision  Changes    Path
  7.151     +8 -6      ircd-hybrid-7/doc/example.conf



jmallett    2002/01/10 16:54:20 EST	(20020110_9)

  Modified files:
    .                    Hybrid-team 
  Log:
  Sort in nick alphabetical order, as advertised.
  
  Revision  Changes    Path
  7.43      +1 -1      ircd-hybrid-7/Hybrid-team



jmallett    2002/01/10 16:37:02 EST	(20020110_8)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Add proper TenDRA support to our configure script. Not only can we detect
  if someone is trying to use TenDRA, we can also set up the necessary string
  of IRC_CFLAGS to work on most platforms, and we can produce shared modules!
  
  Revision  Changes    Path
  7.110     +26 -4     ircd-hybrid-7/autoconf/configure.in
  7.113     +206 -183  ircd-hybrid-7/configure



jmallett    2002/01/10 15:45:17 EST	(20020110_7)

  Modified files:
    iauth/source         auth.c mtree.c sock.c 
    src                  ircdauth.c 
  Log:
  Second round of my commits to change zero and pointer comparing in assertions.
  This time do ones in the form of 'assert(ptr [!=]= 0)', reverse of last sweep.
  
  Revision  Changes    Path
  7.9       +6 -6      ircd-hybrid-7/iauth/source/auth.c
  7.8       +3 -3      ircd-hybrid-7/iauth/source/mtree.c
  7.10      +4 -4      ircd-hybrid-7/iauth/source/sock.c
  7.46      +2 -2      ircd-hybrid-7/src/ircdauth.c



jmallett    2002/01/10 15:30:50 EST	(20020110_6)

  Modified files:
    src                  s_bsd.c 
  Log:
  Turn off disable_sock_options if we have IPV6 set up. The real solution
  is to do "proper" things for IPV6 here but using IPPROTO_IPV6 just makes
  protocol unavailable messages instead. So Here it is disabled, a temporary
  and seemingly satisfactory fix.
  
  Revision  Changes    Path
  7.158     +1 -1      ircd-hybrid-7/src/s_bsd.c



jmallett    2002/01/10 11:00:03 EST	(20020110_5)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    src                  Makefile.in snprintf.c 
  Log:
  Conditionalise src/snprintf.c on whether or not we actually need it using
  configure! This also means we don't need to produce a bogus non-empty
  translation unit for strict compilers like TenDRA, Forte, and aCC.
  
  Revision  Changes    Path
  7.109     +13 -3     ircd-hybrid-7/autoconf/configure.in
  7.112     +160 -111  ircd-hybrid-7/configure
  7.107     +1 -1      ircd-hybrid-7/src/Makefile.in
  1.5       +0 -4      ircd-hybrid-7/src/snprintf.c



androsyn    2002/01/10 09:05:36 EST	(20020110_4)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  I suppose I'll claim Linux on x86 and sparc
  
  Revision  Changes    Path
  7.5       +2 -0      ircd-hybrid-7/README.PLATFORMS



wcampbel    2002/01/09 21:17:15 EST	(20020110_3)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  I guess I'll take the punish^H^H^H^H^Hleasure of handling Cygwin issues :)
  
  Revision  Changes    Path
  7.4       +1 -0      ircd-hybrid-7/README.PLATFORMS



jmallett    2002/01/09 19:51:29 EST	(20020110_2)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  Reformat the table to have space for 'Mac OS X' in the OS area. Also I'll
  support both Darwin and Mac OS X users. The two are orthogonal sometimes.
  
  Revision  Changes    Path
  7.3       +9 -8      ircd-hybrid-7/README.PLATFORMS



joant       2002/01/09 19:31:45 EST	(20020110_1)

  Modified files:
    .                    README.PLATFORMS 
  Log:
  ircd-hybrid-7/README.PLATFORMS
  
  Revision  Changes    Path
  7.2       +3 -1      ircd-hybrid-7/README.PLATFORMS



jmallett    2002/01/09 19:15:29 EST	(20020110_0)

  Modified files:
    .                    README.FIRST 
  Added files:
    .                    README.PLATFORMS 
  Log:
  Since supporting Hybrid on every platform someone would run it on is
  important, add a document including people who want to take responsibility
  for, as well as who to yell at when things blow up. Add myself
  appropriately as the NetBSD and OpenBSD on SPARC with GCC person, as well
  as Darwin on PPC with Apple's version of gcc, and TenDRA on FreeBSD/x86.
  The BSD on SPARC stuff doesn't currently work because of GCC, but I'll
  still take responsibility and try to help people with Hybrid on that pair
  of platforms.
  
  Revision  Changes    Path
  7.23      +3 -0      ircd-hybrid-7/README.FIRST
  7.1       +17 -0     ircd-hybrid-7/README.PLATFORMS (new)



jmallett    2002/01/09 18:58:08 EST	(20020109_10)

  Modified files:
    .                    README.FIRST 
  Log:
  Add notes about Darwin and Mac OS X and GCC on SPARC and UltraSPARC that
  I've run into in my portability checks.
  
  Revision  Changes    Path
  7.22      +14 -1     ircd-hybrid-7/README.FIRST



jmallett    2002/01/09 14:38:46 EST	(20020109_9)

  Modified files:
    tools                mkpasswd.c 
  Log:
  Extraneous extern optind. We don't use optind anywhere right now, so we
  don't need its definition.
  
  Revision  Changes    Path
  7.11      +1 -2      ircd-hybrid-7/tools/mkpasswd.c



jmallett    2002/01/09 12:38:38 EST	(20020109_8)

  Modified files:
    src                  client.c s_bsd.c s_gline.c s_serv.c 
                         s_user.c whowas.c 
  Log:
  Clean up a number of uses of "assert(0 != pointer)" and "assert(0 == pointer)"
  and use NULL instead, since that will always do the right thing.
  
  Revision  Changes    Path
  7.220     +5 -5      ircd-hybrid-7/src/client.c
  7.157     +2 -2      ircd-hybrid-7/src/s_bsd.c
  1.19      +1 -1      ircd-hybrid-7/src/s_gline.c
  7.234     +2 -2      ircd-hybrid-7/src/s_serv.c
  7.178     +7 -7      ircd-hybrid-7/src/s_user.c
  7.15      +1 -1      ircd-hybrid-7/src/whowas.c



db          2002/01/09 12:30:35 EST	(20020109_7)

  Modified files:
    src                  match.c 
  Log:
  - 0 != ptr is just _WRONG_
  
  Revision  Changes    Path
  7.17      +7 -6      ircd-hybrid-7/src/match.c



leeh        2002/01/09 12:16:58 EST	(20020109_5)

  Modified files:
    doc                  example.conf 
    include              s_conf.h supported.h 
    modules              m_info.c 
    src                  channel_mode.c ircd.c ircd_lexer.l 
                         ircd_parser.y s_conf.c s_serv.c 
  Log:
  - updated /info to cover everything in ircd.conf at current
  - renamed the following variables for consistency:
    maxbans -> max_bans
    allow_hidden -> disable_hidden
    split_server/user_count -> default_split_server/user_count
  - added pace_wait to example.conf
  
  Revision  Changes    Path
  7.150     +4 -1      ircd-hybrid-7/doc/example.conf
  7.175     +6 -6      ircd-hybrid-7/include/s_conf.h
  1.17      +1 -1      ircd-hybrid-7/include/supported.h
  1.52      +150 -42   ircd-hybrid-7/modules/m_info.c
  7.19      +1 -1      ircd-hybrid-7/src/channel_mode.c
  7.214     +2 -2      ircd-hybrid-7/src/ircd.c
  1.135     +4 -4      ircd-hybrid-7/src/ircd_lexer.l
  1.234     +18 -17    ircd-hybrid-7/src/ircd_parser.y
  7.291     +4 -4      ircd-hybrid-7/src/s_conf.c
  7.233     +1 -1      ircd-hybrid-7/src/s_serv.c



db          2002/01/09 12:09:42 EST	(20020109_4)

  Modified files:
    modules              m_gline.c 
    src                  match.c 
  Log:
  - style cleanups, also removed dead code marked as such
  
  Revision  Changes    Path
  1.75      +5 -5      ircd-hybrid-7/modules/m_gline.c
  7.16      +46 -58    ircd-hybrid-7/src/match.c



leeh        2002/01/09 11:19:18 EST	(20020109_3)

  Modified files:
    include              hostmask.h 
    modules              m_stats.c 
    src                  hostmask.c 
  Log:
  - made stats k/K use find_conf_by_address instead of find_address_conf
    saves us looping twice, once for an auth, once for a kline..
  - hence removed the extra parm to report_Klines
  
  Revision  Changes    Path
  1.19      +1 -1      ircd-hybrid-7/include/hostmask.h
  1.105     +58 -5     ircd-hybrid-7/modules/m_stats.c
  7.62      +1 -14     ircd-hybrid-7/src/hostmask.c



jmallett    2002/01/09 07:27:14 EST	(20020109_2)

  Modified files:
    src                  memory.c 
  Log:
  Oops, meant to do cvs ci src/memory.c and did cvs ci -m src/memory.c
  
  Anyway, correct usage of mem_frob (instead of memfrob()) and put it inside
  #ifndef NDEBUG.
  
  Revision  Changes    Path
  7.34      +0 -0      ircd-hybrid-7/src/memory.c



jmallett    2002/01/08 19:53:50 EST	(20020109_0)

  Modified files:
    modules              m_gline.c 
  Log:
  Document GLine interfaces somewhat slightly, including inputs and what
  we're doing with so many inputs!
  
  Revision  Changes    Path
  1.74      +29 -4     ircd-hybrid-7/modules/m_gline.c



jmallett    2002/01/08 11:23:27 EST	(20020108_0)

  Modified files:
    src                  client.c 
  Log:
  Add an assertion to make sure the head of the list of channels a user
  being exited is in is really NULL. This is manifesting itself in strange
  ways later on and we need to head it off here.
  
  Revision  Changes    Path
  7.218     +2 -0      ircd-hybrid-7/src/client.c



jmallett    2002/01/07 15:32:50 EST	(20020107_4)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Fix OS/compiler logic in configure to be slightly more generic than
  checking for using gcc in the SunOS case, in case we decide to
  include support for generic portable compilers like TenDRA or
  OpenWatcom or such, and they have different options for PIC code.
  
  Revision  Changes    Path
  7.108     +14 -15    ircd-hybrid-7/autoconf/configure.in
  7.111     +30 -31    ircd-hybrid-7/configure



jmallett    2002/01/07 12:48:30 EST	(20020107_3)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  Bring in my slightly redone PIC checks. Fixes GCC on SunOS problems with
  the previous version of my changes here. Also include some notes about
  what is being done for PIC checks.
  
  Revision  Changes    Path
  7.107     +14 -5     ircd-hybrid-7/autoconf/configure.in
  7.110     +210 -197  ircd-hybrid-7/configure



db          2002/01/07 01:26:14 EST	(20020107_2)

  Modified files:
    help/opers           index 
    help/users           index 
  Log:
  - reverted accidental commits
  
  Revision  Changes    Path
  1.5       +21 -0     ircd-hybrid-7/help/opers/index
  1.5       +11 -0     ircd-hybrid-7/help/users/index



joant       2002/01/07 01:12:45 EST	(20020107_1)

  Modified files:
    help/opers           index 
    help/users           index 
    src                  s_bsd.c snprintf.c 
    tools                convertconf.c convertklines.c 
  Log:
  Portability fixes for vendor compilers
  
  Revision  Changes    Path
  1.4       +0 -21     ircd-hybrid-7/help/opers/index
  1.4       +0 -11     ircd-hybrid-7/help/users/index
  7.156     +0 -2      ircd-hybrid-7/src/s_bsd.c
  1.4       +4 -0      ircd-hybrid-7/src/snprintf.c
  1.29      +1 -3      ircd-hybrid-7/tools/convertconf.c
  7.4       +1 -3      ircd-hybrid-7/tools/convertklines.c



db          2002/01/07 00:50:54 EST	(20020107_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    modules              m_invite.c 
  Log:
  - folded in jmallets changes for OSX loadable modules
  
  Revision  Changes    Path
  7.106     +15 -11    ircd-hybrid-7/autoconf/configure.in
  7.109     +43 -39    ircd-hybrid-7/configure
  1.38      +2 -2      ircd-hybrid-7/modules/m_invite.c



leeh        2002/01/06 16:09:44 EST	(20020106_4)

  Modified files:
    modules/core         m_kill.c 
  Log:
  - added oper accountability back to kills via quits
  - fixes for -6, which takes the nick of the killer from the front of the
    path - so set path = source_p->name when bogus..
  - cleanups
  
  Revision  Changes    Path
  1.61      +45 -66    ircd-hybrid-7/modules/core/m_kill.c



leeh        2002/01/06 13:16:12 EST	(20020106_3)

  Modified files:
    doc                  example.conf 
  Log:
  - slight doc updte.
  
  Revision  Changes    Path
  7.149     +4 -2      ircd-hybrid-7/doc/example.conf



leeh        2002/01/06 13:12:19 EST	(20020106_2)

  Modified files:
    help/opers           set 
    include              ircd.h 
    modules              m_set.c 
    src                  channel.c client.c ircd.c 
  Log:
  - fixed up splitmode
  
  Revision  Changes    Path
  1.2       +9 -1      ircd-hybrid-7/help/opers/set
  7.44      +1 -0      ircd-hybrid-7/include/ircd.h
  1.41      +69 -18    ircd-hybrid-7/modules/m_set.c
  7.292     +16 -16    ircd-hybrid-7/src/channel.c
  7.217     +1 -2      ircd-hybrid-7/src/client.c
  7.213     +6 -1      ircd-hybrid-7/src/ircd.c



a1kmm       2002/01/06 01:26:30 EST	(20020106_1)

  Modified files:
    modules              m_gline.c 
  Log:
  Cast localtime argument to (const time_t*) first, apparently fixes some
  compile warnings on OpenBSD/sparc/gcc.
  Submitted by: flata(Joseph Mallett).
  
  Revision  Changes    Path
  1.73      +3 -3      ircd-hybrid-7/modules/m_gline.c



a1kmm       2002/01/05 23:46:02 EST	(20020106_0)

  Modified files:
    modules              m_invite.c 
  Log:
  - Don't send invite back to the source even if they are the target of the
    invite.
  
  Revision  Changes    Path
  1.37      +3 -2      ircd-hybrid-7/modules/m_invite.c



a1kmm       2002/01/05 04:15:36 EST	(20020105_2)

  Modified files:
    .                    LICENSE 
    contrib              m_flags.c m_jupe.c m_map.c m_mkpasswd.c 
                         spy_admin_notice.c spy_info_notice.c 
                         spy_links_notice.c spy_motd_notice.c 
                         spy_stats_notice.c spy_stats_p_notice.c 
                         spy_trace_notice.c spy_whois_notice.c 
    include              balloc.h channel.h channel_mode.h class.h 
                         client.h common.h config.h config.h.dist 
                         debug.h defaults.h event.h fdlist.h 
                         fileio.h handlers.h hash.h hook.h 
                         hostmask.h irc_string.h ircd.h 
                         ircd_defs.h ircd_getopt.h ircd_handler.h 
                         ircd_signal.h ircdauth.h linebuf.h list.h 
                         listener.h m_info.h m_kline.h md5.h 
                         memory.h modules.h motd.h msg.h numeric.h 
                         packet.h parse.h patchlevel.h res.h 
                         restart.h resv.h rsa.h s_auth.h s_bsd.h 
                         s_conf.h s_debug.h s_gline.h s_log.h 
                         s_misc.h s_serv.h s_stats.h s_user.h 
                         s_zip.h scache.h send.h setup.h.in 
                         setup.h_vms sprintf_irc.h supported.h 
                         tools.h vchannel.h whowas.h 
    modules              m_accept.c m_admin.c m_away.c m_capab.c 
                         m_cburst.c m_challenge.c m_cjoin.c 
                         m_close.c m_connect.c m_cryptlink.c 
                         m_dmem.c m_drop.c m_eob.c m_gline.c 
                         m_help.c m_info.c m_invite.c m_ison.c 
                         m_join.c m_kline.c m_knock.c m_links.c 
                         m_list.c m_lljoin.c m_llnick.c m_locops.c 
                         m_lusers.c m_motd.c m_names.c m_nburst.c 
                         m_oper.c m_operwall.c m_pass.c m_ping.c 
                         m_pong.c m_post.c m_rehash.c m_restart.c 
                         m_resv.c m_set.c m_stats.c m_svinfo.c 
                         m_testline.c m_time.c m_topic.c m_trace.c 
                         m_unkline.c m_user.c m_userhost.c 
                         m_users.c m_version.c m_wallops.c m_who.c 
                         m_whois.c m_whowas.c 
    modules/core         m_die.c m_kick.c m_kill.c m_message.c 
                         m_mode.c m_nick.c m_part.c m_quit.c 
                         m_server.c m_sjoin.c m_squit.c 
    src                  adns.c balloc.c channel.c channel_mode.c 
                         class.c client.c crypt.c debug.c event.c 
                         fdlist.c fileio.c getopt.c hash.c hook.c 
                         hostmask.c irc_string.c ircd.c 
                         ircd_lexer.l ircd_parser.y ircdauth.c 
                         kdparse.c linebuf.c list.c listener.c 
                         m_error.c md5.c memory.c modules-dld.c 
                         modules.c motd.c numeric.c packet.c 
                         parse.c restart.c resv.c rsa.c s_auth.c 
                         s_bsd.c s_bsd_devpoll.c s_bsd_kqueue.c 
                         s_bsd_poll.c s_bsd_select.c s_bsd_sigio.c 
                         s_conf.c s_debug.c s_gline.c s_log.c 
                         s_misc.c s_serv.c s_stats.c s_user.c 
                         scache.c send.c snprintf.c sprintf_irc.c 
                         tools.c vchannel.c whowas.c 
  Log:
  - Put the ircd under GPLv2, as allowed under GPLv1.
  - Added a consistant header to all ircd files as suggested under the GPL
    version 2 license. This will ensure that we as coders are protected against
    inclusion of our code into commercial projects, and more importantly,
    liability for anything that might go wrong.
  Approved-By: Diane
  
  Revision  Changes    Path
  7.3       +225 -137  ircd-hybrid-7/LICENSE
  1.5       +19 -16    ircd-hybrid-7/contrib/m_flags.c
  1.24      +18 -19    ircd-hybrid-7/contrib/m_jupe.c
  1.9       +18 -19    ircd-hybrid-7/contrib/m_map.c
  1.5       +19 -16    ircd-hybrid-7/contrib/m_mkpasswd.c
  1.3       +22 -4     ircd-hybrid-7/contrib/spy_admin_notice.c
  1.3       +22 -4     ircd-hybrid-7/contrib/spy_info_notice.c
  1.8       +22 -4     ircd-hybrid-7/contrib/spy_links_notice.c
  1.3       +22 -4     ircd-hybrid-7/contrib/spy_motd_notice.c
  1.10      +22 -4     ircd-hybrid-7/contrib/spy_stats_notice.c
  1.2       +22 -4     ircd-hybrid-7/contrib/spy_stats_p_notice.c
  1.3       +22 -4     ircd-hybrid-7/contrib/spy_trace_notice.c
  1.7       +21 -2     ircd-hybrid-7/contrib/spy_whois_notice.c
  1.8       +18 -6     ircd-hybrid-7/include/balloc.h
  7.101     +17 -15    ircd-hybrid-7/include/channel.h
  7.5       +17 -15    ircd-hybrid-7/include/channel_mode.h
  7.9       +19 -15    ircd-hybrid-7/include/class.h
  7.137     +18 -15    ircd-hybrid-7/include/client.h
  7.3       +19 -15    ircd-hybrid-7/include/common.h
  7.127     +19 -15    ircd-hybrid-7/include/config.h
  7.54      +19 -15    ircd-hybrid-7/include/config.h.dist
  1.3       +24 -0     ircd-hybrid-7/include/debug.h
  7.4       +18 -15    ircd-hybrid-7/include/defaults.h
  1.11      +21 -3     ircd-hybrid-7/include/event.h
  7.24      +21 -2     ircd-hybrid-7/include/fdlist.h
  7.8       +18 -14    ircd-hybrid-7/include/fileio.h
  7.38      +18 -15    ircd-hybrid-7/include/handlers.h
  7.16      +19 -15    ircd-hybrid-7/include/hash.h
  1.12      +24 -0     ircd-hybrid-7/include/hook.h
  1.18      +10 -6     ircd-hybrid-7/include/hostmask.h
  7.33      +19 -15    ircd-hybrid-7/include/irc_string.h
  7.43      +22 -22    ircd-hybrid-7/include/ircd.h
  7.24      +25 -22    ircd-hybrid-7/include/ircd_defs.h
  1.2       +24 -0     ircd-hybrid-7/include/ircd_getopt.h
  7.5       +18 -15    ircd-hybrid-7/include/ircd_handler.h
  7.2       +22 -20    ircd-hybrid-7/include/ircd_signal.h
  7.5       +17 -14    ircd-hybrid-7/include/ircdauth.h
  1.21      +21 -2     ircd-hybrid-7/include/linebuf.h
  7.14      +21 -23    ircd-hybrid-7/include/list.h
  7.8       +18 -14    ircd-hybrid-7/include/listener.h
  7.38      +19 -15    ircd-hybrid-7/include/m_info.h
  7.7       +19 -15    ircd-hybrid-7/include/m_kline.h
  1.5       +20 -14    ircd-hybrid-7/include/md5.h
  7.27      +23 -1     ircd-hybrid-7/include/memory.h
  7.27      +18 -15    ircd-hybrid-7/include/modules.h
  7.8       +21 -2     ircd-hybrid-7/include/motd.h
  7.40      +19 -16    ircd-hybrid-7/include/msg.h
  7.26      +19 -15    ircd-hybrid-7/include/numeric.h
  7.12      +22 -22    ircd-hybrid-7/include/packet.h
  7.14      +22 -23    ircd-hybrid-7/include/parse.h
  7.18      +18 -14    ircd-hybrid-7/include/patchlevel.h
  7.18      +21 -3     ircd-hybrid-7/include/res.h
  7.4       +21 -1     ircd-hybrid-7/include/restart.h
  1.5       +19 -15    ircd-hybrid-7/include/resv.h
  7.9       +21 -21    ircd-hybrid-7/include/rsa.h
  7.14      +19 -14    ircd-hybrid-7/include/s_auth.h
  7.34      +18 -15    ircd-hybrid-7/include/s_bsd.h
  7.174     +20 -18    ircd-hybrid-7/include/s_conf.h
  7.3       +19 -16    ircd-hybrid-7/include/s_debug.h
  7.10      +18 -15    ircd-hybrid-7/include/s_gline.h
  7.8       +18 -15    ircd-hybrid-7/include/s_log.h
  7.6       +21 -1     ircd-hybrid-7/include/s_misc.h
  7.61      +22 -20    ircd-hybrid-7/include/s_serv.h
  7.6       +18 -16    ircd-hybrid-7/include/s_stats.h
  7.15      +22 -22    ircd-hybrid-7/include/s_user.h
  7.4       +22 -22    ircd-hybrid-7/include/s_zip.h
  7.6       +22 -22    ircd-hybrid-7/include/scache.h
  7.53      +20 -3     ircd-hybrid-7/include/send.h
  7.41      +24 -0     ircd-hybrid-7/include/setup.h.in
  7.9       +24 -0     ircd-hybrid-7/include/setup.h_vms
  7.7       +21 -1     ircd-hybrid-7/include/sprintf_irc.h
  1.16      +19 -15    ircd-hybrid-7/include/supported.h
  1.8       +19 -4     ircd-hybrid-7/include/tools.h
  7.18      +17 -15    ircd-hybrid-7/include/vchannel.h
  7.7       +20 -15    ircd-hybrid-7/include/whowas.h
  1.22      +19 -19    ircd-hybrid-7/modules/core/m_die.c
  1.38      +19 -19    ircd-hybrid-7/modules/core/m_kick.c
  1.60      +19 -19    ircd-hybrid-7/modules/core/m_kill.c
  1.84      +19 -19    ircd-hybrid-7/modules/core/m_message.c
  1.47      +19 -19    ircd-hybrid-7/modules/core/m_mode.c
  1.83      +21 -4     ircd-hybrid-7/modules/core/m_nick.c
  1.50      +19 -19    ircd-hybrid-7/modules/core/m_part.c
  1.23      +19 -19    ircd-hybrid-7/modules/core/m_quit.c
  1.76      +19 -19    ircd-hybrid-7/modules/core/m_server.c
  1.126     +19 -19    ircd-hybrid-7/modules/core/m_sjoin.c
  1.43      +19 -19    ircd-hybrid-7/modules/core/m_squit.c
  1.29      +19 -19    ircd-hybrid-7/modules/m_accept.c
  1.32      +19 -19    ircd-hybrid-7/modules/m_admin.c
  1.27      +19 -19    ircd-hybrid-7/modules/m_away.c
  1.26      +19 -19    ircd-hybrid-7/modules/m_capab.c
  1.38      +20 -17    ircd-hybrid-7/modules/m_cburst.c
  1.32      +20 -20    ircd-hybrid-7/modules/m_challenge.c
  1.47      +19 -19    ircd-hybrid-7/modules/m_cjoin.c
  1.21      +19 -19    ircd-hybrid-7/modules/m_close.c
  1.35      +19 -19    ircd-hybrid-7/modules/m_connect.c
  1.29      +23 -24    ircd-hybrid-7/modules/m_cryptlink.c
  1.13      +19 -19    ircd-hybrid-7/modules/m_dmem.c
  1.22      +20 -17    ircd-hybrid-7/modules/m_drop.c
  1.29      +19 -19    ircd-hybrid-7/modules/m_eob.c
  1.72      +17 -18    ircd-hybrid-7/modules/m_gline.c
  1.29      +21 -4     ircd-hybrid-7/modules/m_help.c
  1.51      +19 -20    ircd-hybrid-7/modules/m_info.c
  1.36      +19 -19    ircd-hybrid-7/modules/m_invite.c
  1.26      +19 -19    ircd-hybrid-7/modules/m_ison.c
  1.81      +19 -19    ircd-hybrid-7/modules/m_join.c
  1.95      +19 -19    ircd-hybrid-7/modules/m_kline.c
  1.46      +19 -18    ircd-hybrid-7/modules/m_knock.c
  1.34      +19 -19    ircd-hybrid-7/modules/m_links.c
  1.39      +19 -16    ircd-hybrid-7/modules/m_list.c
  1.54      +20 -17    ircd-hybrid-7/modules/m_lljoin.c
  1.18      +20 -17    ircd-hybrid-7/modules/m_llnick.c
  1.25      +19 -19    ircd-hybrid-7/modules/m_locops.c
  1.20      +19 -19    ircd-hybrid-7/modules/m_lusers.c
  1.27      +19 -19    ircd-hybrid-7/modules/m_motd.c
  1.39      +19 -19    ircd-hybrid-7/modules/m_names.c
  1.15      +20 -17    ircd-hybrid-7/modules/m_nburst.c
  1.43      +19 -19    ircd-hybrid-7/modules/m_oper.c
  1.26      +19 -19    ircd-hybrid-7/modules/m_operwall.c
  1.20      +18 -18    ircd-hybrid-7/modules/m_pass.c
  1.26      +19 -19    ircd-hybrid-7/modules/m_ping.c
  1.24      +19 -19    ircd-hybrid-7/modules/m_pong.c
  1.7       +19 -19    ircd-hybrid-7/modules/m_post.c
  1.36      +19 -19    ircd-hybrid-7/modules/m_rehash.c
  1.21      +19 -19    ircd-hybrid-7/modules/m_restart.c
  1.13      +22 -4     ircd-hybrid-7/modules/m_resv.c
  1.40      +19 -18    ircd-hybrid-7/modules/m_set.c
  1.104     +18 -18    ircd-hybrid-7/modules/m_stats.c
  1.31      +19 -19    ircd-hybrid-7/modules/m_svinfo.c
  1.23      +20 -20    ircd-hybrid-7/modules/m_testline.c
  1.23      +19 -19    ircd-hybrid-7/modules/m_time.c
  1.46      +19 -19    ircd-hybrid-7/modules/m_topic.c
  1.42      +19 -19    ircd-hybrid-7/modules/m_trace.c
  1.42      +23 -24    ircd-hybrid-7/modules/m_unkline.c
  1.21      +19 -19    ircd-hybrid-7/modules/m_user.c
  1.35      +18 -19    ircd-hybrid-7/modules/m_userhost.c
  1.23      +19 -19    ircd-hybrid-7/modules/m_users.c
  1.36      +19 -19    ircd-hybrid-7/modules/m_version.c
  1.26      +19 -19    ircd-hybrid-7/modules/m_wallops.c
  1.49      +19 -19    ircd-hybrid-7/modules/m_who.c
  1.73      +18 -19    ircd-hybrid-7/modules/m_whois.c
  1.24      +25 -21    ircd-hybrid-7/modules/m_whowas.c
  7.34      +21 -3     ircd-hybrid-7/src/adns.c
  7.21      +17 -7     ircd-hybrid-7/src/balloc.c
  7.291     +19 -16    ircd-hybrid-7/src/channel.c
  7.18      +19 -16    ircd-hybrid-7/src/channel_mode.c
  7.32      +18 -14    ircd-hybrid-7/src/class.c
  7.216     +17 -17    ircd-hybrid-7/src/client.c
  7.2       +19 -7     ircd-hybrid-7/src/crypt.c
  7.6       +23 -1     ircd-hybrid-7/src/debug.c
  7.25      +8 -26     ircd-hybrid-7/src/event.c
  7.27      +20 -3     ircd-hybrid-7/src/fdlist.c
  7.18      +18 -16    ircd-hybrid-7/src/fileio.c
  7.11      +24 -0     ircd-hybrid-7/src/getopt.c
  7.37      +17 -14    ircd-hybrid-7/src/hash.c
  7.11      +18 -15    ircd-hybrid-7/src/hook.c
  7.61      +10 -7     ircd-hybrid-7/src/hostmask.c
  7.51      +18 -14    ircd-hybrid-7/src/irc_string.c
  7.212     +18 -16    ircd-hybrid-7/src/ircd.c
  1.134     +18 -17    ircd-hybrid-7/src/ircd_lexer.l
  1.233     +18 -17    ircd-hybrid-7/src/ircd_parser.y
  7.45      +18 -16    ircd-hybrid-7/src/ircdauth.c
  7.6       +17 -17    ircd-hybrid-7/src/kdparse.c
  7.75      +18 -5     ircd-hybrid-7/src/linebuf.c
  7.41      +18 -17    ircd-hybrid-7/src/list.c
  7.61      +18 -14    ircd-hybrid-7/src/listener.c
  7.22      +18 -18    ircd-hybrid-7/src/m_error.c
  1.11      +19 -15    ircd-hybrid-7/src/md5.c
  7.32      +19 -16    ircd-hybrid-7/src/memory.c
  1.17      +25 -21    ircd-hybrid-7/src/modules-dld.c
  7.87      +19 -15    ircd-hybrid-7/src/modules.c
  7.20      +17 -18    ircd-hybrid-7/src/motd.c
  7.18      +18 -15    ircd-hybrid-7/src/numeric.c
  7.68      +18 -17    ircd-hybrid-7/src/packet.c
  7.119     +18 -16    ircd-hybrid-7/src/parse.c
  7.20      +21 -2     ircd-hybrid-7/src/restart.c
  7.11      +21 -3     ircd-hybrid-7/src/resv.c
  7.24      +21 -21    ircd-hybrid-7/src/rsa.c
  7.80      +20 -15    ircd-hybrid-7/src/s_auth.c
  7.155     +18 -15    ircd-hybrid-7/src/s_bsd.c
  7.12      +21 -24    ircd-hybrid-7/src/s_bsd_devpoll.c
  1.24      +21 -24    ircd-hybrid-7/src/s_bsd_kqueue.c
  7.52      +21 -24    ircd-hybrid-7/src/s_bsd_poll.c
  7.22      +17 -14    ircd-hybrid-7/src/s_bsd_select.c
  7.15      +21 -26    ircd-hybrid-7/src/s_bsd_sigio.c
  7.290     +16 -16    ircd-hybrid-7/src/s_conf.c
  7.64      +18 -16    ircd-hybrid-7/src/s_debug.c
  1.18      +17 -17    ircd-hybrid-7/src/s_gline.c
  7.37      +18 -18    ircd-hybrid-7/src/s_log.c
  7.28      +18 -18    ircd-hybrid-7/src/s_misc.c
  7.232     +17 -18    ircd-hybrid-7/src/s_serv.c
  7.19      +16 -17    ircd-hybrid-7/src/s_stats.c
  7.177     +16 -17    ircd-hybrid-7/src/s_user.c
  7.12      +20 -2     ircd-hybrid-7/src/scache.c
  7.171     +18 -16    ircd-hybrid-7/src/send.c
  1.3       +22 -6     ircd-hybrid-7/src/snprintf.c
  7.12      +19 -16    ircd-hybrid-7/src/sprintf_irc.c
  7.19      +19 -5     ircd-hybrid-7/src/tools.c
  7.61      +18 -16    ircd-hybrid-7/src/vchannel.c
  7.14      +23 -20    ircd-hybrid-7/src/whowas.c



db          2002/01/05 00:27:14 EST	(20020105_1)

  Modified files:
    src                  md5.c 
  Log:
  - alarm() is deprecated, use setitimer
  - timer is not needed anyway, since NO one in their right minds would
    run an efnet server on an NFS mount
  - this code sucketh majorly and will be dealt with, but I couldn't
    take the alarm anymore
  
  Revision  Changes    Path
  1.10      +2 -6      ircd-hybrid-7/src/md5.c



db          2002/01/04 21:15:43 EST	(20020105_0)

  Modified files:
    servlink             servlink.h 
    src                  channel.c 
  Log:
  - Two tiny portability changes suggested by Joseph Mallett
    missing void * in channel.c check_splitmode()
    moved order of externs in serverlink.h
  
  Revision  Changes    Path
  1.20      +6 -4      ircd-hybrid-7/servlink/servlink.h
  7.290     +1 -1      ircd-hybrid-7/src/channel.c



leeh        2002/01/04 10:01:58 EST	(20020104_4)

  Modified files:
    modules              Makefile.in 
    src                  modules-dld.c modules.c 
  Log:
  - made m_message.c a core module
  
  Revision  Changes    Path
  1.64      +1 -1      ircd-hybrid-7/modules/Makefile.in
  1.16      +1 -0      ircd-hybrid-7/src/modules-dld.c
  7.86      +1 -0      ircd-hybrid-7/src/modules.c



leeh        2002/01/04 07:10:06 EST	(20020104_3)

  Modified files:
    src                  modules.c 
  Log:
  - there was an #ifdef STATIC_MODULES at the top :)
  
  Revision  Changes    Path
  7.85      +2 -3      ircd-hybrid-7/src/modules.c



db          2002/01/04 00:33:43 EST	(20020104_2)

  Modified files:
    src                  ircd.c modules.c 
  Log:
  - Don't try to load core modules if doing a static link
  
  Revision  Changes    Path
  7.211     +2 -0      ircd-hybrid-7/src/ircd.c
  7.84      +1 -0      ircd-hybrid-7/src/modules.c



db          2002/01/04 00:02:23 EST	(20020104_1)

  Modified files:
    adns                 dlist.h 
  Log:
  - The define has to be left there, cause after all, its about to be used ;-)
  
  Revision  Changes    Path
  1.5       +0 -1      ircd-hybrid-7/adns/dlist.h



androsyn    2002/01/03 23:20:41 EST	(20020104_0)

  Modified files:
    adns                 check.c dlist.h 
  Log:
  Fixed brokeness of OS X C compiler.  Thanks a lot for managing to screw up
  something else..
  
  Revision  Changes    Path
  1.4       +11 -5     ircd-hybrid-7/adns/check.c
  1.4       +10 -4     ircd-hybrid-7/adns/dlist.h



leeh        2002/01/03 18:46:18 EST	(20020103_1)

  Modified files:
    src                  channel.c 
  Log:
  - dont allow users to send to resv'd channels
  
  Revision  Changes    Path
  7.289     +4 -0      ircd-hybrid-7/src/channel.c



leeh        2002/01/03 07:11:33 EST	(20020103_0)

  Modified files:
    modules              Makefile.in 
    src                  modules-dld.c modules.c 
  Log:
  - made quit a core module
  
  Revision  Changes    Path
  1.63      +1 -1      ircd-hybrid-7/modules/Makefile.in
  1.15      +1 -0      ircd-hybrid-7/src/modules-dld.c
  7.83      +1 -0      ircd-hybrid-7/src/modules.c



leeh        2002/01/02 17:19:33 EST	(20020102_7)

  Modified files:
    src                  modules-dld.c 
  Log:
  - ported to modules-dld
  
  Revision  Changes    Path
  1.14      +36 -13    ircd-hybrid-7/src/modules-dld.c



leeh        2002/01/02 17:08:34 EST	(20020102_6)

  Modified files:
    include              modules.h 
    src                  modules.c 
  Log:
  - finished protected modules (raaaah!)
  
  Revision  Changes    Path
  7.26      +3 -3      ircd-hybrid-7/include/modules.h
  7.82      +37 -16    ircd-hybrid-7/src/modules.c



leeh        2002/01/02 16:43:32 EST	(20020102_5)

  Modified files:
    include              modules.h 
    src                  modules.c 
  Log:
  - added headers to most of the modules functions
  
  Revision  Changes    Path
  7.25      +1 -0      ircd-hybrid-7/include/modules.h
  7.81      +57 -4     ircd-hybrid-7/src/modules.c



leeh        2002/01/02 12:45:42 EST	(20020102_4)

  Modified files:
    include              modules.h 
    modules              Makefile.in 
    src                  ircd.c modules-dld.c modules.c 
  Log:
  - install core modules into ircd/modules
  - on startup walk a table of core modules, loading each as we go
    if any fail, exit(0);
  - no protection from modunload as of yet..
  
  Revision  Changes    Path
  7.24      +4 -1      ircd-hybrid-7/include/modules.h
  1.62      +15 -4     ircd-hybrid-7/modules/Makefile.in
  7.210     +1 -0      ircd-hybrid-7/src/ircd.c
  1.13      +35 -0     ircd-hybrid-7/src/modules-dld.c
  7.80      +35 -0     ircd-hybrid-7/src/modules.c



leeh        2002/01/02 11:44:02 EST	(20020102_3)

  Modified files:
    include              config.h config.h.dist 
    src                  modules-dld.c modules.c 
  Log:
  - renamed MODPATH to AUTOMODPATH
  - added MODPATH
  
  Revision  Changes    Path
  7.126     +4 -1      ircd-hybrid-7/include/config.h
  7.53      +6 -2      ircd-hybrid-7/include/config.h.dist
  1.12      +4 -4      ircd-hybrid-7/src/modules-dld.c
  7.79      +4 -4      ircd-hybrid-7/src/modules.c



leeh        2002/01/02 10:38:38 EST	(20020102_2)

  Modified files:
    modules/core         m_kill.c 
  Log:
  - dont give out remote servernames of kills when we have shide on
  
  Revision  Changes    Path
  1.59      +12 -3     ircd-hybrid-7/modules/core/m_kill.c



wcampbel    2002/01/02 10:31:13 EST	(20020102_1)

  Modified files:
    doc                  serverhide.txt 
  Log:
  Updated SHIDE documentation
  
  Revision  Changes    Path
  7.3       +42 -2     ircd-hybrid-7/doc/serverhide.txt



leeh        2002/01/02 10:25:08 EST	(20020102_0)

  Modified files:
    modules              m_users.c 
    src                  s_user.c 
  Log:
  - fixes for local client stuff wrt shide
  
  Revision  Changes    Path
  1.22      +15 -11    ircd-hybrid-7/modules/m_users.c
  7.176     +7 -0      ircd-hybrid-7/src/s_user.c



leeh        2002/01/01 17:27:27 EST	(20020101_8)

  Modified files:
    modules/core         m_kill.c 
  Log:
  - tell users when they get killed
  
  Revision  Changes    Path
  1.58      +2 -3      ircd-hybrid-7/modules/core/m_kill.c



leeh        2002/01/01 17:12:42 EST	(20020101_7)

  Modified files:
    modules              Makefile.in 
  Removed files:
    modules/core         Makefile.in 
  Log:
  - beginning of the core module stuff
  
  Revision  Changes    Path
  1.61      +9 -9      ircd-hybrid-7/modules/Makefile.in
  1.61      +0 -182    ircd-hybrid-7/modules/core/Makefile.in (dead)



leeh        2002/01/01 15:58:01 EST	(20020101_6)

  ircd-hybrid-7/modules/core - New directory



db          2002/01/01 13:50:31 EST	(20020101_5)

  Modified files:
    modules              m_mode.c 
  Log:
  - cosmetic cleanup of m_mode.c
  
  Revision  Changes    Path
  1.46      +6 -6      ircd-hybrid-7/modules/m_mode.c



leeh        2002/01/01 11:28:02 EST	(20020101_4)

  Modified files:
    modules              Makefile.in 
    src                  channel_mode.c 
  Log:
  - allow halfops to set all simple modes except MODE_PRIVATE
  - that extra -c in Makefile.in was causing:
    [2002/1/1 16.22] Error loading module m_whowas.so:
    /home/leeh/ircd-7/modules/autoload//m_whowas.so: unsupported file type
  
    reverted.
  
  Revision  Changes    Path
  1.60      +1 -1      ircd-hybrid-7/modules/Makefile.in
  7.17      +7 -5      ircd-hybrid-7/src/channel_mode.c



leeh        2002/01/01 10:58:42 EST	(20020101_3)

  Modified files:
    doc                  example.conf
  Log:
  - documented vhost=""
  
  Revision  Changes    Path
  7.148     +5 -0      ircd-hybrid-7/doc/example.conf



leeh        2002/01/01 10:53:47 EST	(20020101_2)

  Modified files:
    src                  ircd_lexer.l ircd_parser.y 
  Log:
  - renamed bind_address to vhost for consistency with serverinfo {};
  
  Revision  Changes    Path
  1.133     +0 -1      ircd-hybrid-7/src/ircd_lexer.l
  1.232     +2 -3      ircd-hybrid-7/src/ircd_parser.y



a1kmm       2002/01/01 01:56:43 EST	(20020101_1)

  Modified files:
    include              channel.h 
  Log:
  - Turned off intensive debug. Hopefully all the channel bugs have gone.
  
  Revision  Changes    Path
  7.100     +1 -1      ircd-hybrid-7/include/channel.h



a1kmm       2002/01/01 00:08:38 EST	(20020101_0)

  Modified files:
    modules              m_capab.c 
  Log:
  - Handle CAPAB x y z the same as CAPAB :x y z
  
  Revision  Changes    Path
  1.25      +39 -35    ircd-hybrid-7/modules/m_capab.c



db          2001/12/31 10:22:54 EST	(20011231_4)

  Modified files:
    modules              Makefile.in 
  Log:
  - missing -c
  
  Revision  Changes    Path
  1.59      +1 -1      ircd-hybrid-7/modules/Makefile.in



db          2001/12/31 09:06:59 EST	(20011231_3)

  Modified files:
    src                  channel_mode.c 
  Log:
  - fixed obvious typo. this resolves assert failure
  
  Revision  Changes    Path
  7.16      +1 -1      ircd-hybrid-7/src/channel_mode.c



db          2001/12/31 07:54:37 EST	(20011231_2)

  Modified files:
    src                  s_serv.c 
  Log:
  - trivial cosmetic change. dumb spacing
  
  Revision  Changes    Path
  7.231     +1 -1      ircd-hybrid-7/src/s_serv.c



a1kmm       2001/12/31 06:13:42 EST	(20011231_1)

  Modified files:
    src                  channel_mode.c 
  Log:
  - Changed cl => ch. It is 1/1/2002 0:13 NZDT so I am allowed to make a few
    typos.
  
  Revision  Changes    Path
  7.15      +1 -1      ircd-hybrid-7/src/channel_mode.c



a1kmm       2001/12/31 06:04:38 EST	(20011231_0)

  Modified files:
    include              channel.h 
    src                  channel_mode.c ircd_parser.y parse.c 
  Log:
  - Commited some integrity checks for the channels. These are very CPU
    intensive, and they are checked for every command, but I left them on
    for now so we can catch anything wrong with the channel code for the
    soonest possible release time.
  
  Revision  Changes    Path
  7.99      +6 -0      ircd-hybrid-7/include/channel.h
  7.14      +81 -1     ircd-hybrid-7/src/channel_mode.c
  1.231     +1 -0      ircd-hybrid-7/src/ircd_parser.y
  7.118     +3 -0      ircd-hybrid-7/src/parse.c



db          2001/12/30 17:11:44 EST	(20011230_6)

  Modified files:
    include              config.h config.h.dist 
    modules              m_sjoin.c 
  Log:
  - "up" ported IGNORE_BOGUS_TS define from 6. This is a module, so easy
    to re-enable later.
  
  Revision  Changes    Path
  7.125     +8 -1      ircd-hybrid-7/include/config.h
  7.52      +12 -3     ircd-hybrid-7/include/config.h.dist
  1.125     +3 -1      ircd-hybrid-7/modules/m_sjoin.c



a1kmm       2001/12/30 04:11:30 EST	(20011230_5)

  Modified files:
    modules              m_sjoin.c m_who.c 
    src                  s_debug.c s_serv.c vchannel.c 
  Log:
  - Fixed a few missing references to chanops_voiced. This time I found
    where they should be with grep, so I hopefully did not miss any again.
  
  Revision  Changes    Path
  1.124     +7 -1      ircd-hybrid-7/modules/m_sjoin.c
  1.48      +34 -12    ircd-hybrid-7/modules/m_who.c
  7.63      +4 -0      ircd-hybrid-7/src/s_debug.c
  7.230     +12 -0     ircd-hybrid-7/src/s_serv.c
  7.60      +10 -1     ircd-hybrid-7/src/vchannel.c



a1kmm       2001/12/30 02:49:50 EST	(20011230_4)

  Modified files:
    include              channel.h 
    modules              .depend m_sjoin.c 
    src                  channel.c channel_mode.c send.c 
  Log:
  - Finished implementing +vo. It is turned on by the define REQUIRE_OANDV
  - Fixed a minor bug in chm_voice which could cause desyncs.
  - Fixed halfop privilege checks for simple modes and +-h.
  
  Revision  Changes    Path
  7.98      +5 -1      ircd-hybrid-7/include/channel.h
  1.4       +11 -10    ircd-hybrid-7/modules/.depend
  1.123     +1 -3      ircd-hybrid-7/modules/m_sjoin.c
  7.288     +36 -18    ircd-hybrid-7/src/channel.c
  7.13      +129 -43   ircd-hybrid-7/src/channel_mode.c
  7.170     +15 -0     ircd-hybrid-7/src/send.c



db          2001/12/30 02:45:18 EST	(20011230_3)

  Modified files:
    include              s_conf.h 
    src                  ircd_lexer.l ircd_parser.y s_bsd.c 
                         s_conf.c s_serv.c 
  Removed files:
    doc                  LazyLinks.as.implemented.txt 
  Log:
  - added the ability to specify a specific IP to bind to for outgoing
    connects. in connect block
  - removed really really bad doc. If this is still needed, I have a local
    copy.
  
  Revision  Changes    Path
  1.5       +0 -99     ircd-hybrid-7/doc/LazyLinks.as.implemented.txt (dead)
  7.173     +2 -1      ircd-hybrid-7/include/s_conf.h
  1.132     +1 -0      ircd-hybrid-7/src/ircd_lexer.l
  1.230     +6 -0      ircd-hybrid-7/src/ircd_parser.y
  7.154     +2 -1      ircd-hybrid-7/src/s_bsd.c
  7.289     +4 -3      ircd-hybrid-7/src/s_conf.c
  7.229     +17 -1     ircd-hybrid-7/src/s_serv.c



db          2001/12/30 01:32:18 EST	(20011230_2)

  Modified files:
    include              s_conf.h 
    src                  s_conf.c 
  Log:
  - removed another uneeded four bytes from struct ConfItem
  
  Revision  Changes    Path
  7.172     +0 -1      ircd-hybrid-7/include/s_conf.h
  7.288     +2 -3      ircd-hybrid-7/src/s_conf.c



db          2001/12/30 00:55:12 EST	(20011230_1)

  Modified files:
    include              s_conf.h 
  Log:
  - removed two struct elements no longer used in struct ConfItem
  
  Revision  Changes    Path
  7.171     +0 -2      ircd-hybrid-7/include/s_conf.h



db          2001/12/29 23:19:51 EST	(20011230_0)

  Modified files:
    src                  client.c irc_string.c ircd.c ircdauth.c 
                         listener.c m_error.c match.c parse.c 
                         s_bsd_kqueue.c s_bsd_sigio.c s_conf.c 
                         s_debug.c s_serv.c s_user.c snprintf.c 
  Log:
  - removed some #if 0's .. Some of these are ok for commenting code
    so left those, but most was old and dead code.
  
  Revision  Changes    Path
  7.215     +0 -9      ircd-hybrid-7/src/client.c
  7.50      +0 -8      ircd-hybrid-7/src/irc_string.c
  7.209     +0 -8      ircd-hybrid-7/src/ircd.c
  7.44      +0 -3      ircd-hybrid-7/src/ircdauth.c
  7.60      +1 -5      ircd-hybrid-7/src/listener.c
  7.21      +1 -14     ircd-hybrid-7/src/m_error.c
  7.15      +1 -45     ircd-hybrid-7/src/match.c
  7.117     +1 -12     ircd-hybrid-7/src/parse.c
  1.23      +0 -12     ircd-hybrid-7/src/s_bsd_kqueue.c
  7.14      +0 -11     ircd-hybrid-7/src/s_bsd_sigio.c
  7.287     +0 -10     ircd-hybrid-7/src/s_conf.c
  7.62      +1 -9      ircd-hybrid-7/src/s_debug.c
  7.228     +2 -180    ircd-hybrid-7/src/s_serv.c
  7.175     +0 -17     ircd-hybrid-7/src/s_user.c
  1.2       +0 -4      ircd-hybrid-7/src/snprintf.c



db          2001/12/29 18:29:32 EST	(20011229_5)

  Modified files:
    include              channel.h 
    src                  channel_mode.c 
  Log:
  - start in at the +vo crapola
  
  Revision  Changes    Path
  7.97      +2 -0      ircd-hybrid-7/include/channel.h
  7.12      +3 -8      ircd-hybrid-7/src/channel_mode.c



wcampbel    2001/12/29 17:52:13 EST	(20011229_4)

  Modified files:
    doc                  example.conf
  Log:
  Document ping_cookie in example.conf
  
  Revision  Changes    Path
  7.147     +7 -0      ircd-hybrid-7/doc/example.conf



davidt      2001/12/29 13:40:08 EST	(20011229_3)

  Modified files:
    modules              m_help.c 
  Log:
  - Avoid trying to lowercase a string constant.
  
  Revision  Changes    Path
  1.28      +12 -7     ircd-hybrid-7/modules/m_help.c



davidt      2001/12/29 12:24:46 EST	(20011229_2)

  Modified files:
    src                  ircd.c 
  Log:
  - Produce srandom seed slightly differently
    (XOR tv_sec with tv_usec and pid)
  
  Revision  Changes    Path
  7.208     +1 -1      ircd-hybrid-7/src/ircd.c



androsyn    2001/12/29 03:23:12 EST	(20011229_1)

  Modified files:
    modules              m_pong.c 
  Log:
  Fixed header order..
  
  Revision  Changes    Path
  1.23      +3 -3      ircd-hybrid-7/modules/m_pong.c



androsyn    2001/12/29 03:07:28 EST	(20011229_0)

  Modified files:
    include              client.h numeric.h s_conf.h 
    src                  ircd.c ircd_lexer.l ircd_parser.y 
                         messages.tab s_user.c 
    modules              m_pong.c 
  Log:
  Changes to support PING cookies.
  
  Revision  Changes    Path
  7.136     +5 -3      ircd-hybrid-7/include/client.h
  7.25      +3 -1      ircd-hybrid-7/include/numeric.h
  7.170     +1 -0      ircd-hybrid-7/include/s_conf.h
  1.22      +25 -5     ircd-hybrid-7/modules/m_pong.c
  7.207     +2 -1      ircd-hybrid-7/src/ircd.c
  1.131     +1 -0      ircd-hybrid-7/src/ircd_lexer.l
  1.229     +11 -1     ircd-hybrid-7/src/ircd_parser.y
  7.65      +1 -1      ircd-hybrid-7/src/messages.tab
  7.174     +14 -2     ircd-hybrid-7/src/s_user.c



davidt      2001/12/28 12:08:39 EST	(20011228_4)

  Modified files:
    help                 Makefile.in 
    help/opers           index 
    help/users           index 
  Log:
  - Expand tabs in index, to prevent it being mutilated when displayed.
  
  Revision  Changes    Path
  1.14      +4 -2      ircd-hybrid-7/help/Makefile.in
  1.3       +21 -21    ircd-hybrid-7/help/opers/index
  1.3       +10 -10    ircd-hybrid-7/help/users/index



davidt      2001/12/28 12:00:21 EST	(20011228_3)

  Modified files:
    help                 Makefile.in 
    help/users           index 
    help/opers           index 
  Log:
  - Convert index to uppercase, and columnise.
  
  Revision  Changes    Path
  1.13      +17 -3     ircd-hybrid-7/help/Makefile.in
  1.2       +23 -82    ircd-hybrid-7/help/opers/index
  1.2       +13 -41    ircd-hybrid-7/help/users/index



davidt      2001/12/28 11:41:49 EST	(20011228_2)

  Modified files:
    help                 Makefile.in 
    modules              m_help.c 
  Added files:
    help/opers           index 
    help/users           index 
  Log:
  - De-K&Rify m_help.c
  - Make /HELP and /UHELP case-insensitive
  - Make /UHELP with no args do /UHELP index (like /HELP)
  - Add 'make index' target in help/
  - Add indexes.
    Currently these are in CVS, and auto-generated.  Perhaps they shouldn't
    be.
  
  Revision  Changes    Path
  1.12      +27 -3     ircd-hybrid-7/help/Makefile.in
  1.1       +82 -0     ircd-hybrid-7/help/opers/index (new)
  1.1       +41 -0     ircd-hybrid-7/help/users/index (new)
  1.27      +55 -50    ircd-hybrid-7/modules/m_help.c



a1kmm       2001/12/27 20:21:49 EST	(20011228_1)

  Modified files:
    modules              m_llnick.c 
  Log:
  - Also don't allow llnick on a non-local nick.
  
  Revision  Changes    Path
  1.17      +5 -1      ircd-hybrid-7/modules/m_llnick.c



a1kmm       2001/12/27 20:10:21 EST	(20011228_0)

  Modified files:
    modules              m_llnick.c 
  Log:
  - Don't allow a ll client server to change a nick on the ll hub.
  
  Revision  Changes    Path
  1.16      +2 -2      ircd-hybrid-7/modules/m_llnick.c



leeh        2001/12/27 16:02:53 EST	(20011227_3)

  Modified files:
    modules              m_stats.c 
  Log:
  - missed a hook_add_event
  
  Revision  Changes    Path
  1.103     +3 -1      ircd-hybrid-7/modules/m_stats.c



leeh        2001/12/27 06:39:31 EST	(20011227_2)

  Modified files:
    modules              m_stats.c 
  Log:
  - commiting in contrib/ only doesnt work, oops ;p
  
  Revision  Changes    Path
  1.102     +21 -6     ircd-hybrid-7/modules/m_stats.c



leeh        2001/12/27 06:38:22 EST	(20011227_1)

  Modified files:
    contrib              Makefile.in README example_module.c 
                         m_flags.c m_jupe.c m_map.c m_mkpasswd.c 
                         spy_admin_notice.c spy_info_notice.c 
                         spy_links_notice.c spy_motd_notice.c 
                         spy_stats_notice.c spy_trace_notice.c 
  Added files:
    contrib              spy_stats_p_notice.c 
  Log:
  - added the Revision stuff to the _version strings in contrib/
  - inverted an if() to make it cleaner
  - added stats_p_notice spying..
  
  Revision  Changes    Path
  1.29      +1 -0      ircd-hybrid-7/contrib/Makefile.in
  1.13      +12 -7     ircd-hybrid-7/contrib/README
  1.3       +21 -22    ircd-hybrid-7/contrib/example_module.c
  1.4       +2 -2      ircd-hybrid-7/contrib/m_flags.c
  1.23      +1 -1      ircd-hybrid-7/contrib/m_jupe.c
  1.8       +2 -2      ircd-hybrid-7/contrib/m_map.c
  1.4       +2 -2      ircd-hybrid-7/contrib/m_mkpasswd.c
  1.2       +8 -9      ircd-hybrid-7/contrib/spy_admin_notice.c
  1.2       +8 -9      ircd-hybrid-7/contrib/spy_info_notice.c
  1.7       +9 -11     ircd-hybrid-7/contrib/spy_links_notice.c
  1.2       +8 -9      ircd-hybrid-7/contrib/spy_motd_notice.c
  1.9       +5 -4      ircd-hybrid-7/contrib/spy_stats_notice.c
  1.1       +38 -0     ircd-hybrid-7/contrib/spy_stats_p_notice.c (new)
  1.2       +8 -9      ircd-hybrid-7/contrib/spy_trace_notice.c



db          2001/12/26 21:36:33 EST	(20011227_0)

  Modified files:
    src                  ircd_parser.y 
  Log:
  - If there is no crypt, don't look for crypt variables..
  
  Revision  Changes    Path
  1.228     +4 -0      ircd-hybrid-7/src/ircd_parser.y



androsyn    2001/12/25 01:53:44 EST	(20011225_2)

  Modified files:
    .                    ChangeLog 
  Log:
  Fixed a bogus id tag in the Changelog :P
  
  Revision  Changes    Path
  7.3236    +3 -3      ircd-hybrid-7/ChangeLog



androsyn    2001/12/25 01:51:46 EST	(20011225_1)

  Modified files:
    src                  s_stats.c scache.c 
  Log:
  Fixed more bogus $Id tags..
  
  Revision  Changes    Path
  7.18      +1 -1      ircd-hybrid-7/src/s_stats.c
  7.11      +1 -1      ircd-hybrid-7/src/scache.c



db          2001/12/25 01:48:44 EST	(20011225_0)

  Modified files:
    src                  whowas.c 
  Log:
  - bogus $Id
  
  Revision  Changes    Path
  7.13      +1 -1      ircd-hybrid-7/src/whowas.c



androsyn    2001/12/24 11:15:28 EST	(20011224_1)

  Modified files:
    modules              m_accept.c m_admin.c m_away.c m_capab.c 
                         m_cburst.c m_challenge.c m_cjoin.c 
                         m_close.c m_connect.c m_cryptlink.c 
                         m_die.c m_dmem.c m_drop.c m_eob.c 
                         m_gline.c m_help.c m_info.c m_invite.c 
                         m_ison.c m_join.c m_kick.c m_kill.c 
                         m_kline.c m_knock.c m_links.c m_list.c 
                         m_lljoin.c m_llnick.c m_locops.c 
                         m_lusers.c m_message.c m_mode.c m_motd.c 
                         m_names.c m_nburst.c m_nick.c m_oper.c 
                         m_operwall.c m_part.c m_pass.c m_ping.c 
                         m_pong.c m_post.c m_quit.c m_rehash.c 
                         m_restart.c m_resv.c m_server.c m_set.c 
                         m_sjoin.c m_squit.c m_stats.c m_svinfo.c 
                         m_time.c m_topic.c m_trace.c m_unkline.c 
                         m_user.c m_userhost.c m_users.c 
                         m_version.c m_wallops.c m_who.c m_whois.c 
                         m_whowas.c 
  Log:
  Change the _version stuff to use the Revision tag..
  
  Revision  Changes    Path
  1.28      +2 -2      ircd-hybrid-7/modules/m_accept.c
  1.31      +2 -2      ircd-hybrid-7/modules/m_admin.c
  1.26      +2 -2      ircd-hybrid-7/modules/m_away.c
  1.24      +2 -2      ircd-hybrid-7/modules/m_capab.c
  1.37      +2 -2      ircd-hybrid-7/modules/m_cburst.c
  1.31      +3 -3      ircd-hybrid-7/modules/m_challenge.c
  1.46      +2 -2      ircd-hybrid-7/modules/m_cjoin.c
  1.20      +1 -1      ircd-hybrid-7/modules/m_close.c
  1.34      +2 -2      ircd-hybrid-7/modules/m_connect.c
  1.28      +3 -3      ircd-hybrid-7/modules/m_cryptlink.c
  1.21      +1 -1      ircd-hybrid-7/modules/m_die.c
  1.12      +2 -2      ircd-hybrid-7/modules/m_dmem.c
  1.21      +2 -2      ircd-hybrid-7/modules/m_drop.c
  1.28      +2 -2      ircd-hybrid-7/modules/m_eob.c
  1.71      +1 -1      ircd-hybrid-7/modules/m_gline.c
  1.26      +2 -2      ircd-hybrid-7/modules/m_help.c
  1.50      +1 -1      ircd-hybrid-7/modules/m_info.c
  1.35      +1 -1      ircd-hybrid-7/modules/m_invite.c
  1.25      +2 -2      ircd-hybrid-7/modules/m_ison.c
  1.80      +1 -1      ircd-hybrid-7/modules/m_join.c
  1.37      +2 -2      ircd-hybrid-7/modules/m_kick.c
  1.57      +2 -2      ircd-hybrid-7/modules/m_kill.c
  1.94      +1 -1      ircd-hybrid-7/modules/m_kline.c
  1.45      +1 -1      ircd-hybrid-7/modules/m_knock.c
  1.33      +2 -2      ircd-hybrid-7/modules/m_links.c
  1.38      +2 -2      ircd-hybrid-7/modules/m_list.c
  1.53      +2 -2      ircd-hybrid-7/modules/m_lljoin.c
  1.15      +2 -2      ircd-hybrid-7/modules/m_llnick.c
  1.24      +2 -2      ircd-hybrid-7/modules/m_locops.c
  1.19      +2 -2      ircd-hybrid-7/modules/m_lusers.c
  1.83      +1 -1      ircd-hybrid-7/modules/m_message.c
  1.45      +2 -2      ircd-hybrid-7/modules/m_mode.c
  1.26      +1 -1      ircd-hybrid-7/modules/m_motd.c
  1.38      +2 -2      ircd-hybrid-7/modules/m_names.c
  1.14      +2 -2      ircd-hybrid-7/modules/m_nburst.c
  1.82      +2 -2      ircd-hybrid-7/modules/m_nick.c
  1.42      +1 -1      ircd-hybrid-7/modules/m_oper.c
  1.25      +2 -2      ircd-hybrid-7/modules/m_operwall.c
  1.49      +2 -2      ircd-hybrid-7/modules/m_part.c
  1.19      +2 -2      ircd-hybrid-7/modules/m_pass.c
  1.25      +2 -2      ircd-hybrid-7/modules/m_ping.c
  1.21      +2 -2      ircd-hybrid-7/modules/m_pong.c
  1.6       +2 -2      ircd-hybrid-7/modules/m_post.c
  1.22      +1 -1      ircd-hybrid-7/modules/m_quit.c
  1.35      +2 -2      ircd-hybrid-7/modules/m_rehash.c
  1.20      +1 -1      ircd-hybrid-7/modules/m_restart.c
  1.12      +2 -2      ircd-hybrid-7/modules/m_resv.c
  1.75      +1 -1      ircd-hybrid-7/modules/m_server.c
  1.39      +1 -1      ircd-hybrid-7/modules/m_set.c
  1.122     +2 -2      ircd-hybrid-7/modules/m_sjoin.c
  1.42      +2 -2      ircd-hybrid-7/modules/m_squit.c
  1.101     +1 -1      ircd-hybrid-7/modules/m_stats.c
  1.30      +2 -2      ircd-hybrid-7/modules/m_svinfo.c
  1.22      +2 -2      ircd-hybrid-7/modules/m_time.c
  1.45      +2 -2      ircd-hybrid-7/modules/m_topic.c
  1.41      +1 -1      ircd-hybrid-7/modules/m_trace.c
  1.41      +1 -1      ircd-hybrid-7/modules/m_unkline.c
  1.20      +2 -2      ircd-hybrid-7/modules/m_user.c
  1.34      +2 -2      ircd-hybrid-7/modules/m_userhost.c
  1.21      +2 -2      ircd-hybrid-7/modules/m_users.c
  1.35      +1 -1      ircd-hybrid-7/modules/m_version.c
  1.25      +2 -2      ircd-hybrid-7/modules/m_wallops.c
  1.47      +2 -2      ircd-hybrid-7/modules/m_who.c
  1.72      +2 -2      ircd-hybrid-7/modules/m_whois.c
  1.23      +2 -2      ircd-hybrid-7/modules/m_whowas.c



androsyn    2001/12/24 11:12:53 EST	(20011224_0)

  Modified files:
    modules              m_testline.c 
  Log:
  Test commit..
  
  Revision  Changes    Path
  1.22      +2 -2      ircd-hybrid-7/modules/m_testline.c



davidt      2001/12/23 16:11:13 EST	(20011223_0)

  Modified files:
    src                  s_serv.c 
  Log:
  - Fix possible division by zero.
  
  Revision  Changes    Path
  7.227     +29 -25    ircd-hybrid-7/src/s_serv.c



wcampbel    2001/12/22 00:31:04 EST	(20011222_1)

  Modified files:
    modules              m_close.c 
  Log:
  Fix for:
  *** CLOSE Not enough parameters
  
  Revision  Changes    Path
  1.19      +2 -2      ircd-hybrid-7/modules/m_close.c



wcampbel    2001/12/21 22:09:54 EST	(20011222_0)

  Modified files:
    doc                  ircd.8 
  Log:
  Update to the manpage, HTML version available:
  http://kabel.pp.ru/sgml/ircd.8.html
  
  Revision  Changes    Path
  1.5       +0 -3      ircd-hybrid-7/doc/ircd.8



wcampbel    2001/12/20 23:57:46 EST	(20011221_1)

  Modified files:
    doc                  challenge.txt 
  Log:
  Update to the CHALLENGE/Response Docs
  
  Approved by:    me.
  
  Revision  Changes    Path
  1.7       +10 -0     ircd-hybrid-7/doc/challenge.txt



db          2001/12/20 23:11:09 EST	(20011221_0)

  Modified files:
    modules              m_oper.c 
  Log:
  - An oper using RSA challenge, does not have a normal password.
    If they are perverse enough to try to oper using a password, don't
    let them core the server.
  
  Revision  Changes    Path
  1.41      +4 -1      ircd-hybrid-7/modules/m_oper.c



leeh        2001/12/20 15:32:04 EST	(20011220_6)

  Modified files:
    src                  send.c 
  Log:
  - dont check to->from->from!
  
  Revision  Changes    Path
  7.169     +4 -2      ircd-hybrid-7/src/send.c



leeh        2001/12/20 15:23:14 EST	(20011220_5)

  Modified files:
    doc                  example.conf
    src                  ircd_parser.y 
  Log:
  - ripped host=""; from shared {}; and made it use user="user@host"; like the
    rest of the config does..
  - this MAY cause issues with older confs
  
  Revision  Changes    Path
  7.146     +1 -2      ircd-hybrid-7/doc/example.conf
  1.227     +16 -8     ircd-hybrid-7/src/ircd_parser.y



androsyn    2001/12/20 14:31:52 EST	(20011220_4)

  Modified files:
    src                  ircd_parser.y 
  Log:
  Fixed oper {} so that a block with a key set and no password is counted as
  valid.
  
  Revision  Changes    Path
  1.226     +1 -1      ircd-hybrid-7/src/ircd_parser.y



leeh        2001/12/20 13:38:07 EST	(20011220_3)

  Modified files:
    modules              m_quit.c 
  Log:
  - m_quit() can never be called by a server or a foreign client
  
  Revision  Changes    Path
  1.21      +2 -2      ircd-hybrid-7/modules/m_quit.c



leeh        2001/12/20 13:34:06 EST	(20011220_2)

  Modified files:
    modules              m_restart.c 
  Log:
  - SHOW_IP -> HIDE_IP
  - removed a pointless ilog(), we have two others anyway.
  
  Revision  Changes    Path
  1.19      +1 -2      ircd-hybrid-7/modules/m_restart.c



leeh        2001/12/20 13:22:45 EST	(20011220_1)

  Modified files:
    modules              m_info.c 
  Log:
  - removed a pointless IsOper()
  
  Revision  Changes    Path
  1.49      +1 -1      ircd-hybrid-7/modules/m_info.c



leeh        2001/12/20 05:05:33 EST	(20011220_0)

  Modified files:
    modules              m_stats.c 
  Log:
  - we used client_p in half, source_p in half, changed to source_p
  - dont pace remote clients
  - cleanups
  
  Revision  Changes    Path
  1.100     +131 -130  ircd-hybrid-7/modules/m_stats.c



leeh        2001/12/19 12:45:54 EST	(20011219_4)

  Modified files:
    include              client.h 
    modules              m_knock.c m_stats.c m_trace.c 
    src                  s_conf.c s_user.c 
  Log:
  - major cleanups on trace
  - ripped IsIPHidden - its depreciated, we have IsIPSpoof
  
  Revision  Changes    Path
  7.135     +1 -5      ircd-hybrid-7/include/client.h
  1.44      +1 -1      ircd-hybrid-7/modules/m_knock.c
  1.99      +1 -1      ircd-hybrid-7/modules/m_stats.c
  1.40      +49 -47    ircd-hybrid-7/modules/m_trace.c
  7.286     +0 -1      ircd-hybrid-7/src/s_conf.c
  7.173     +1 -2      ircd-hybrid-7/src/s_user.c



leeh        2001/12/19 11:02:49 EST	(20011219_3)

  Modified files:
    modules              m_trace.c 
  Log:
  - dont show spoofed ips to remote opers
  
  Revision  Changes    Path
  1.39      +4 -4      ircd-hybrid-7/modules/m_trace.c



a1kmm       2001/12/19 04:59:31 EST	(20011219_2)

  Modified files:
    modules              .depend 
    src                  .depend client.c list.c memory.c s_auth.c 
                         s_bsd_sigio.c 
  Log:
  - Fixed an uninitialised memory reference into localClient that was coring
    m_challenge.
  - s_bsd_sigio now updates the time :)
  - changed the order of some things to cope with the immediate callback from
    comm_setselect.
  - Re-added an O_NONBLOCK previously taken out - it caused the adns socket to end
    up blocking, which is a bad thing.
  - Moved the #ifdef USE_SIGIO back down - it break make depend where it was.
  - Remade depend with the right headers.
  - Added a memfrob in the debugging code to catch uninitialised memory.
  
  Revision  Changes    Path
  1.3       +630 -643  ircd-hybrid-7/modules/.depend
  7.3       +434 -452  ircd-hybrid-7/src/.depend
  7.214     +5 -2      ircd-hybrid-7/src/client.c
  7.40      +2 -9      ircd-hybrid-7/src/list.c
  7.31      +2 -1      ircd-hybrid-7/src/memory.c
  7.79      +3 -3      ircd-hybrid-7/src/s_auth.c
  7.13      +8 -2      ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2001/12/18 22:21:55 EST	(20011219_1)

  Modified files:
    adns                 setup.c 
  Log:
  Make our #define of INADDR_LOOPBACK host byte order...
  
  Revision  Changes    Path
  1.24      +2 -2      ircd-hybrid-7/adns/setup.c



androsyn    2001/12/18 22:09:42 EST	(20011219_0)

  Modified files:
    src                  channel.c client.c 
  Log:
  Change the default allocations for various block heaps...Probably ought to
  move these into config.h or something..
  
  Revision  Changes    Path
  7.287     +2 -4      ircd-hybrid-7/src/channel.c
  7.213     +2 -5      ircd-hybrid-7/src/client.c



leeh        2001/12/18 17:36:00 EST	(20011218_5)

  Modified files:
    contrib              m_jupe.c 
  Log:
  - changed a couple of %s!%s@%s -> get_oper_name()
  
  Revision  Changes    Path
  1.22      +5 -6      ircd-hybrid-7/contrib/m_jupe.c



wcampbel    2001/12/18 10:38:13 EST	(20011218_4)

  Modified files:
    contrib              m_jupe.c 
  Log:
  Repo moved the backup from developers into here and applied Lee's fix.
  Repo moves are better as they do not lose history.
  
  Revision  Changes    Path
  1.21      +1 -1      ircd-hybrid-7/contrib/m_jupe.c



androsyn    2001/12/18 10:36:52 EST	(20011218_3)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Move the #ifdef for USE_SIGIO a bit further up in the code..
  
  Revision  Changes    Path
  7.12      +3 -1      ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2001/12/18 10:33:55 EST	(20011218_2)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Minor cleanups...
  
  Revision  Changes    Path
  7.11      +231 -198  ircd-hybrid-7/src/s_bsd_sigio.c



a1kmm       2001/12/18 03:42:19 EST	(20011218_1)

  Modified files:
    src                  s_auth.c s_bsd.c 
  Log:
  - Made s_auth reschedule if no data is read on the first pass. This is
    needed for sigio to work properly as we need to try reading at once to
    tell the kernel to send the signal next time. Note that if any auth
    data is received, it still must all be received in the same packet. This
    should be a non-risky commit.
  - Changed an assert() to an if () return; This was needed because with SIGIO
    a call to comm_setselect from a handler that was not called by comm_setselect
    can result in a call to the handler, which caused re-entrancy problems with
    the assert. As the assert() should never happen, this should not affect the
    rest of the ircd. Additionally, it is a better action in the case it does
    happen if NDEBUG is defined, as that would otherwise result in the ircd
    coring(probably).
  
  Revision  Changes    Path
  7.78      +8 -1      ircd-hybrid-7/src/s_auth.c
  7.153     +4 -2      ircd-hybrid-7/src/s_bsd.c



a1kmm       2001/12/18 02:20:09 EST	(20011218_0)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  - Fixed sigio; we now try to read/write immediately when a handler is set but
    wasn't before on comm_setselect()
  
  Revision  Changes    Path
  7.10      +11 -2     ircd-hybrid-7/src/s_bsd_sigio.c



leeh        2001/12/17 12:06:51 EST	(20011217_0)

  Modified files:
    src                  ircd.c 
  Log:
  - commited hwys patch for cygwin
  
  Revision  Changes    Path
  7.206     +4 -0      ircd-hybrid-7/src/ircd.c



db          2001/12/16 18:04:14 EST	(20011216_21)

  Modified files:
    include              channel_mode.h 
  Log:
  - removed unused macro
    I bet there are still a ton of these left ;-(
  
  Revision  Changes    Path
  7.4       +0 -2      ircd-hybrid-7/include/channel_mode.h



db          2001/12/16 17:25:01 EST	(20011216_20)

  Modified files:
    include              channel.h 
  Log:
  - typedef aBan no longer used. GOOD! DIE DIE DIE!
  
  Revision  Changes    Path
  7.96      +2 -2      ircd-hybrid-7/include/channel.h



leeh        2001/12/16 17:22:48 EST	(20011216_19)

  Modified files:
    include              channel_mode.h 
    src                  channel_mode.c 
  Log:
  - removed MODE_KEY and MODE_LIMIT (ahahahha!)
  
  Revision  Changes    Path
  7.3       +2 -4      ircd-hybrid-7/include/channel_mode.h
  7.11      +2 -6      ircd-hybrid-7/src/channel_mode.c



leeh        2001/12/16 13:09:43 EST	(20011216_18)

  Modified files:
    modules              m_message.c 
  Log:
  - PRIVMSG -> "%s", command
  
  Revision  Changes    Path
  1.82      +1 -1      ircd-hybrid-7/modules/m_message.c



leeh        2001/12/16 08:05:54 EST	(20011216_17)

  Modified files:
    modules              m_version.c 
  Log:
  - 005 gets mapped to 105, duh. :)
  
  Revision  Changes    Path
  1.34      +1 -0      ircd-hybrid-7/modules/m_version.c



leeh        2001/12/16 07:04:03 EST	(20011216_16)

  Modified files:
    include              s_gline.h 
    modules              m_gline.c m_stats.c 
    src                  s_gline.c 
  Log:
  - if something is glined, cleanup_glines() will now remove it from the
    pending list
  - call cleanup_glines() after we add a gline
  - check find_is_glined() earlier in majority_gline - why check for duplicate
    votes when its not going to matter anyway? :)
  
  Revision  Changes    Path
  7.9       +2 -2      ircd-hybrid-7/include/s_gline.h
  1.70      +7 -17     ircd-hybrid-7/modules/m_gline.c
  1.98      +1 -0      ircd-hybrid-7/modules/m_stats.c
  1.17      +5 -3      ircd-hybrid-7/src/s_gline.c



leeh        2001/12/16 06:36:48 EST	(20011216_15)

  Modified files:
    include              hostmask.h 
    modules              m_stats.c 
    src                  hostmask.c 
  Log:
  - report_Ilines -> report_auth
  - moved the masked stats I code into m_stats.c
  
  Revision  Changes    Path
  1.17      +2 -2      ircd-hybrid-7/include/hostmask.h
  1.97      +29 -4     ircd-hybrid-7/modules/m_stats.c
  7.60      +8 -28     ircd-hybrid-7/src/hostmask.c



leeh        2001/12/16 06:04:02 EST	(20011216_14)

  Modified files:
    modules              m_info.c m_motd.c m_version.c 
  Log:
  - removed a bogus MyClient in m_motd()
  - allow remote versions, depending on serverhide
  - ratelimit /version
  - dont send 005 remotely - could cause client confusion?
  
  Revision  Changes    Path
  1.48      +2 -2      ircd-hybrid-7/modules/m_info.c
  1.25      +2 -3      ircd-hybrid-7/modules/m_motd.c
  1.33      +22 -2     ircd-hybrid-7/modules/m_version.c



androsyn    2001/12/16 05:15:20 EST	(20011216_13)

  Modified files:
    src                  irc_string.c 
  Log:
  Yet another stupid commit...
  
  Revision  Changes    Path
  7.49      +2 -2      ircd-hybrid-7/src/irc_string.c



a1kmm       2001/12/16 05:13:51 EST	(20011216_12)

  Modified files:
    src                  irc_string.c 
  Log:
  - INT16SZ = 2, not sizeof(unsigned int)
  
  Revision  Changes    Path
  7.48      +1 -1      ircd-hybrid-7/src/irc_string.c



androsyn    2001/12/16 05:11:09 EST	(20011216_11)

  Modified files:
    src                  irc_string.c 
  Log:
  Fix another #ifdef
  
  Revision  Changes    Path
  7.47      +4 -0      ircd-hybrid-7/src/irc_string.c



androsyn    2001/12/16 05:08:29 EST	(20011216_10)

  Modified files:
    src                  irc_string.c 
  Log:
  forgot the #ifdef IPV6
  
  Revision  Changes    Path
  7.46      +2 -0      ircd-hybrid-7/src/irc_string.c



androsyn    2001/12/16 05:07:34 EST	(20011216_9)

  Modified files:
    src                  irc_string.c 
  Log:
  Fixed an ipv6 compile error..
  
  Revision  Changes    Path
  7.45      +4 -0      ircd-hybrid-7/src/irc_string.c



androsyn    2001/12/16 04:58:33 EST	(20011216_8)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Yet another fix..
  
  Revision  Changes    Path
  7.9       +2 -4      ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2001/12/16 04:57:35 EST	(20011216_7)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Additional fixes for sigio..this should resolve the need to goto poll()
  all the time..
  
  Revision  Changes    Path
  7.8       +22 -2     ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2001/12/16 02:55:27 EST	(20011216_6)

  Modified files:
    src                  send.c 
  Log:
  Removed dead code that was #if 0'd out..
  
  Revision  Changes    Path
  7.168     +0 -13     ircd-hybrid-7/src/send.c



androsyn    2001/12/16 02:53:03 EST	(20011216_5)

  Modified files:
    src                  irc_string.c 
  Log:
  Removed a stupid check for INADDRSZ
  
  Revision  Changes    Path
  7.44      +2 -9      ircd-hybrid-7/src/irc_string.c



androsyn    2001/12/16 02:50:13 EST	(20011216_4)

  Modified files:
    src                  irc_string.c 
  Log:
  Ripped out some old code..
  
  Revision  Changes    Path
  7.43      +0 -8      ircd-hybrid-7/src/irc_string.c



androsyn    2001/12/16 02:48:35 EST	(20011216_3)

  Modified files:
    src                  restart.c 
  Log:
  I will compile before I commit
  
  Revision  Changes    Path
  7.19      +1 -1      ircd-hybrid-7/src/restart.c



androsyn    2001/12/16 02:43:28 EST	(20011216_2)

  Modified files:
    src                  restart.c 
  Log:
  Fixed misleading message on server restart
  
  Revision  Changes    Path
  7.18      +2 -3      ircd-hybrid-7/src/restart.c



wcampbel    2001/12/16 00:10:18 EST	(20011216_1)

  Modified files:
    doc                  example.conf 
  Log:
  Document Jeremy's issue with mismatched forward/reverse in connect {}'s
  host entry.
  
  Revision  Changes    Path
  7.145     +4 -0      ircd-hybrid-7/doc/example.conf



wcampbel    2001/12/15 23:53:29 EST	(20011216_0)

  Modified files:
    .                    INSTALL 
    doc                  serverhide.txt 
  Log:
  Doc updates
  
  Revision  Changes    Path
  7.21      +3 -0      ircd-hybrid-7/INSTALL
  7.2       +15 -6     ircd-hybrid-7/doc/serverhide.txt



leeh        2001/12/15 17:39:12 EST	(20011215_12)

  Modified files:
    contrib              Makefile.in 
    src                  s_conf.c 
  Added files:
    contrib              m_jupe.c 
  Log:
  - added jupe back, its not dangerous
  - missing %s
  
  Revision  Changes    Path
  1.28      +1 -0      ircd-hybrid-7/contrib/Makefile.in
  1.1       +195 -0    ircd-hybrid-7/contrib/m_jupe.c (new)
  7.285     +2 -2      ircd-hybrid-7/src/s_conf.c



leeh        2001/12/15 17:20:09 EST	(20011215_11)

  Modified files:
    modules              .depend 
    src                  .depend client.c 
  Log:
  - you cant compile an id string, commented it out in .depend
  - check for splitmode everytime a client/server leaves (ugh)
  
  Revision  Changes    Path
  1.2       +1 -1      ircd-hybrid-7/modules/.depend
  7.2       +1 -1      ircd-hybrid-7/src/.depend
  7.212     +4 -0      ircd-hybrid-7/src/client.c



leeh        2001/12/15 15:35:23 EST	(20011215_10)

  Modified files:
    messages             ayb.po custom.po 
    messages/translations ircd-croatian.po ircd-danish.po 
                          ircd-dutch.po ircd-german.po 
                          ircd-norwegian.po ircd-spanish.po 
                          ircd-swedish.po 
    modules              m_knock.c 
    src                  messages.tab 
  Log:
  - updates to knock numerics
  
  Revision  Changes    Path
  1.13      +30 -0     ircd-hybrid-7/messages/ayb.po
  1.32      +30 -0     ircd-hybrid-7/messages/custom.po
  1.14      +30 -0     ircd-hybrid-7/messages/translations/ircd-croatian.po
  1.12      +30 -0     ircd-hybrid-7/messages/translations/ircd-danish.po
  1.13      +30 -0     ircd-hybrid-7/messages/translations/ircd-dutch.po
  1.14      +30 -0     ircd-hybrid-7/messages/translations/ircd-german.po
  1.13      +30 -0     ircd-hybrid-7/messages/translations/ircd-norwegian.po
  1.12      +30 -0     ircd-hybrid-7/messages/translations/ircd-spanish.po
  1.15      +30 -0     ircd-hybrid-7/messages/translations/ircd-swedish.po
  1.43      +1 -0      ircd-hybrid-7/modules/m_knock.c
  7.64      +2 -2      ircd-hybrid-7/src/messages.tab



wcampbel    2001/12/15 11:32:12 EST	(20011215_9)

  Added files:
    help/opers           knockll 
  Log:
  This command was added recently, adding a generic help file for it.
  
  Revision  Changes    Path
  1.1       +1 -0      ircd-hybrid-7/help/opers/knockll (new)



a1kmm       2001/12/15 00:34:27 EST	(20011215_8)

  Modified files:
    modules              Makefile.in 
    src                  Makefile.in 
  Added files:
    modules              .depend 
    src                  .depend 
  Log:
  - Fixed .depend system to work properly with CVS, so we don't always end
    up committing .depend. .depend changes should now be rare.
    Please do not commit after make depend from a non-gcc box unless you are
    sure that your compiler is not including system headers. Other than that
    .depend should be universal so we shouldn't experience any problems.
  
  Revision  Changes    Path
  1.1       +709 -0    ircd-hybrid-7/modules/.depend (new)
  1.58      +3 -1      ircd-hybrid-7/modules/Makefile.in
  7.1       +498 -0    ircd-hybrid-7/src/.depend (new)
  7.106     +3 -1      ircd-hybrid-7/src/Makefile.in



wcampbel    2001/12/15 00:21:24 EST	(20011215_7)

  Modified files:
    .                    INSTALL 
  Log:
  Lee edited the INSTALL file without editing the SGML source, merged
  back his changes.
  
  Revision  Changes    Path
  7.20      +0 -0      ircd-hybrid-7/INSTALL



wcampbel    2001/12/15 00:10:43 EST	(20011215_6)

  Modified files:
    .                    Hybrid-team INSTALL 
    doc                  challenge.txt index.txt messages.txt 
                         server-version-info 
  Added files:
    doc                  serverhide.txt 
  Log:
  Documentation updates
  
  Revision  Changes    Path
  7.42      +2 -2      ircd-hybrid-7/Hybrid-team
  7.19      +9 -5      ircd-hybrid-7/INSTALL
  1.6       +2 -8      ircd-hybrid-7/doc/challenge.txt
  1.15      +2 -1      ircd-hybrid-7/doc/index.txt
  1.3       +1 -7      ircd-hybrid-7/doc/messages.txt
  7.13      +1 -7      ircd-hybrid-7/doc/server-version-info
  7.1       +121 -0    ircd-hybrid-7/doc/serverhide.txt (new)



androsyn    2001/12/14 23:25:37 EST	(20011215_5)

  Modified files:
    .                    configure 
  Log:
  Fixed the check for sigio...
  
  Revision  Changes    Path
  7.108     +6 -6      ircd-hybrid-7/configure



db          2001/12/14 23:24:18 EST	(20011215_4)

  Modified files:
    modules              m_trace.c 
  Log:
  - fixed m_trace bug for unopered clients, we didn't check that parv[1]
    was valid before blindly using it.
  
  Revision  Changes    Path
  1.38      +9 -6      ircd-hybrid-7/modules/m_trace.c



a1kmm       2001/12/14 23:04:58 EST	(20011215_3)

  Modified files:
    src                  hostmask.c 
  Log:
  - stats K & stats Irequested by users is now much more efficiently handled,
    and it actually works.
  
  Revision  Changes    Path
  7.59      +33 -28    ircd-hybrid-7/src/hostmask.c



db          2001/12/14 21:31:31 EST	(20011215_2)

  Modified files:
    modules              m_unkline.c 
  Log:
  - cleanups of extraneous spaces
  
  Revision  Changes    Path
  1.40      +3 -3      ircd-hybrid-7/modules/m_unkline.c



db          2001/12/14 21:24:51 EST	(20011215_1)

  Modified files:
    include              s_conf.h 
    modules              m_kline.c 
    src                  s_conf.c 
  Log:
  - No reason at all to waste space in the ConfItem
  
  Revision  Changes    Path
  7.169     +0 -1      ircd-hybrid-7/include/s_conf.h
  1.93      +16 -21    ircd-hybrid-7/modules/m_kline.c
  7.284     +0 -1      ircd-hybrid-7/src/s_conf.c



db          2001/12/14 21:07:36 EST	(20011215_0)

  Modified files:
    include              s_conf.h 
    modules              m_kline.c 
    src                  s_conf.c 
  Log:
  - Cleaned up oper_reason code. Only the admins need to see the oper reason.
    So only write the oper reason to the kline/dline conf file. Never
    need to read it back in.
  
  Revision  Changes    Path
  7.168     +1 -0      ircd-hybrid-7/include/s_conf.h
  1.92      +39 -17    ircd-hybrid-7/modules/m_kline.c
  7.283     +27 -37    ircd-hybrid-7/src/s_conf.c



androsyn    2001/12/14 11:47:56 EST	(20011214_10)

  Modified files:
    .                    configure 
    include              setup.h.in 
  Log:
  Last of the sigio changes..
  
  Revision  Changes    Path
  7.107     +218 -203  ircd-hybrid-7/configure
  7.40      +69 -85    ircd-hybrid-7/include/setup.h.in



androsyn    2001/12/14 10:48:22 EST	(20011214_9)

  Modified files:
    autoconf             acconfig.h configure.in 
    src                  Makefile.in s_bsd_sigio.c s_serv.c 
  Log:
  Last of the changes for SIGIO i think...
  
  Revision  Changes    Path
  7.18      +3 -0      ircd-hybrid-7/autoconf/acconfig.h
  7.105     +20 -1     ircd-hybrid-7/autoconf/configure.in
  7.105     +1 -0      ircd-hybrid-7/src/Makefile.in
  7.7       +14 -4     ircd-hybrid-7/src/s_bsd_sigio.c
  7.226     +16 -3     ircd-hybrid-7/src/s_serv.c



leeh        2001/12/14 10:46:25 EST	(20011214_8)

  Modified files:
    .                    INSTALL 
    doc                  example.conf 
    src                  s_conf.c 
  Log:
  - doc updates
  
  Revision  Changes    Path
  7.18      +5 -2      ircd-hybrid-7/INSTALL
  7.144     +6 -6      ircd-hybrid-7/doc/example.conf
  7.282     +1 -1      ircd-hybrid-7/src/s_conf.c



leeh        2001/12/14 10:36:24 EST	(20011214_7)

  Modified files:
    doc                  example.conf 
  Log:
  - added the split options to example.conf
  
  Revision  Changes    Path
  7.143     +29 -0     ircd-hybrid-7/doc/example.conf



leeh        2001/12/14 10:26:33 EST	(20011214_6)

  Modified files:
    modules              m_gline.c 
  Log:
  - dont compare glines against klines
  
  Revision  Changes    Path
  1.69      +1 -3      ircd-hybrid-7/modules/m_gline.c



leeh        2001/12/14 10:16:25 EST	(20011214_5)

  Modified files:
    src                  client.c 
  Log:
  - fixed the kline_with_connection_closed/kline_with_reason stuff
  
  Revision  Changes    Path
  7.211     +72 -39    ircd-hybrid-7/src/client.c



leeh        2001/12/14 09:31:31 EST	(20011214_4)

  Modified files:
    modules              m_message.c m_oper.c 
  Log:
  - ban our opers doing $irc.server
  - initialise oconf to NULL
  
  Revision  Changes    Path
  1.81      +7 -0      ircd-hybrid-7/modules/m_message.c
  1.40      +3 -1      ircd-hybrid-7/modules/m_oper.c



a1kmm       2001/12/14 03:49:22 EST	(20011214_3)

  Modified files:
    .                    .cvsignore 
    modules              .cvsignore m_oper.c 
  Log:
  - Fixed a core in m_oper() when you deoper and then reoper.
  
  Revision  Changes    Path
  1.4       +1 -0      ircd-hybrid-7/.cvsignore
  1.2       +1 -0      ircd-hybrid-7/modules/.cvsignore
  1.39      +7 -4      ircd-hybrid-7/modules/m_oper.c



a1kmm       2001/12/14 02:47:11 EST	(20011214_2)

  Modified files:
    src                  channel_mode.c 
  Log:
  - Don't add ' ' to channel parambuffers unless we just added a parameter
    mode.
  
  Revision  Changes    Path
  7.10      +30 -22    ircd-hybrid-7/src/channel_mode.c



bill        2001/12/13 23:20:55 EST	(20011214_1)

  Modified files:
    src                  s_conf.c 
  Log:
  - added | support into klines
  
  Revision  Changes    Path
  7.281     +31 -4     ircd-hybrid-7/src/s_conf.c



leeh        2001/12/13 20:30:06 EST	(20011214_0)

  Modified files:
    src                  send.c 
  Log:
  - removed a dodgy deprintf..
  
  Revision  Changes    Path
  7.167     +0 -2      ircd-hybrid-7/src/send.c



leeh        2001/12/13 15:10:04 EST	(20011213_7)

  Modified files:
    include              channel.h 
    modules              m_die.c m_restart.c m_set.c 
    src                  channel.c ircd.c 
  Log:
  - added a restart notice for servers/users
  - fixed a dupe die notice
  - when we're in splitmode, add an event for check_splitmode() every 60s to
    pull us out of it, delete this when its deactivated
  
  Revision  Changes    Path
  7.95      +3 -1      ircd-hybrid-7/include/channel.h
  1.20      +4 -13     ircd-hybrid-7/modules/m_die.c
  1.18      +32 -10    ircd-hybrid-7/modules/m_restart.c
  1.38      +8 -3      ircd-hybrid-7/modules/m_set.c
  7.286     +27 -0     ircd-hybrid-7/src/channel.c
  7.205     +3 -0      ircd-hybrid-7/src/ircd.c



leeh        2001/12/13 14:27:25 EST	(20011213_6)

  Modified files:
    include              ircd.h 
    modules              m_join.c m_set.c 
    src                  channel.c ircd.c s_conf.c 
  Log:
  - more splitcode stuff, added it all to /set and made no_*_on_split work
  - needto add user/server tracking later..
  
  Revision  Changes    Path
  7.42      +5 -1      ircd-hybrid-7/include/ircd.h
  1.79      +15 -0     ircd-hybrid-7/modules/m_join.c
  1.37      +67 -1     ircd-hybrid-7/modules/m_set.c
  7.285     +9 -0      ircd-hybrid-7/src/channel.c
  7.204     +9 -0      ircd-hybrid-7/src/ircd.c
  7.280     +5 -0      ircd-hybrid-7/src/s_conf.c



davidt      2001/12/13 13:31:52 EST	(20011213_5)

  Modified files:
    doc/technical        cryptlink.txt 
  Log:
  - Updated cryptlinks specification as discussed with vulture and einride.
    Note that this new protocol has not yet been implemented.
  
  Revision  Changes    Path
  7.7       +127 -95   ircd-hybrid-7/doc/technical/cryptlink.txt



androsyn    2001/12/13 13:11:56 EST	(20011213_4)

  Modified files:
    autoconf             acconfig.h 
  Log:
  Fix to keep autoconf from whining about HAVE_GETTEXT
  
  Revision  Changes    Path
  7.17      +4 -1      ircd-hybrid-7/autoconf/acconfig.h



leeh        2001/12/13 12:57:42 EST	(20011213_3)

  Modified files:
    .                    configure 
  Log:
  - updated from configure.in or something
  
  Revision  Changes    Path
  7.106     +202 -191  ircd-hybrid-7/configure



leeh        2001/12/13 12:40:47 EST	(20011213_2)

  Modified files:
    autoconf             configure.in 
  Log:
  - I shouldve done configure.in, not configure (hi larne!)
  
  Revision  Changes    Path
  7.104     +1 -1      ircd-hybrid-7/autoconf/configure.in



leeh        2001/12/13 05:29:28 EST	(20011213_1)

  Modified files:
    include              s_conf.h 
    src                  ircd_lexer.l ircd_parser.y 
  Log:
  - added split_user_count and split_server_count (number) to channel {};
  - added no_create_on_split and no_join_on_split (yes/no) to channel {};
  
  Revision  Changes    Path
  7.167     +16 -12    ircd-hybrid-7/include/s_conf.h
  1.130     +4 -0      ircd-hybrid-7/src/ircd_lexer.l
  1.225     +37 -0     ircd-hybrid-7/src/ircd_parser.y



leeh        2001/12/13 05:07:34 EST	(20011213_0)

  Removed files:
    include              dline_conf.h 
    src                  dline_conf.c 
  Log:
  - removed the old dline-conf stuff
  
  Revision  Changes    Path
  7.14      +0 -34     ircd-hybrid-7/include/dline_conf.h (dead)
  7.33      +0 -241    ircd-hybrid-7/src/dline_conf.c (dead)



davidt      2001/12/12 18:22:49 EST	(20011212_4)

  Modified files:
    .                    ChangeLog 
  Log:
  - Do not use #Id# tags in commit logs, k plz thnx.
  
  Revision  Changes    Path
  7.3152    +3 -3      ircd-hybrid-7/ChangeLog



db          2001/12/12 13:23:48 EST	(20011212_3)

  Modified files:
    src                  ircd.c 
  Log:
  - make buff 32 bytes long in both write_pidfile and check_pidfile. purely
    cosmetic. Just for consistency.
  
  Revision  Changes    Path
  7.203     +1 -1      ircd-hybrid-7/src/ircd.c



db          2001/12/12 02:41:33 EST	(20011212_2)

  Modified files:
    modules              m_server.c 
  Log:
  - changed "no H-line" to "no matching hub_mask"
  - changed comments to match docs host_mask->hub_mask
  - made an if clearer and a tad more efficient
  
  Revision  Changes    Path
  1.74      +8 -7      ircd-hybrid-7/modules/m_server.c



db          2001/12/11 23:58:36 EST	(20011212_1)

  Modified files:
    src                  s_conf.c 
  Log:
  - "forward" ported hwy101's tkline expire notify from 6 to 7
  
  Revision  Changes    Path
  7.279     +7 -1      ircd-hybrid-7/src/s_conf.c



androsyn    2001/12/11 23:13:49 EST	(20011212_0)

  Removed files:
    src                  .depend 
    modules              .depend 
  Log:
  Down with depends...
  
  Revision  Changes    Path
  1.41      +0 -42722  ircd-hybrid-7/modules/.depend (dead)
  7.62      +0 -20720  ircd-hybrid-7/src/.depend (dead)



leeh        2001/12/11 18:09:11 EST	(20011211_9)

  Modified files:
    .                    configure 
  Log:
  - $GCC -> $CC, creating 2.5gig files with make depend isnt fun.
  
  Revision  Changes    Path
  7.105     +1 -1      ircd-hybrid-7/configure



leeh        2001/12/11 09:44:53 EST	(20011211_8)

  Modified files:
    include              supported.h 
  Log:
  - if &channels are disabled, dont send it in 005
  
  Revision  Changes    Path
  1.15      +3 -2      ircd-hybrid-7/include/supported.h



androsyn    2001/12/10 23:33:11 EST	(20011211_7)

  Modified files:
    .                    configure 
    adns                 Makefile.in 
    autoconf             configure.in 
    contrib              Makefile.in 
    modules              .depend Makefile.in 
    servlink             Makefile.in 
    src                  .depend Makefile.in 
    tools                Makefile.in 
  Log:
  Fixed make depend weirdness. Use cc -xM if on solaris and not using gcc
  
  Revision  Changes      Path
  1.12      +2 -2        ircd-hybrid-7/adns/Makefile.in
  7.103     +20 -0       ircd-hybrid-7/autoconf/configure.in
  7.104     +2624 -4992  ircd-hybrid-7/configure
  1.27      +2 -2        ircd-hybrid-7/contrib/Makefile.in
  1.40      +42017 -1    ircd-hybrid-7/modules/.depend
  1.57      +1 -1        ircd-hybrid-7/modules/Makefile.in
  1.12      +2 -2        ircd-hybrid-7/servlink/Makefile.in
  7.61      +20235 -1    ircd-hybrid-7/src/.depend
  7.104     +1 -1        ircd-hybrid-7/src/Makefile.in
  7.29      +2 -2        ircd-hybrid-7/tools/Makefile.in



androsyn    2001/12/10 23:09:57 EST	(20011211_6)

  Modified files:
    src                  ircd.c 
  Log:
  Fixed our trojan-enz boner of the year bug...
  Anybody caught doing something like char buff[sizeof(unsigned int)+1] will
  be beaten with extreme prejudice.
  
  Revision  Changes    Path
  7.202     +1 -1      ircd-hybrid-7/src/ircd.c



a1kmm       2001/12/10 22:42:48 EST	(20011211_5)

  Modified files:
    modules              .depend Makefile.in 
    src                  .depend Makefile.in 
  Log:
  - Fixed #Id# tags echoed from Makefile.in into .depend
  
  Revision  Changes    Path
  1.39      +0 -0      ircd-hybrid-7/modules/.depend
  1.56      +4 -2      ircd-hybrid-7/modules/Makefile.in
  7.60      +0 -0      ircd-hybrid-7/src/.depend
  7.103     +4 -2      ircd-hybrid-7/src/Makefile.in



db          2001/12/10 22:35:16 EST	(20011211_4)

  Modified files:
    src                  ircd.c 
  Log:
  - changed fd -> fb. How confusing.
  
  Revision  Changes    Path
  7.201     +9 -9      ircd-hybrid-7/src/ircd.c



a1kmm       2001/12/10 22:22:46 EST	(20011211_3)

  Modified files:
    .                    configure 
    autoconf             configure.in 
    help                 Makefile.in 
    include              rsa.h setup.h.in 
    modules              Makefile.in 
    src                  Makefile.in rsa.c s_bsd_devpoll.c 
                         s_bsd_kqueue.c s_bsd_poll.c 
                         s_bsd_select.c s_bsd_sigio.c 
  Added files:
    modules              .depend 
    src                  .depend 
  Log:
  - Fixed dependencies so they are saved to a file ".depend". This means that
    building doesn't depend on sed, and it fixes the problems admins on boxes
    that don't support cc -MM by allowing the .depend file to already exist
    in the tarball.
  - Moved all the #include "file" that were inside a #ifdef out of them
    so that we always have dependencies at least as strong as they should
    be.
  - Wrapped rsa.h in #ifdef HAVE_LIBCRYPTO so we can include it even when
    we don't have libcrypto.
  - Took the dependency build out of configure.
  - Added a depend target to help/Makefile.in
  - Added a #Id# tag to help/Makefile.in so commit doesn't complain.
  
  Revision  Changes      Path
  7.102     +0 -3        ircd-hybrid-7/autoconf/configure.in
  7.103     +4998 -2622  ircd-hybrid-7/configure
  1.11      +3 -0        ircd-hybrid-7/help/Makefile.in
  7.8       +3 -2        ircd-hybrid-7/include/rsa.h
  7.39      +85 -62      ircd-hybrid-7/include/setup.h.in
  1.38      +706 -0      ircd-hybrid-7/modules/.depend (new)
  1.55      +5 -8        ircd-hybrid-7/modules/Makefile.in
  7.59      +486 -0      ircd-hybrid-7/src/.depend (new)
  7.102     +4 -10       ircd-hybrid-7/src/Makefile.in
  7.23      +4 -2        ircd-hybrid-7/src/rsa.c
  7.11      +2 -2        ircd-hybrid-7/src/s_bsd_devpoll.c
  1.22      +2 -2        ircd-hybrid-7/src/s_bsd_kqueue.c
  7.51      +2 -2        ircd-hybrid-7/src/s_bsd_poll.c
  7.21      +2 -2        ircd-hybrid-7/src/s_bsd_select.c
  7.6       +1 -1        ircd-hybrid-7/src/s_bsd_sigio.c



joant       2001/12/10 22:17:39 EST	(20011211_2)

  Modified files:
    src                  s_log.c 
  Log:
  Fixing SYSLOG_USERS compile cleanup
  
  Revision  Changes    Path
  7.36      +2 -0      ircd-hybrid-7/src/s_log.c



joant       2001/12/10 22:12:05 EST	(20011211_1)

  Modified files:
    src                  s_log.c 
  Log:
  Fixing SYSLOG_USERS #define error
  
  Revision  Changes    Path
  7.35      +3 -3      ircd-hybrid-7/src/s_log.c



db          2001/12/10 22:09:39 EST	(20011211_0)

  Modified files:
    src                  fileio.c 
  Log:
  - formatting change only.
  
  Revision  Changes    Path
  7.17      +30 -24    ircd-hybrid-7/src/fileio.c



leeh        2001/12/10 18:21:36 EST	(20011210_12)

  Modified files:
    modules              m_message.c 
    src                  send.c 
  Log:
  - dont check to->from == from->from in sendto_anywhere, stops clients
    privmsg'ing themselves
  - moved the check for a client above @#channel etc
  - fixed a bogus check, only disallow non-chanops to send to +%@#channel
  
  Revision  Changes    Path
  1.80      +23 -32    ircd-hybrid-7/modules/m_message.c
  7.166     +4 -0      ircd-hybrid-7/src/send.c



androsyn    2001/12/10 02:26:01 EST	(20011210_11)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Removed unnecessary variable..
  
  Revision  Changes    Path
  7.5       +2 -4      ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2001/12/10 02:24:11 EST	(20011210_10)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Some cleanups of sigio..
  
  Revision  Changes    Path
  7.4       +12 -10    ircd-hybrid-7/src/s_bsd_sigio.c



androsyn    2001/12/10 02:15:15 EST	(20011210_9)

  Modified files:
    src                  send.c 
    include              fdlist.h 
  Log:
  So the last commit to fdlist.h was misguided...
  
  We now go into send_queued_write() directly rather than trying to go into
  comm_setselect() to do it first...This seems to make sigio work right..
  
  Revision  Changes    Path
  7.23      +0 -1      ircd-hybrid-7/include/fdlist.h
  7.165     +0 -16     ircd-hybrid-7/src/send.c



androsyn    2001/12/10 01:57:45 EST	(20011210_8)

  Modified files:
    include              fdlist.h 
  Log:
  Added a field to track writes for sigio
  
  Revision  Changes    Path
  7.22      +3 -1      ircd-hybrid-7/include/fdlist.h



androsyn    2001/12/10 01:01:41 EST	(20011210_7)

  Modified files:
    src                  s_bsd_sigio.c 
  Log:
  Keep sigio from using 100% of the cpu..
  
  Revision  Changes    Path
  7.3       +49 -27    ircd-hybrid-7/src/s_bsd_sigio.c



lusky       2001/12/10 00:09:23 EST	(20011210_6)

  Modified files:
    include              patchlevel.h 
  Log:
  - revved patchlevel to 7beta9
  
  Revision  Changes    Path
  7.17      +3 -1      ircd-hybrid-7/include/patchlevel.h



jdc         2001/12/09 23:37:54 EST	(20011210_5)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - Removal of -R for SSL when using --disable-shared-modules.
  
  Revision  Changes    Path
  7.101     +1 -1      ircd-hybrid-7/autoconf/configure.in
  7.102     +1 -1      ircd-hybrid-7/configure



jdc         2001/12/09 23:17:36 EST	(20011210_4)

  Modified files:
    include              irc_string.h sprintf_irc.h 
    src                  sprintf_irc.c 
  Log:
  - Fixes for ircsprintf() declaration problems.
  
  Revision  Changes    Path
  7.32      +1 -13     ircd-hybrid-7/include/irc_string.h
  7.6       +15 -0     ircd-hybrid-7/include/sprintf_irc.h
  7.11      +1 -2      ircd-hybrid-7/src/sprintf_irc.c



jdc         2001/12/09 22:55:31 EST	(20011210_3)

  Modified files:
    src                  channel.c 
  Log:
  - Follow-up fix for s_iphost.
  
  Revision  Changes    Path
  7.284     +1 -1      ircd-hybrid-7/src/channel.c



jdc         2001/12/09 22:52:05 EST	(20011210_2)

  Modified files:
    modules              m_knock.c 
    src                  channel.c 
  Log:
  - Renamed s_host to src_host; s_host is reserved on Solaris 8, apparently.
    s_ipaddr also renamed to src_ipaddr to keep consistency.
  
  Revision  Changes    Path
  1.42      +6 -6      ircd-hybrid-7/modules/m_knock.c
  7.283     +12 -16    ircd-hybrid-7/src/channel.c



jdc         2001/12/09 22:15:04 EST	(20011210_1)

  Modified files:
    iauth/source         misc.c sock.c 
  Log:
  - More 'register' declaration removals.
  
  Revision  Changes    Path
  7.5       +3 -3      ircd-hybrid-7/iauth/source/misc.c
  7.9       +6 -6      ircd-hybrid-7/iauth/source/sock.c



db          2001/12/09 21:59:49 EST	(20011210_0)

  Modified files:
    include              sprintf_irc.h 
    src                  hash.c hostmask.c irc_string.c ircdauth.c 
                         linebuf.c sprintf_irc.c 
  Log:
  - register keyword is SOOO obsolete its not even funny.
    DIE DIE DIE DIE DIE DIE
  
  Revision  Changes    Path
  7.5       +4 -6      ircd-hybrid-7/include/sprintf_irc.h
  7.36      +3 -3      ircd-hybrid-7/src/hash.c
  7.58      +3 -3      ircd-hybrid-7/src/hostmask.c
  7.42      +7 -7      ircd-hybrid-7/src/irc_string.c
  7.43      +5 -5      ircd-hybrid-7/src/ircdauth.c
  7.74      +7 -7      ircd-hybrid-7/src/linebuf.c
  7.10      +17 -18    ircd-hybrid-7/src/sprintf_irc.c



jdc         2001/12/08 19:57:44 EST	(20011209_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - Fix for duplicate -lz's during link-time.
  
  Revision  Changes    Path
  7.100     +2 -2      ircd-hybrid-7/autoconf/configure.in
  7.101     +98 -96    ircd-hybrid-7/configure



jdc         2001/12/08 13:27:58 EST	(20011208_0)

  Modified files:
    .                    configure 
    autoconf             configure.in 
  Log:
  - zlib version checking during configure.
  
  Revision  Changes    Path
  7.99      +3 -1      ircd-hybrid-7/autoconf/configure.in
  7.100     +291 -184  ircd-hybrid-7/configure



db          2001/12/07 17:53:57 EST	(20011207_1)

  Modified files:
    include              send.h 
    modules              m_invite.c m_message.c 
    src                  send.c 
  Log:
  - do not send to origin in sendto_channel_remote()
  
  Revision  Changes    Path
  7.52      +4 -3      ircd-hybrid-7/include/send.h
  1.34      +3 -2      ircd-hybrid-7/modules/m_invite.c
  1.79      +2 -2      ircd-hybrid-7/modules/m_message.c
  7.164     +23 -13    ircd-hybrid-7/src/send.c



leeh        2001/12/07 05:59:38 EST	(20011207_0)

  Modified files:
    doc                  example.conf 
    include              s_conf.h 
    modules              m_join.c 
    src                  ircd_lexer.l ircd_parser.y 
  Log:
  - added configserverhide.disable_local_chanels
  
  Revision  Changes    Path
  7.142     +9 -1      ircd-hybrid-7/doc/example.conf
  7.166     +2 -1      ircd-hybrid-7/include/s_conf.h
  1.78      +9 -1      ircd-hybrid-7/modules/m_join.c
  1.129     +2 -1      ircd-hybrid-7/src/ircd_lexer.l
  1.224     +14 -2     ircd-hybrid-7/src/ircd_parser.y



davidt      2001/12/06 18:34:09 EST	(20011206_9)

  Modified files:
    .                    ChangeLog make.com 
  Log:
  - Remove accidental #Id# tag from ChangeLog
  - Add #Id# tag to make.com
  
  Revision  Changes    Path
  7.3119    +2 -1      ircd-hybrid-7/ChangeLog
  1.7       +1 -0      ircd-hybrid-7/make.com



davidt      2001/12/06 17:53:00 EST	(20011206_8)

  Modified files:
    .                    TODO 
  Log:
  - Add #Id#
  
  Revision  Changes    Path
  7.59      +2 -0      ircd-hybrid-7/TODO



*** 20011206_7 by davidt
- forced test commit


*** 20011206_6 by androsyn
Test commit


*** 20011206_5 by leeh
- missing knockll_msgtab


*** 20011206_4 by androsyn
Minor cleanups in s_bsd_sigio.c


*** 20011206_3 by androsyn
Added the workings for SIGIO support with RT signals on Linux. 



*** 20011206_2 by androsyn
Remove two stupid comments from adns.c


*** 20011206_1 by androsyn
Fix a coredump in adns.c on rehash.  Basically if there were any pending
events, adns would dump core upon the timeout of that event.  We now timeout
*all* pending dns requests on a /rehash dns, making them fail no matter
what.


*** 20011204_5 by ejb
- fix a bug where we always sent CAP_ZIP even if the link wasn't zipped.


*** 20011204_4 by leeh
- only for +s chans it is :P


*** 20011204_3 by leeh
- dont send TOPICWHO if theyre not members


*** 20011204_2 by db
- added oper_reason to conf struct, nothing with it yet



*** 20011204_1 by androsyn
Removed an unused field.


*** 20011203_6 by androsyn
Forgot to remove a MyFree on topic_info



*** 20011203_5 by androsyn
Fixed a minor compile issue.


*** 20011203_4 by androsyn
Add caps for TBURST.


*** 20011203_3 by androsyn
Actually do something with the ts_winner field


*** 20011203_2 by androsyn
Minor changes to support a hook on bursting channels and add a field to keep
track of the ts winner...



*** 20011203_1 by wcampbel
Update of the NOTICE and PRIVMSG help files for opers to include
opers@server as a target


*** 20011202_10 by ejb
- Added documention for debug API.


*** 20011202_9 by leeh
- we only support one cipher both ways:
  ENC:BF/256,BF/256 -> ENC:BF/256


*** 20011202_8 by leeh
- make MODRESTART cause a rehash, to reload modules from the conf
- rehash() was taking source_p and client_p, yet doing nothing with them,
  so dont bother passing them


*** 20011202_7 by leeh
- $server -> $$server
- #host.mask -> $#host.mask


*** 20011202_6 by leeh
- commited KNOCK stuff.. clients doing a KNOCK on a LL will have the uplink
  answer their queries, theres a bit of kludging here.. but it works


*** 20011202_5 by leeh
- fixed up the hostname/username checking, we dont need to pass source_p
  (its always gunna be the same as client_p anyway) and due to the fact we
  dont prefix nick - source_p isnt always where the nick originated..


*** 20011202_4 by leeh
- cleanups


*** 20011202_3 by leeh
- removed an extra :


*** 20011202_2 by leeh
- dont give out ips on fake direction of NICK


*** 20011202_1 by leeh
- if serverhide is on and a LL forwards us a topic request - if we're
  masking who set the topic, mask it to the LLs servername, not ours..


*** 20011130_7 by db
- Well, that definition is obsolete.



*** 20011130_6 by androsyn
Made topic_info a part of struct Channel and not just a pointer


*** 20011130_5 by davidt
- oops, also introduce unknown clients to LL servers when propigating KNOCK

*** 20011130_4 by davidt
only pass KNOCK to servers which know about chptr (LL fix)

*** 20011130_3 by leeh
- propagate knock remotely.. 

  there still needs to be LL stuff in here


*** 20011130_2 by a1kmm
- Removed extraneous argument in a kill_client.


*** 20011130_1 by a1kmm
- Ran m_message.c and send.c through indent - they were unreadable
  before because of tabs.
- Cleaned up send.h - removed separate __GNUC__ and not gnuc prototypes
  and made a single macro to give format attributes. Removed prototypes
  for functions which no longer exist.
- Made sendto_remote_list work and send a linebuf once to every remote
  user on the list.
- Don't require remote users to be in the channel to invite.
- Fixed vchan naming and propagation issues.
- Don't send error about a user being in channel if they are in another
  vchan which is secret when you invite them(silently ignore).
- Don't send error about a user being on a different server if server
  hiding is on and they are invited to a local channel(silently ignore).
- Propagate invite to all servers where there are chanops or halfops,
  as well as to where the invited user resides.
- Send a notice to all local chanops and halfops if a channel is +p
  when someone invites.
- Don't accept privmsg/notice for local channels from servers.
- Don't send privmsg/notice for local channels to servers.
- Only propagate @%+ channel messages to servers that have ops,
  half-ops or ops, and halfops-ops-voiced respectively.
- Allow privmsg from servers - it is stupid not to when we allow
  notices from servers.
- Killed the mallocs and reallocs in the message code - we now use a
  static buffer.
- Probably introduced a few bugs because I'm tired(but hopefully not).




*** 20011129_7 by jdc
- Updated Email address, as to welcome even more spam.  *rolls eyes*


*** 20011129_6 by jdc
- Updated my portion of the TODO list.  *cry*


*** 20011129_5 by leeh
- updated my email and sanified the core list slightly


*** 20011129_4 by db
- Added einride to core, moved from contributor



*** 20011129_3 by leeh
- added first half of knock stuff.. the remote propagation doesnt exist yet,
  and the numerics needadding to messages/*

  but ive run out of time, ill finish later :P


*** 20011129_2 by db
Removed unnecessary casting on NULL in messages.tab
be a bit more paranoid in numeric.c



*** 20011129_1 by db
- KNOCK is now using a numeric at least on local server.
- numeric.c was not checking all validity



*** 20011128_7 by db
-fixed prototype for sento_channel_remote 



*** 20011128_6 by jdc
* include/rsa.h:
  - Remove #include <openssl/rsa.h>.  #include in include files == yuck.
* modules/m_cryptlink.c:
  - Re-order #include statements, particularly rsa.h being included BEFORE
    <openssl/rsa.h>
  - Remove #include for <openssl/bio.h> and <openssl/pem.h>.  FYI, the
    pem.h include breaks a lot of things due to OpenSSL's include structure
    being a gigantic mess.
* src/s_serv.c
  - Same as modules/m_cryptlink.c, for the most part.
* src/ircd.c
  - Tinker with the pid file writing stuff.  Made it an unsigned int, vs.
    just an int.  Little more verbose if fbputs() fails too.


*** 20011128_5 by db
- This re-adds remote KNOCK capability in the same way it was done in h6.
  Its not a good way of doing it. There should be a KNOCK CAPAB for h7 servers
  to lessen the traffic sent for a KNOCK. There should also be some NUMERICS
  here instead of notices.



*** 20011128_4 by db
tiny format change in parse.c

The guts of it is here. When using sendto_match_butone() which is =only=
used to do the "oper magic" messages. i.e. /msg $server.mask and /msg #hostmask
The prefix sent to remote servers is only the nick, not the nick!user@host.
The prefix sent to local users is nick!user@host



*** 20011128_3 by leeh
- dont allow halfops to kick halfops, or set +/-h
- allowing +h to set bans, but not see a real banlist is daft
- halfops can also set simple modes


*** 20011128_2 by leeh
- undef BOUNCE_BAD_HOPS by default and reenable for release.


*** 20011128_1 by leeh
- attempt at fixing up +a.. there was a bogus if() that was preventing
  resyncs when setting -a, amongst other things.. (unsure if it was ok to
  remove, hunt for the XXX)

  theres still a bug where setting -ao will give a user the oplist..


*** 20011127_1 by davidt
- Yet more linebuf fixes.
  * Rename 'binary' flag 'raw', since it was confusing people, and
    didn't reflect what the code actually did.
  * Initialise binary/raw flag to 0, to avoid bogusly stripping
    \r\n from sent data.
  * Fix linebuf_get to correctly strip leading \r\n from data, when
    required, instead of removing the correct number of bytes from
    the _end_ of the string.


*** 20011126_5 by davidt
- Fix compile warnings in contrib modules

*** 20011126_4 by a1kmm
- Let's initialise the resolver in the right place...


*** 20011126_3 by davidt
- Apply fix as discussed on mailing list and IRC.
  * Do not incorrectly terminate buffer simply because we ran out of data
    to _read_.


*** 20011126_2 by androsyn
Okay..the dns_host stuff was a good idea..but its a chicken vs the egg
problem.  The parser needs to setup the dns_host stuff..but the parser
relies on the resolver being started already...oh well..
This removes the dns_host and dns_port option


*** 20011126_1 by a1kmm
- Fixed a bug to stop carriage returns or linefeeds making their way into
  messages under some cases.


*** 20011124_2 by wcampbel
With the new help system, opers.txt and users.txt are no longer needed


*** 20011124_1 by leeh
- missed this one when I added the extra param


*** 20011121_10 by leeh
- updated the headers


*** 20011121_9 by wcampbel
Added the final two help files, PING and PONG.


*** 20011121_8 by androsyn
Updated a few things..


*** 20011121_7 by androsyn
A half-assed attempt at documenting the dns_host and dns_port options.  I'm
sure somebody else could explain it better than I did :P


*** 20011121_6 by androsyn
Added dns_host and dns_port to server info.  Modified set_time() to use
gettimeofday() and store the result in struct timeval SystemTime. 
CurrentTime is now a macro to SystemTime.tv_sec.  


*** 20011121_5 by androsyn
I hate mailx on solaris..did i ever tell you this?


*** 20011121_4 by androsyn
Please work...


*** 20011121_3 by wcampbel
Added 3 of the remaining missing help files.
From what I can see, there is only "ping" and "pong" left
to do.


*** 20011121_2 by wcampbel
Update to help oper
Moved two rev 1.1 help files to their proper locations


*** 20011121_1 by wcampbel
Another large burst of help files.
Only a few still left to do, and indexes made.


*** 20011120_9 by wcampbel
More help files.  Nearly complete now.


*** 20011120_8 by wcampbel
Ok, another batch of help files


*** 20011120_7 by wcampbel
Spellchecked all the help files.
Another batch will be coming soon.


*** 20011120_6 by wcampbel
Added the /help credits


*** 20011120_5 by wcampbel
Added the second batch of contributed help files.


*** 20011120_4 by wcampbel
Large batch of help files (mainly copied out of opers.txt and users.txt)
More will be coming.


*** 20011120_3 by davidt
fix /quote help to display index

*** 20011120_2 by db
- This considerably simplifies m_server. No more support for 2.6(?) protocol



*** 20011120_1 by androsyn
Modified the supported platforms slightly...


*** 20011119_3 by androsyn
MEMDEBUG build was broken..


*** 20011119_2 by lusky
Nth try is the charm


*** 20011119_1 by lusky
pleeeeeeese work

*** 20011119_ by lusky
not yet

*** 20011119_ by lusky
pleeeeeeese work


*** 20011119_ by lusky
I think it's finally working


*** 20011119_1 by lusky
test commit x

*** 20011118_2 by androsyn
Documented the undocumented functions in event.c


*** 20011118_1 by kreator
- fix broken build for balloc.c (one extra c comment ending)


*** 20011117_2 by androsyn
Documented balloc.c a bit better than what it was.


*** 20011117_1 by androsyn
Updated function documentation for comm_select()



*** 20011116_1 by wcampbel
Updated our manpage to be correct with our current implementation.
Corrected a few minor formatting issues with the manpage.


*** 20011115_2 by leeh
- err - if servernameis too long, you need to reject it - not chop it..


*** 20011115_1 by androsyn
Fixed buglet where timeout_adns would get readded to the event list on each
/rehash


*** 20011114_3 by bill

pro is dead, billy-jon took his place


*** 20011114_2 by androsyn
Cleaned up the poll() loop so that it is really only using a single list
now.  Also modified the timeout parameters for ADNS.  Added a flag to
comm_connect_tcp() so that the caller can pass a timeout.  We needed this to
reduce the timeout on identd checking, which is now set to a 10 second
timeout.


*** 20011114_1 by androsyn
Modified build so that any errors during the make will cause the make
process to stop.


*** 20011113_9 by leeh
- added a cvsignore to help


*** 20011113_8 by leeh
- parv[1] might not actually exist, so check parc before blindly passing it


*** 20011113_7 by kreator
- fix broken build for --disable-openssl


*** 20011113_6 by leeh
- added ERR_VCHANDISABLED (when vchans are disabled)
  ERR_ALREADYONVCHAN (client tries to create two vchans)


*** 20011113_5 by leeh
- added proper comments to vchannel.c
- removed a couple of places we passed client_p and source_p, but never used
  client_p
- fixed a few places I forgot to add the rcount param


*** 20011113_4 by leeh
- extended stats m (a la ircnet).
  now: COMMAND TOTALCOUNT TOTALBYTES REMOTECOUNT

  where remotecount is the count coming from a server.. this lets you gauge
  how many commands are coming from our clients - how many from servers..


*** 20011113_3 by leeh
- allow stats ? for non-opers on the condition flatten_links is disabled,
  dont give them capab info tho..


*** 20011113_2 by leeh
- sending nothing in reply to a trace is bad, send RPL_ENDOFTRACE, I dont
  see why we cant actually send a limited trace (servers/opers) 


*** 20011113_1 by leeh
- added a copyright for US to version.c.SH
- made the topic help use <> and []


*** 20011112_5 by kreator
- another small fix for hostmask.c and find_conf_by_address()


*** 20011112_4 by leeh
- skip dirs when installing help..


*** 20011112_3 by leeh
- kre fixed the auth thing, removed


*** 20011112_2 by kreator
- fix find_conf_by_address() issue which resulted in auth{} (and other)
  blocks to malfunction, ie. issue when admins had to add wildcards after
  '@' to get them working


*** 20011112_1 by leeh
- dont allow capab from registered servers - it breaks the capab mon code


*** 20011111_10 by ejb
- added help/ directory; added a few sample help files, this will need
  to be completed before release.


*** 20011111_9 by ejb
Directory /cvsroot/ircd-hybrid-7/help/users added to the repository


*** 20011111_8 by ejb
Directory /cvsroot/ircd-hybrid-7/help/opers added to the repository


*** 20011111_7 by ejb
Directory /cvsroot/ircd-hybrid-7/help added to the repository


*** 20011111_6 by ejb
- hm.. put paths correct way around


*** 20011111_5 by ejb
- added better /help ..
  still need to write help files and make them install.


*** 20011111_4 by leeh
- added RPL_HELPSTART, RPL_HELPTXT, RPL_ENDOFHELP, ERR_HELPNOTFOUND


*** 20011111_3 by leeh
- removed the start notice from modlist
- changed a strstr() in modules-dld -> match, as per modules.c
- use RPL_ENDOFMODLIST


*** 20011111_2 by leeh
- bumped ERR_LASTERRMSG upto 999
- added 506 -> 999 into messages.tab
- moved RPL_MODLIST -> 702 (conflicted with other ircds)
- added RPL_ENDOFMODLIST (703)


*** 20011111_1 by leeh
- fixes for /who (jv)


*** 20011109_2 by leeh
- show a vchans topic in list - not its roots


*** 20011109_1 by leeh
- allow 0 to disable links_delay, when its raised, add the event


*** 20011108_3 by leeh
- check links_delay is > 0 before adding the event


*** 20011108_2 by leeh
- removed m_client.c, it was only there while we established m_nick.c was
  ok..


*** 20011108_1 by bill
- made MODLIST parameter wild-card matching


*** 20011107_3 by wcampbel
Apparently EFnet opers can't take a joke


*** 20011107_2 by davidt
- fix pretty_mask to not damage the passed in string, so we can
  use it afterwards.


*** 20011107_1 by leeh
- added the specific auth block thing


*** 20011104_2 by wcampbel
Updated messages.txt from the SGML source


*** 20011104_1 by wcampbel
First three generated docs committed.  This means that they can no longer be
edited directly.  INSTALL, doc/challenge.txt, and doc/server-version-info


*** 20011103_2 by wcampbel
Updated mkpasswd from the master site.


*** 20011103_1 by db
- backwards test broke m_invite.c



*** 20011030_5 by ejb
- added VMS support for mkpasswd.


*** 20011030_4 by ejb
- mkpasswd for VMS.



*** 20011030_3 by ejb
- couple more VMS fixes, and updated README.VMS.



*** 20011030_2 by bill

- this is new src/crypt.c


*** 20011030_1 by bill

- VMS fixes a la larne


*** 20011028_1 by wcampbel
Minor documentation correction in BUGS


*** 20011026_2 by androsyn
Tracked down that ever annoying /trace bug that causes garbage to end up in
it.


*** 20011026_1 by db
- *sigh* I should have known better. yes yes yes *fwap*
  another reversed if



*** 20011025_3 by wcampbel
Updated whats-new.txt to not reference removed items and to be technically
  accurate with the current operation of ircd.
Corrected an unclear commit comment.


*** 20011025_2 by androsyn
Fixed problem that was causing /mode Nick to fail


*** 20011025_1 by db
- needed #include "hash.h"



*** 20011024_8 by wcampbel
Massive documentation update:
Corrected some missed items in the CHALLENGE changes
Removed the incomplete cookies proposal
Updated version references to 7b8
Minor changes in other documents
Correct make rsa_respond (generate rsa_respond.tar.gz)
Add rsa_respond.tar.gz to .cvsignore
Fixed make clean in tools/rsa_respond.


*** 20011024_7 by db
- make_nick_user_host was just too stupid for words



*** 20011024_6 by db
- removed a pile of extra parameters that were not really used
  in find_client()



*** 20011024_5 by androsyn
Don't need this either


*** 20011024_4 by androsyn
I don't think we need this anymore.  


*** 20011024_3 by androsyn
Fixed stupidness with headers that prevented us from including openssl/pem.h



*** 20011024_2 by androsyn
Make /challenge honor minor details like hostmasks :P


*** 20011024_1 by db
- more wallpaper stripping... get_server() did nothing but call
  hash_get_server() pointless call.
- other cleanups



*** 20011023_4 by db
- get_channel() was being called with a NULL always. silly. ditto
  with get_resv() second argument always a NULL. 
  replaced get_channel(... CREATE) with get_or_create_channel()
  if channel does not exist, its created. Simplifies interface.



*** 20011023_3 by androsyn
Updated the example config to reflect the change with challenge.


*** 20011023_2 by androsyn
Changed challenge to use standard PEM format keys similiar to those used for
cryptlinks in hybrid.  Removed the genkey utility as well, as the standard
openssl command is capable of generating the keys that are necessary.



*** 20011023_1 by wcampbel
Minor doc update


*** 20011022_2 by db
- We renamed IsSetOperN to IsOperN, correcting this contrib module to match



*** 20011022_1 by androsyn
Fixed a problem where we were not attaching the conf when using challenge,
like we do with /oper. 


*** 20011021_5 by leeh
- MODE_QUERY -> MODE_ADD


*** 20011021_4 by leeh
- dont allow bans > NICKLEN/USERLEN/HOSTLEN
- dont ignore bans > NICKLEN+USERLEN+HOSTLEN, youll cause desync


*** 20011021_3 by davidt
- Update Makefile.in - I used src/*.c, which missed this out. Oops.


*** 20011021_2 by davidt
- Some misc. fixes for bugs in channel_mode.c
  (-o+h was sent to clients as -o+h+o, +o on a +v'd client was sent
   locally as -v+o, but all remote servers converted it to plain +o,
   minor other things).


*** 20011021_1 by davidt
- Commit of fixed table mode code:
   * Non USE_TABLE_MODE code is gone.  If we commit this patch, we go
     with USE_TABLE mode.
   * The TABLE_MODE code has been broken out into channel_mode.[ch].
   * -o on +a channels has been fixed to show the user being deopped the
     mode change, and to resync their oplist.
   * +a on channels has been fixed to resync the channel's oplist.
   * The code has been cleaned up, although it's still a bit icky in some
     places, but there shouldn't be any weird mystical -1/0/1 constants
     lying around anymore.
   * +b/-b from servers is NOT pretty_mask'ified (like the old code, I
     beleive).
   * -b from clients will be pretty_mask'ed, but if that doesn't match a
     ban on the channel, the original, un prettified mask is checked.
   * Misc other bug fixes.
   * Misc other bugs introduced. (probably :)

- If BOUNCE_BAD_HOPS is #define'd, the following is also done:
   * +h is translated to +o for non CAP_HOPS servers
     except towards the target's own server
     (i.e. no priviledges can be gained using this).
   * -h is translated to -o for non CAP_HOPS servers (this can never
     happen towards the target's own server).
   * -o is translated to -h from non CAP_HOPS servers.
   * A +h on a client which is linked through a non CAP_HOPS server
     is bounced back to the server that sent it (or dropped if from
     a client) as sendto_one(client_p, ":%s MODE %s -h %s", me.name,
     chptr->chname, target_p->name). [Although multiple bounces
     are merged into one MODE].  Assuming source_p is a client,
     a notice is also sent back.  Note that this notice will probably
     break serverhiding, so something should be done about this if
     we want to use BOUNCE_BAD_HOPS.
   * BOUNCE_BAD_HOPS will allow mixed CAP_HOPS/non CAP_HOPS nets to work
     sanely(ish), by ensuring the whole net will see the client as privileged,
     or unprivileged, and the clients local server will never see a +h'd user
     as +o'd.
- This will probably have a few bugs, but it needs a few linked servers to
  test properly.


*** 20011020_1 by davidt
- Back out memset of ConfigChannel and ConfigFileEntry, since CVS has
  been broken due to it for ages.  We need to zero it before we read the
  config files, but we have to initialize the /SET options after reading
  the conf files, so this is the wrong function.
  Also zeroing ConfigFileEntry won't work too well since we store the
  config/kline/etc filenames in there.
  This might take a while to fix, which is why I'm backing out the change
  so people can upgrade.
  


*** 20011019_1 by wcampbel
Documentation fixes


*** 20011017_4 by db
- bug fix by |Rain| fixes handling of EOF 


*** 20011017_3 by leeh
- IsSetOper* -> IsOper* for consistency, half were IsOper, half were
  IsSetOper..


*** 20011017_2 by jdc
* Someone please fix this.  We lack the IsSetOperGlobalKill() macro.
  This is commited just to make things build.


*** 20011017_1 by jdc
* CONF CHANGE: channel {} "disable_vchans"  renamed to  "use_vchans".


*** 20011016_1 by db
- zero out config structs in case they are full of garbage



*** 20011015_1 by davidt
- Improved binary code for linebuf_get/parse, hoepfully this will fix the
  compression/encryption problems.


*** 20011014_1 by db
- Wrong flag was being tested in m_kill.c, never noticed since
  usually kline = yes; is set.
- The error messages were obsolete, make it easier to know what to change
  in the ircd.conf



*** 20011013_1 by a1kmm
- Oops forgot to change > back to >= from Rain's patch.
- Fixed a K&R style { after an if, found by fl.


*** 20011012_2 by a1kmm
- Changed back part of |Rain|'s patch: There is nothing wrong with comparing
  a pointer with an invalid pointer so long as you don't dereference the
  invalid pointer(which we don't). This saves a few clockticks.
- Optimised a little by not bothering to check the terminating NULL of a
  hostmask is not a wildcard.


*** 20011012_1 by db
- Bug fixes contributed by  Ben Winslow <rain@bluecherry.net>



*** 20011011_6 by wcampbel
Updated the README to be consistant with the deletes I did earlier.


*** 20011011_5 by davidt
- Prevent use_halfops from being changed at runtime, as that would Break
  Stuff(TM).
- Add use_* to m_info.c


*** 20011011_4 by wcampbel
Completed repo move/cleanup.  It will now build again, you MAY have to do
a clean checkout after this...


*** 20011011_3 by db
- updated with current EFNet requirements, note that HOPS (half ops)
  is not presently accepted on EFNet.



*** 20011011_2 by jdc
* Make use_halfops adjust sending HOPS capability.
* Added default_server_capabs to ircd.c; this contains the default
  startup capabilities (CAP_MASK), with certain ones AND+NOT'd out
  based on server configuration (i.e. use_halfops = no).
* s_serv.c had CAP_MASK replaced with default_server_capabs.


*** 20011011_1 by jdc
* Support for channel {} block command "use_halfops".  Default is yes.
  The code which uses the use_halfops variable hasn't been written yet,
  though.  This is just for the config and what not.


*** 20011010_3 by androsyn
Forgot to commit Makefile.in



*** 20011010_2 by androsyn
Added a vsnprintf() stolen from mutt that is necessary on platforms that do 
not have any native vsnprintf() 


*** 20011010_1 by davidt
- Slightly modified version of poptix's patch, just check len > 3 before
  testing [len-3], and cache the result of strlen.


*** 20011009_1 by androsyn
Gee..I broke another beta.  I forgot to remove the rest of the strtok_r()
crap. oops


*** 20011008_3 by lusky
- revved patchlevel to beta8
- removed unused variable


*** 20011008_2 by davidt
- Reword the /MODUNLOAD core entry to be more accurate, and include
  a simpler workaround.  We should perhaps default to
  --disable-shared-modules, but with some way to easily add additional
  contrib modules automagically.


*** 20011008_1 by androsyn
Removed the macro for strtoken()


*** 20011007_2 by db
- Look sorry, I know, but this code was just too stupid for words...



*** 20011007_1 by leeh
- updated README to cover whats actually in contrib/


*** 20011006_5 by leeh
- we need to set the time on gline2, not gline1..


*** 20011006_4 by androsyn
Added a change to allow strtok_r() to work without warnings..


*** 20011006_3 by androsyn
Added change to the make depend rule so that IRCD_PREFIX is defined.


*** 20011006_2 by androsyn



*** 20011006_1 by leeh
- commented where the magic number 6 comes from 


*** 20011005_3 by db
- reformatted balloc.c to project standard format
- added part of Lee's proposed m_sjoin.c patches. We are simply
  being very very anal IMO.



*** 20011005_2 by androsyn
Fixed the stupid core related to typecasting. I'll fix the warnings on sun
later


*** 20011005_1 by wcampbel
Removed the "value of NOFILE" message


*** 20011004_15 by db
- three eventAdds() completely missing in latest... oops
  missing cleanup_channels, cleanup_glines and cleanup_tklines



*** 20011004_14 by androsyn
contrib/ is all happy too


*** 20011004_13 by androsyn
Even more warnings I missed


*** 20011004_12 by androsyn
Even more warning i missed..


*** 20011004_11 by androsyn
Warnings related to signedness of char


*** 20011004_10 by androsyn
Keep Forte C from whining so much...


*** 20011004_9 by androsyn
Warnings..warnings..more warnings...not anymore :)


*** 20011004_8 by androsyn
Accidently removed the prototype for strtoken()..oops


*** 20011004_7 by androsyn
Cleaned up some stuff that generated lots of warnings on solaris


*** 20011004_6 by androsyn
Added info about TCP resolver bug.


*** 20011004_5 by androsyn
Disabled TCP in the resolver.  Somebody can turn this back on when its
fixed.


*** 20011004_4 by androsyn
Changed the way adns rehashes.  Previously we just reloaded the config, but 
previous releases did tear down the socket.


*** 20011004_3 by androsyn
Okay..I *think* I've fixed that core dump..


*** 20011004_2 by androsyn
That would be dns_state->nservers not nserver


*** 20011004_1 by androsyn
Three asserts that will hopefully track down the bug where ads->nserver == 0, which is technically not possible


*** 20011003_2 by androsyn
Well..its useful to stick in setup.h before trying to grab stuff autoconf
defined..



*** 20011003_1 by androsyn
A misplaced define broken --disable-balloc


*** 20011002_5 by wcampbel
Fixed m_map.c's random failing to be recognized as a command without a
  trailing space.
Added m_flags.c, ircd-comstud like FLAGS command, completely optional bloat.
  It works, has been tested, and as far as I can tell, has no issues.  This is
  slightly different than the one I posted.  It had the same issue as MAP did.

Anyone available to explain why these won't work sometimes with 0, 1, 0
in the msgtab while 0, 0, 0 does.  It only appears to be that one combination
of parameters too, as JUPE's 0, 3, 0 and NICKINFO's 0, 2, 0 work fine.


*** 20011002_4 by db
- reformatting this makes it understandable now.



*** 20011002_3 by androsyn
Changed SHARED to T_SHARED as SHARED clashed with a #define from sys/mman.h on solaris


*** 20011002_2 by db
- After online discussion on IRC, I took the plunge. no more stupid NullChn
  all replaced with NULL, hence all the touched files here.



*** 20011002_1 by db
- This takes some silliness out of m_sjoin.c



*** 20011001_6 by a1kmm
- Fixed the 513 vs 511 issue in the linebuf code.


*** 20011001_5 by db
- If fixklines.c is missing in tools, it shouldn't be in Makefile



*** 20011001_4 by wcampbel
Corrected previous spelling errors


*** 20011001_3 by wcampbel
Updated numerics.txt some more (including fixing a discrepency)
Did part one of the "pruning" of the source tree, as discussed on the 
  e-mail list and on IRC.  Approval by Diane


*** 20011001_2 by androsyn
Fixed compile for when mmap() is not there..


*** 20011001_1 by davidt
- Fix evil core that killed half the testnet, we now need to check the
  length of remote channel names, since we use the block allocator,
  and no longer just allocate whatever amount is required.
  We now send a message to opers when a SJOIN to a long channel is
  detected, as well as ignoring the SJOIN.



*** 20010929_9 by db
added ':' to RPL_STATSQLINE DLINE KLINE as per discussion with walter
online, originally suggested by Chris Behrens



*** 20010929_8 by db
- We have no more /rehash GC, so removed that from help



*** 20010929_7 by a1kmm
- Fixed linebuf code so that it sets the length correctly. It now works
  entirely with jv's test burst.
  Approved by Diane on IRC.



*** 20010929_6 by davidt
- More fixes for linebuf.c, this should hopefully cope with any length of
  line properly.


*** 20010929_5 by db
Simply reformatted linebuf.c a tad to agree with the rough coding
standards of project. No electrons were harmed.

Oh yes, fixed configure script. we were over-writing an array in conftest.c
(hidden inside config.c) nl[] declared as 4 instead of 5. I believe
it was jv that pointed this one out to me.



*** 20010929_4 by a1kmm
1) Fixed a bug where we were not properly terminating long lines sent to
   the parser.
2) Fixed several bugs in linebuf_copyline where we were not correctly
   stripping \r\n or there was a possibility of a buffer underflow.
3) Left in two of the less expensive asserts which I used to catch these
   bugs.
Commit approved by db on IRC.



*** 20010929_3 by davidt
- Zero pointers after they are freed, before this commit doing
  /challenge foo
  /challenge <anything not starting with '+'>
  would core the ircd (where foo was a valid oper with a public key)


*** 20010929_2 by davidt
- Fix Count.invisi and Count.oper so they are only incremented once per
  user.
- Use BlockHeapFree() not MyFree() to free bans, since they use the block
  allocator..


*** 20010929_1 by wcampbel
Fix for STATS r showing long values in a %d, found by jv, approved by Diane


*** 20010928_1 by davidt
- Change 'int zero_fd' to 'static int zero_fd' to cut down on unneeded
  globals.  Approved by Diane on IRC.


*** 20010927_2 by wcampbel
Updated BUGS, INSTALL, and Riedel's operguide.txt.
Updated numerics.txt slightly.
Approval from Diane on IRC.


*** 20010927_1 by wcampbel
Fix for STATS i/I showing restricted mode auth blocks as 'i' as discussed on
the ircd-coders list.


*** 20010926_3 by leeh
- unregged clients cant route ping, so they cant get routed pongs..
  (discussed on irc)


*** 20010926_2 by leeh
- client_p is where we get data from, dont clear FLAGS_PINGSENT (jv)


*** 20010926_1 by androsyn
Added the mmap() check in autoconf that was discussed earlier.  Added a work around
for balloc.c if mmap() isn't found.  I feel bad for the poor bastard who doesn't have
a mmap().  


*** 20010925_11 by androsyn
Eliminated a stupid compile warning when ziplinks and cryptlinks are disabled


*** 20010925_10 by androsyn
Please don't use autoconf 2.5x for hybrid.    



*** 20010925_9 by androsyn
Okay..so everything thinks it can pass a NULL pointer to MyFree()..shoot me :P


*** 20010925_8 by androsyn
Would you like an assert.h


*** 20010925_7 by androsyn
Umm..fixed some stuff :P



*** 20010925_6 by davidt
- Um, move this assert again. I'm sure i commited this before....


*** 20010925_5 by leeh
- dont forward nicks thatdont exist in sjoin..


*** 20010925_4 by db
- remove unused function



*** 20010925_3 by jdc
- modules/m_stats.c: #if 0'd out stats_fd() to fix unused warning.


*** 20010925_2 by leeh
- you cannot check remote servers for capabs


*** 20010925_1 by a1kmm
- Fixed up a few more things with configure.
- Made some assumptions which should always be valid to optimise linked
  lists.
- Rewrote the block allocator with a better algorithm.


*** 20010924_6 by db
- removed an unnecessary call in m_stats.c, call fd_dump() directly
  instead of confusing things. (for stats f)


- reworked s_bsd_kqueue.c to use EV_SET() macro. This ensures
   all kevent struct members are properly initialized at all times.

- removed NOTE_LOWAT kludge, this is not necessary if kevent struct
  is initialized properly as in above.

- added and remvoved fd_dump_debug() call.

- do not bother closing fd's 0,1,2,3 hey if they are in use, ircd
  can't use them. 4 ignored fd's aint going to hurt ircd. As it turns
  out fd 3 is typically used for profiler, which caused CPU to hit 100%
  as kqueue thought fd 3 was closed (which it was) since profiler thought
  it was open, but ircd had closed it. ugh. such a lose.




*** 20010924_5 by leeh
- added ID checks to parse()


*** 20010924_4 by leeh
- missing ;, preume the break; was meant to be return; ? ;)


*** 20010924_3 by jdc
- src/s_bsd_kqueue: Error checking on some kevent() calls.  ktrace is
  your friend.


*** 20010924_2 by jdc
- Fixes for Andrew's recent configure additions.


*** 20010924_1 by a1kmm
- Some memset calls added.
- A few more configure options added:
   --enable-profile - makes a profile build.
   --enable-efence - makes an ElectricFence build.
   --enable-memdebug - make a memory debugging build.
   --disable-block-alloc - makes a build without the balloc so buffer
                           overruns always show up under efence.



*** 20010923_7 by a1kmm
- Fixed a _MyRealloc debug version bug.
- Kludged the strncpy_irc for now so it doesn't core(someone please fix!)
- Fixed the depend system for modules so it actually works with both
  static and shared modules.


*** 20010923_6 by a1kmm
- Changing a #ifdef to a #undef is not a smart way to disable something.


*** 20010923_5 by a1kmm
- Fixed a possible NULL deref I did ages ago in the debug version of
  MyRealloc


*** 20010923_4 by davidt
- erp, un break compile


*** 20010923_3 by davidt
- Move assert(t) above t->refcount = 1;
- Make assert()s in list.c slightly more informative.


*** 20010923_2 by leeh
- dont send ids in cjoin (see email)


*** 20010923_1 by a1kmm
- Got memory debugging going. There seems to be a few leaks already, which
  I will fix soon. There also seems to be a core somewhere when I link with
  efence that I need to fix.
- Added "dmem x" option to command to write memory log to a file.


*** 20010922_2 by a1kmm
- Initialise refcount on linebufs to 0. That should account for the following
  from the profile and hopefully improve performance a bit, as well as
  drastically reduce leaked memory.
-----------------------------------------------

                0.00        0.00      30/1244178     linebuf_attach [195]
                0.03        0.00  170040/1244178     linebuf_new_line [22]
                0.03        0.00  203872/1244178     newblock [26]
                0.05        0.00  340107/1244178     BlockHeapFree [50]
                0.08        0.00  530129/1244178     BlockHeapAlloc [20]
[28]     4.3    0.19        0.00 1244178         dlinkAddTail [28]

-----------------------------------------------


*** 20010922_1 by a1kmm
- We need to do lots more work on UIDs, but this is a start.
- I think we will have to leave SJOIN until after the release because
  it needs a major rewrite. Unfortunately, as it is now, it just forwards
  UIDs or NICKs to all servers as it receives them, which will break
  non-UID servers. We can't change it easily though, because if we substitute
  them it might overflow the buffer unless we are prepared to split 1 SJOIN
  message into 2. Too risky to do at this stage.


*** 20010921_3 by leeh
- missing U


*** 20010921_2 by wcampbel
Again, do not use TAB's in text sent to clients


*** 20010921_1 by wcampbel
Do not use TAB's in any text that is sent to a client.


*** 20010920_3 by wcampbel
Fixed my typo'ed ChangeLog entry...# is not legal, dns is legal


*** 20010920_2 by wcampbel
# is not REALLY legal in m4 files...gnu m4 seems to accept it but others
may not.


*** 20010920_1 by jdc
- contrib/m_jupe.c: Cosmetical change ("Juped:" --> "JUPED:").


*** 20010919_2 by lusky
pass CFLAGS during linking too


*** 20010919_1 by androsyn
Fixed the 0::1 stuff for IPv6 support and removed stupid check as well.



*** 20010918_5 by db
- 3 line functions are silly, so removed one.



*** 20010918_4 by davidt
- Fix src/send.c to send the correct data to io_debug
- Add eventDelete to event.c, prototype to event.h



*** 20010918_3 by db
- yet more cleanups. Its still a cesspool. 
  no more attach_cn_lines its now attach_connect_block



*** 20010918_2 by db
- some cleanups to s_conf.c, no more attach_Iline vs. attach_iline
  (happy now jer?) IMO s_conf.c is still a cesspool.



*** 20010918_1 by jdc
* src/s_conf.c: Check for lack-of serverinfo {} description field in
  configuration file.  Error out if conf lacks one.
* Many cosmetical changes (I got bored).

NOTE TO CODERS:  We should rename the "attach_iline" and "attach_Iline"
functions soon.  Two function names which are identical except for case
is not a good thing.  Look in s_conf.c for more info.


*** 20010916_2 by jdc
* src/listener.c: Fix for Hwy101's problems relating to IPv6 and FreeBSD.
  This _WILL_ break IPv6 support for Linux.  Linux-ers, please look around
  line 379.



*** 20010916_1 by davidt
- Tidy up m_map.c slightly, and add missing RPL_MAPEND.


*** 20010913_1 by habeeb
Fix for Lee's patch to m_nick.c, ms_nick didn't check whether it was a new nick
(parc = 9) or a nick change (parc = 3) and when a nick change happened it tried
to check the user/host which used the arguments parv[5] and parv[6]. 


*** 20010912_3 by habeeb
more changes to event code.  Fixed eventNewTime and a few other things.


*** 20010912_2 by leeh
- only kill long usernames/hostnames, warn about erroneous ones


*** 20010912_1 by leeh
- added checks for bad usernames/hostnames too..
  we cant just chop them off at hostlen, else you have a different host
  across the network..


*** 20010911_8 by db
- minor cleanups



*** 20010911_7 by habeeb
you might need those 2 files updated also.


*** 20010911_6 by habeeb
for previous commit..


*** 20010911_5 by habeeb
This changes event to a static table.  It is not complete so please finish:
*Add eventDelete code that will basically set the active flag to 0
*impliment active flag
*fix eventNextTime ; need to add a variable to store next time.
*check line 593 in src/s_serv.c i commented it, need to set the event inactive
 if the if() is true

This should be all for now;  If I missed anything I will update this. 


*** 20010911_4 by db
- corrected tiny typo. Our table size is still too large for yacc
  We are going to have to require bison.



*** 20010911_3 by db
- first pass at making events static and recurring instead of one-shot.
  This saves a malloc each time an event is added and the need to 
  re-add an event each time. The default is recurring for static events.

- ripped expr out of ircd_parser.y Sorry Edward, but tired of byacc coring
  all the time and its not really needed.



*** 20010911_2 by jdc
- Removed "hide_server" command; use serverhide {} instead.



*** 20010911_1 by leeh
- missing |


*** 20010910_1 by davidt
- We could occasionally fail to notice we hadn't read the correct amount
  of data for a servlink command, due to a missing return;.


*** 20010908_2 by androsyn
Resolved the stupid ::1 issue. So we are doing 0::1 now. This is ugly..but
it works and is still a legal IPv6 address.


*** 20010908_1 by androsyn
Adds a dot_in_ip6_addr option in general {}

Also..only add the . on to sockhost.  Oh..and I just broke ::1 stuff again
so that it will get fixed in the next 50 years.



*** 20010906_3 by leeh
- . is an acceptable ident char


*** 20010906_2 by leeh
- updated links_delay description to say how it actually works


*** 20010906_1 by leeh
- added oper/admin flags to report_error()
  untested as im not sure how to get one of these to trigger ;p


*** 20010905_4 by davidt
- Fix linebuf.c/linebuf_putmsg to correctly "\r\n\0" terminate extra-long
  lines, instead of "\0\r\n\0" terminating them, which tickles yet another
  BitchX bug. '\0' bad.
- Include s_conf.h in m_map.c so it at least compiles.


*** 20010905_3 by leeh
- moved the rest of the FLAGS_SPY stuff to contrib/


*** 20010905_2 by leeh
- *_notice.c -> spy_*_notice.c


*** 20010905_1 by leeh
- added checks for Makefile to build_one


*** 20010904_4 by leeh
- updated it to cover cryptlinks..
- added it to example.conf


*** 20010904_3 by leeh
- initial revision of th ehide server stuff


*** 20010904_2 by leeh
- added two new conf options for shide.. hidden and allow_hidden


*** 20010904_1 by leeh
- changed the strcat()'s for the config info to pointers..


*** 20010902_1 by wcampbel
Updated the BUGS list a wee bit


*** 20010831_6 by habeeb
Small bug fix in eventAdd()


*** 20010831_5 by leeh
- removed some debug stuff from write_links_file()
- changed stats notice back to a letter.. else you can get some "original"
  notices to give to opers..


*** 20010831_4 by leeh
- fixed the stats spy stuff


*** 20010831_3 by leeh
- modlist/modrestart dont require params, modrestart doesnt take them,
  theyre optional in modlist


*** 20010831_2 by leeh
- updated example.conf


*** 20010831_1 by leeh
- gave serverhide its own config block :P


*** 20010830_2 by davidt
- Attempt to flush sendq of exiting clients
- When flushing a sendq, attempt to flush as many lines as possible, instead
  of one line per call of send_queued_write.
- Close fds 0/1/2 for slink process on non solaris platforms.
- Zero localClient after allocating it.



*** 20010830_1 by leeh
- allow unregged clients to see the motd, but then drop them.

  this doesnt actually work atm:
      MOTD
      :mafia.leeh.co.uk 375 * :- mafia.leeh.co.uk Message of the Day -
      Connection closed by foreign host.

  we disconnect the client before we send them the full motd, we should dump
  a users queue to them, then boot them


*** 20010829_3 by wcampbel
Added more info to the numeric document.  I don't know when the next time
I will be able to work on this is.


*** 20010829_2 by leeh
- reverted the linebuf changes, they caused more problems than they fixed


*** 20010829_1 by leeh
- added stats_P_oper_only


*** 20010828_4 by wcampbel
Added an early revision of the numerics guide.  It's FAR from complete,
but is added so that it doesn't get lost and so people can verify as
I finish pieces


*** 20010828_3 by wcampbel
Added two scripts, one to build a single module in contrib based upon
what is present in the Makefile, another to build a single message file.
Both depend on a sucessful configure run.

They are not perfect, but they work on my system.


*** 20010828_2 by wcampbel
Completed the repo-move/reorganization of the doc tree, updated the index
files.


*** 20010828_1 by wcampbel
Directory /cvsroot/ircd-hybrid-7/doc/technical added to the repository


*** 20010827_2 by wcampbel
Synced up mkpasswd


*** 20010827_1 by jdc
- Renamed hash_find_client() to find_client().  Oops.


*** 20010826_6 by db
- There was a bug in eventAdd which could lead to an infinite loop.
  I rewrote eventAdd and eventDelete. They actually look sane now.



*** 20010826_5 by androsyn
localtime and strftime need time.h


*** 20010826_4 by kreator
- misc formatting fixes for example.conf
- check if ServerInfo.max_clients is bigger than MAX_CLIENTS which would
  cause fdtable[] initialisation to core
- update convertconf a bit


*** 20010826_3 by habeeb
Fix for linebuf parsing problem that apparently broke ZIPLINKS.


*** 20010826_2 by davidt
- Tweak /stats Z slightly to be more useful, and handle overflows gracefully


*** 20010826_1 by davidt
- Forgot to commit these changes when I added the hooks for m_iodebug.c


*** 20010825_8 by wcampbel
1. Numerous doc cleanups (spelling, obsolete things, efnow.net references,
   missing files, files that have been removed)
2. Updated my TODO list some more
3. Synced up the defaults in include/defaults.h to the ones we discussed
   with ievil back in the early 6.1 days
4. Added doc/messages.txt, a user and admin document on using and creating
   custom message files


*** 20010825_7 by db
- added jv's mods I locally added numerics for the map function



*** 20010825_6 by wcampbel
Updated a good portion of TODO


*** 20010825_5 by db
- renamed hash_find_client() to find_client() in hash.c
  find_client() in client.c was simply calling hash_find_client() anyway.



*** 20010825_4 by wcampbel
This is an updated m_mkpasswd.c, allowing you to use a second parameter to
specify which password hashing algorithm to use, DES or MD5.


*** 20010825_3 by a1kmm
- Fixed the core on JUPE bug, we cannot remove capabs when a juped server
  exits if we never set them for that server.


*** 20010825_2 by a1kmm
- I can't get RESV to core as fl seemed to think it did with USE_CHANNEL_MODE
  before. We really need to get this stable so we can get an rc out soon,
  so I am enabling it so we can pick up any bugs in it sooner rather than
  later. I suspect that USE_CHANNEL_MODE will be more important on efnet
  than the RESV as it fixes problems with conflicts between hybrid-7 which
  has only one of ohv at the same time and other servers, so if we can't
  fix it we should probably disable RESV.


*** 20010825_1 by a1kmm
- Hopefully this will fix most of the hostmask.c problems we have been
  experiencing. I am not entirely sure the IPv6 code is right but it is
  better than it was.


*** 20010824_7 by wcampbel
Added a basic m_mkpasswd module to contrib, this generates DES passwords
only, and you cannot specify a salt.  This is also at present available
to regular users, and paced.  Please provide a valid reason before removing
support for regular users.


*** 20010824_6 by davidt
- Fix configure[.in] so --enable-assert/--disable-assert do what they claim,
  not the opposite.
- Add hooks for m_iodebug.so, to allow dumping the raw IO to a logfile
  using m_iodebug.c (not committed, since it could also be used for slightly
  different reasons...)


*** 20010824_5 by leeh
- commented out the no oper motd line.. if they dont see one, there isnt 
  one.. seems kinda obvious surely? :)


*** 20010824_4 by leeh
- more of em.. I cant even remember which this time :P


*** 20010824_3 by leeh
- moved report_glines() to m_stats.c


*** 20010824_2 by leeh
- moved report_dlines and report_elines -> m_stats.c and merged them with
  the stats function that called them


*** 20010824_1 by leeh
- dumped build_list_of_channels, theres no point remaking the buffer, with
  the possibility that we will ignore half of the new buffer anyway

  I havent dropped the strtoken()'s yet.. possibly later :)


*** 20010823_3 by davidt
Add Id tag


*** 20010823_2 by davidt
- Fix string_to_array so that we correctly handle the weirdness of empty
  params, etc.  I think this is right, but it's hard to test on a network
  with at least 3 different versions of parse.c running on it..


*** 20010823_1 by db
- I couldn't take it anymore. cleaned up build_list_of_channels slightly
- started preliminary code for JOIN TS from remote server.



*** 20010822_8 by leeh
- removed +e and stuck gecos on the end of the +c notice


*** 20010822_7 by leeh
- added back the second buffer, this time it actually does something and
  is less complex


*** 20010822_6 by leeh
- theres no need to make two sjoin bufs at all, especially when theyre
  *identical* and one of them isnt even done properly..


*** 20010822_5 by leeh
- setting a pointer to p, which is null, then checking if its \0 is bad.


*** 20010822_4 by leeh
- added check for trailing spaces..


*** 20010822_3 by leeh
- cleanups


*** 20010822_2 by leeh
- *p = '\0';
  p++;
  -> *p++ ='\0';


*** 20010822_1 by leeh
- fixed sjoin.. I commented most of it
  someone should probably review this :)


*** 20010821_10 by androsyn
Okay so strspn() wasn't such a great idea...


*** 20010821_9 by androsyn
Changed the arguments and make string_to_array work right


*** 20010821_8 by androsyn
This has a hopefully faster version of string_to_array()


*** 20010821_7 by leeh
- drop defaults down low so it will run first time


*** 20010821_6 by leeh
- remove modded files before you commit ;)


*** 20010821_5 by davidt
- Oops, fix a couple tiny bugs in the new linebuf_putmsg code that caused
  some major problems truncating various bits of messages.


*** 20010821_4 by davidt
- Ahem, 'make install' is needed for testing, 'make' doesn't help much.
  Anyway, now that I'm testing the actual changes, this _does_ help
  improve burst times (on a hub, that needs to relay the burst elsewhere)
  by up to 12.5% (this was measured on a localhost->localhost burst, if
  there's a bandwidth bottleneck, the bandwidth will probably be the
  major bottleneck anyway).


*** 20010821_3 by davidt
- Create linebuf_putmsg, which essentially replaces linebuf_put, since we no
  longer use linebuf_put anywhere.  This get rids of a few needless copies
  of outgoing messages per call of sendto_* functions.
- Unfortunately, we now use snprintf/vsnprintf, not ircsprintf, since there
  is no irc[v]snprintf function available.  Not sure how badly this affect
  things, but if it's bad, make a ircvsnprintf function...
- Tidy a few warnings in --disable-assert mode.


*** 20010821_2 by davidt
- Clean up m_sjoin.c slightly.


*** 20010821_1 by androsyn
Diane's optimizations of the SJOIN code and some of the linebuf code.


*** 20010820_7 by androsyn
Kill one memset()


*** 20010820_6 by androsyn
Check for strtok_r()...if it exists, use it instead of strtoken().  If strtok_r
is found, we define a macro to call strtok_r() instead...


*** 20010820_5 by db
- a little more cleanup



*** 20010820_4 by db
- changed temp in report_Klines to k_or_K



*** 20010820_3 by db
- re idented to conform with project standards. 
- removed unnecessary strncat, replaced with strncpy()



*** 20010820_2 by androsyn
This is a hack to make poll() use a single list. This isn't the right way to do it, but
it will do for now.


*** 20010820_1 by androsyn
I think this fix is right for linebuf_copy_line() please look at it as it could probably still use work.


*** 20010819_2 by leeh
- not pacing a possible 50k channel list between a HUB <-> LL is slightly
  evil..


*** 20010819_1 by leeh
- removed an unneeded variable


*** 20010818_2 by davidt
- Add m_map.c to contrib/, since it was in TODO and I was bored.


*** 20010818_1 by leeh
- doc updates
- added a blank dline.conf
  (should we just use touch instead?)


*** 20010817_3 by jdc
- Flipped order of CFLAGS addition (at the end, not at the beginning).


*** 20010817_2 by jdc
- Many fixes for CFLAGS variable support.
- Fixed  --enable-assert and  --disable-assert.
- Cosmetical changes all over (formatting issues).


*** 20010817_1 by davidt
- Instead of polling SERVICES,SERVERS,/*BUSYCLIENTS*/,IDLECLIENTS, and
  delaying on IDLECLIENTS (which means we _should_ always delay for the full
  x ms, if they are really idle clients), do it in reverse:
  poll IDLECLIENTS, /*BUSYCLIENTS*/, SERVICES, then delay on SERVERS, so
  we delay on (presumably) the busiest links, and we'll wake up if anything
  happens.
  I fail to see how the multi-list stuff really helps us...


*** 20010816_11 by androsyn
Changed a few eventAdd()'s to eventAddIsh() which keeps some of the events
from running all at once.  We should look into making some of the events
do this.


*** 20010816_10 by androsyn
Oops..an off by one error..


*** 20010816_9 by androsyn
Its helpful if you update the length of the bufhead as well as the bufline


*** 20010816_8 by androsyn
Added block heap allocation for struct Channel.  This ends up enabling us to
return most all of the memory allocated while servers are joined back to the
OS.  


*** 20010816_7 by androsyn
Yet another swing at this. This time we use memcpy().


*** 20010816_6 by davidt
- Of course, it didn't work, but this does.


*** 20010816_5 by davidt
- Commit fixed version of improved linebuf_copy_line.
  This _should_ work. I hope.


*** 20010816_4 by leeh
- missed this one


*** 20010816_3 by leeh
- GlobalServList (used pointers in struct Client) to dlink_list
  global_serv_list (dbd)


*** 20010816_2 by androsyn
Minor little change that should speed things up a tiny bit..


*** 20010816_1 by androsyn
Removed the binary flag from linebuf_copy_line(). First we are not doing
ziplinks within ircd, second, the ziplink code never actually generates
a \r or \n, so this code was likely a mute point in the first place.


*** 20010815_2 by leeh
- updated the docs to cover the multi accept system


*** 20010815_1 by androsyn
Missing prototype for init_dlink_nodes() or whatever the function is called :)


*** 20010814_2 by davidt
- Use free_dlink_node(node) not MyFree(node), since node is from balloc,
  and is inside a chunk of memory from mmap, not something free()able.


*** 20010814_1 by db
- removed unused variable, since we are back to using a block allocator



*** 20010813_12 by leeh
- missing ;


*** 20010813_11 by leeh
- updated the accept stuff:
   - add_accept() is now in m_accept.c
   - list_accepts() is now in m_accept.c
   
   - added five new numerics:
      281 RPL_ACCEPTLIST - accept list
      282 RPL_ENDOFACCEPT - end of accept list

      456 ERR_ACCEPTFULL - full accept list
      457 ERR_ACCEPTEXIST - trying to add a client already on their list
      458 ERR_ACCEPTNOT - removing a client not on their list
			  


*** 20010813_10 by androsyn
make_dlink_node now uses the block heap again..



*** 20010813_9 by androsyn
Put memset() back for struct Client allocations..


*** 20010813_8 by jdc
- modules/m_cryptlink.c: Call verify_private_key() before MyMalloc().


*** 20010813_7 by androsyn
It is useful to set a fd_note() on a non cryptlink server.


*** 20010813_6 by androsyn
Block heap for struct User now..


*** 20010813_5 by androsyn
Getting pages via /dev/zero actually compiles and works now.


*** 20010813_4 by androsyn
Added support for getting anonymous pages via the /dev/zero method


*** 20010813_3 by androsyn
That should be balloc.h  


*** 20010813_2 by androsyn
Removed memset() from BlockHeapAlloc() it is up to the caller to do the init
of its block.


*** 20010813_1 by leeh
- commited Vid Strpic's update of the croatian language file


*** 20010812_5 by androsyn
Make sure the garbage collector doesn't remove the root block.


*** 20010812_4 by androsyn
Okay..second attempt at this commit..



*** 20010812_3 by androsyn
Please work


*** 20010812_2 by androsyn
Brought back the block heap allocator, with improvments.  Added support in 
client.c and linebuf.c


*** 20010812_1 by leeh
- removed traces of no_hack_ops as its not optional anymore


*** 20010811_1 by leeh
- you cant use a hash table lookup for incoming servers, else you can have
  *.com on one side of the net, and x.com on the other.

  you have to use two match()'s


*** 20010810_1 by leeh
- I agree with Hwy, we shouldn't block remote versions at all, mainly
  because you know the first server to reply to the request, if its not
  the target is a hub.. which would make hub hiding useless.. :)


*** 20010807_2 by leeh
- commited dabulldogs patch:
  slight idiot proofing.. will move the modules dir to modules-old, then
  install in modules/


*** 20010807_1 by leeh
- when you get server exists, you cannot exit the duplicate, you have to
  drop your uplink, else you cause *massive* problems


*** 20010806_3 by leeh
- attempting to use things from a null struct is bad (jv)


*** 20010806_2 by db
- missing set of last_ptr. oops. 



*** 20010806_1 by ejb
- fixed VMS support; appears to work (compile + link)


*** 20010805_5 by ejb
- well, it seems BSD yacc no longer dump core when we uncomment
  negative number support in the parser, so enable it.



*** 20010805_4 by db
- uhmm an int is not a string. repeat after me. an int is not a string.
  changed %s to %d



*** 20010805_3 by leeh
- undef'd use_table_mode.

  Do NOT redefine this without first talking to diane.  Ill email my
  backtrace to the list when it comes back online, we will probably beta
  tonight, and the table code has cores.

  Do not reenable this, the rest of the coders are in agreement about this


*** 20010805_2 by leeh
- made hybrid7 TS5


*** 20010805_1 by a1kmm
- Send "*" on -k, this should fix the key problems with the USE_TABLE_MODE
  code. We really shouldn't enable the old code, because it has issues with
  many things such as wrong compatibility with clients/servers which support
  more than one of +o/+v/+h. I am tempted to get rid of the previous code
  altogether.
- I can't reproduce fl's reported core on unjupe with the new code, so a
  bt would be good.


*** 20010804_5 by leeh
- added ConfigChannel.persist time to determine the minimum length of time a
  channel will remain when its last user quits from it

  Its minimum, because it will exist until the next cleanup_channels()


*** 20010804_4 by wcampbel
Updated server-version-info from Lee's changes last night


*** 20010804_3 by leeh
- updated info
- updated letters in /version


*** 20010804_2 by leeh
- minor cleanups


*** 20010804_1 by leeh
- updated jupe to take account of the GloalServerList


*** 20010803_2 by leeh
- undeffed USE_TABLE_MODE, theres a bug in chcap stuff which will core
  when removing jupes


*** 20010803_1 by leeh
- added a new param to sendto_realops_flags()
  this is an indication of what level the opers need:
    L_ALL: opers and admins
    L_OPER: opers who arent admins
    L_ADMIN: admins only


*** 20010802_2 by spookey
 - show /who user when user is +i  ..  thanks poptix


*** 20010802_1 by leeh
- changed report_error -> sendto_realops_flags() 
  allows us to show IP to admins, not to opers..

  adding an ilog() for read errors.


*** 20010731_1 by leeh
- added cryptlinks to stats c


*** 20010729_1 by leeh
- allow -ovh from servers 


*** 20010728_4 by leeh
- make it compile with USE_TABLE_MODE #undef'd


*** 20010728_3 by wcampbel
Updated the mkpasswd.c program, forgot about this one


*** 20010728_2 by wcampbel
Updated the docs for mkpasswd.c


*** 20010728_1 by a1kmm
- Fixed the table mode code.


*** 20010727_7 by leeh
- #undef'd USE_TABLE_CODE
  this is *fucked*.


*** 20010727_6 by androsyn
This ain't the right fix..but this thing needs rewritten..badly..



*** 20010727_5 by leeh
- added numerous comments to explain the new code..


*** 20010727_4 by leeh
- coding when tired is bad..


*** 20010727_3 by leeh
- sendto_one() doesnt care about LL, so we need to check manually..


*** 20010727_2 by leeh
- I am fl_! breaker of cvs!


*** 20010727_1 by leeh
- make sure there IS a capab, before you check IsCapable


*** 20010726_4 by leeh
- fix the +eI cap business
  we now loop the serv_list in send_cap_mode_changes, stringing modebufs as
  we go.. 


*** 20010726_3 by leeh
- someone had used client_p->host instead of client_p->name in m_squit.c,
  meaning when a server squit their uplink, their host got broadcast
  ugh

- made the links file use GlobalServerList


*** 20010726_2 by leeh
- make links use GlobalServerList


*** 20010726_1 by leeh
- added GlobalServerList
  this will allow a better way to loop for servers, than looping
  50k clients to do a /links list :P


*** 20010725_1 by leeh
- an unregged client should never get a remote ping.. therefore
  it should never need to be routed
- changed an irccmp() to a !match()


*** 20010724_1 by leeh
- added a catcher for those who dont bother reading the config files,
  will exit() the ircd unless its removed (its off if the lines not there)


*** 20010723_2 by leeh
- IsAdmin != IsSetOperAdmin
  ugh ugh ugh!


*** 20010723_1 by androsyn
Changed "Remote closed the connection" to "Remote host closed the connection"


*** 20010722_1 by leeh
- only show +eI modes to chanops/halfops


*** 20010721_1 by androsyn
Added a --enable-assert/--disable-assert option.  Currently it defaults to
enable-assert, but this should be changed for the release.


*** 20010720_6 by androsyn
I think i this should be the right way to do the inline stuff :)


*** 20010720_5 by androsyn
inline vsprintf_irc() for the sake of ircsprintf() save a single function call at least :)



*** 20010720_4 by androsyn
Made some changes to strncpy_irc().

Basically on systems using gcc with -O2 set, gcc will provide its own
builtin version of memcpy() which is far faster than strncpy_irc() so
we set a macro to do that.

For systems not using gcc, but have inlined functions, we provide an inlined
version of strncpy_irc().  

Alas, for systems that neither use gcc or support inlined functions we fall
back to the plain old version we've been using all the long.


*** 20010720_3 by androsyn
Added check for inlined functions..    


*** 20010720_2 by wcampbel
UHELP command added, this lets an oper view the user help file without
deopering.  UHELP for non-opers just does a regular HELP for non-opers (paced)
UHELP for opers is not paced.


*** 20010720_1 by leeh
- added UHPATH to /info
- needed case UHELP_MOTD: in motd.c, for a blind commit hwy, it was a nice
  job :)


*** 20010719_5 by wcampbel
Add in /quote HELP for users.  doc/users.txt is the file that's sent
to the user.  It's also already paced, so that concern of Diane's is taken
care of.

Someone please test this, as I don't have a server set up and running
at the moment.


*** 20010719_4 by wcampbel
Fix my commit from before, nameser.h is needed on FreeBSD


*** 20010719_3 by wcampbel
Removed an include (arpa/nameser.h)
This breaks Cygwin compiles, and appears to not be needed.

Someone want to check on this for me?


*** 20010719_2 by androsyn
Fix for the broken fix of the compile warnings that I fixed yesterday on
64bit platforms, but ended up needing to refix on 32bit platforms.

The universe truly hates me :P


*** 20010719_1 by a1kmm
- Re-enabled the #ifdef PACE_CONNECTs
- Added a configuration option throttle_time = <seconds>; Set to 0 to
  disable throttling.


*** 20010718_13 by bill

- PACE_CONNECT now off by default


*** 20010718_12 by wcampbel
Added jv


*** 20010718_11 by androsyn
Fixed stupid warnings in ircd_lexer.l one of the fixes is not so nice.


*** 20010718_10 by androsyn
Reflected the fact that the openssl related warnings are fixed.


*** 20010718_9 by androsyn
Changed char *version to char *ircd_version to prevent clash with openssl headers..



*** 20010718_8 by androsyn
Fixed some issues with 64bit version and remove some drain bamage as well.


*** 20010718_7 by androsyn
Sorta fixed the warnings in rsa.c.  We need to figure out why we can't include
pem.h.


*** 20010718_6 by androsyn
Fixed compile warning on 64bit platforms


*** 20010718_5 by leeh
- missed a 'fi' in the makefile
- fixed two stupid bugs:
  i) if a client has an id.. hes already regged, so calling 
       client_from_server == core.
  ii) fixed the logic for people changing nick case       


*** 20010718_4 by leeh
- IRCD_CFLAGS -> IRC_CFLAGS (or whatever it was ;p)
- removed an ugly hack in m_jupe.c I added when not thinking


*** 20010718_3 by leeh
- make install will rm m_client.so if it exists


*** 20010718_2 by androsyn
A stray log() still needed to be converted to ilog()


*** 20010718_1 by leeh
- *********** blat ************
  rewrote m_nick.c to include m_client.c, seperated out all the collide
  stuff and removed god knows how much bloat

  I now need to gocrawl into bed.


*** 20010717_9 by lusky
- revved patchlevel to b7


*** 20010717_8 by androsyn
I am AndroSyn..breaker of beta releases :P


*** 20010717_7 by lusky
- revved patchlevel to b6


*** 20010717_6 by androsyn
Fixes default compile flags to include -Wall and friends...


*** 20010717_5 by leeh
- minor cleanups


*** 20010717_4 by leeh
- I didnt mean to do that (it explains the double commit) I saw it
  commiting configure and went "erp!"

  this backs out the configure change ;)


*** 20010717_3 by leeh
- thats it, persistent clients are gone

  they are never gunna be workable realitically for real clients, theres
  too much scope for abuse

  that leaves them to be an opers toy, and frankly, that just makes it
  bloat.  The other coders are in agreement, so theyre gone.
	


*** 20010717_2 by leeh
- thats it, persistent clients are gone

  they are never gunna be workable realitically for real clients, theres
  too much scope for abuse

  that leaves them to be an opers toy, and frankly, that just makes it
  bloat.  The other coders are in agreement, so theyre gone.


*** 20010717_1 by leeh
- fixed a logic error in ircd_parser
- updated example.conf slightly
- (from jv)
  make the password field in stats c show the link type:
  	A - autoconnect
	C - cryptlinks
	L - lazylink
	M - masked (eg: *.fi)
	Z - ziplink
	* - none of above


*** 20010716_7 by leeh
- /connect new.server 0 hub.server

  make hub.server connect to new.server on the port it has in its config,
  providing it has one..

  (requested by jv, and I quite like it :) )


*** 20010716_6 by leeh
- change two irccmp() -> !match() to take account of masking
  (reported by jv)


*** 20010716_5 by leeh
- IsSetOperAdmin != IsAdmin

  stats l * needs to mask stuff too.. 


*** 20010716_4 by leeh
- server ips in stats P are admin only.


*** 20010716_3 by leeh
- an unregged client might not have a nick.. send "*" if they dont


*** 20010716_2 by spookey
- changes kqueue support checking to looking for kevent() instead of sys/event.h


*** 20010716_1 by spookey
modified ircd-hybrid-7/autoconf/configure.in to check properly for sys/event.h if kqueue is selected and to properly discard prepend underscore checking in shared libraries when nlist.h cannot be found
updated configure from autoconf/configure.in


*** 20010715_2 by leeh
- added ipv6/pace_connect to /info


*** 20010715_1 by leeh
- added an example ipv6 listen.. some people just dont read comments


*** 20010714_2 by leeh
- dont exit clients on capab either, people will just make newbies abuse
  it (hey! /capab will make you a god!)
- m_registered for cryptlink!? :)  lets just ignore it ;)


*** 20010714_1 by leeh
- call m_ignore instead of m_error when issued by client/oper
  (noticed by jv)


*** 20010713_1 by leeh
- there was a *@* on the end of RPL_STATSQLINE.. quite what its intention
  was I dont know..


*** 20010712_1 by leeh
- dont show spoofs to non-local opers.. 


*** 20010710_1 by jdc
- Typo fix.



*** 20010708_3 by androsyn
Forgot the msgtab stuff in modules.h for static builds..


*** 20010708_2 by androsyn
When adding new modules, you really need to update modules.c so that the
having thoses modules compiled statically works right.



*** 20010708_1 by a1kmm
- If we get a small TS on a non-existant channel, set the newts to 800000000
  not 0.


*** 20010707_3 by a1kmm
- Reverted the testsuite module stuff, it probably shouldn't be committed
  yet.


*** 20010707_2 by a1kmm
- Actually set the key/limit to 0 on -k / -l as join requires this, turning
  off the mode flag is not enough.
- Adding some of the code which will eventually be used to allow a test-suite
  module.



*** 20010707_1 by leeh
- added docs for resv


*** 20010704_5 by wcampbel
Added make lint here, it's still broken though.


*** 20010704_4 by leeh
- removed two pointless defines :P


*** 20010704_3 by leeh
- stats m doesnt need to be oper only.. we send it to a user on /help
  anyway

- updated the conf to reflect resv {};


*** 20010704_2 by leeh
- fixed a couple of compile warnings


*** 20010704_1 by leeh
- added the letter 'Q' to the front of a stats Q.. 
  'q' == /resv
  'Q' == conf resv


*** 20010703_6 by leeh
- wheeeeeeeeeeeee :)
 
  added support for wildcard nick resv's
  this means two seperate structs.. channels are in the hash for speed
  reasons.. but we have to search through a linked list of nicks, due
  to us having to call match() and not irccmp()



*** 20010703_5 by leeh
- removed traces of q_conf, I think its gone forever now :)


*** 20010703_4 by leeh
- quarantine{}; no longer exists.  its been replaced by:
  
  resv {
    reason="no services on this network";
    nick="chanserv";
    nick="nickserv";
    channel="#services";
  };
  
  you can still list them by doing stats Q


*** 20010703_3 by leeh
- report_qlines -> report_resv
  (s_conf.c)    -> (resv.c)

- stats Q now lists resv's.. I think I need to add the letter Q on the
  beginning of the reply tho :P


*** 20010703_2 by leeh
- added reasons to resv


*** 20010703_1 by wcampbel
Added the .cvsignore files, this helps coders more easily see if something
is in the tree and shouldn't be, or should be cvs add'ed


*** 20010702_10 by jdc
- modules/m_capab.c
  modules/m_challenge.c
  modules/m_cryptlink.c
  src/ircd_parser.y
    * Moved all strcasecmp()s to irccmp()s.



*** 20010702_9 by jdc
Monster Update(tm) time.  Please read the following disclaimer:

Cryptlinks have been slightly redone in a different format: THE PROTOCOL
HAS CHANGED.  You will *NOT* be able to connect an older hybrid-7 daemon
with this and future versions of hybrid-7.  The same goes for present
hybrid-6 connecting to this hybrid-7 or vice-versa.  The result of trying
to connect older daemons will be a timeout, or otherwise odd behaviour.

- doc/cryptlink.txt
    * Updated the protocol; should be cleaner, handled under one command:
      CRYPTLINK.  Subset commands are AUTH and SERV (eg. CRYPTLINK AUTH,
      and CRYPTLINK SERV).
    * Error handling is now documented.
    * Examples of protocol transactions.

- doc/example.conf
    * Updated comments regarding how to use "cipher_preference" and
      "default_cipher_preference" directives.

- include/client.h
    * Cosmetical changes.

- include/defaults.h
    * Cosmetical changes.

- include/modules.h
- src/modules.c
    * Removed "cryptauth_msgtab" and "cryptserv_msgtab" defs.
    * Added "cryptlink_msgtab" extern declaration.

- include/s_conf.h
- src/s_conf.c
    * Changed "cipher_preference" and "default_cipher_preference" defs from
      from EncPreference to EncCapability.

- include/s_serv.h
- src/s_serv.c
    * Removed EncPreference structure.
    * Renamed "enccaptab" to "CipherTable".
    * Changed cryptlink_error() function to take a lot more arguments;
      the syntax has greatly changed.
    * cryptlink_error() extended to not only send messages to admins,
      opers, and call exit_client (dynamically), but also ilog().  About
      time!
    * Renamed select_cipher() to check_cipher().
    * Added #ifdef's around portions of CipherTable to ensure completely
      that we do not even add the cipher to our list in the case that
      autoconf does not find it to be a supported cipher.  This is needed
      for the cipher detection methods which use CipherTable anywhere.
    * Removed all the silly cipher "priority" garbage.  Good riddance.
    * Much __MUCH__ better error handling and error descriptions.  Now
      both ends of the link should get an idea of what's wrong.
    * Cosmetical changes.
    * Added some comments.

- modules/m_capab.c
    * Removed code to support multiple cipher preferences via "," delim.
      This is silly; pick a cipher and use it.  Autonegotiation is pretty
      pointless for this kind-of communication medium.  This should also
      speed up the code a bit; no more strtoken().

- modules/m_cryptlink.c
    * Renamed mr_cryptserv() to cryptlink_serv().
    * Renamed mr_cryptauth() to cryptlink_auth().
    * Added mr_cryptlink().  This function is VERY simple, and uses a
      table (CryptLinkStruct) to refer to it's commands.  This should be
      useful for the future, particularly in regards to things like
      key regeneration and for general expansion.  Someone should probably
      check mr_cryptlink() out for any problems, though.
    * Much __MUCH__ better error handling and error descriptions.  Now
      both ends of the link should get an idea of what's wrong.
    * cryptlink_serv() and cryptlink_auth() both were doing case-sensitive
      cipher checks; moved from strcmp() to strcasecmp().

- src/ircd_parser.y
    * In code pertaining to cipher_preference and default_cipher_preference,
      __completely__ changed how the cipher mechanism is done.  Before, we
      were doing some hoky crap with memory allocation and creating a buffer
      for "cipher priority".  All of this is now gone.  Instead, we use
      pointers to point into CipherTable.  This is *FAST AND CLEAN*.  Yay.
    * Fixed bug: /REHASH could possibly corrupt the key on an error.
    * Fixed minor memory leak (I think; could be wrong on this one).
    * Changed some error messages to be more clear.
    * Cosmetical changes.



*** 20010702_8 by androsyn
Fixes EO's bug with recursive CNAMEs.  And just for the record, I'd like to
note that this sucks, bad.  Whoever thought up CNAMEs should be shot..dead



*** 20010702_7 by androsyn
Fixed buglet where we print the pid before fork() not after fork().




*** 20010702_6 by jdc
- include/linebuf.h
  src/linebuf.c
    * Missing declarations for functions; resulted in warnings.
    * Some functions lacked void in function definition; just being picky.
- src/resv.c
    * Lacked include for hash.h.



*** 20010702_5 by jdc
- modules/m_resv.c
    * Missing include for "hash.h" -- warnings...



*** 20010702_4 by jdc
- messages/*.po
  messages/translations/*.po
    * Updated with latest changes to src/messages.tab to ensure sanity.



*** 20010702_2 by wcampbel
- fixed m_error.c grrrr



*** 20010702_1 by wcampbel
Remove the last vestiges of USE_RCS from viconf
Install the two hard links to viconf (vimotd and viklines)
The above entails a configure and Makefile.in update
Re-add the empty kline.conf file, needed for make install if installing to
a new directory


*** 20010701_3 by db
- removed USE_RCS from config and m_info.c , it never worked properly anyway!



*** 20010701_2 by db
- fixed missing change of local client ts (tsinfo) when client changes nick
- changed "too many nick" changes notice into a 438 numeric, stolen numeric
  from ircu... but we did the anti nick flood code first!
  Note, all the language dependent message.tabs now have to be updated. ick



*** 20010701_1 by greg
Added myself to h7 core team, since I just almost had a coronary over h7
not following the rules of TS ...

server_estab resets firsttime .. burst times will be more accurate.


*** 20010630_2 by androsyn
Another shot at that dns patch..


*** 20010630_1 by androsyn
Added flags to adns_submit_reverse to make CNAME's in PTRs work a bit
better. Patch submitted by EO.




*** 20010629_2 by leeh
- fixed the compile warnings..


*** 20010629_1 by a1kmm
- Set uplink to NULL on changing to a hub.


*** 20010628_2 by leeh
- I should probably actually add the files ;p
- made the makefiles compile them too


*** 20010628_1 by leeh
- hash tables hash tables everywhere!

  extending RESV support for nicks:
  -irc2.leeh.co.uk- *** Notice -- fl_!flame@irc2.leeh.co.uk{flame} has
  placed a local RESV on nick: test

  -> Server: nick test
  test Nick/channel is temporarily unavailable

  it only works with /resv atm, im going to rename quarantine {}; to
  resv {}; (for obvious reasons.. dont wanna be too confusing now do we)

  I would really, really like someone to review this.. but if you wanna
  change stuff find me first.. as I know where resv is going ;p


*** 20010627_3 by androsyn
Commit of Diane's linebuf allocator thingy...


*** 20010627_2 by a1kmm
- Better commit this header so my mode code compiles...


*** 20010627_1 by a1kmm
- Fixed channel modes, hopefully they work entirely correctly now.


*** 20010626_17 by androsyn
Yet another memset


*** 20010626_16 by androsyn
Even more random memset()'s


*** 20010626_15 by androsyn
Remove some unnecessary memset()'s


*** 20010626_14 by androsyn
Knocked off about 12 seconds of a burst by replacing malloc/memset with calloc. Go figure..




*** 20010626_13 by androsyn
Its seems inlining MyMalloc() doesn't help much...


*** 20010626_12 by leeh
- moved the is_resv() check down to accomodate #x,#y


*** 20010626_11 by leeh
- fixed a header in m_post.c
- added RESV - h7's channel jupes

  /RESV - locally "jupe" a channel, to prevent anyone joining that
          channel.  It will return the ERR_UNAVAILRESOURCE numeric
	  (juped).
  /UNRESV - remove a RESV thats been placed

  I shall extend it to nicks shortly.. as for permanence, I dont think
  it should be an issue.. if they want it permanent, they can add it to
  ircd.conf ;p


*** 20010626_10 by androsyn
Next time profile a function first before you go and replace it :P


*** 20010626_9 by androsyn
Needed an #undef for on certain platforms..


*** 20010626_8 by androsyn
Some definitions to support inlined versions of strcpy and MyMalloc() and friends...


*** 20010626_7 by androsyn
This seems to get bursts back down to closer to normal times..still not as fast as -6
though.


*** 20010626_6 by jdc
- doc/README.openssl
    * More minor stuff; added a bit to the "SERVER CONFIGURATION" section,
      with more to be added later in the future.



*** 20010626_5 by jdc
- tools/mkkeypair
    * Someone wanted this awhile back.  I think it was you, greg.  ;-)



*** 20010626_4 by jdc
- doc/cryptlink.txt
    * Minor changes (cosmetical, grammatical, typos).



*** 20010626_3 by a1kmm
- Tried to fix the mode code a little more. Still minor problems with the
  stuff sent to the local client on -o+v


*** 20010626_2 by jdc
- modules/m_whois.c
    * Minor warning fixed up (line 551; if statement vague/ambiguous).



*** 20010626_1 by jdc
- doc/cryptlink.txt
    * Fixed up "CAPAB <stuff>" -- should be "CAPAB :<stuff>".
- include/s_conf.h
  src/ircd_lexer.l
  src/ircd_parser.y
  src/rsa.c
  src/s_conf.c
  src/s_serv.c
    * rsa_private_key  -->  rsa_private_key_file
    * rsa_public_key   -->  rsa_public_key_file
      (No more sticking keys in the actual conf; finally actual files!)
      Who wrote the original rsa_public_key code anyways?  It was totally
      wacky (ascii!?!).
    * Fixed a few issues with some buffers not getting cleared (regarding
      RSA keys) on /REHASH.
    * Fixed up some of the error checking code for public keys.
    * Fixed up some code which was doing error checking at the wrong
      time/wrong order.
- doc/example.conf
    * Changed examples to be precise with the above.



*** 20010625_4 by jdc
- src/rsa.c  -- Looks like the RSA_free() prior to the PEM_ function
                results in a segfault.  I had a feeling about this;
                so what the hell are the OpenSSL people talking about?


*** 20010625_3 by jdc
- include/rsa.h  -- Changed verify_private_key() to return int.
  modules/m_cryptlink.c  -- Updated use of verify_private_key().
  src/rsa.c  -- Madness regarding OpenSSL.  I'm going to murder
                whoever wrote openssl/pem.h.  If things no longer
                work past this point, it's probably due to the
                typecast on line 110.  *sigh*



*** 20010625_2 by jdc
- src/rsa.c
    * Changed the assignment for PEM_read_bio_RSAPrivateKey().  There
      are bugs/caveats for using &ptr in the 2nd argument vs. an
      actual assignment with a TYPE_free() prior to it.  Don't believe me?
      Check out http://www.openssl.org/docs/crypto/pem.html#BUGS
    * Changed the error checking drastically, matching with what the
      official OpenSSL documentation states we should do.  Now things
      like specifying an invalid file in serverinfo{}'s "rsa_private_key"
      should hopefully error out properly and not beat the jig.
    * Hoping these changes fix some major issues -- the first is a pretty
      major one.  :-)



*** 20010625_1 by a1kmm
- Fixed redundant ops/voices etc... removal
- Added redundant sync_oplists removal. Note that there is still a bug I am
  looking for: /mode #chan +o-o on a non-opped user still seems to sync_oplists
  and give away the oplist by deopping all the ops for some reason. I will fix
  this later.


*** 20010624_1 by a1kmm
- Committing jv's patch for the SQUIT bug.
- Fixed IPv4 dlines/exempts for IPv6 boxes.
- Fixed exempt matching for rate limiting.


*** 20010623_2 by leeh
- some get_client_name() updates..


*** 20010623_1 by db
- fixed some formatting



*** 20010622_2 by leeh
- if someone asks a server to reply about a client thats not his.. it
  HAS to be non-detailed, else the info is just gunna be wrong

- (the big one), made ms_whois() work.. if someone asks a LL to answer
  about a client thats not /on/ the LL.. stuff will just break, so the
  hub will answer for the LL

  this made the hub more conscious about what it can/cant do.. it
  could possibly be tidied up but its.. dodgy 

  someone needs to audit this, its *very* well documented in the source,
  you just need to follow it..


*** 20010622_1 by jdc
- modules/m_gline.c: time_t warning (moved to %lu with a typecast).



*** 20010621_4 by leeh
- added a missing #ifdef PACE_CONNECT


*** 20010621_3 by leeh
- fixed serverhide bug in squit


*** 20010621_2 by leeh
- heres another go :)


*** 20010621_1 by leeh
- this should fix the whois bug


*** 20010620_2 by jdc
- Whee.  Sorry to update the updated update *grin* kre, but I figured
  with all of the recommended Solaris workarounds, this would be
  a more effective way of listing them all.  Thanks for providing more
  alternatives!



*** 20010620_1 by kreator
- small openssl documentation updates: prngd, sunwski, andirand.


*** 20010619_4 by leeh
- when we send glines to hyb6 servers, they need to come from the opers
  server, not the opers nick..


*** 20010619_3 by jdc
- doc/README.openssl
    Severe "touch-ups," and added a section pertaining to Solaris and
    it's lack of /dev/random or /dev/urandom.  Hopefully this will
    help Solaris users out a little bit.



*** 20010619_2 by db
- redid m_gline to write kline.conf compatible files



*** 20010619_1 by a1kmm
- Finished off Diane's USE_TABLE_MODE patch.


*** 20010618_6 by leeh
- disallow ! in klines/glines.. 


*** 20010618_5 by jdc
- Mentioned the implicit decl. and warning messages during compile-time,
  which pertain to OpenSSL.  People like Jamie will bitch and whine, so
  might as well be precautious.  *grin*
- Reformatted some stuff (purely cosmetical).



*** 20010618_4 by jdc
- Fixes compile issues with prior update for OpenSSL error logging.
  One small note:  There is no way I know of to get around the
  implicit declaration warning for PEM_read_bio_RSAPrivateKey().  If
  you include <openssl/pem.h>, you break everything.  Either our SSL
  code is really, and I mean __REALLY__ bad, or OpenSSL is just a hunk
  of junk.  fetchmail and mod_ssl don't have the problems we are,
  though...



*** 20010618_3 by db
- bug in USE_TABLE_MODE set_channel_mode code
  I've undeffed it for now until this fix is verified... This
  code should be rather more carefully tested...
- Basically chptr->chname does not always point at the real name as
  seen by users when on a vchan. The root channel name is passed to
  set_channel_mode() for this reason. set_channel_mode is given
  the chptr corresponding to the mapped channel (#foo_{TS}) but
  the local users should only see the "#foo" part, which is what chname
  passed down is (the root channel name)
- I'm unable to test this fix atm. Someone else will have to ;-(



*** 20010618_2 by jdc
- Modifications to support verbose logging for cryptlink problems.
  Patches originally written by einride.  Logging levels are L_NOTICE
  and L_CRIT.
  Modified files:
    * include/s_conf.h
    * modules/m_cryptlink.c
    * src/ircd_parser.y
    * src/rsa.c
    * src/s_serv.c



*** 20010618_1 by a1kmm
- Committing my version of .indent.pro


*** 20010617_5 by db
- ircsprintf() conveniently returns the length of string



*** 20010617_4 by toot
renamed some stuff in channel.c so it makes some more sense


*** 20010617_3 by toot
added -ncs to .indent..
(re)indented channel.c and vchannel.c..


*** 20010617_2 by toot
added .indent.pro to use in other dirs
"-gnu -nut -npcs -cdw" seems close to what we use.. 
feel free to change stuff :)


*** 20010617_1 by toot
finished formatting channel.c


*** 20010616_10 by a1kmm
- Changed an irccmp to a match so we don't break host = "*.blah";


*** 20010616_9 by db
- same fix needed in hybrid-7 in attach_cn_lines
  both the servers irc name has to match and the host/ip
  match is used to allow hostmasking (ugh)



*** 20010616_8 by toot
more formating fixes in channel.c


*** 20010616_7 by toot
started reformatting some code in channel.c.. it was hell to read
commited it so far so as not to get out of sync :)


*** 20010616_6 by a1kmm
- '>' != '<'


*** 20010616_5 by a1kmm
- Cleaned up remove_one_ip a little.


*** 20010616_4 by a1kmm
- Ripped out the last remnants of the TOO_MANY code I was going to commit but
  then decided was pointless so ripped most of it before...


*** 20010616_3 by a1kmm
- Fixed that "/squit" bug where we don't remove channels/nicks from a linked
  list.
- Ripped lazylink_nicks, it probably uses more cycles/memory than it saves.


*** 20010616_2 by jdc
- doc/README.openssl: Lots of changes, and still some left to do (a
  section on how to modify your configuration file, and what's what).


*** 20010616_1 by jdc
* Small typos and the like.



*** 20010615_4 by a1kmm
- 1 microsecond != 1 millisecond. Changed the delay stuff so ircd doesn't hang
  for too long.
- Added some connect pacing(for 7.1). It is all wrapped in #ifdef for now.


*** 20010615_3 by toot
/names should say "#channel End of /NAMES list.", even when the channel doesn't exist


*** 20010615_2 by a1kmm
- Fixed IPv6 klines.


*** 20010615_1 by toot
fixed a compile warning..


*** 20010614_1 by androsyn
#ifdef out some dead code


*** 20010613_7 by leeh
- slight updates


*** 20010613_6 by leeh
- started removing server names in collisions..
  the old ones are wrapped in #if 0 for now
- removed an excess ) from m_oper.c


*** 20010613_5 by leeh
- ug, I came across check_klines() when trying to find this bug..
  it was just about unreadable.. 


*** 20010613_4 by androsyn
Cleaned up more abuses of inetntoa() 


*** 20010613_3 by androsyn
sockhost is the string version of the IP..duh :P


*** 20010613_2 by androsyn
Minor cleaups...


*** 20010613_1 by androsyn
Minor cleanups...


*** 20010612_9 by androsyn
Oops..i should have been checking to see if the connection was an AF_INET6


*** 20010612_8 by androsyn
All this world is not 32bits...


*** 20010612_7 by androsyn
Forgot to commit these files as well with the previous commit


*** 20010612_6 by androsyn
Changes a bunch of unsigned long's to time_t's for timeouts..


*** 20010612_5 by androsyn
Fixes autoconf so that u_int32_t always is a 32bit integer on all platforms, include 64bit ones..


*** 20010612_4 by androsyn
Maybe this will fix the ipv6 . problem


*** 20010612_3 by androsyn
Fixed Makefile.in after I borked it last night.


*** 20010612_2 by androsyn
Helps if you commit the right makefile.in


*** 20010612_1 by androsyn
Disable iauth and libnsl/libresolv checks, as we really don't need, or want
these libraries.


*** 20010611_7 by toot
slight cosmetic fix to the TSdelta notice to admins.


*** 20010611_6 by leeh
- FLAGS_ADMIN -> FLAGS_SERVADMIN
  this means the notices goes to admins who are +s, and not all admins..
  (this is how it shouldve been)
- FLAGS_NOTADMIN -> FLAGS_SERVOPER
  as above


*** 20010611_5 by androsyn
Its always useful to rearm your timer.


*** 20010611_4 by androsyn
Changed waitpid() check for zombies to run once every 30 seconds, rather than
once per i/o loop cycle.



*** 20010611_3 by androsyn
Fixes for various moans and groans that gcc emitted.


*** 20010611_2 by androsyn
Fixed a bit of code that gcc 3 whined about. Apparently VMS's compiler whined too..


*** 20010611_1 by androsyn
Fixed /dev/poll to do something useful other than eat cpu..


*** 20010610_7 by androsyn
Turned off logging of /dev/poll that was filling my disk


*** 20010610_6 by kreator
- added /usr/pkg and /usr/local paths for openssl detection since i have
  systems with those paths used for ssl - NetBSD, etc.


*** 20010610_5 by toot
put that assert back in get_oper_name


*** 20010610_4 by db
- I should not commit code when tired. 
  anyway, this fixes a NULL pointer.



*** 20010610_3 by db
- don't check that assert unless uplink is NON NULL dork 



*** 20010610_2 by db
- don't make uplink a non local server. this really should NOT happen...
- assert if uplink is a non local server, furthermore whine to logging
  if it is.



*** 20010610_1 by a1kmm
- Cleaned up + optimised the USE_TABLE_MODE stuff.


*** 20010609_6 by a1kmm
More mode table stuff:
- Implement +I/+e
- Fix -v+o sort of case.
- Send nothing on +n-n sort of thing.


*** 20010609_5 by db
- allow opers to always send through a +g



*** 20010609_4 by toot
fixed some compile warnings


*** 20010609_3 by toot
fixed possible overflow in get_oper_name, and removed the assert


*** 20010609_2 by a1kmm
- We probably want to #if 0 this out until 7.1, especially as it isn't finished
  and it needs more stuff to be moved into headers etc... later.
- Implements a table driven channel mode system. Not quite complete, but almost.


*** 20010609_1 by androsyn
Okay...this fixes the usleep hack.  Basically we end up doing the delay in
select/poll/kqueue.  In the case of poll() we set the delay on the last poll
list, which seems sane enough.  The biggest change here is the fact that we
are no longer using time_t for delays, but an unsigned long, which is
holding a millisecond value.  I've tested the poll() case and that seems to
work okay.


*** 20010608_12 by kreator
- add EGD support; setup via use_egd=yes; and egdpool_path="path";
- rewrite some repeating RAND_bytes calls


*** 20010608_11 by db
- fixed header, it read convertconf still
- fixed spelling mistake seperate -> separate a very common one..



*** 20010608_10 by jdc
* Fixed time_t vs. long warnings (typecasted properly as '(long)').



*** 20010608_9 by leeh
- added convertklines to convert klines from old format -> new format


*** 20010608_8 by a1kmm
- Improved logging of oper activities to include opernick or operserver.


*** 20010608_7 by leeh
- extended valid_comment() to be in mo_kline() and ms_kline()


*** 20010608_6 by db
- can't have a " inside a " duh



*** 20010608_5 by db
- renamed KParseFile to parse_k_file DParseFile to parse_d_file



*** 20010608_4 by db
- valid_comment() should only toss away " for now... could escape it in future



*** 20010608_3 by db
- what was this 0 length file doing here?



*** 20010608_2 by db
- updated slightly



*** 20010608_1 by db
- unkline and undline now work with the new formats
- Exceptions to D and K lines MUST only be in ircd.conf now.



*** 20010607_4 by db
- write the current_date to the reason field
- dline.conf cannot be == kline.conf now
- someone has to redo the unkline/undline code now.



*** 20010607_3 by db
- redid kline/dline parser to use a spreadsheet compatible file format
  klines are now stored as discussed on ircd-coders
  "user","host","reason","time" (for now) I'll convert time
  to decimal field later, and add oper id ...
  for now this works..
- also fixed typo in example.conf pointed out by MrPerfect



*** 20010607_2 by jdc
* Fixed SSL_LIBS= =stuff.  Note the extra equals sign.



*** 20010607_1 by androsyn
My attempt at fixing the SSL include/libs stuff..its good and likely I screwed
pretty bad, but it worked for me :P



*** 20010606_10 by kreator
- added missing #include <stdlib.h> for exit() calls in configure


*** 20010606_9 by jdc
* Yup.  Here we go again.  Changes for OpenSSL to work properly during
  make; servlink/Makefile.in was also majorly wrong, including the SSL
  LIBS for INCLUDES rather than the INCLUDES, blah blah blah...  It's
  all fixed now.



*** 20010606_8 by jdc
* Little fix for missing @SSL_LIBS@ (-L) in servlink/Makefile.in



*** 20010606_7 by leeh
- added an example module to the cvs, detailing how to build them, and
  what individual bits mean.. 


*** 20010606_6 by jdc
* Round 3 of the OpenSSL madness.  This *SHOULD* take care of everything
  (isn't that what I said last time?).  Someone might want to examine
  the Makefile.in's in other directories and see if they need SSL
  though.  People, ***PLEASE TRY THIS OUT*** to make sure it works for
  you.



*** 20010606_5 by androsyn
Lets see if this fixes the issue with '.' getting all over everything and
everything else.



*** 20010606_4 by leeh
- if ConfigFileEntry.no_oper_flood dont stop opers nick changes..


*** 20010606_3 by androsyn
Fixed stuff that was breaking the compile of ircd.c on solaris.


*** 20010606_2 by leeh
- FLAGS_ALL -> FLAGS_SERVOPER
- m_error -> m_ignore


*** 20010606_1 by leeh
- them cores arent fixed in hyb7.. "oops"


*** 20010605_15 by toot
moved knock_delay, max_chans_per_user, and quiet_on_ban to
the channel block in ircd.conf
and added maxbans to it


*** 20010605_14 by toot
fixed some little compile errors


*** 20010605_13 by db
- ok, moved channel {} block related stuff into ConfigChannel struct
  this was all over the place
- removed redundant extern for ConfigFileEntry
- removed typedef on ConfigFileEntry struct



*** 20010605_12 by jdc
* And here we are, folks.  Read it and weep.



*** 20010605_11 by db
- added initial channel {} block to set unset channel specific options
  use_invex use_except use_knock
  vchans might be nice to move into this block as well?



*** 20010605_10 by toot
added use_except.  moved the default for use_invex/except to set_defaults()
still need parser stuff, hehe


*** 20010605_9 by leeh
- [19:22] (greg) *** Notice -- *** End of burst from efnow.sdk.ca (1
  seconds)
  [19:22] (greg) too many *'s.


*** 20010605_8 by db
- added GlobalSetOptions.use_invex, no parser entry for it yet



*** 20010605_7 by leeh
- log() -> ilog()


*** 20010605_6 by leeh
- it seems to be give fl_ annoying code to fix hour..
- removed mr_error(), as it err.. didnt do a lot.. it got called, then
  returned cuz the client was unregged ;)


*** 20010605_5 by leeh
- youd be amazed how many of these bloody things there are :P


*** 20010605_4 by kreator
- err, be more precise: setup limit only if get limit succeeds


*** 20010605_3 by leeh
- get_client_name(client_p, HIDE_IP) -> client_p->name
  showing IPs to opers is bad :P


*** 20010605_2 by kreator
- fixed -L order in IRCDLIBS that was causing this on systems containing
  system libadns:
  /home/kreator/work/cvs/ircd-hybrid-7/src/adns.c:56: undefined reference
  to `adns__rereadconfig'


*** 20010605_1 by kreator
- add setup_corefile() that will rlimit corefilesize to system max


*** 20010604_9 by db
- =I= Missed a log to ilog in m_restart *sigh*



*** 20010604_8 by ejb
- no longer needed.


*** 20010604_7 by ejb
- don't copy version.c any more, since we generate it via version.com.


*** 20010604_6 by ejb
- oops, do these too.


*** 20010604_5 by db
- committed my side of the great log() to ilog() change



*** 20010604_4 by ejb
- change src/ to use ilog() rather than log().
  this is needed for systems which put the math library
  in the main C RTL.


*** 20010604_3 by davidt
- Check select() return value for errors.
- Minor fixes for errors introduced with the new servlink code to avoid
  using dup2().
- Fix for order of ciphers in s_serv.c


*** 20010604_2 by db
- oops forgot a node = next in the for



*** 20010604_1 by db
- fixed core on /rehash



*** 20010603_7 by ejb
- VMS fixes to motd.h.
- support for port = 1, 2; and port =1 .. 5; in ircd.conf.


*** 20010603_6 by jdc
* Fix for --enable-openssl.  Now the automatic mode (no =DIR arguments)
  correctly traverses through the list of internal paths.  I forgot a
  break statement.



*** 20010603_5 by davidt
- Fix the two easiest compile warnings from VMS.


*** 20010603_4 by davidt
- fix servlink problem with dup2() closing the server fd.


*** 20010603_3 by davidt
- Set hopcount correctly for cryptlinks

*** 20010603_2 by davidt
- Remove some #if 0'd code from m_join.c which is broken and unneeded.
- Fix stupid bug in ircd_parser.y from my mass-cleanup..


*** 20010603_1 by db
From jason@sabruno.wiz.cx  Sat Jun  2 23:59:06 2001

typo in hybrid 7:

[20:57|wiz] KLINE over-ruled for tek-X[bigpoppate@a24b161n137client58.hawaii.rr.
com], client is kline_exmpt

should be kline_exempt.



*** 20010602_8 by leeh
- made vhost6 actually do something and work..
  we can now have ipv6 only servers.. it relies on aftype= in the ircd.conf

  Theres still a bug with ipv6 incoming connections.. if it resolves
  and you have the IP, not the host in the config, itll error and give
  bad hostname.. we should accept both IP and host, and I dont think I
  can fix this one.. andro? a1kmm? care to help? ;)



*** 20010602_7 by jdc
* Fixed output so that --disable-openssl doesn't bother checking for
  include directories and the like.  Minor fix (mainly cosmetical).



*** 20010602_6 by davidt
make STATIC_MODULES compile again

*** 20010602_5 by jdc
* --enable-openssl has changed quite dramatically.  See below.
    ! <non-existant>        : Try auto-finding OpenSSL.
    ! --enable-openssl      : Try auto-finding OpenSSL.
    ! --enable-openssl=DIR  : Use DIR as the OpenSSL **BASE DIRECTORY**.
    ! --disable-openssl     : Disable support for OpenSSL.

  The "auto-finder" checks /usr/include/openssl, /usr/local/openssl/include,
  and /usr/local/ssl/include.  The first is the stock location for FreeBSD
  4.x and 5.x.  The second is the stock location for FreeBSD's ports
  install of OpenSSL.  The third is the path the "stock" OpenSSL source
  uses for the default install (/usr/local/ssl).

  Please note that --enable-openssl=PATH requires you to specify the
  **BASE DIRECTORY** where you installed OpenSSL.  Do **NOT** include
  the actual include/ directory in the path.

  Thanks to wjr for bringing all of this to my attention.



*** 20010602_4 by ejb
- and this.


*** 20010602_3 by ejb
- and this one.


*** 20010602_2 by ejb
- VMS compile fix.


*** 20010602_1 by ejb
- removed last traces of CMDLINE_CONFIG.


*** 20010601_2 by leeh
- commented out the module="some_module.so", for the admins who dont
  realise..


*** 20010601_1 by leeh
- ?_lines_oper_only -> stats_?_oper_only


*** 20010531_7 by davidt
- Fix contrib for the new send.c


*** 20010531_6 by davidt
- Replace sendto_*serv* with sendto_server.
  sendto_server(one, NULL, NULL, NOCAPS, NOCAPS, NOFLAGS, format, ...)
  works like sendto_serv_butone() did before, perhaps it should be made
  into a macro... but we don't seem to _use_ a simple 'sendto_serv_butone()'
  in many places any more, lazylinks/etc make it a bit more complicated.
- Also fix a few compile warnings, which mostly appear to have already been
  committed by toot, so that just added some conflicts for me to sort out
  before committing.  Maybe I should just do one thing at a time :)


*** 20010531_5 by toot
. added call to set_default_conf before parsing the conf
. fixed a few compile warnings


*** 20010531_4 by davidt
- Pass 2 of config file cleanup.
  * default ConfigFileEntry stuff is now set in s_conf.c:set_default_conf().
  * default stuff for blocks using yy_aconfs is done at the start of
    the ircd_parser.y code, where make_conf() is called. 
  * any validation of config stuff is now done in s_conf.c:check_conf().
  * validation of yy_aconf blocks is done at the end of the code,
    before add_conf*() is called.
  * we free anything we might have allocated in the config file _BOTH_
    in s_conf.c:clean_out_old_conf(), and ircd_parser.y.
    - ircd_parser.y incase a line is duplicated in a block.
    - clean_out_old_conf() incase a line is removed from the config file.
  * we no longer close listeners until we are about to call yyparse(),
    so if we abort, we don't end up with no open ports.

- Work remaining (someone else can do this if they want):
  * tidy up example.conf/simple.conf/ircd_parser.y/ircd_lexer.y
    -- rename some of the hideous options we have, like the
    double negative 'warn_no_nlines = no;' or 'non_redundant_klines = no;'.
  * clean up include/defaults.h - do we want a define for default
    options for every option??
  * clean up include/config.h - it'd be nice if we could make the remaining
    stuff configuarable through autoconf/ircd.conf too...
  * clean up set_default_conf()/check_conf() - the defaults are reasonably
    sane I think, but could do with tweaking -- example.conf should probably
    either match these, or include (default: ...) in a comment for each
    option.


*** 20010531_3 by davidt
- Pass one of config file cleanup.
  * config.h[.dist] is now a little cleaner, still some stuff to sort out[1]
  * defaults for ircd.conf stuff now go in defaults.h
  * added set_default_conf() and check_conf():
      set_default_conf() - called before yyparse() to set ConfigFileEntry
                           stuff to default values.
      check_conf()       - called after yyparse() to ensure that
                           ConfigFileEntry stuff is actually sane, and
                           reset to defaults if not.
- Lots more to do... But this _works_ (hopefully), so I'm committing it
  before doing anything insane.

[1] - MAX_BUFFER et all seem to be completely misused by the code, so
      documenting what they do is impossible, since it seems to do nothing
      useful.


*** 20010531_2 by db
- finished adding the k_ines_oper_only flag, (leeh can review!)



*** 20010531_1 by db
- fixed bug with single space in privmsg not being seen. <= instead of <
- reformatted to be consistent



*** 20010530_11 by leeh
- added the i_lines_oper_only to config..


*** 20010530_10 by leeh
- ok, big revision of stats I, you can now show users nothing,
  everything, or matching auth blocks

  ill be doing the stuff for stats k/K tomorrow..  but for now, stats K
  may be dodgy ;p


*** 20010530_9 by davidt
- Use fork() not vfork().
- Fix --disable-shared-modules build
- Add warning flags to compile of y.tab.c, so we see problems in
  ircd_parser.y...


*** 20010530_8 by jdc
* Apparently the blank lines actually contained spaces.  Oops.



*** 20010530_7 by jdc
* I must have my vanity...



*** 20010530_6 by jdc
* Forgot to add HAVE_LIBZ to /INFO output.  Oops.



*** 20010530_5 by jdc
* m_info.c information is now in table form.  Hooray.  There are still
  some remaining entries (particularly in m_info.h) which should be
  moved (or better yet, removed!) in the future.  I'll be adding more
  ConfigFileEntry variables to m_info.c in the near future.



*** 20010530_4 by leeh
- check for spoofed glines coming in from hyb6 servers


*** 20010530_3 by leeh
- fix two compile warnings


*** 20010530_2 by db
- this log(L_CRIT is left over from debugging



*** 20010530_1 by ejb
- removed negative number support in the yacc grammar for now.


*** 20010529_11 by ejb
- VMS-style ircd/foo getopt support (only on VMS, not Unix).


*** 20010529_10 by ejb
- set a process name on VMS.


*** 20010529_9 by leeh
- eob has a problem with negative deltas.. just use the time connected
  (its only a rough gauge anyway)


*** 20010529_8 by davidt
- This fixes the compile for --enable-ipv6, and IPv6 should work as
  before... However, iauth certainly wont work for IPv6, but it didn't
  even compile before this commit.


*** 20010529_7 by davidt
- Revert commit checking client_p->name is "", since i've no idea what
  its trying to do, and it breaks stuff.  (heh. oddly enough 'Break Stuff'
  is currently playing on MTV2. weird.)


*** 20010529_6 by leeh
- updated make clean to remove encspeed


*** 20010529_5 by davidt
- Fix connect_cipher_preference code in ircd_parser.y
- Fix 3 other minor problems in ircd_parser.y found when I compiled it
  with warnings enabled
- Fix problem in servlink where EOF error messages weren't being displayed.


*** 20010529_4 by jdc
* Only send kernel compile information to admins on an /INFO.



*** 20010529_3 by jdc
* Fixed "no previous declaration for start/stoptimer()" warnings by
  defining functions as static.



*** 20010529_2 by jdc
* Added max_chans_per_user to /INFO output.



*** 20010529_1 by jdc
* Support for a new general {} variable, 'max_chans_per_user'.  This
  replaces the previous (statically defined) MAXCHANNELSPERUSER.
  After adding this feature, I realised it should probably go into a
  class {} block.  However, the general {} method keeps with the
  historical aspect (being globally defined).



*** 20010528_14 by toot
reset some defaults in config.h that got changed.


*** 20010528_13 by a1kmm
- Write out a memory log on running out of memory, if MEMDEBUG is defined.


*** 20010528_12 by a1kmm
- Always always do a compile test, even for simple patches. cptrs don't
  exist anymore...


*** 20010528_11 by a1kmm
- Fixed the same bug in CRYPTSERV as was in PASS.


*** 20010528_10 by androsyn
Changed ipv4_vhost/ipv6_vhost to vhost and vhost6 respectively.


*** 20010528_9 by leeh
- added ipv6_vhost="", and changed vhost= to ipv4_vhost=, this will
  allow us to connect to ipv4 servers using ipv4, and ipv6 servers
  using ipv6.. it doesnt actually do anything yet though :P

  if you have a vhost= line, change it to ipv4_vhost!


*** 20010528_8 by davidt
- Correct configure.in detection of cast (oops)
- cipher_preference is now per-connect{} block, with a
  default_cipher_preference line in general{}
- Add modified version of encspeed.c from hybrid-6 cryptlinks patch


*** 20010528_7 by davidt
- Fix HAVE_ZLIB vs HAVE_LIBZ #ifdef that resulted in any ziplinks failing
  every 5 minutes.  bad david.


*** 20010528_6 by davidt
- Fix autoconf to properly disable openssl on detecting a broken version
  of OpenSSL.
- Make autoconf print out the detected ciphers on completion, in a style
  that matches the cipher_preference=''; line.


*** 20010528_5 by jdc
* Updated the _version definitions in m_clearchan, m_nickinfo, and m_opme.



*** 20010528_4 by jdc
* Typecasted time_t references to their appropriate types (%ld being
  signed long, %lu being unsigned long).  Yes, there are some %lds,
  believe it or not.



*** 20010528_3 by jdc
* Removed time_t long check.  I'll just typecast the bastards to be
  longs...



*** 20010528_2 by a1kmm
- Ignore server commands from other servers with a user prefix.


*** 20010528_1 by jdc
* Added autoconf support for RLIMIT_* definitions; prior, all this work
  was done in ircd.c.  Someone running Linux should test this and pay
  close attention to the configure output.



*** 20010527_3 by davidt
- Convert MISSING_SOCKPAIR into HAVE_SOCKETPAIR and make configure check for
  it.
- Make servlink/ as independant as possible from hybrid's build setup,
  so it can be used hopefully unchanged (except for the Makefile) in other
  projects that may want to. (e.g. hybserv).
  * Add servlink/setup.h


*** 20010527_2 by toot
fixed a few new compile warnings


*** 20010527_1 by davidt
- Fix format string problem if we send ourselves a message
  (debug message was broken)


*** 20010526_13 by a1kmm
- Fixed a tsinfo bug.


*** 20010526_12 by leeh
- fix trace for ipv6 ips


*** 20010526_11 by davidt
- Fix mode for dlink_list *loc*;


*** 20010526_10 by davidt
- oops, most people probably don't want debugging enabled...


*** 20010526_9 by davidt
- oops, commit regened configure. (strange cvs conflict must've deleted
  the copy i was testing.. weird..)


*** 20010526_8 by davidt
- Improve configure.in detection of gettext, openssl and zlib
- Fix problem with creating module installation dirs
- If read_packet is called for a 'dead' client, exit it.
  NOTE: since we don't exit_client in dead_link, there is a chance
        we can mark a client dead without exiting it.
        we can't exit any dead clients in parse.c, since we could
        have already exited it.  perhaps we need a new flag.
- servlink: Update docs to match implemented protocol
- servlink: Split process_command into different functions, and
            stick them into command_table.


*** 20010526_7 by leeh
- commited pasky's patch so we now support ipv6 ips for outgoing 
  connections
- im tempted to add vhost_ipv6="" then use ipv6/ipv4 depending on the 
  target.. as right now you either connect out on ipv4, or ipv6, never both


*** 20010526_6 by leeh
- ok, based on comments ive changed the way we handle local pings:
  - if the ping isnt cross-server, origin == what they sent
  - if the ping is cross-server, origin == their nick


*** 20010526_5 by cosine
- fixed memory leak in s_auth.c
- iauth is now working again (under #define USE_IAUTH)


*** 20010526_4 by cosine
iauth compiles again


*** 20010526_3 by jdc
* Added support for time_t size checking during configure.  Would be
  appreciated if someone on a i386 Linux machine checked to see if the
  configure output returns 'no' or 'yes'...



*** 20010526_2 by davidt
- Doh. hopefully fix the endianness issue with the servlink io code,
  which I missed when cleaning up the code (i fixed the code to read
  data lengths, but not commands, oops).


*** 20010526_1 by leeh
- PING origin :destination
  why would the origin ever be anything but a clients nick, or a servers
  name?  

  the old code is #if 0'd for now.. if we're in agreement, we can probably
  remove the origin variable altogether, and just use sptr->name..


*** 20010525_15 by davidt
- Fix netjoins for the loc* stuff, move to locpeons, not peons.. ahem..


*** 20010525_14 by ejb
- added generation support to version.com.


*** 20010525_13 by davidt
- refcounts for outgoing sendbufs
  send.c now creates linebufs, which send_linebuf attaches to the
  clients sendq (increasing the refcount).  The same linebuf may
  be attached multiple times to different clents.
  As usual, send_queued_write will then call linebuf_flush,
  which will attempt to write the data to the net, and call
  linebuf_done_line (which now only frees the buf if the refcount
  is zero) if successful.

  We still do some weird stuff in send.c, and I'd be a lot happier if
  we adjusted sprintf_irc.c to contain a vsnprintf function, instead
  of relying on IRCD_BUFSIZE*2.  It might also be useful to create
  a varargs linebuf_put function to avoid vsnprintf'ing into a buffer,
  then copying that into a linebuf.

- Add dlink_list locchanops, lochalfops, locvoiced, locpeons; to
  struct Channel;
  I'm not sure if this should stay...
  On the one hand: it speeds up sendto_channel_local/sendto_common_channels
  on channels with a large number of remote users.
  On the other hand: it uses an extra 32bytes/channel + 48bytes/member,
  and also slows down MODE +ovh/-ovh slightly on channels with lots of
  local users.


*** 20010525_12 by ejb
- make version.c for vms actually work..


*** 20010525_11 by ejb
- added auto version.c support for VMS (thanks to robert byer).


*** 20010525_10 by leeh
- dont show ips of servers/admins in /trace for non-admins
- dont show ips of servers/admins in /stats L for non-admins ;p

  are there anymore?  stats c, stats ? are already done..


*** 20010525_9 by db
- removed BUF_BLOCK_SIZE no block allocator.



*** 20010525_8 by davidt
- Fix problems with >8:1 compression.


*** 20010525_7 by davidt
- Remove isatty(0) check, as it may very well be a tty now...


*** 20010525_6 by davidt
- Erp, we now set fds 3..LAST_SLINK_FD non blocking, not 0..LAST_SLINK_FD,
  somehow FreeBSD-CURRENT doesn't care, but FreeBSD-STABLE really really
  does...


*** 20010525_5 by davidt
- Add missing #include and #ifdef.. argh.


*** 20010525_4 by davidt
- change servlink to avoid using stdin/stdout/stderr, and start from fd 3,
  in an attempt to make solaris happy.


*** 20010525_3 by davidt
- Make fd_note take (int fd, char *format, ...), to avoid using sprintf
  every single place we call fd_note.
- add support for reading from the servlink control fd in ircd.
- add error messages to servlink, which are displayed to all opers on the
  local ircd...
- add zipstats (/stats Z, updated every time collect_zipstats is called
  [see /stats E]).


*** 20010525_2 by leeh
- hide ips in stats ? from opers..
  we also need to do this in trace


*** 20010525_1 by ejb
- fix compile on freebsd.


*** 20010524_25 by ejb
- add the version.c stuff also.


*** 20010524_24 by ejb
- ok, i think this is the last VMS commit for a while.
  it should work fine .. updated the docs (README.VMS) too.


*** 20010524_23 by ejb
- VMS support. not SERVLINK yet, still working on it ..
  however, we can now link a VMS server, and it'll work.


*** 20010524_22 by davidt
- Ugh. revert the last commit, we don't have the capab from the remote
  server until it recognises the CRYPTSERV command, so we can't do that
  must get more sleep....


*** 20010524_21 by davidt
- test for ENC capab before trying to create an encrypted link, else
  the remote server doesn't respond to CRYPTSERV, and we sit there for
  a while and time out...


*** 20010524_20 by davidt
- add cryptlinks commands to STATIC_MODULES list

*** 20010524_19 by davidt
- oops, miscounted a } in my fix, so cryptlinks + ziplinks broke.
  really really fix it this time. heh. I'm tired after a day of debuging
  that evilness... :)


*** 20010524_18 by davidt
- hmm, forgot to commit this... remove outdated @SSL_*@ stuff from
  contrib/Makefile.in


*** 20010524_17 by davidt
- Remove some of the evil debugging stuff...
- Tidy up the code


*** 20010524_16 by ejb
- SERVLINK support for VMS.


*** 20010524_15 by davidt
- EVIL EVIL EVIL EVIL EVIL EVIL bug. I'm stupid.
- I'll tidy up the mess i made of this code in a minute, but I can barely
  beleive I found that bug, so I'm committing the fix now.


*** 20010524_14 by davidt
- erk, turn off slink-*-logs by default, since they could easily become
  huge...
- also select different data to be logged, since the problem seems to be
  100% crypt related, now just log data pre/post encrypt/decrypt, instead of
  as its read from the ircd, and as its written to the wire..


*** 20010524_13 by davidt
- Fix compiler warnings in servlink

*** 20010524_12 by davidt
- ick, commit _working_ IO logging support....


*** 20010524_11 by davidt
- use checkError instead of a bunch of tests against EAGAIN/-1/0/etc,
  the code should now: a) work on VMS, b) look slightly cleaner
- add optional (#define'able) IO logging in an attempt to track down this
  evil bug where decryption fails for random blocks of data.
- add asserts to try to find said bug.
- move two break;s inside an #endif


*** 20010524_10 by androsyn
Fixed for a very stupid buglet that would treat 3ffe:x:x::1 as ::1




*** 20010524_9 by ejb
- more VMS support.
  ircd.exe now builds and runs, and accepts clients.
  still servlink left to do.


*** 20010524_8 by davidt
- Fix core in HasID()


*** 20010524_7 by db
- removed the SYSLOG for the debug block allocator, there is no more
  block allocator
- fixed typo in TODO



*** 20010524_6 by davidt
- Fix buffer overflow in s_serv.c setting fd_note stuff
- Tidy up servlink code more in an attempt to find the weird and
  evil bug which is in there somewhere...


*** 20010524_5 by kreator
- fix self-referencing in README.FIRST :-)


*** 20010524_4 by toot
fixes a couple of small compile warnings in adns


*** 20010524_3 by kreator
- fix small typo in example conf (comRession options :-)


*** 20010524_2 by leeh
- %u -> %lu
- %d -> %ld
- This broke more stuff than it fixed.. theyre fine like this ;p


*** 20010524_1 by ejb
- IRCD.EXE now compiles on VMS.  servlink not working yet,
  nor openssl etc. it doesn't seem to run after it compiles either.


*** 20010523_11 by davidt
- Add slightly more user-friendly error messages to m_cryptlink.c
- Fix stupid bug where both fd_note's were set on the same socket.


*** 20010523_10 by davidt
- MISSING_SOCKPAIR support, for systems which don't support SOCKPAIR,
  use individual (unidirectional) pipes to communicate with servlink.


*** 20010523_9 by davidt
- fix non-openssl build

*** 20010523_8 by jdc
* Fixed implicit decl. of bzero(3).



*** 20010523_7 by jdc
* Changed a whole slew of long int references (%ld and %lu) to
  %d or %u.  Most of these went alongside channelts, which is
  defined as time_t.



*** 20010523_6 by leeh
- kserver -> cryptlink


*** 20010523_5 by davidt
- Fix gettext detection


*** 20010523_4 by davidt
- Fix for an encrypted/compressed recvq overflowing the linebuf that
  it is stuffed into until we can hand it off to servlink to be decrypted
  into something that we _can_ parse into lines, since it may very well not
  include any \r\n chars....


*** 20010523_3 by davidt
- Remove extra 'depend:' line
- Tidy up servlink code slighty


*** 20010523_2 by davidt
- Add check for openssl >= 0.9.6
- Convert servlink to the new dependency system


*** 20010523_1 by toot
fixed a format error, and a couple of compile warnings


*** 20010522_7 by ejb
- better  make depend, no longer uses .depend;


*** 20010522_6 by davidt
Big commit of cryptlinks_ng-pre6b.diff.

There's only two remaining known issues with the servlink/cryptlink/ziplink
code, and maintaining patch sets is becoming lots of work, so I'm committing
this.  I think everyone agrees this should be in before 7.0 anyway, so it
should get as much testing as possible in the tree...

Various things done:
- Added servlink, external process for server<->server links.
	Known issue: decompression buffer can be filled, and the servlink
		process will abort.  Need to flush the output then start
		decompressing again, as increasing the size of the output
		buffer beyond *6 is getting silly.
- Added hooks to configure.in to detect zlib.
- Fixed configure.in to detect openssl more sanely.
- Added cryptlinks support to ircd/servlink
	Known bug: DES/56 and 3DES/168 doesn't work between hybrid-7 and
		hybrid-6 servers.  This should be fixed by an update to
		the hybrid-6 patch.
- Updated example.conf
- A few other bugfixes I can't remember, no doubt.



*** 20010522_5 by davidt
Directory /cvsroot/ircd-hybrid-7/servlink added to the repository


*** 20010522_4 by toot
. changed /list so vchan Id's show just before the topic, instead of 
  in the channel name
. renamed a variable in channel.h that was just 'blah' :)


*** 20010522_3 by toot
renamed num_bed to num_mask, there's no +d mode now


*** 20010522_2 by toot
added  those tags properly, :P


*** 20010522_1 by toot
updated some docs slightly, and added a couple of CVS id tags


*** 20010521_3 by a1kmm
- Removed efserv from the ircd tree, it is imported into its own tree.


*** 20010521_2 by a1kmm
- Added the yucky buggy efserv code I have so far. At least it is a start.


*** 20010521_1 by a1kmm
Directory /cvsroot/ircd-hybrid-7/efserv added to the repository


*** 20010519_5 by davidt
Remove duplicate 'modules' entry in SUBDIRS=


*** 20010519_4 by a1kmm
*sigh* yet another commit, we do check in sendnick_TS after all. Hopefully
the last commit for this bug...


*** 20010519_3 by a1kmm
- Made client_burst_if_needed check the target actually is a client :)


*** 20010519_2 by a1kmm
- Had second thoughts about my last commit - now we burst the client sending
  the message if necessary. Also changed all of the functions. Note however
  that we still need to change more of the functions to use this new functionality
  by passing the source_p instead of client_p.


*** 20010519_1 by a1kmm
- Don't send modes to lazy link clients for channels when the client doing
  the mode change hasn't been burst. This is a pretty ugly kludge as the
  mode is simply not sent(which could result in a desync!) but it is better
  than having the mode dropped and the client sending it killed.


*** 20010518_1 by db
- removed mtrie doc from index.txt



*** 20010517_12 by lusky
- added some missing docs to the index


*** 20010517_11 by lusky
- revved patchlevel to beta5


*** 20010517_10 by db
- resolved conflict in CVS oopsies



*** 20010517_9 by lusky
- revved patchlevel to beta4


*** 20010517_8 by leeh
- make klines come from users too.. this simplifies things massively

  a side effect being all remote klines prior to this wont work :P


*** 20010517_7 by toot
simplifies things in ms_gline a little more


*** 20010517_6 by jdc
* Admins permitted to do Dlines with bitmasks as small as /8.



*** 20010517_5 by leeh
- theres no reasons why glines cant use the opers nick.. it simplifies
  things massively.. well, if we didnt support hyb6 that is ;)

  this will break older hyb7s, buts its better now than later


*** 20010517_4 by toot
it was okay before, actually :P


*** 20010517_3 by toot
fixed -6 style glines so they are treated more line -7 style..


*** 20010517_2 by toot
added compatability with hyb-6 glines


*** 20010517_1 by a1kmm
- Removed unused local variable.


*** 20010516_5 by leeh
- tis the season of goodwill comments, and all that :)


*** 20010516_4 by leeh
- let halfops see and set +eI


*** 20010516_3 by leeh
- check parc == 5, because if we trust hyb6 glines.. we'll gline the
  oper instead of the target..


*** 20010516_2 by leeh
- optimised the sjoin table slightly.. +nt should really be first ;)
- sendto_serv_butone -> sendto_cap_serv_butone() in m_gline..


*** 20010516_1 by toot
. some misc cosmetic cleanups
. fixed CHANMODES token.


*** 20010515_9 by leeh
- added the looking up hostname msg back


*** 20010515_8 by leeh
- more formatting things for server kills..


*** 20010515_7 by leeh
- fixed logging for kills..


*** 20010515_6 by db
- fixed core on /rehash



*** 20010515_5 by toot
slight mistake in ms_version


*** 20010515_4 by toot
. show ISUPPORT numeric on remote /version (will be 105 rather than 005)
. only put the VCHANS token in ISUPPORT if disable_vchans if off


*** 20010515_3 by jdc
* Forgot a comma.  Oops.  :-)



*** 20010515_2 by db
- missing {0,0} in flags in set_final_mode. How this has worked
  so long without being spotted, is beyond me.



*** 20010515_1 by toot
removed a fixed bug from BUGS


*** 20010514_4 by androsyn
Fixed borked version of configure that was built with a beta version of autoconf.
It broke IPV6 support..go figure..


*** 20010514_3 by toot
/trace <nick> didn't know the time


*** 20010514_2 by toot
. unregged clients can have a nick sometimes (NICK before USER), so changed
  m_admin back and fixed it.
. names with no params was showing the ENDOFNAMES numeric for each channel
  it should just show it once, at the end with a * ..


*** 20010514_1 by a1kmm
- Fixed "ievil's core".



*** 20010513_3 by leeh
- unregged clients wont have a nick..


*** 20010513_2 by davidt
Fix core on /close


*** 20010513_1 by db
- This should fix the multiple numeric 366's
- some cleanups



*** 20010512_6 by db
- missing int duh



*** 20010512_5 by a1kmm
- Removed 2 pointless asserts.


*** 20010512_4 by db
- tidied up vchan_show_ids
- don't show <secret> twice



*** 20010512_3 by toot
put PREFIX's in the correct order, in 005 numeric.


*** 20010512_2 by toot
clearchan was calling remove_user_from_channel with the wrong number of args..


*** 20010512_1 by kreator
- commited fl_'s patch:
  make cjoin take account of disable_vchans=yes;


*** 20010510_2 by fl_
- we shouldnt really send CAP_ZIP.. we can actually support it but
  in theory we dont, the code is left in, just the cap sending


*** 20010510_1 by a1kmm
- Fixed a major memory leak.
- Added some better memory debugging code for dlink_nodes.


*** 20010509_2 by a1kmm
- Re-added androsyn's fix for blocking on one list and neglecting the others.
  Didn't realise that it had been recently reverted. We should no longer go
  up to 100% CPU with the graduated usleep code.


*** 20010509_1 by a1kmm
- Added a graduated delay system to stop the idle or lowly loaded ircd from
  soaking up too many clockcycles, and removed some of the unneccessary
  calls to set_time/time.


*** 20010508_3 by db
- removed more inflammatory language from comments.



*** 20010508_2 by ejb
- remove the somewhat controversial message wrt Path: in kill messages.


*** 20010508_1 by fl_
- this:
Try setting the delay rate for the poll idleclient to 0 like the rest of 
the poll() stuff is...

seemed to make ircd spin out of control.. it was stuck on 100% cpu..
so its reverted, dunno what this actually did though..


*** 20010507_3 by androsyn
Fixed various minor issues with autoconf...


*** 20010507_2 by fl_
- #if IPV6 -> #ifdef IPV6


*** 20010507_1 by toot
removed show_failed_oper_id cause it was redundant.. failed_oper_notice does
the same thing


*** 20010506_1 by androsyn
Seems I broke the modules install process..this fixes it now..


*** 20010505_6 by androsyn
Try setting the delay rate for the poll idleclient to 0 like the rest of the poll() stuff is...


*** 20010505_5 by androsyn
Added support for statically linked modules within autoconf.  Use
./configure --disable-shared-modules to get statically linked ones...



*** 20010505_4 by fl_
- tidy up the IsOper() checks


*** 20010505_3 by fl_
- removed cap_vchan, as we dont actually use it anywhere..
- added mo_stats()


*** 20010505_2 by fl_
- slight update :P


*** 20010505_1 by fl_
- till make install takes account of the paths in config.h, people shouldnt
  change the paths in there.. especially not the modules ones.. so warn
  them not to :P


*** 20010504_3 by db
- major major stupid buffer overflow in send.c MEA CULPA fixed.



*** 20010504_2 by androsyn
Added a check for spoofs to prevent moron server admins from doing stupid
things like having spoofs in excess of HOSTLEN.


*** 20010504_1 by fl_
- dont burst persistant channels
- destroy_channel() if the user is parting.. persistant chans should only
  be for splits imo, else users are just gunna break their channels ;)

  ideally this should be extended to quits which arent a netsplit.. but
  ill see about that another day :P


*** 20010502_10 by androsyn
I think I really found the source of fl_'s cores.  Basically what was
happening was we were not resetting the callback to NULL like we do 
for s_bsd_kqueue/s_bsd_devpoll so I *think* we were calling the callback
multiple times.


*** 20010502_9 by toot
added WALLCHOPS to 005 numeric, as we support /notice @#channel


*** 20010502_8 by toot
updated PREFIX format in 005 numeric, and added CHANMODES=A,B,C,D
see supported.h


*** 20010502_7 by androsyn
$5 says this fixes fl_'s cores...I don't think this is the right fix
though..


*** 20010502_6 by androsyn
Undo my send_queued_write() hack..


*** 20010502_5 by androsyn
Another assert() to try to catch fl_'s cores...


*** 20010502_4 by a1kmm
- added hostmask docs.


*** 20010502_3 by a1kmm
- Minor fix on my last commit, for when >1 line is read at the same
  time...


*** 20010502_2 by a1kmm
- Sanified the flood checking and sendq checking code a little.


*** 20010502_1 by db
- removed caching of channels for lazylinks in mode and topic
  I think those were the two flame was complaining about.



*** 20010501_3 by ejb
- typo.


*** 20010501_2 by ejb
- fixed STRING types in getopt.c.


*** 20010501_1 by db
- removed bogus assert() its trying to call that callback, it can't be NULL



*** 20010430_9 by fl_
- %c -> %s


*** 20010430_8 by fl_
- stats fixy thing :P


*** 20010430_7 by toot
use the parser to do the parc check in m_stats instead..


*** 20010430_6 by jdc
* Previous changes to message.tab applied to these two .pos.



*** 20010430_5 by jdc
* RPL_ENDOFSTATS was returning the requested STATS character/word as
  a %c, while the argument passed in m_stats() was a string.  All
  fixed (%c --> %s).



*** 20010430_4 by jdc
* m_stats() did not check the parc count.  Doing a /STATS without any
  arguments could result in the server just sitting there until some
  output was sent, then the connection would be severed.
* Please note the change to message.tab (in another update) -- this is
  CRUCIAL to the above fix.
* Added descriptions for the STATS letters in stats_let_table[].  This
  will be used (in the future) for for something like /STATS HELP,
  once word-based STATS are added.



*** 20010430_3 by jdc
* Added /QUOTE ACCEPT documentation to opers.txt.



*** 20010430_2 by ejb
- call valid_comment even for IPv6.. 


*** 20010430_1 by a1kmm
- Fixed the compile warnings with fl_'s stats code.


*** 20010429_6 by androsyn
Removed the assert()'s andrew had put there.  This seems to get rid of the
cores. But now I need to figure out why poll() performance sucks so bad,
other than it being poll() which sucks by nature.


*** 20010429_5 by androsyn
Hmm..okay..a slightly different assert...


*** 20010429_4 by androsyn
Added "yet another assert"(tm) to track down fl_'s core.


*** 20010429_3 by fl_
- couple of small bugs in stats
- replaced unused things in stats Q with "*"
- exempt {}; dont have reasons..


*** 20010429_2 by fl_
- massive rewrite of m_stats.c to use a table based lookup for stats..
  this means we can now support /stats auth etc.. dont attempt it yet tho,
  the table hasnt been filled with the things ;)


*** 20010429_1 by androsyn
Fixed to make solaris 8 compile properly for IPv6


*** 20010428_9 by a1kmm
- Added some more asserts to fd code to try and catch fl_'s core at an
  earlier and more useful stage.


*** 20010428_8 by fl_
- dont warn ops that halfops are trying to kick them, we dont do it for
  voices/peons, so why start now?


*** 20010428_7 by jdc
* Added support for -pidfile command-line argument, a la toot.



*** 20010428_6 by fl_
- send kickers nick, not servername


*** 20010428_5 by jdc
* Bump up the _version string.



*** 20010428_4 by jdc
* A non-opped client in a +a channel should be shown the local server
  that kicked them, NOT their own nick (eg. me.name  vs.  who->name).
* Server-based kicks (for things like CLEARCHAN) now show the actual
  server that did the CLEARCHAN (previously it showed your own nick).
  The reason for this is somewhat political (sptr->name vs. me.name):
  in the case of oper abuse, the user should have *some* idea of what
  server requested the CLEARCHAN, in the case of an oper getting out
  of control.  This therefore provides some security for the user who's
  channel just got cleared.



*** 20010428_3 by fl_
- you know, I just hate irc clients.


*** 20010428_2 by fl_
- shouldnt really send our name, then the path, then the reason ;P


*** 20010428_1 by habeeb
Modified NAMES to work with vchans.  "NAMES <channel> [vkey]".  If no
vkey is specified it will check if you are on <channel> or one of its
vchans and default to that channel.  Otherwise a list of vchans are
specified.  "NAMES <channel> !" will give a list of channels since
the key is invalid.  It should not break current clients.


*** 20010427_6 by habeeb
Fix for vchan listing bug.


*** 20010427_5 by habeeb
Fix for similar bug that was in WHO.


*** 20010427_4 by habeeb
Took out an #undef I missed in 20010424_6


*** 20010427_3 by habeeb
Switched channel_chanop_or_voice() around to return half ops before voice.


*** 20010427_2 by habeeb
Fix for WHOIS buffer overflow in listing channels pointed out by pasky.


*** 20010427_1 by fl_
- you cant add brackets if the kill isnt yours :)
  if you do your gunna end up with a reason like ((((((ghost)))))) ;P


*** 20010426_6 by jdc
* Fixed unused retval variable in kq_update_events() via #if 0.
* In kq_update_events(), kqoff was never set to 0 correctly (typo;
  someone had "== 0", not "= 0").



*** 20010426_5 by jdc
* Fixed unused path declaration via #if 0.
* ms_kill() lacked a "(%s)" for the kill reason at the end of the function.



*** 20010426_4 by fl_
- ok, this should fix kill
  parv[2] contains both path and reason.. to save us splitting parv[2] up
  to get at the path.. we generate the path ourselves (user who sent
  the kills server/host/ident/nick).. 


*** 20010426_3 by fl_
- tiny fix to the parser


*** 20010426_2 by toot
added max_accept to ircd.conf.. to replace hard coded MAX_ALLOW


*** 20010426_1 by kreator
- no need to ask for getopt() in README.FIRST, since we provide one (ejb-s
  fix)
- added NetBSD in tested platforms (I run hyb6&7 there)


*** 20010425_6 by fl_
- ifdef 0 -> if 0


*** 20010425_5 by kreator
- missing "" for vhost in convertconf, together with missing `;' in
  oper_umodes line.


*** 20010425_4 by toot
added make_daemon in ircd.h to kill a compile warning..


*** 20010425_3 by lusky
- revved patchlevel to beta3
- moved dserv out of the tree


*** 20010425_2 by db
- optimized kqueue a bit



*** 20010425_1 by androsyn
Fix so that kqueue will compile on FreeBSD 4.2 which doesn't have
NOTE_LOWAT.



*** 20010424_14 by habeeb
Adding me, because I'm bored.


*** 20010424_13 by androsyn
Please test this.  Basically we try send_queue_write() before entering
select/poll/kqueue now.


*** 20010424_12 by androsyn
Really fix the ::1 stuff. It seems that the COMPAT macro doesn't see ::1 as
a ipv4 compatible address.


*** 20010424_11 by androsyn
Fixed the ::1 stuff for good :)


*** 20010424_10 by db
- committed Alfred Perlsteins (zb^3) changes to s_bsd_kqueue.c
  tested.. 



*** 20010424_9 by androsyn
The ::1 bug is fixed by mapping it to its ipv4 counterpart..


*** 20010424_8 by androsyn
This hack will map ::1 to 127.0.0.1 along with any other IPv6 addresses that
have the upper 96bits set to 0.


*** 20010424_7 by androsyn
Fixed coredump if /etc/resolv.conf is unreadable.  We log the event to the
logfile right now.  I need to move the dns init up further in the init
process so we can output to standard error.


*** 20010424_6 by habeeb
Changed daemon() to make_daemon() to fix printing of startup messages,
removed code to check for daemon() in configure, cleaned up a few things.


*** 20010424_5 by jdc
* Removed kqueue bug; recent cvs seems to have fixed it.



*** 20010424_4 by db
- this fixes kqueue. over-ride low water with a NOTE_LOWAT
  setting low water to 1 as in the man page. (thanks to adrian for
  pointing me to this)



*** 20010424_3 by jdc
* Fixed implicit decl. of kill(2) (lacked signal.h include)



*** 20010424_2 by androsyn
/dev/poll now works.  Somebody should check and see if this fixes kqueue as well     


*** 20010424_1 by androsyn
Fixed a potential buglet where we ignore EAGAIN when returning from recv()


*** 20010423_1 by db
- removed docs for code we have removed
- hint. someone should write up a doc on how the hash kline code works. hint



*** 20010422_1 by fl_
- added back oper accountability for KILL's.. if the client we're killing
  is opered, we should tell them who sent the kill..


*** 20010421_6 by toot
made stats t and stats z a bit more readable.


*** 20010421_5 by kreator
- fix example conf: we don't support cpp, but we do support .include
  "blah" and .include <blah>
- add check_pidfile() that does kill 0 ircd_pid from PPATH: that will
  check if there exists another daemon running and exit if it is there


*** 20010421_4 by fl_
- changed an assert to a simple warning.. its a bit too highly sensitive
  to have an assert there..


*** 20010421_3 by fl_
- habeebs pid fix..


*** 20010421_2 by toot
undefine MEMDEBUG 



*** 20010421_1 by fl_
- switched the order of voices/halfops so theyre right..


*** 20010420_11 by fl_
- missing ;


*** 20010420_10 by a1kmm
- Fixed a deadlock when non-opped users request names on a +a channel. Fixed
  the code to work correctly too.


*** 20010420_9 by a1kmm
- Fixed K-line exemptions on oper spoofed users on rehash.


*** 20010420_8 by jdc
* Added dns_query_host and dns_query_port options to TODO list.
  These would be fantastic; some of us always wish to query on
  port 53 on a certain IP, ya know.  :-)



*** 20010420_7 by a1kmm
- Removed wrong log message that was in with the real one.


*** 20010420_6 by a1kmm
- Fixed some compiler warnings.


*** 20010420_5 by androsyn
I'm bad and added a C++ style comment


*** 20010420_4 by androsyn
Added a new at the end of the file to make Sun's cc happy.   


*** 20010420_3 by androsyn
Fixed signedness warnings with Sun's cc


*** 20010420_2 by androsyn
Added TODO for static modules


*** 20010420_1 by db
- removed function in m_names recoded m_names a bit
- made set_channel_mode_flags global
- started on cleanups for m_who, notably now using set_channel_mode_flags



*** 20010419_11 by db
- oops. peons were being shown as voiced. 



*** 20010419_10 by db
- rewrote channel_member_names finally. first cut



*** 20010419_9 by jdc
* Added kqueue bug.
* Added LL server channel existence bug.



*** 20010419_8 by a1kmm
- Fixed the warning about setting the clock back.
- Attempt to recover from a set back clock by moving the scheduled events
  back in time by the amount the clock was set back.


*** 20010419_7 by fl_
- its amazing the difference < and > make.. (ta habeeb)


*** 20010419_6 by fl_
- ops should never have their part reason removed.. 


*** 20010419_5 by fl_
- puts() could do with some \n's in there..


*** 20010419_4 by fl_
- *groan*  ok, this will make convertconf add logging/modules/general
  blocks to the ircd.conf, after its converted it..

  we should probably encourage a bit more wider usage of it too..


*** 20010419_3 by a1kmm
- Re-enabled the anti-flooding code.
- Give the user a burst for 3s at the start when they can send more stuff
  like JOINs and WHOs etc...
- Added a penalty which sets the user back as if they didn't have this extra
  burst if they try to use MODE on a channel, or PRIVMSG or PART in this
  period.


*** 20010419_2 by a1kmm
- Adding habeeb's patch to fix the antispambot code.
- Added a check on part message similar to that for QUIT to decide if the
  part reason should be allowed to be shown.


*** 20010419_1 by a1kmm
- Fixed the code to prevent redundant K-lines.
- Made sure we can always remove K-lines which are placed.


*** 20010418_7 by a1kmm
- Fixed unkline/undline to work properly with hostmasks. Still a bit messy,
  and the rehash at the end is really bad, however.


*** 20010418_6 by fl_
- beginnings of a file we can dump to users on /help.. currently
  only covers usermodes/channelmodes.. additions are welcome :P


*** 20010418_5 by a1kmm
- Fixed hostmask code to work with exempt{} blocks.


*** 20010418_4 by fl_
- we now have stats e.. admittedly it doesnt actually do anything yet,
  but ill sort that later


*** 20010418_3 by fl_
- framework for exempt blocks 


*** 20010418_2 by jdc
* example.conf incorrect in regards to vhost="" syntax.  Fixed.



*** 20010418_1 by jdc
* Added display of pid to startup output.



*** 20010417_2 by fl_
- Eline -> ExemptKline
- Fline -> ExemptLimits


*** 20010417_1 by toot
this fixes the coredump if you did /trace with any "unknown" connections

get_class_name needed to default to something rather than NULL :)


*** 20010416_1 by fl_
- minor updates


*** 20010415_2 by fl_
- updated bugs with the msglocale stuff..


*** 20010415_1 by toot
a few little cleanups


*** 20010414_1 by davidt
Fix non OPENSSL build


*** 20010413_2 by davidt
- Add CRYPTLINK (formerly KSERVER) support.
  It seems to be mostly working, however:
  * The protocol will probably change next week, to be compatable with
    hybrid 6, etc..
  * There's a few possible bugs I can see in the code, but there's no
    sane way of fixing them until I (or someone else, hint hint :),
    creates a 'helper' process for server<->server links, which
    handles ziplinks/cryptlinks etc.


*** 20010413_1 by fl_
- added a warning about the order of auth blocks


*** 20010411_4 by db
- formatting fix



*** 20010411_3 by fl_
- added kre to contributors


*** 20010411_2 by kreator
- oops, forgot to reinit lineno and include_stack_ptr to make lexer
  reentrant.


*** 20010411_1 by a1kmm
- oops, forgot a DupString in parsing deny blocks in the parser. This fixes
  it.


*** 20010410_3 by kreator
Made .include for lexer.


*** 20010410_2 by db
- RPL_TRACEUNKNOWN third arg should have been a %s, remnant of
  the class # to class name move. oops. reported by Joao Luis Marques Pinto
  Lamego@PTlink.net



*** 20010410_1 by a1kmm
- Oops, do not delete tklines on rehash!
- Fixed testline a little to match "user@*" I-lines when an IP address is given.


*** 20010409_9 by davidt
Re-adding

*** 20010409_8 by davidt
Please work?


*** 20010409_7 by davidt
please work..


*** 20010409_6 by fl_
- added serverhiding checking to commands that can be used remotely..


*** 20010409_5 by a1kmm
- Removed a htonl that shouldn't be there... so now vhosts should work.


*** 20010409_4 by a1kmm
- Think that this gets the endianness right for the hash.


*** 20010409_3 by a1kmm
- GlobalSetOptions != ConfigFileEntries. Always check stuff works before you
  commit :)


*** 20010409_2 by a1kmm
- Always reply locally when a non-oper tries to use PING to ping a server
  and hide_server is on.


*** 20010409_1 by a1kmm
- Did my hashtable lookup code for hosts/addresses properly - now replaces
  patricia tries too, and provides proper IP parsing to replace is_address
  that works with IPV4 and IPV6. This also means that both CIDR and ip.*
  work with both IPV4 and IPV6.
- Changed the parser a little, so that we now simplify things by putting
  IP addresses in quotes. Deleted the complicating user=a@b vs ip=... ipv6=...
  thing for auth{} blocks, we now always do user=a@b, but we can put IPs(both
  V4 & V6) into the auth{} block. This means we can specify a username too, and
  simplifies things, although it does make unchanged older confs incompatible.


*** 20010408_4 by davidt
After reformatting kserver.txt, I couldn't resist rewriting bits of it,
so I decided instead of overwriting A1kmm's version, I'd add an
alternative..

I broke it into 2 seperate pieces, a KSERVER public key authentication
system/capab, and a MSGHASH capab (which requires KSERVER) for verifying
inter-server commands...

They both require lots of work :)


*** 20010408_3 by davidt
- Tidied up kserver.txt a little.

  Mainly formatting changes, but I also adjusted some grammar that took
  me 5 minutes to parse :)



*** 20010408_2 by fl_
- moved the bogus TS message to FLAGS_DEBUG
- updated opers.txt


*** 20010408_1 by fl_
- fixed a small bug


*** 20010407_1 by toot
/invite was showing the secret vchan name to users, cleaned m_invite a bit too
fixed "voodoo" invites on root chans


*** 20010406_2 by fl_
- updated todo a bit..


*** 20010406_1 by a1kmm
- Started the long process of reviewing and tidying up/documenting the adns code. Unfortunately, there is still
  much more to do. By doing this, hopefully we will make it easier to find and fix some of those adns cores
  that keep happening.


*** 20010405_2 by androsyn
Added a few asserts to check for NULL callbacks. I'm still not sure why this
is happening though.


*** 20010405_1 by a1kmm
- Added a proposed KSERVER protocol which will reduce the risk of password sniffing or connection hijacking
  attacks against servers.


*** 20010404_3 by androsyn
Additional changes for static modules.  We just need to make the build
system deal with this now.


*** 20010404_2 by androsyn
First half of my attempt to do statically loaded modules.  I suppose that
either all or none with static/dynamic modules, for the sake of simlicity.


*** 20010404_1 by androsyn
Fixed a particular adns core..i don't think this was the one walter was
talking about.


*** 20010403_4 by ejb
- fixed getopt.


*** 20010403_3 by ejb
- changed getopt.h to ircd_getopt.h.


*** 20010403_2 by androsyn
Fixed what could be a potential bug with the adns code.


*** 20010403_1 by androsyn
Fixed adns /rehash core..


*** 20010402_1 by db
- Edward, could you review this? 
  this fixes botch with getops.h



*** 20010401_7 by toot
removed some old stuff from the parser


*** 20010401_6 by toot
somemore ugly %lu's changed back to %d.


*** 20010401_5 by toot
fixes a couple of compile warnings in ircd.c..


*** 20010401_4 by ejb
- make an error be printed for unknown arguments.
- add 'ayb' to message-customisation.txt.



*** 20010401_3 by ejb
- some fixes to the getopt stuff.


*** 20010401_2 by ejb
- added first stab at new command line arguments system..
  not yet tested well, seems to work ok though.


*** 20010401_1 by ejb
- fix for broken daemon(), caused abort upon start.


*** 20010331_7 by db
- one more batch of cleanups on s_debug.c



*** 20010331_6 by ejb
- added debug.c for debugging. not used yet..


*** 20010331_5 by db
-more cleanups to s_debug.c



*** 20010331_4 by ejb
- more verbose initialisation messages.


*** 20010331_3 by toot
fixes some compile warnings


*** 20010331_2 by ejb
- fixed make .include checking stuff to actually work;
  rebuilt dependencies.


*** 20010331_1 by ejb
- remove 'always on' things from s_debug.c
  No point putting them in if they never change..


*** 20010330_3 by db
- removed the /rehash GC from opers.txt
- cleaned up s_debug.c a tad more, added in stats for bans, invex, except
- renamed cryptic variable names into more self documenting ones in
  s_debug.c



*** 20010330_2 by ejb
- added kre's /* */ comment code to the lexer
- properly fixed /rehash gc core (what's the point
  in keeping it and not making it do anything? just
  remove the whole thing).


*** 20010330_1 by androsyn
Removed a reference to the block allocator in m_rehash.c that prevented it
from being loaded.


*** 20010329_3 by fl_
- never do testing in BitchX..


*** 20010329_2 by fl_
- transferred the masking from channel.c for /names to m_who.c for
  /who..  we now randomly poll /who lists too.. 


*** 20010329_1 by db
- cleaned up s_debug.c memory reporting somewhat, there is still
  a duplicate user memory report to cleanup
- cleanedup the linebuf.c code a bit, removed unnecessary gotos (*fwap* adrian)
- bsd make does not like not having quotes around .includes, I have
  been bad, and temp commented them out for now...



*** 20010328_6 by db
- more cleanups



*** 20010328_5 by androsyn
Fixed adns core.  Somebody accidently forgot to set the callback for
auth_dns_callback().  -Wall caught this rather easily. BTW -Wall should
probably be turned on for gcc by default.


*** 20010328_4 by fl_
- changed lots of include ".depend" into include .depend.. 


*** 20010328_3 by fl_
- we were potentially joining a user to a channel more than once.. not
  a good thing..


*** 20010328_2 by db
- removed blalloc.c and blalloc.h



*** 20010328_1 by db
- Massive commit to remove blalloc.c code, first pass through
  When we first did blalloc, systems did not use block allocators for
  malloc, now they all do. blalloc.c/blalloc.h have now outlived their
  usefulness. 



*** 20010327_1 by androsyn
Fixed stupid connect bug...the block heap doesn't memset() our
blocks..grr...


*** 20010326_2 by ejb
- more messages for ayb.po


*** 20010326_1 by ejb
Someone in a #ircd-coders far, far away..

BOOM!!

<Dianora> What happen?
<Rodder> Someone set up us the IRCD!!
<Rodder> Main server turn on.
<Dianora> It's you.
<madmax> How are you client_ps?
<madmax> All your root chptr are belong to us!
<madmax> You have no chance to rehash
<madmax> Make your time.
<madmax> Ha Ha Ha.

- added ayb.po
- fixed custom.po



*** 20010325_1 by davidt
Reformatted example.conf to 80 chars wide

*** 20010323_9 by ejb
- removed CPP for now.


*** 20010323_8 by ejb
- updated example.conf to match the new parser.


*** 20010323_7 by ejb
- added cpp support to the parser.
  we now pass ircd.conf through 'cpp -P' before we pass it
  to lex.  this could possibly be implemented slightly better
  (esp. error checking).



*** 20010323_6 by ejb
- add support for decades, centuries, millannia,
  and terabytes in the parser.


*** 20010323_5 by toot
couple of fixes for fussy compilers


*** 20010323_4 by ejb
- add support for '1 minute 30 seconds' and suchlike in the parser.


*** 20010323_3 by ejb
- add a simple arithmatic parser to ircd.conf.  it understands
  +, -, *, / and () precedence.



*** 20010323_2 by ejb
- duh. i like |.  don't you like |? | are gooooooood.



*** 20010323_1 by ejb
- support for saying '20 megabytes' and '5 hours' and such like
  in ircd.conf.  for some reason 'sendq=100;' to mean 100kb isn't
  working.. should be fixed before release.



*** 20010322_4 by ejb
- commit send.h as well..


*** 20010322_3 by ejb
- add sendto_match_vacap_servs(), and make set_channel_mode
  use it.  not tested yet ..


*** 20010322_2 by androsyn
Forgot an argument to inetntop()


*** 20010322_1 by androsyn
This should fix /trace for the IPv6 case..


*** 20010321_3 by ejb
- turn uint32_t into u_int32_t and make configure check for it.


*** 20010321_2 by ejb
- warn if user specified no $MAKE to configure..


*** 20010321_1 by ejb
- detect in configure how we should include files in Makefile.
  This isn't a perfect test, but it should work..


*** 20010319_4 by toot
/away flood control was a bit harsh


*** 20010319_3 by androsyn
Adds our own definition of INADDR_LOOPBACK if it wasn't defined by the OS
headers. Don't you love hacks around hacks. The first being the hack
checking if the nameserver was 0.0.0.0, if so, set the nameserver to
127.0.0.1.


*** 20010319_2 by toot
restored some stuff in config.h that'd been changed..  and synced config.h.dist


*** 20010319_1 by toot
. moved anti_spam_exit_message_time to ircd.conf
. don't add "Client Exit: " if the quit message was blank anyway.


*** 20010318_1 by madmax
RPL_WELCOME now says:
Welcome to the NETWORK_NAME Internet Relay Chat Network 

mIRC actually parses this and puts the NETWORK_NAME string into $network


*** 20010317_1 by androsyn
This file was left over from when I merged into the tree.  Its not need for
anything.


*** 20010316_4 by db
- Submitted on behalf of Walter Campbell



*** 20010316_3 by androsyn
Somebody used the boilerplate from vchannel.c and forgot to change the
filename on the top. Yes I know I'm nit-picking :)


*** 20010316_2 by fl_
- another minor fix..


*** 20010316_1 by fl_
- minor fix to the oper_umode stuff..


*** 20010315_4 by db
- This alleviates the high counts found in the block allocator in profiles.
  The problem was a # of block count that was set way too low.
  128 for BUF_BLOCK_SIZE means we allocate a bit map of 128 bits
  which means for many allocated linebufs, we end up with a series
  of smallish Block's with 128 bit maps... 
  In reality, the block allocator should be rewritten to embed a
  "hint" into the allocated memory as to where the returned memory
  block should go. There are a few other easier to do optimizations
  as well. It has been pointed out that modern OS's have now caught up
  and now use block allocation for malloc, if thats true, the block
  allocator code might well be obsolete.
  


*** 20010315_3 by db
- print all channel member lists at once in names
  this hides somewhat better who the chanops are.
  Its not optimized at all at the moment, fact is its terrible.
  If someone optimizes it before me, great. I won't mind. ;)



*** 20010315_2 by fl_
- made jupe use exit_client()
- added a hack for the long reason core.. I made into into a topiclen,
  until someone wants to change it to something that wont core like
  ircnsprintf when its >reallen


*** 20010315_1 by fl_
- tidied up whats-new a lot.. split the stuff into sections etc :)


*** 20010314_8 by toot
this fixes the bug that made join #x,0 put you in #x0


*** 20010314_7 by fl_
- added a config file option for disabling vchans.. added by request but
  I dont like it :|


*** 20010314_6 by androsyn
I forgot a ; on the strlcpy prototype.



*** 20010314_5 by androsyn
Adds strlcat and strlcpy for systems that don't have them.  configure now
checks for the existance of such functions on the system. 


*** 20010314_4 by davidt
- Fix multiple user=""; lines per auth{} block slightly.
- Allow multiple user=""; lines per operator{} block.
- Documented the above.


*** 20010314_3 by fl_
- moved oper_umodes (modes set on /oper) from config.h -> example.conf
  with a check if there isnt one in the config..
- mebbe we should allow this per oper block on hyb7.1?


*** 20010314_2 by androsyn
Fixed devpoll support so it would actually compile on Solaris.  I'm not sure
if it works yet or not though.


*** 20010314_1 by toot
. let halfops set +v and +k
. removed some unused variables, and moved one of trhe PERSISTANT_CLIENT
  ifdefs to kill a compile warning ;)


*** 20010313_5 by davidt
- Allow multiple user="..."; lines per auth{} block...
  (oper{}, etc. blocks can probably be changed to work the same way
   quite easily, I'll look at it tomorrow, to see what would actually
   benefit from it)


*** 20010313_4 by ejb
- don't build m_error.c as a module, it has to be static for now. 



*** 20010313_3 by fl_
- ripped the flood bit out of config.h, also if they dont set a config
  option, we default to 8 in ircd.c, which is what was in config.h


*** 20010313_2 by fl_
- added min_nonwildcard to config for the minimum real chars you need for
  a gline/kline (remote/local)
- moved the set options below the config file reading in ircd.c
- instead of #define FLOODCOUNT in config.h.. we now set the default on
  startup in the config.. I think ill try doing of much as this as I can,
  so config.h gets smaller :)


*** 20010313_1 by adrian


initial /dev/poll support, again ripped from my devpoll code in a
squid branch.

/dev/poll is the solaris solution to the suckiness of poll/select
on large/active FD sets. Its kind of like kqueue but using a poll
interface. My (quick) tests show that its actually rather nifty
with large FD sets, so this should make hybrid-7 Not Suck(tm) under
Solaris 7/8.

I believe there's a linux patchset to give the kernel /dev/poll,
but I hear its crap. heh.

This code isn't guaranteed to even compile on a solaris box yet,
but I wanted to get it in anyway. It doesn't break a "default"
build (ie without --enable-devpoll). I promise to fix it in a few
hours. :)



*** 20010312_3 by androsyn
semicolons are our friends. I like semicolons, don't you :P


*** 20010312_2 by a1kmm
- Fixed fl_'s revert and fixed the klines bug.
- Please not that persistant clients are temporarily back in, but please don't try and remove them by reverting
  because I can guarantee it will break more stuff than it fixes, like last time. These things are best
  removed manually, as it is silly to revert days of work for a little thing like a "hme" to should be a
  "hmc" as one done last time. However, this being an open source project, we probably don't want to actually
  hide our code from the public - how about if we go for:
#ifdef PERSISTANT_CLIENTS
#error Persistant clients aren't finished yet.
...
#endif
 which should stop people defining but not block people from seeing it. Furthermore, we should not so much
 as put a #undef PERSISTANT_CLIENTS or /* #define PERSISTANT_CLIENTS */ in config.h or anything, as that is
 just asking people to define it. Or we could just manually delete them(which will be easy as they are all
 wrapped in #ifdef PERSISTANT_CLIENTS except a few harmless things in the lexer/parser.


*** 20010312_1 by androsyn
Removed remains of release_dns_client_reply()


*** 20010311_11 by wcampbel
Removed myself from the Hybrid-Team, moved myself down to a contributer


*** 20010311_10 by toot
memory.c needs restart.h (recommit)


*** 20010311_9 by wcampbel
Inglish's Norwegian translation is now fixed and working.


*** 20010311_8 by davidt
- Fix topic for vchans
- Recommitting the following fixes:
  * Tidied up TODO, it had a bunch of stuff in it that had already been done.
  * Multiple ports are now allowed per listen{} block.
    Note that host=""; lines must come before port=123; lines (they apply
    to any port=...; lines following).


*** 20010311_7 by fl_
- This reverts the tree to its state on the 8th

  The main reason for this is to fix klines.. which were broken in a
  hostmask.c commit.. but finding out what was wrong wouldve been
  insane.. the patch is available of what ive changed to restore it
  back with persistant clients (which this removes), and the buggy
  kline stuff..

- We need a stable tree for beta3.. not a buggy one :/


*** 20010311_6 by fl_
- undefine persistant clients by default.. is there a missing 
  messages.tab?
- we need to discuss this before any more commits..


*** 20010311_5 by fl_
- added wildcard checking for remote klines
- upped the minimum non-wildcard chars from 2 to 4.. 


*** 20010311_4 by a1kmm
- Added numeric 20 for "Your ID and key is" so we can have clients read them.


*** 20010311_3 by a1kmm
- Added a flag "persistant=yes" to CONF_CLIENT(auth{} blocks). Without this flag, you cannot become +p.


*** 20010311_2 by a1kmm
- We now expire timed out persistant connections.


*** 20010311_1 by a1kmm
- Got some basic reattaching to work, but it is not finished yet so you may not want to have PERSISTANT_CLIENTS
  defined. We also need to decide what to send on reattach, as well as a nicer way of sending the id/key.


*** 20010310_2 by fl_
- added some checking to make sure glines from other servers have enough
  none wildcard chars.. (gline *@* anyone?)


*** 20010310_1 by a1kmm
- Wrapped the +p and the detach_client stuff in #ifdef PERSISTANT_CLIENTS


*** 20010309_5 by fl_
- added rejection for the post command from unregged clients


*** 20010309_4 by davidt
- Tidied up TODO, it had a bunch of stuff in it that had already been done.


*** 20010309_3 by fl_
- dont allow clearchan from servers.. ick!


*** 20010309_2 by davidt
- oops, apparantly I forgot to commit my multiple-ports-per-listen{} patch.  Note: host= lines must now come before port= lines

*** 20010309_1 by a1kmm
- Some basic support for persistant clients(usermode +p) as well as a few general fixes here and there.
  It is late here so please forgive my bugs which are most probably there.


*** 20010308_3 by toot
removed some more ugly %lu's
memory.c needed restart.h


*** 20010308_2 by androsyn
Moved outofmemory() to memory.c from list.c.  Also updated a few comments
regarding outofmemory().


*** 20010308_1 by androsyn
Removed an #if 0'd relic that was pointing to a function in what was res.c


*** 20010307_9 by jdc
* Lacking list.h include; _free_dlink_node was implicit.



*** 20010307_8 by db
- We had forgotten to send RPL_LISTSTART



*** 20010307_7 by androsyn
More incremental progress on ziplinks.  It will send out CAPAB ZIP if 
compressed = YES in the config file.


*** 20010307_6 by madmax
Netsplits now show client quits as (irc.server.com a.server.split.from.<network>.net)
So clients pick up the split now:
 NetSplit: a.server.on.EFnet.net split from irc.efnow.net [02:44pm]

Also swapped strcpy and strcat for an ircsprintf.


*** 20010307_5 by fl_
- changed the numerics warning..


*** 20010307_4 by fl_
- this fixes clearchan.. we do stuff in a certain order which unfortunately
  means the channel is never really destroyed.. the oper can cycle if they
  want that..


*** 20010307_3 by androsyn
Stuff to get ziplinks support in the config files at least...Adds a 
compressed = YES/NO option to connect {} blocks.


*** 20010307_2 by toot
removed a couple of pointless checks; IsInvisible() on a server
or unknown :P


*** 20010307_1 by toot
/trace wasn't showing the correct Client and Server info


*** 20010306_2 by toot
cast eob message to (int), for prettyness :P


*** 20010306_1 by toot
. ugly %lu in /stats v and  temp tkline removed
. acptr had been renamed to aclient_p, when we wanted target_p.


*** 20010305_5 by androsyn
Fixed vhost= to function properly when modifying it on rehash..


*** 20010305_4 by toot
removed a couple of redundant if's


*** 20010305_3 by androsyn
Changes sptr cptr and acptr to source_p client_p and target_p respectively


*** 20010305_2 by androsyn
That should have been source_p not server_p


*** 20010305_1 by androsyn
Changed cptr  to client_p and sptr to server_p and acptr to target_p
as discussed in #ircd-coders with larne and toot.  These names make a bit
more sense.


*** 20010304_1 by androsyn
We don't need a functional system resolver anymore :)


*** 20010303_2 by wcampbel
Document STATS A


*** 20010303_1 by wcampbel
Typo, thanks for spotting it Martin


*** 20010302_4 by fl_
- added some TS rules to permanent channels..
  if a remote server sends users to a perm channel, we drop our modes,
  and use theirs, else we are really going to break things..

  if they are bursting a perm channel, and we have one, use whoevers
  TS is older..


*** 20010302_3 by fl_
- dont pass received sjoins on for persistant chans, to those not using
  CAP_VCHAN.. do we need another cap?


*** 20010302_2 by davidt
- Reset buf/sjbuf/sjbuf_nh to "" in m_sjoin, so we don't accidentaly
  reuse previous nicks....


*** 20010302_1 by a1kmm
- Fixed a potential buffer overflow where strncat is used incorrectly.


*** 20010301_13 by db
- missing #ifdef USE_SYSLOG on #include
  replaced this for now  /* XXX #ifdef HAVE_SYSLOG_H */
  Should this be in configure?



*** 20010301_12 by lusky
- revved patchlevel to beta2


*** 20010301_11 by fl_
- removed the extra debug message for the numerics, as it shouldve
  been caught now


*** 20010301_10 by fl_
- ok.. did it a different way, we only burst perm channels to those
  who support CAP_VCHAN, as older servers wont time them out


*** 20010301_9 by fl_
- reverted my patch, im gunna do it a different way


*** 20010301_8 by fl_
- this fixes the 403 stuff.. we now actually burst userless channels
  (could help stop desyncs), which stops us sending +b's for non-existant
  channels..

  this doesnt break hyb6, but its revertable if it causes serious problems


*** 20010301_7 by davidt
- Fix for a core on /rehash when removing in-use I lines.


*** 20010301_6 by androsyn
Forgot to commit res.h last night


*** 20010301_5 by androsyn
Adds a /STATS A for listing the current set of DNS servers adns is using.


*** 20010301_4 by androsyn
this lets adns process timeouts correctly.


*** 20010301_3 by db
- can't use mem_frob if NDEBUG is defined



*** 20010301_2 by db
- mem_frob() is not valid if NDEBUG is defined hence it can't be called here



*** 20010301_1 by androsyn
Gets rid of the dns lookup in listener.c it was a dumb idea..if you ask me
:P


*** 20010228_8 by db
- grrr calculate a delta , if its reasonable use it.
  Otherwise, report 0. blah.
  The =proper= fix is to store the TS delta from the svinfo
  into the server struct for that server.



*** 20010228_7 by androsyn
This should fix the /rehash coredump..


*** 20010228_6 by db
- fixed misc I lines/klines so *@* now works again.



*** 20010228_5 by fl_
- put back the 502 numeric (cant change modes for other users)
- put back the warning about servers changing our usermodes

these were commented out.. but I dont see why: noticed by jv


*** 20010228_4 by androsyn
Doh..i'm a tard


*** 20010228_3 by androsyn
Fixed yacc for real this time :)


*** 20010228_2 by androsyn
Makes yacc/bison detection work right.


*** 20010228_1 by androsyn
Well..this fixes that core dump..The problem is now that I lines don't seem
to be working right :/


*** 20010227_3 by ejb
- fixes to make compile on solaris using sunsoft cc work.
  tested compile, and it loads the module fine, but i haven't
  checked that it works any more than that. 


*** 20010227_2 by db
- don't try to use a flag on a NULL pointer



*** 20010227_1 by androsyn
Made IPv6 a configure option


*** 20010226_10 by androsyn
Minor change to the build system so that s_bsd_*.c will always generate
an .o file, but are empty for the loop type you're not using. Makes for
slightly cleaner makefiles.


*** 20010226_9 by fl_
- This fixes EOB timing.. we rely on the remote server to calculate
  the time spent, may be some issues with TS deltas which ill fix later


*** 20010226_8 by androsyn
Half a fix for Sun's CC.


*** 20010226_7 by androsyn
Fixes for Sun's CC. Things actually compile now with it.


*** 20010226_6 by androsyn
Fixed things so that they compile without warning with Sun's CC.
BTW, Sun's CC sucks. 


*** 20010226_5 by ejb
- fix to make ircd_parser.y work
- notes on Solaris compile.



*** 20010226_4 by db
- don't frob memory if NDEBUG is set



*** 20010226_3 by androsyn
memory.h was in the wrong place with MEMDEBUG set.


*** 20010226_2 by androsyn
More updates to adns.  Using the block allocator for struct DNSQuery now.


*** 20010226_1 by androsyn
Minor interface change to adns.  Basically we have the callbacks freeing
memory for the struct DNSQuery in the callbacks.  I should probably modify
this to use the block allocator.


*** 20010225_24 by jdc
* Here we go again.  ;-) Fixes to make /STATS P not show the same
  listening port twice after a /REHASH, and make things all clean
  and happy on BSD:

  listener.c: In function `inetport':
  listener.c:194: invalid lvalue in assignment
  listener.c: In function `find_listener':
  listener.c:247: warning: passing arg 1 of `memcmp' makes pointer from integer without a cast
  listener.c:247: warning: passing arg 2 of `memcmp' makes pointer from integer without a cast




*** 20010225_23 by androsyn
Uncommentted fixed code


*** 20010225_22 by androsyn
Documented listen {} host=".." fix.


*** 20010225_21 by androsyn
Fixed host="ipaddress" in listen {} blocks for IPv6.  


*** 20010225_20 by androsyn
Error condition for inetpton() should be <= 0 :)


*** 20010225_19 by androsyn
Fixed broken /rehash dns


*** 20010225_18 by androsyn
Fixed more weirdness..this was from my half assed attempt at fixing /dns
rehash


*** 20010225_17 by androsyn
Fixed weird dns bug..


*** 20010225_16 by androsyn
Remember that for inetpton() that is <= 0 is an error condition not just ==
0


*** 20010225_15 by androsyn
Without libresolv checks..


*** 20010225_14 by androsyn
Removed libresolv/libnsl checks from configure.in


*** 20010225_13 by androsyn
These are really that last ones for libresolv. Now I just need to figure out how to 
make autoconf not look for libresolv and libnsl


*** 20010225_12 by androsyn
Fixed yet another dependancy on libresolv


*** 20010225_11 by androsyn
Fixed another dependancy of libresolv on solaris


*** 20010225_10 by androsyn
Fixed stupid typo..


*** 20010225_9 by androsyn
Removed inet_aton() calls.  This should be the last things that needs
libresolv on solaris.


*** 20010225_8 by androsyn
Further fixes to listen {} blocks for adns stuff...


*** 20010225_7 by jdc
CVS prior to now would not compile on FreeBSD.  So here are my fixes.
If any of this is wrong, someone please fix it.  This isn't code I
should be playing with in the first place, but it seems to work...

* include/listener.h
    Changed Listener 'addr' def. from struct in_addr to irc_inaddr.
* src/listener.c
    make_listener(): copy_s_addr() needed to be changed due to the
      include/listener.h change.
    inetport(): lsin.sin_addr assignment needed to be changed (used
      memcpy() to be safe; used inet6 stuff as example).
    find_listener(): Changed PIN_ADDR() and IN_ADDR() to &PIN_ADDR()
      and &IN_ADDR().  More importantly, memcmp() logic was backwards I
      think -- result was /REHASH, then /STATS P showing two of the same
      listening ports; changed to (!memcmp()).



*** 20010225_6 by androsyn
Fixed a few minor bugs I introduced...ipv6 vhost listeners almost work. They 
re scribbling over the listener port right now.. I don't think this happens 
for IPv4 but I haven't checked either.


*** 20010225_5 by androsyn
Made listener.c use adns instead of gethostbyaddr() which should kill the
last of the libresolv code.  Also I think I've fixed vhosting for IPv6, but
alas I have not tested this just yet.


*** 20010225_4 by toot
reduced startup_connections_time from 5mins to 1min
surely that's long enough? :)


*** 20010225_3 by androsyn
Forgot a htonl()


*** 20010225_2 by androsyn
Second half of dns rehash fix. This actually works now.



*** 20010225_1 by androsyn
First half of the dns rehash fixes. Also fixed for a case where
a nameserver is 0.0.0.0. We alter the address to be 127.0.0.1 in that
case.


*** 20010224_8 by jdc
Typo a la Riedel (gewijgerd --> geweigerd).



*** 20010224_7 by wcampbel
Spell checked all these files


*** 20010224_6 by wcampbel
Proper credits, added the norwegian translation (currently broken sigh)


*** 20010224_5 by fl_
- Added riedel's ircd-dutch.po translation to the tree, updated makefile


*** 20010224_4 by toot
fixed modules="..."; in ircd.conf


*** 20010224_3 by toot
fixed a little typo in ircd_parser.y with client_exit option


*** 20010224_2 by a1kmm
- Make sure we get the right version of config.h


*** 20010224_1 by a1kmm
- Disable memory debugging for the beta release.


*** 20010223_8 by wcampbel
Added the spanish translation, submitted by ermak and corrected by xfrob
(both from Hybnet)


*** 20010223_7 by a1kmm
- Fixed glines.
- Fixed parse.c so exit_client it is only called once.
- Fixed exit_client so we don't set the client dead until we have sent the contents of the sendq.


*** 20010223_6 by a1kmm
- Removed an assert which simply shouldn't be there.


*** 20010223_5 by wcampbel
Updated my TODO list
Added madmax's cookies proposal


*** 20010223_4 by wcampbel
Xride submitted the Danish translation, set that up in the translations 
Makefile.  Also documented in BUGS that you have to set the msglocale to
standard before trying to update one in use, as it will occasionally dump
core.


*** 20010223_3 by fl_
- we dont need mo_oper(), an !IsOper() check is better :)


*** 20010223_2 by androsyn
Untested module loader for HP-UX using shl_*().  This should get integrated
into the current modules.c, but I didn't feel like messing with autoconf
this morning. If you're gonna use this make sure you hack your Makefile 
to use -lld instead of -ldl


*** 20010223_1 by db
- This appears to be stable under seans little "toy" test cloner.
  I have moved the exit_client code outside of send.c and into parse.c
  for now. Not sure if this is =quite= the right place but I'd like
  to sleep tonight.

  Anyway, a more optimum solution will be to fd_close in dead_socket() I think
  and then mark the fd as -1 .. but I don't want to deal with it tonight.

  Oh, I'm not sure if cptr after handle_command() in parse.c needs to be
  checked as well.




*** 20010222_8 by wcampbel
Fix configure to properly find and set the @RANLIB@ variable.


*** 20010222_7 by fl_
- dont flood limit remote clients..
  in doing this however.. we dont actually need to check if the client is
  flooding or not.. it seems a waste just to generate an error message.
- dont flood limit opers in private, in channels where theyre unopped,
  they shouldnt be given preferential treatment, so limit them with users
- RFC says we dont reply to notices.. if a client is flooding with a
  notice, dont tell them theyre message didnt arrive


*** 20010222_6 by wcampbel
Edited the readme some more


*** 20010222_5 by fl_
- added the +l usermode to the 004 numeric


*** 20010222_4 by wcampbel
Ok, rename complete, swedish.po -> ircd-swedish.po and so on


*** 20010222_3 by wcampbel
Fixed the German translation.  I WILL be renaming things in the repository
as gettext appears to die with 'german' or 'swedish'


*** 20010222_2 by androsyn
I forgot to commit some stuff. Part of the /dns rehash fixes..well half-fix
at least.


*** 20010222_1 by wcampbel
Added the working Croatian translation, and a broken German translation
(I will fix the German one soon) and gave credit where credit is due


*** 20010221_4 by androsyn
Fixed stupid misteak in last commit...


*** 20010221_3 by androsyn
Misc adns cleanups.  Half way to getting /dns rehash working again


*** 20010221_2 by androsyn
Minor fix replacing close() with fd_close()


*** 20010221_1 by db
- flush queues if client is marked dead.



*** 20010220_9 by wcampbel
Updates in the messages stuff


*** 20010220_8 by wcampbel
Updated (and corrected one small glitch in) swedish.po, created the Makefile.in
for it, and added it to autoconf


*** 20010220_7 by wcampbel
Added trbz's Swedish translation


*** 20010220_6 by wcampbel
Revised custom.po, Added the README for the translations.  I'll create
a Makefile (might need help) to install a specific language, and to do 
maintainance on each .po file.  Any contributions will be appreciated


*** 20010220_5 by wcampbel
Directory /cvsroot/ircd-hybrid-7/messages/translations added to the repository


*** 20010220_4 by davidt
- Missed test in src/packet.c, while( <get line from sendq> ) should
  check the client hasn't died before parsing the line..
- Oddness in s_serv.c -- random garbage was being copied into fd_note,
  whilst the correctly copied string was being completely ignored...


*** 20010220_3 by wcampbel
Make one of the define's easier to read


*** 20010220_2 by toot
took out an unneeded if() in m_mode.c


*** 20010220_1 by toot
use find_bchan instead of map_bchan.  it's much quicker.


*** 20010219_1 by wcampbel
Cleaned up an unclear sentence in example.conf, and updated the messages
file.  Someone want to write user docs on the messages stuff?


*** 20010218_2 by wcampbel
ip="..."; in listen {} is inconsistent, like a connect {} host entry, it
can accept both IP's and hostnames, so it should be host="...";
Also we had complaints about needing " " here, while all other ip= lines
do not use the " "


*** 20010218_1 by wcampbel
1.  Update the TODO list
2.  Massive update of the docs for the (hopefully soon) beta2 release.
3.  Made the rsa_respond/Makefile consistent
4.  Cleaned up make rsa_respond from the source root somewhat
5.  make install in doc/ installs the manpage (now that it's reasonably
    up to date) to man8 in the prefix.
6.  Removed the last vestiges of CRYPT_LINK_PASSWORD
7.  Last but not least, added vulture to the credits as a contributer


*** 20010216_7 by androsyn
Fixed /rehash dns finally.  Boy I'm awful lazy these days :P


*** 20010216_6 by db
- ok... MyMalloc() does not memset memory to 0, and we are seeing
  0xdeadbeef errors... sooo I want to see it fail with NULL's at least
  easier to fix then.



*** 20010216_5 by a1kmm
- Reverted db's patch - we must not free I-lines a client is attached to.
- Added some documentation to the functions.
- Added some ugly debug code in case the reason that the reverted patch was needed shows up again, so we
  get more useful cores.


*** 20010216_4 by db
- oops. reporting the wrong things for Klines. fixed.



*** 20010216_3 by db
- cleaned up hostmask.c clear_conf() there is no need to keep
  a separate link list at all
- note register is deprecated or ignored with any modern compiler.



*** 20010216_2 by ejb
- fix for /quote accept -nick flooding


*** 20010216_1 by db
- This should catch all the nasty cases of adding to patricia trie
  and not freeing ConfItem's on failure.



*** 20010215_5 by androsyn
Fixed a few bugs with dline handling...


*** 20010215_4 by db
- stop nnn.nnn.*.* type dlines at the pass...



*** 20010215_3 by a1kmm
- Fixed dserv not to core and to do the linked list right.


*** 20010215_2 by a1kmm
- Fixed dserv to not core, although blockallocator is temporarily broken, so it isn't used now.


*** 20010215_1 by db
- I think this fixes /msg $ and /msg # stuff
- also changed /msg opers@ to use local wallops



*** 20010214_9 by androsyn
Fixed adns to use close() to use fd_close()


*** 20010214_8 by androsyn
The resolver will now actually reread /etc/resolv.conf.  Also note
that this pretty much does a full restart on the resolver.



*** 20010214_7 by wcampbel
Add +l (locops) to the default oper umodes
Fix a typo in example.conf
Document fakename (server hostmasking nonsense) in example.conf


*** 20010214_6 by fl_
- fixes msg $irc.server.. the docs need updating..
  $$irc.server has been reverted to $irc.server to keep compatability
  I need to go shout at my isp so ill fix $# soon :)


*** 20010214_5 by a1kmm
- Made the special case of hostmasks with no wildcards work properly.


*** 20010214_4 by db
- somehow this fix got blown away accidentally...
  puts the right ip into the aconf if hostname happens to be an IP



*** 20010214_3 by a1kmm
- Use memset instead of bzero in an attempt to reduce the number of deprecated function calls.


*** 20010214_2 by toot
. added some CVS Id tags where they were lacking
. removed 'd' from MYINFO.. no more denys
. made some formatting more consistent :P


*** 20010214_1 by a1kmm
- Re-reverted something I accidently reverted - always close all files in your text-editor after cvs
  update!


*** 20010213_7 by a1kmm
- Finally that ConfItem memory leak seems to have gone - we now free ip_ilines and even the associated conf
  items.


*** 20010213_6 by androsyn
Fixed adns for non gcc compilers.



*** 20010213_5 by db
- updated TODO list



*** 20010213_4 by a1kmm
- Slightly better clear_conf code - there was actually a risk of double free before. Still we have that memory
  leak however :(


*** 20010213_3 by db
- don't increment scount unless it was successfully added



*** 20010213_2 by db
- fixed IP in conf when ip is used for host = ""; in connect block
  use inetpton() on given string, if returns 0 use dns... otherwise
  its a valid IP to use. s_conf.c

- open fd to stderr.log, dup it to fd 2 s_bsd.c



*** 20010213_1 by androsyn
Made server hostmasking work again.  Well, at least in theory. 
Added a fakename= option to the connect block for this.


*** 20010212_9 by androsyn
This fixes it properly this time :P


*** 20010212_8 by androsyn
This is the IPV6 half of that fix..




*** 20010212_7 by db
- this fixes the IP showing on /connect for =now= AndroSyn will have
  to tidy this up...



*** 20010212_6 by jdc
- Logic for spoof_notice was backwards.  Oops.



*** 20010212_5 by db
- make it compile at least for now



*** 20010212_4 by androsyn
Free allocated memory from adns. Dumb bugs..


*** 20010212_3 by a1kmm
- Re-added that code to stop malloc() etc... getting in.


*** 20010212_2 by androsyn
adns using stat as a local variable seems to be a dumb idea...


*** 20010212_1 by androsyn
Fixed some brain damage on incoming connections...the code has been 
changed to make it more friendly to ipv6.


*** 20010211_5 by db
- modified logging in adns functions to work with ircd s_log
  bit of a quick hack for now ;-/



*** 20010211_4 by db
- reworked adns to not use fgetc, fprintf and friends, but the ircd
  specific FBFILE library (fileio.h)
- removed duplicated redundant #include "memory.h"



*** 20010211_3 by db
- removed apparent debugging code left in



*** 20010211_2 by a1kmm
- Put deleted hostmask confs on a list so we can free them later. Still leaves some memory leaks somewhere
  in the config(but why?) but it is partway there...


*** 20010211_1 by a1kmm
- Fixed adns to use My* memory functions.


*** 20010210_13 by androsyn
Fixed adns/ to use MyMalloc() instead of malloc()




*** 20010210_12 by a1kmm
- Some general tidyups to help catch memory leaks and other problems, like changing calls to calloc and malloc
  and strdup to MyMalloc, + a few memory leak fixes. Still some more to go, however.


*** 20010210_11 by a1kmm
- Fixed IP I/K lines to work properly, but we still have to put IP I lines and normal I lines on the
  same precedence scheme.


*** 20010210_10 by fl_
- added extra logging for numerics sent to servers.. this should
  be removed once we fix the causes of it (admin only for now)


*** 20010210_9 by a1kmm
- Fixed DLINES - an irc_inaddr is not the same as a sockaddr
- We cannot return from accept_connection without re-selecting the listener or the listener won't work
  properly!


*** 20010210_8 by db
- /rehash should check_klines() !



*** 20010210_7 by wcampbel
Document the permissions bug on /etc/resolv.conf


*** 20010210_6 by fl_
- sendto_realops_flags_oper became sendto_wallops_flags() :)


*** 20010210_5 by jdc
- *Server name* being reported on connect was listener->name, not
  me.name.



*** 20010210_4 by jdc
- Fixed bug where /WHO *, /WHO NICK, and /WHO #chan would not show
  +o or +v clients when opped or +h'd; bug was due to lack-of 
  is_any_op() check alongside MODE_HIDEOPS.
- Changed variable name reference 'oper' to 'server_oper' to avoid
  confusion with chanops.



*** 20010210_3 by db
- the hash table better be cleared as well



*** 20010210_2 by db
- This should fix the pesky asserts once and for all.
  Remember the client struct hasnt' been freed yet, so its cool here.



*** 20010210_1 by a1kmm
- Reverted back to scanning forward in hostmask.c - the idea of scanning backwards and not hashing the string
  seems to take more clockcycles on the average hostname to get everything right than just rehashing the
  string each time, since we have a relatively good hash function(So we have to hash about 5 strings when
  a client connects, but it isn't that bad). And we should also get rid of a few special cases that were
  messing up k-lines and spoofs before.


*** 20010208_8 by wcampbel
Minor update of example.conf


*** 20010208_7 by db
- argh I always test before committing. right? 



*** 20010208_6 by db
- anytime we get a socket connect error, the client should be marked
  with DEAD_SOCKET.. found by vulture.



*** 20010208_5 by db
- this at least prevents exit_client from exiting an already dead client twice.



*** 20010208_4 by db
- if an fd from accept is -1 don't add it ! 



*** 20010208_3 by androsyn
Keeps adns from splattering crud on fd=2


*** 20010208_2 by toot
should use irccmp rather than strcmp when checking
vchan_id


*** 20010208_1 by toot
wasn't checking vchan_id for root channels..


*** 20010207_8 by a1kmm
- That "bogus //" that Hwy changed to /*  shouldn't be there at all - the code is needed for klines to work.


*** 20010207_7 by db
- This fixes testline... find_tkline can be handed a NULL ip from testline.



*** 20010207_6 by wcampbel
More bogus C++ // comments


*** 20010207_5 by wcampbel
Replaced bogus C++ // comment


*** 20010207_4 by wcampbel
Updated the TODO list
kline=yes|no; in the conf controls KILL too


*** 20010207_3 by db
- ok. once a client has exited, any recvq linebufs it has, must be flushed
  else client_dopacket() will try to parse stuff while the client has
  a -1 fd... oops. The old code (before david cleaned it up) swept
  this under the carpet by simply ignoring the buffer if the fd < 0
  Sooo instead exit_client() should flush all recvq linebufs when it
  exits a client. I added a new interface client_flush_input() to linebuf.c
  I don't think client.c should be diddling directly with linebuf_donebuf
  but thats just me.



*** 20010207_2 by db
- one line comments aren't generally useful in fixing bugs.
  THIS fixes the stack smash observed on dead links



*** 20010207_1 by androsyn
This *should* fix the long hostname bug..Untested however


*** 20010206_1 by androsyn
Yup..that fix was okay..


*** 20010205_14 by db
- this fixes a stack smash when a socket goes dead, you CANNOT
  ever try to send more stuff at it, or it goes into a nice nasty
  loop as it tries to send an error to the dead socket...
  There may be a better way of doing this.



*** 20010205_13 by wcampbel
connect { aftype = ipv4|ipv6; }; documented


*** 20010205_12 by db
- temporary fix for adns /rehash cores



*** 20010205_11 by davidt
oops, missed a return

*** 20010205_10 by androsyn
Keeps adns from dumping core on us.  This needs to be fix. 


*** 20010205_9 by androsyn
Fixed a bug with TCP sockets for adns..this would have broken things if
the TCP code every got used :)




*** 20010205_8 by davidt
m_* functions no longer need a return value.. and everything was using it in different ways (returning 0/1/-1 on various different conditions), so it was just a mess..  If we do decide to actually use the return value for something useful, it'd need to change everything anyway, so since that probably won't happen (soon anyway)....

*** 20010205_7 by wcampbel
Print a U or X when printing out gecos {} or shared {} entries
Fix a couple mistakes in the .po


*** 20010205_6 by a1kmm
- Finally got the code to only hash the new parts of the hostname when we try each token. Thanks to
Dianora for the idea.


*** 20010205_5 by androsyn
Missing '&'s are bad for your health and your pointers :P 


*** 20010205_4 by db
- ya ya ya never check in something without testing, esp. when tired.



*** 20010205_3 by db
- IPV6 should not be defined by default



*** 20010205_2 by db
- removed unused variable
- added prototype for now for is_ipv6_address



*** 20010205_1 by androsyn
Fixed bug for IPv6 when displaying the IP address of the incoming
connection.


*** 20010204_17 by androsyn
Shameless self promotion...


*** 20010204_16 by androsyn
Fixed a tyop that prevented s_auth.c from compiling.


*** 20010204_15 by db
- fixed core in hostmask.c add_conf() should check for NULL pointers
- added initial IPV6 specific code



*** 20010204_14 by androsyn
Added hostname length checking. Report error if hostname is longer than
HOSTLEN


*** 20010204_13 by db
- changed code to use a patricia trie for the IP I lines



*** 20010204_12 by ejb
- fixed s_bsd.c for BSD ..


*** 20010204_11 by androsyn
Stupid misnaming bug..


*** 20010204_10 by androsyn
Added ip Iline interface to dline_conf.c


*** 20010204_9 by androsyn
Added a install target


*** 20010204_8 by androsyn
Fixed some clashes with freebsd system headers.


*** 20010204_7 by androsyn
Default aconf->aftype to AF_INET


*** 20010204_6 by androsyn
This is dumb...but oh well :P


*** 20010204_5 by androsyn
Well this is the ADNS stuff.. Please test it throughly. It seems to work
okay but it has not been extenstively tested.  Have fun...




*** 20010204_4 by androsyn
Directory /cvsroot/ircd-hybrid-7/adns added to the repository


*** 20010204_3 by fl_
- we notice the oper when we add a tkline remotely/locally.. (untested)
- dont give the path to our kline.conf in remote klines


*** 20010204_2 by toot
.depend update


*** 20010204_1 by a1kmm
- Better free HostMaskEntries too when we clear_conf


*** 20010203_7 by a1kmm
- 'I' is not the same as 'K'.
- flags is not the same as status.


*** 20010203_6 by a1kmm
- Got rid of mtrie_conf, we now have new hashtable orientated code that should be faster on servers with
lots of k-lines & I-lines etc...


*** 20010203_5 by wcampbel
. make rsa_respond will create a distributable rsa_respond.tar.gz
. Rewrote the rsa_respond README file
. Removed buffer.c and buffer.h from rsa_respond, they were old code,
  needed for rsa_respond.c.  The new genkey/respond programs do not use
  these two files.
. Corrected my spelling in challenge.txt... Do NOT document when you are 
  tired Hwy!


*** 20010203_4 by wcampbel
Documented that ::1 is not a supported IP (reported by me and poptix)


*** 20010203_3 by db
- removed unused parameter in do_who() (chptr) 
- removed duplicate #include "common.h"



*** 20010203_2 by wcampbel
Documented a few more things that were fixed from the TODO file
Updated index.txt


*** 20010203_1 by db
- after re-reading rfc1489 a bit, and the original tortured code
  by avalon I think this is what was meant. I think. I'll have to
  try a h6 server to verify.



*** 20010202_19 by wcampbel
Cleaned up INSTALL a little
Added documentation for the challenge/response system


*** 20010202_18 by a1kmm
- Okay, this is under GPL not LGPL.


*** 20010202_17 by a1kmm
- Reapply Hwys changes I accidentally overwrote before(argc < 3 not argc < 2)
- umask says what you don't want not the default modes!


*** 20010202_16 by a1kmm
- We now call umask before writing the key-files from genkey so they aren't world readable.


*** 20010202_15 by a1kmm
- More secure encryption of private keys that genkey/respond uses.


*** 20010202_14 by davidt
Uhm.  I tested this... and it worked.. but this code couldn't work.. uhm. oops.

*** 20010202_13 by db
- This is a better m_who follows the RFC closer I think



*** 20010202_12 by wcampbel
Fixed an unclear sentence, found by caf@EFnet


*** 20010202_11 by davidt
oops, only link SELECT_SRC in once...

*** 20010202_10 by davidt
- Fix problem with assert() failure in ReadMessageFile...
  It was caused by only generating dependency information for the current
  select method -- if you used kqueue, and the .depend file was for poll,
  changes to s_bsd_kqueue's headers wouldn't recompile it...


*** 20010202_9 by wcampbel
sigh...argc again


*** 20010202_8 by wcampbel
Don't core if we don't have the challenge parameter


*** 20010202_7 by davidt
-I flags should be in CPPFLAGS, not CFLAGS, updated configure to stop warning from make depend

*** 20010202_6 by jdc
- Blah.  Okay, *finally* fixed passwords.  I shouldn't have changed
  the strcmp()s like I did earlier.  The *REAL* bug was that one of
  the sendto_one()'s was sending aconf->passwd, not spasswd.
- Encrypted passwords are still up in the air, but they might work.
  Someone please try them, or work with me regarding it.



*** 20010202_5 by jdc
- Attempt #2...  God this stuff is evil!
- Fixed bug where connect failed when send_password and accept_password
  were not identical.  strcmp aconf->spasswd, not aconf->passwd.
- The above fix might also (havent tested) fix encrypted password links.



*** 20010202_4 by jdc
- Fixed bug where connect failed when send_password and accept_password
  were not identical.  strcmp aconf->spasswd, not aconf->passwd.
- The above fix might also (havent tested) fix encrypted password links.



*** 20010202_3 by wcampbel
m_who fix, not perfect, but it doesn't core now.


*** 20010202_2 by a1kmm
- "mode #channel !vchan [+...]" now works.


*** 20010202_1 by a1kmm
- The challenge command finally works.


*** 20010201_2 by jdc
- Removed initialization from incompatible pointer type warning due
  to line 483.  Forced type as (char *).



*** 20010201_1 by jdc
- module="" directive in modules {} block does not load module on startup.



*** 20010131_3 by davidt
- Fix missing space between parabuf and : in channel.c
- Fix missing if(p_or_n != NOTICE) in m_message.c, allowing an infinite loop
  of +g messages to DoS the server..
- Added caller_id_wait to remove 60 second hardcoded time between +g
  notifications.


*** 20010131_2 by jdc
- Added myself into the TODO list.  Gee, don't I feel special?



*** 20010131_1 by db
- fixed tiny bug that broke /msg $#host.mask messages for opers



*** 20010130_8 by jdc
- Fixed valid_comment() usage (didn't see line 691).  Now #ifndef IPV6 is
  used to get rid of the -Wunused warning.  Someone should fix this
  kludge properly before a final release.



*** 20010130_7 by jdc
- Removed aconf->ip = IN_ADDR(ip); warnings (force unsigned long).
- Commented out valid_comment function (unused so far?).



*** 20010130_6 by davidt
oops, fix core caused by previous change

*** 20010130_5 by davidt
fix userhost for lazylinks

*** 20010130_4 by fl_
- added FLAGS_SERVOPER and removed as many of the double notices as
  I could.. I might have missed some though :)


*** 20010130_3 by fl_
- changed sendto_realops_flags_opers() -> sendto_wallops_flags()
  it makes much more sense like that :)
- removed an unneeded if() from sendto_wallops_flags()


*** 20010130_2 by wcampbel
Removed "OPERWALL - " from in front of the OPERWALL message...
This may be exerting my opinion...but the two commands do the same damn 
thing, why should they look any different?  Other than "elite-ness", I don't
see any reason why OPERWALL should exist at all.


*** 20010130_1 by a1kmm
- Fixed the memdebug code again, you can't add a void* to a ptr, it is perfectly valid to add an unsigned
long to a ptr however.


*** 20010129_8 by jdc
Typo fix (FLAGS_SERVADMINS --> FLAGS_ADMIN).



*** 20010129_7 by jdc
Changed all get_client_name() references, respectively, from
TRUE/FALSE to SHOW_IP/HIDE_IP.  Also changed HIDEME to MASK_IP.

Also, forgot to mention this:

src/s_bsd.c and src/s_serv.c were modified earlier to send two
sendto_realops_flags() notices, one for admins (with SHOW_IP)
and one for opers (with HIDE_IP).  This means admins will get
two notices during a connect/disconnect, but I digress.



*** 20010129_6 by jdc
Changed all get_client_name() references, respectively, from
TRUE/FALSE to SHOW_IP/HIDE_IP.  Also changed HIDEME to MASK_IP.



*** 20010129_5 by db
- simplified sendto_realops_flags(FLAGS_ALL... case



*** 20010129_4 by wcampbel
Removed CAPAB DE from the docs


*** 20010129_3 by db
- removed all reference to CAP_DE its GONE GONE GONE yay
  removed modebuf_de pbuf_de etc.



*** 20010129_2 by wcampbel
Minor documentation cleanup


*** 20010129_1 by lusky
revved patchlevel to beta1


*** 20010128_11 by wcampbel
Applied the OpenBSD a.out fix
Someone test this to make sure it still runs right on BSD/Linux/Solaris...


*** 20010128_10 by ejb
OOH
YES YES YES
YES "$"*(
YES !!!!!!!
OOOOOOOOH YES.

um
sorry.

- removed sea^H^H^H+d s^U
- removed +d support, as it causes more problems than it solves.


*** 20010128_9 by jdc
msg_hash_table bug (MAX_MSG_HASH+10 vs. MAX_MSG_HASH) seems to be
gone; do some more testing on this one, but it's not showing up
like in hybrid-6.



*** 20010128_8 by jdc
No throttling/"load" check for opers when setting /AWAY.



*** 20010128_7 by jdc
Grumble grumble.  Put the code back in; apparently mIRC and
others use the "feature" to obtain the clients' local IP.
This is needed for backwards compatibility.



*** 20010128_6 by fl_
- dont burst users to the server that the user is on
- removed useless IsOper() check
- this should be the last commit for a while :)


*** 20010128_5 by jdc
Commented out code which returns the actual IP when a user/client
does a USERHOST on itself.  Seems pointless to me.  Return whatever
the server says your host is.



*** 20010128_4 by fl_
- more minor fixes :)


*** 20010128_3 by davidt
Fix kill for certain LL situations...

*** 20010128_2 by fl_
- this renders kill_client() redundant, but basically we werent sending
  kills to every server, which was causing problems with hyb6 as we
  could introduce a nick twice..
- we now use sendto_cap_serv_butone() and sendto_nocap_serv_butone()
- we still use IDs where its possible
- im tired now :P


*** 20010128_1 by davidt
- Fix m_client.c / m_nick.c to mark clients introduced by a lazylink as known
  by that lazylink (caused all kills of lazylink clients to be replaced by
  nickcollision kills, which has the same effect anyway.. weird bug :)
- Fix broken logic in m_kill.c, which caused a core on attempting to kill
  an unknown UID.


*** 20010127_16 by androsyn
Somebody commited an extra int aftype..This backs that change out...


*** 20010127_15 by androsyn
Typo fix in the last vhost= change fixed.


*** 20010127_14 by androsyn
Finally fixed that damn /connect bug with vhosts...Now will somebody else
test it :).


*** 20010127_13 by davidt
oops, check if sptr can send to the channel, not cptr

*** 20010127_12 by fl_
- only reset idle on privmsg, not notice


*** 20010127_11 by fl_
- dont reset idle time from notices.. only privmsg
  I didnt alter notice #channel.. altho I spose we should so its
  consistent..


*** 20010127_10 by davidt
Prevent local users creating fake vchans...


*** 20010127_9 by fl_
- configfileentry -> servinfo


*** 20010127_8 by davidt
Eventually found the weird bug which causes list.c to complain about
users still being on channels when they are freed.
Remove channel from user as well as user from channel in delete_members.


*** 20010127_7 by davidt
We only actually need one buffer here...

*** 20010127_6 by davidt
Remove warning, since it was being displayed when it shouldnt anyway...

*** 20010127_5 by davidt
Fix LLJOIN brokeness for vchans

*** 20010127_4 by toot
. removed a redundant if/else in stats
. added aftype to localClient, which s_serv.c wanted..
  i this is right?
. updated .depend


*** 20010127_3 by androsyn
Fixed vhosts for outgoing connections finally.


*** 20010127_2 by lusky
- fixed some more sol26 compile warnings


*** 20010127_1 by lusky
- removed lex/yacc output
- put socklen_t's back in


*** 20010126_20 by wcampbel
Oops, <dollar>Id:<dollar> in the ChangeLog


*** 20010126_19 by wcampbel
Minor docs cleanup
Cleaned up the formatting of operguide.txt (wouldn't fit properly on an 80
character wide terminal) and added a couple missing :'s to the /quote lines


*** 20010126_18 by db
- removed some wording which not everyone would find funny *sigh*
  Hey, I found it funny but ... it really shouldn't be in the beta.



*** 20010126_17 by db
- updated TODO list



*** 20010126_16 by db
- changed code to send UID's for KILL's when possible.
- changed direct reference to id to ID macro in send.c



*** 20010126_15 by db
- corrected formatting
- added CVS Id string in comments



*** 20010126_14 by db
- rewrote m_kill.c to use kill_client() in send.c noticed I had
  the tests backwards in kill_client()



*** 20010126_13 by wcampbel
Document the requirements
Update the TODO list
Document the restricted auth {} option


*** 20010126_12 by jdc
Cosmetical changes.



*** 20010126_11 by db
- added kill_client() for formatting up a KILL to an uid or nick as needed
  unused function at the moment.

- added send_trim()' sto sendto_one_prefix()



*** 20010126_10 by androsyn
Fixed minor issue of #include ordering...


*** 20010126_9 by androsyn
Fixed stupid /connect bug where hostname was not an IP address.


*** 20010126_8 by jdc
TYES/TNO flipped to make default value for spoof_notice 'yes'.  This
keeps us "compatible" with hybrid-6.
doc/example.conf changed to contain spoof_notice example.



*** 20010126_7 by wcampbel
Update yacc/lex files (is- please remove!)
Do NOT enable IPV6 by default!


*** 20010126_6 by androsyn
Somebody thought it was funny to commit config.h with #define IPV6 1




*** 20010126_5 by jdc
'spoof_notice' variable added to auth {} blocks.  Enables/disables
notification for when a client's host is changed via 'spoof'.



*** 20010126_4 by androsyn
Fixes for identd checking for IPv6.


*** 20010126_3 by androsyn
Fixed compile error for IPv4.


*** 20010126_2 by db
- This fixes odd cores associated with accept code /quit and nick changes...
  ALL references to a client must be removed when it exits!



*** 20010126_1 by ejb
- does this make IPv6 work? let's see.


*** 20010125_15 by wcampbel
Added the mode +g documentation.
Added another user suggestion to the TODO list


*** 20010125_14 by androsyn


*** 20010125_13 by db
- allow /away to take an /away off at any time, pace other /away
- do not reply to a notice with a notice!! in +g mode



*** 20010125_12 by db
- cleaned up some logging that was just plain wrong
  and changed references to c/n's to "connect blocks"



*** 20010125_11 by fl_
- removed a fixed bug from bugs..
- till someone decides what the hell we're doing with stats p and shide,
  we show users the reply..  I dont like the idea of noticing all opers..
  frankly, itd get annoying, and the MOTD usually gives oper nicks/chans
  anyway, so..


*** 20010125_10 by fl_
- opers shouldnt see IPs of servers connecting.. show them MASK_IP
  instead


*** 20010125_9 by db
- replaced confusing host with name, its a server name not a DNS host name



*** 20010125_8 by androsyn
Fixes for ident when compiled for IPv6


*** 20010125_7 by androsyn
Fixed ircd from complaining about ':' in hostnames on connect.  I don't know
if we want this to be on just for IPv6, but its on for IPv4 as well.



*** 20010125_6 by db
- sendto_channel_remote_prefix() was using sendto_one when it
  should have been using send_message() this caused it to nicely core
  on #%s%s%s... as sendto_one() is varargs unlike send_message()
  This probably also explains some odd bugs cropping up with uids..



*** 20010125_5 by androsyn
Fixed ident checking for IPv4.  Ident *may* work for IPv6 as well, but don't
count on it


*** 20010125_4 by ejb
- some fixes for ipv4


*** 20010125_3 by ejb
- fix to prevent coring on IPv4 connections.


*** 20010125_2 by db
- fixed restricted auth blocks works the same as it does in h6 for now
- fixed core on /squit *oops*



*** 20010125_1 by db
  ConfItem->name is what should be used for server names
  fixing that caused a cascade of other bugs to show up.. neato

- first off, added numeric for RESTRICTED numeric.h, messages.tab
- added notification of restricted mode to s_user.c
- free and zero spasswd in free_conf() s_conf.c
- conf_add_server() should return an int, modifed s_conf.c s_conf.h
  if it fails, it should also log() and not free any given aconf,
  thats up to the caller
- fix ircd_parse.y to NOT ignore the result of conf_add_server 
  and to free etc. whatever on errors



*** 20010124_10 by wcampbel
Diane's fix for the connect {} in the conf


*** 20010124_9 by wcampbel
Added an updated operguide.txt from Riedel and added Riedel's auth specific
motd suggestion to TODO


*** 20010124_8 by db
- don't allow /accept server. Redundant check in client.c



*** 20010124_7 by davidt
IPv6 patch, v2


*** 20010124_6 by fl_
- androsyn's ipv6 patch :)


*** 20010124_5 by fl_
- removed a remote rate limit in lusers.. this should only be done
  locally..
- if shide is on, we always report theres 1 server


*** 20010124_4 by wcampbel
Ran all the docs through ispell


*** 20010124_3 by db
- partially added in "restricted=yes/no" in auth blocks
  this is the old little i line support. Needs code in channel.c in set_mode()
- added code to use crypt() in server passwords depending on
  encrypted=yes/no flag in connect block



*** 20010124_2 by db
- This code will need to be revisted for IPv6, but it at least works now.



*** 20010124_1 by db
- m_whowas.c was referencing ConfigFileEntry intead of ServerInfo
  causing a core. oops.
- cleaned up check_server() in s_serv.c, this is probably why
  irc.efnow.net had connect problems.



*** 20010123_4 by wcampbel
Fixed spelling errors (Noticed by Jonathan Roes)


*** 20010123_3 by db
- removed the loop unrolling ... made it hard to read, also hid a bug
  and loop unrolling is for the compiler to do.
- added no_hack_ops in serverinfo block, once set it will not
  allow anyone to hack ops from your server. no way, no how.
  


*** 20010123_2 by ejb
- remove some remanants of splitcode


*** 20010123_1 by db
- this fixes paul's /whois core. basically, network_name, network_desc
  moved from ConfigFileEntry to ServerInfo. These two modules weren't
  changed somehow to use the new structs. *oops*



*** 20010122_8 by wcampbel
Fixed the off by 1 error in the syntax error in the conf notice


*** 20010122_7 by ejb
- initial commit of androsyn's ipv6 code, hacked up so it compiles. 
  it accepts a connection, but doesn't get further than the initial
  connection, seems an fd is being weirded somewhere.


*** 20010122_6 by fl_
- fixes opers@server and ident%host@server..
- I didnt add users@server, as we if people really want it, they can
  use notice $server..


*** 20010122_5 by fl_
- documented the double notice "feature".. IMO admins can live with
  it, it should be the least of their worries..


*** 20010122_4 by db
- just tidy ups while debugging the accept core



*** 20010122_3 by toot
did it again :P


*** 20010122_2 by toot
missed a bit


*** 20010122_1 by toot
fixed formatting shite in /time and EOB message


*** 20010121_12 by wcampbel
Changed some debugging code logging to L_NOTICE to L_DEBUG


*** 20010121_11 by lusky
- removed XOPEN_SOURCE defines.  If you REALLY need these, it needs to
  be detected by autoconf and specified in the CFLAGS--XOPEN_SOURCE *must*
  be defined before you parse any system includes.
- fixed a couple of pedantic compile warnings, there are still more.


*** 20010121_10 by wcampbel
Updated the docs to be with the present status of the conf parser.
Also noted a few minor bugs and issues into the TODO file


*** 20010121_9 by db
- fixed virtual host 



*** 20010121_8 by db
- can we remove these files, pulease? 



*** 20010121_7 by spookey
 - rehash dns on full rehash


*** 20010121_6 by db
- removed some unused definitions notably NONL was not used due to 
  adrians new line parse code.
- added gline_exempt to parser, not fully implemented, but europe efnet
  want support for it.



*** 20010121_5 by davidt
updated depend, removed unused 'serverMask' from struct Channel (lazyLinksChannelExists is what everything should (and does) use....

*** 20010121_4 by toot
changed the default kick msg to the nickname of who's
getting kicked, rather than the kicker's..
this makes chanmode +a a little more effective


*** 20010121_3 by davidt
- Various fixes to sjoin..
  The only one I can remember is "MODE #chan +h halfops" wasn't being sent..
  I need a new memory.


*** 20010121_2 by davidt
Missing space in parabuf_hops_id, caused desyncs/error messages and other bad things

*** 20010121_1 by davidt
Send KILL for unknown IDs, not an SQUIT

*** 20010120_17 by wcampbel
Updated TODO a little


*** 20010120_16 by wcampbel
Bug 1 is partially fixed and shouldn't be publicized


*** 20010120_15 by davidt
- Change "%s: %s" to "%s :%s" to fix remote klines


*** 20010120_14 by fl_
- ambiguous messages are bloody annoying..


*** 20010120_13 by davidt
Re-enable the warnings for servers sending us numerics, it shouldn't happen [except 'Register First' numerics, when we send a old server a NOTICE AUTH :*** ... message whilest it's connecting to us], and they indicate bugs..

*** 20010120_12 by davidt
Argh.  argh. always test compile something, no matter how simple it is....

*** 20010120_11 by db
- fixed memory leak in new listen {} code
- added max_clients = in serverinfo block



*** 20010120_10 by davidt
Fix silly warning

*** 20010120_9 by fl_
- the sjoin part to the vchan bug.. altho its still possible to make
  fake vchans if youre timing is right :/


*** 20010120_8 by davidt
- Tidy up m_part.c (merge vchan/nonvchan stuff into the same code, so we
  aren't duplicating stuff everywhere)
- Make sure ##vchannel_1234 has a TS of 1234 when we create it with CJOIN,
  fl- is doing the same for SJOIN i think :)


*** 20010120_7 by toot
fixed compile error with gettext..  needed config.h included before
the #ifdef..


*** 20010120_6 by toot
fixed a compile warning
removed an old hacky #define which is fixed better now


*** 20010120_5 by db
- removed a totally useless function.. 
  add_listener() is now called directly from the parser.. no need to
  through gyrations. *BLOAT*
  This cleans up the parser a bit more as well.



*** 20010120_4 by db
- removed CONF_ADMIN dumb dumb dumb, now its just AdminInfo struct
  


*** 20010120_3 by db
- removed CONF_OPS from s_conf.h , its all CONF_OPERATOR now,
  removed CONF_LOCOP while at it.



*** 20010120_2 by db
- updated new lex.yy.c y.tab.c y.tab.h



*** 20010120_1 by db
- changed ConfigFileEntry.hub to ServerInfo.hub
- removed CONF_ME (ick) no more ConfItem for "me" its all in 
  one ServerInfo struct now.
- modified parser to use ServerInfo struct
- I couldn't stand it any more. sorry.



*** 20010119_9 by adrian


* Kill the POLLREADFLAGS/POLLWRITEFLAGS/POLLERRORS gunk. God I hated
  that

* replace it with something that makes a tad more sense-
  - check all the various flags on return from poll() to catch all IO
    types. Yes, all the IO types will be defined in most useful OSes
    even if it only pays attention to one of them
  - define POLLRDFLAGS as POLLIN and POLLWRFLAGS as POLLOUT for older
    broken linux boxen



*** 20010119_8 by db
- just a spelling mistake in a comment, but I couldn't take it any more!
  "automaticly"



*** 20010119_7 by adrian


&& != &

*sigh* commiting whilst sick.. :)



*** 20010119_6 by adrian


use the delay value when calling select(), rather than my hard-coded
value of '1'.



*** 20010119_5 by adrian


&& != || :)



*** 20010119_4 by adrian


Initial pass at the select code rewrite.

* it isn't multilist like the poll code. that would be kind of stupid
  considering that the fd set size is a function of the maximum open fd,
  rather than the number of fds in a "set".

* for some reason the compiler on my laptop is smoking heavy crack with
  hybrid-7 now. It seems to work, but debugging shows a lot of gremlins.
  I'll try it on my -stable box now that I'm back online and fix any
  last minute bugs.



*** 20010119_3 by ejb
- fixed placement of libintl.h in ircd.c/numeric.c


*** 20010119_2 by ejb
- typo in readme.vms
- fix logging in m_kill.c


*** 20010119_1 by db
- committed androsyn' fix for m_message.c non ops should not be able to
  message @#

- cleaned up m_kill.c a bit I hope... users should see just kill reasons.



*** 20010118_20 by db
- fixed warped logic in m_stats.c, didn't allow stats L of anything



*** 20010118_19 by db
- made buffer smaller at the suggestion of bysin, earlier syslogs could overflow


*** 20010118_18 by wcampbel
Updated my TODO list


*** 20010118_17 by wcampbel
Committed AndroSyn's fixed dline_conf.c


*** 20010118_16 by db
- added /stats K for IP and D lines as done by androsyn
- corrected format bug in send.c found by bysin



*** 20010118_15 by wcampbel
Updated my TODO list (sorry for the extra commit, working in multiple 
trees here)


*** 20010118_14 by wcampbel
Updated .depend's


*** 20010118_13 by db
- removed e_line_opers_only f_line_opers_only etc.
  updated parser



*** 20010118_12 by wcampbel
Misc documentation fixes


*** 20010118_11 by db
- initial commit of patricia code a decent trie for dlines/ip klines etc.
  work done by androsyn...



*** 20010118_10 by wcampbel
Removed references to STATS/STATS p/LINKS notices in the general block


*** 20010118_9 by db
- committed new y.tab.c lex.yy.c



*** 20010118_8 by db
- removed links_notice stats_notice whois_notice from conf, these
  are handled by hooks now.



*** 20010118_7 by davidt
Reorder headers in modules/m_motd.c to fix compile error on linux

*** 20010118_6 by davidt
Fixes to m_message.c for lazylinks
Make send.c reentrant, to fix problems with calling client_burst_if_needed
from inside various sendto_* functions.


*** 20010118_5 by ejb
- oops, better make it compile on unix too..


*** 20010118_4 by ejb
- fix typoes in README.VMS
- now, src/* should compile fine on VMS with DECC compiler (with the exception
  of res.c and s_bsd_select.c)


*** 20010118_3 by ejb
- some more fixes for VMS CC.


*** 20010118_2 by ejb
- added README.VMS and make.com
- minor compile for for VMX.


*** 20010118_1 by ejb
- start of VMS port .. doesn't work yet, we need
  - res.c to use BIND8 (VMS does not support BIND4 compatibility)
  - s_bsd_select.c to work
- include the output of yacc/bison in the distribution, for people
  without yacc/lex (including VMS ..)


*** 20010117_14 by db
- fixed /nick changes so they are removed from accept lists of
  any client that happens to have that nick on its accept list.
  This stops someone from tracking nick changes using /accept *

- discovered bug in del_all_accepts()

- renamed misnomer in prototypes



*** 20010117_13 by fl_
- shouldnt really leave debug code in when I commit stuff..


*** 20010117_12 by fl_
- removed the last occurences of sendto_local_opers, replaced with
  sendto_realops_flags_opers().. ta hwy ;)


*** 20010117_11 by wcampbel
1. Updated documentation
2. Added 'locops' to the oper only umodes in the conf parser
3. Updated the oper_flags_as_string() function (which will be used again
   once the ability to specify usermodes set by default in an oper block
   is added in (NOTE:  if you add to this function, watch the buffer size)


*** 20010117_10 by fl_
- you can now specify a path in /modload and have it work :)


*** 20010117_9 by fl_
- im tired.


*** 20010117_8 by fl_
- speaking of documentation..


*** 20010117_7 by fl_
- added +l for locops
- removed sendto_local_opers, replaced it with sendto_realops_flags_opers
- therell be summat else.. I should really document it too..


*** 20010117_6 by davidt
Fixed format bug found by bysin in ts_warn.


*** 20010117_5 by davidt
Fix /rehash of listen{}; blocks.
We still keep old listeners around until all clients 'using' them quit.
Currently s_user.c refers to localClient->listener, nothing else seems to
need it.


*** 20010117_4 by fl_
- fixed a bug toyota found with +v not showing up in /names on anon chans


*** 20010117_3 by db
- ping time out should use %d not %lu, cast it to int



*** 20010117_2 by ejb
- fix problem with hooks, need init_hooks() *before* load_all_modules().


*** 20010117_1 by toot
fixed timestamp in ircd.log


*** 20010116_8 by ejb
- another possible fix


*** 20010116_7 by ejb
- se ebelow


*** 20010116_6 by ejb
- added hook_init, set hooks to zero at startup


*** 20010116_5 by wcampbel
Fixed a compiler warning on Solaris


*** 20010116_4 by ejb
- commit links_notice.c


*** 20010116_3 by db
- reverted sprintf_irc.c
  The entire point of sprintf_irc is to be much faster than sprintf
  not to be a complete replacement for it. Treat it as another function
  entirely that has a similar name.



*** 20010116_2 by wcampbel
Updated .depend's


*** 20010116_1 by db
- fix to check_pings, this probably explains some of the odd cores...
  ptr->next is corrupt at times after an exit_client
- tidied up the comm_open() comm_accep() error handling



*** 20010115_11 by ejb
- added links_notice.so


*** 20010115_10 by fl_
- removed an unneeded if()


*** 20010115_9 by fl_
- fixes to not show server IPs in /links to opers


*** 20010115_8 by db
- This fixes one of the nasty assert errors. comm_open() and comm_accept()
  were both returning ENFILE instead of -1, which happens to be 23.. This
  was seen as a valid fd. This was obviously quite wrong. (s_bsd.c)

- removed numerous debugging code in other files.



*** 20010115_7 by ejb
- slight cleanup to modrestart.


*** 20010115_6 by ejb
- finished stats_notice.so


*** 20010115_5 by ejb
- don't let people flood by accepting them more than once.


*** 20010115_4 by ejb
- initial stats_notice.so, not finished yet.


*** 20010115_3 by wcampbel
And the docs too


*** 20010115_2 by wcampbel
Committed a bug fixed mkpasswd.c (also generates a more secure MD5 salt)


*** 20010115_1 by ejb
- added hook support for modules
  only has one hook so far, doing_whois, which is used for
  whois_notice.so (in contrib).



*** 20010114_2 by fl_
- documented /modrestart


*** 20010114_1 by fl_
- we now have a fully working, unobtrusive modrestart command


*** 20010113_2 by fl_
- added the beginnings of a modrestart command
  be warned:
  this command will atm generate about (roughly) 120 notices telling you
  which have been unloaded and which have been reloaded, but im tired
  and gunna finish it tomorrow
- because of that I didnt document it :), thatll come tomorrow


*** 20010113_1 by lusky
test commit


*** 20010112_2 by davidt
Add channel name to bogus TS message

*** 20010112_1 by a1kmm
- Made some minor modifications to help catch bugs like frobbing the blockalloced stuff.


*** 20010111_13 by ejb
- possible fix for uint32_t problem


*** 20010111_12 by a1kmm
- Do not show the blocks 0s old(like the ones from sendto_one!) so we don't get in a loop.


*** 20010111_11 by a1kmm
- We now support %nu and %0nu (sort of, they are equivalent) in sprintf_irc.


*** 20010111_10 by davidt
report errors freeing localClient too

*** 20010111_9 by a1kmm
- Fixed a bug where we frob and then use something.
- Initialise the last to NULL, since we don't MemSet...


*** 20010111_8 by a1kmm
- Fixed the blockallocator more, it looks like a double free is still there, however.


*** 20010111_7 by a1kmm
- Fixed DNS to work(and leak :( ) again.


*** 20010111_6 by a1kmm
- Fixed dependencies and ensure we never mix debug and non-debug BlockHeap code.


*** 20010111_5 by a1kmm
fixed a minor bug in the block free debugging code.


*** 20010111_4 by a1kmm
- Added block allocator memory debugging.
- Fixed MyRealloc()
- Fixed resolver back.


*** 20010111_3 by a1kmm
- Fixed some memory leaks and some potential buffer overflows and some compiletime warnings.


*** 20010111_2 by a1kmm
Cleaned up some of the memory leaks - nothing seems to leak from the parser or the lexer, but there still
are leaks on rehash.


*** 20010111_1 by a1kmm
Improved memory debugging so it actually works.


*** 20010110_5 by db
- this removes the last remnant of bogus ban removal code..
  this should be done using another cleaner mechanism. blah.
- cleaned up mtrie_conf.c slightly 



*** 20010110_4 by wcampbel
Removed a reference to md5mkpasswd


*** 20010110_3 by db
- first pass at cleaning up mtrie_conf.c



*** 20010110_2 by wcampbel
Added the documentation for the new mkpasswd


*** 20010110_1 by db
- cleanups to client.c and channel.c
  removed unnecessary function call, reformatted some code blocks
  removed unused variable 



*** 20010109_9 by wcampbel
Make clean and distclean descend into iauth and contrib


*** 20010109_8 by db
- unnecessary loop removed for now



*** 20010109_7 by toot
removed old NULL_POINTER_NOT_ZERO #defines


*** 20010109_6 by db
- removed unneeded space in parse.c, do_numeric() this caused
  remote numerics to show up with an obvious extra space.

  due to this -> ircsprintf(t," :%s", parv[parc-1]);



*** 20010109_5 by wcampbel
We now show incomplete (unknown) connections in TRACE to opers


*** 20010109_4 by wcampbel
All of the variables are shown in INFO now (except for oper_only_umodes)


*** 20010109_3 by wcampbel
1. Some doc cleanup
2. Added some more variables to INFO...When I'm done, I will alphabetize 
   them...right now...they are NOT in any semblence of order


*** 20010109_2 by db
- fixed backwards confusing if's on fd 
- make sure CLIENT_EXITED is returned in s_user.c



*** 20010109_1 by wcampbel
Sending PING :<any text> should return 
:<server> PONG <server> :<same text sent in> NOT
:<server> PONG <server> :cptr->name


*** 20010108_16 by wcampbel
Fixed the .depend's...We'll get a couple error messages when we run
make depend now, but at least system libs (rsa.h) in /usr/local/lib
on FreeBSD will not be included in the .depend's.  


*** 20010108_15 by wcampbel
Minor fix of a NOTICE in opme


*** 20010108_14 by toot
put the DLine notices back in..


*** 20010108_13 by db
- removed two more #ifdef's from config.h



*** 20010108_12 by fl_
- guess we werent meant to make that change then, reverted it, it was
   coring the ircd even worse


*** 20010108_11 by wcampbel
Dependencies updated


*** 20010108_10 by fl_
- changed an -1 < to 0 > which should fix a core..


*** 20010108_9 by fl_
- commited dianes fix, modified slightly :)


*** 20010108_8 by db
- don't assume a client is only listed once in the request_list,
  there might be a forward as well as reverse pending in the same list.
  Hope this fixes the assert() bug
- rewrote delete_resolver_queries to do the search and removal of
  clients in one step instead of calling rem_request.



*** 20010108_7 by wcampbel
Removed my md5mkpasswd and added in a replacement mkpasswd that can (if
the system supports it) generate both MD5 and DES based passwords, more docs
will be coming...use ./mkpasswd -h to see the usage


*** 20010108_6 by db
- don't show real ip's of any hosts to non admins in m_server



*** 20010108_5 by db
- added FLAGS_DRONE to ALL_UMODES



*** 20010108_4 by wcampbel
Added action=silent; to gecos blocks, like old X:...:2


*** 20010108_3 by db
- dlinked s_auth.c
- in doing so found a nasty bug in s_bsd_poll.c where it would "walk"
  over previous word to pollfds since a negative index was used... oops
- ircdauth.c will need some re-writes



*** 20010108_2 by madmax
added FLAGS_DRONE to OPER_UMODES for +e


*** 20010108_1 by toot
fixed a memleak dianora found, when reading modules from the config


*** 20010107_8 by toot
expire_gline/tklines wasn't removing more than 1 entry at a time


*** 20010107_7 by db
- auth poll list did not need to be global... 
  ircdauth.c references it atm, #if 0 for now... we'll have to rethink
  how to do this.
- struct AuthRequest had a now unused index 



*** 20010107_6 by db
- removed unused variable in m_kill.c
- resolved global shadowing in send.c
- ensure any client being identd' is removed by exit_client()
- i before e, except after c (spelling mistake in messages.tab)



*** 20010107_5 by db
- this fixes an assert() failure if a client exits before DNS has completed
  We forgot to delete_resolver_queries() in exit_client() in client.c

- I rewrote res.c to use dlink's instead of home grown link list code.



*** 20010107_4 by fl_
- removed unused variable


*** 20010107_3 by db
- client.c check_klines() was referencing bad ptr's due to the exit client
  this is why it wasn't klining more than one client at a time. oops.

- fixed m_kill so user just see's a "Disconnected" message instead of
  the inflammatory "killed by oper message" (as per suggestion of 
  David Harmlein) *sigh* its sad we cannot have more oper accountability
  to users, however, a significant proportion of users are proving to
  be very nasty lusers....  



*** 20010107_2 by fl_
- removed a fixed bug from BUGS file..


*** 20010107_1 by fl_
- documented issues with modunload, that we cant realistically fix..


*** 20010106_32 by db
- forgot a ':' in the notice telling chanops about an attempted kick
  by a halfop. oops



*** 20010106_31 by ejb
- initial start on INVARIANTS support.


*** 20010106_30 by db
- removed quoting code from the k/d parser... the k/d lines in that
  file must never be generated by humans any more... and our /kline
  code ensures no bogus # in the middle of the file.



*** 20010106_29 by db
- removed a major memory leak I introduced. *sigh*
  I had forgotten yylval.string is memory duplicated already in the lexer.
- also removed a rule no longer used  (leaf_block)



*** 20010106_28 by davidt
Sigh, I was right.. fix %@+#chan stuff

*** 20010106_27 by davidt
Fixes for lazylinks kill
Fixes for privmsg/notice for vchans
Fixed some odd stuff in set_channel_mode that was wrong..
and i'm sure i probably broke something, since it's 3:30am.. *sigh*


*** 20010106_26 by wcampbel
Added some more conf variables to INFO


*** 20010106_25 by db
- added missing prototype for sendto_one_prefix, prettied the code slightly



*** 20010106_24 by wcampbel
Removed whois_notice and topic_uh from the ConfigFileEntry struct, one no
longer exists, the other is always enabled, neither variable is used 
ANYWHERE in the source, more bloat...


*** 20010106_23 by wcampbel
Numerous documentation cleanups


*** 20010106_22 by fl_
- dont warn about numerics sent to us from servers
  theyre gunna be unavoidable with lazylinks and nick collides..


*** 20010106_21 by fl_
- added logging, amongst other things to the contrib stuff


*** 20010106_20 by fl_
- fix the compile warning


*** 20010106_19 by davidt
Yet another lazylinks fix.  Prevent a lazyleaf introducing other servers, even if it has a matching hub_mask...

*** 20010106_18 by db
- fixed leaf server code, please read comments in m_server.c
- removed leaf{} block, its really unnecessary read above



*** 20010106_17 by davidt
Fix m_whois for lazyleafs -- hubs were asking leafs about unknown people

*** 20010106_16 by davidt
Oops, sorry, discovered the lazylinks code moved to m_server.c, but
slightly broken. Fixed it, and removed my duplicate code...


*** 20010106_15 by davidt
Fix for changing hub at runtime with active lazylinks

*** 20010106_14 by davidt
Uh.  what happened to check_server?
Restored the lazylink code..


*** 20010106_13 by fl_
- fix for user passwords


*** 20010106_12 by fl_
- removed some excess code I left


*** 20010106_11 by fl_
- added an IsServer() check in parse.c
- split up three identical error messages in m_server.c, so you knew
  which one youre getting
- fixes for jupe/opme


*** 20010106_10 by toot
put quiet_on_ban in example.conf


*** 20010106_9 by db
- full prefix is needed for JOIN



*** 20010106_8 by fl_
- didnt know we had a whois_wait.. which was set too high anyway so its
  now 1 (same as hyb6?)


*** 20010106_7 by fl_
- small fix of an if()


*** 20010106_6 by fl_
- fixes and added rate limiting to remote whois (whois nick nick)


*** 20010106_5 by toot
it doesn't break them :P  a missing blank line hardly matters


*** 20010106_4 by fl_
- we always need a local users reply, it breaks clients not to have one,
  we just spoof it as the global reply


*** 20010106_3 by ejb
- added m_opme.c
- updated README


*** 20010106_2 by a1kmm
- Added examples of leaf{}s to the example config file.


*** 20010106_1 by ejb
- fix IDs being set to random shit.


*** 20010105_53 by db
- added m_nickinfo, /quote nickinfo nick
  will give back its ID and tsinfo for developers



*** 20010105_52 by a1kmm
- Adding dserv to contrib, as an example of services that could be used so we can consider services
  compatibility etc...


*** 20010105_51 by a1kmm
Directory /cvsroot/ircd-hybrid-7/contrib/dserv/inc added to the repository


*** 20010105_50 by a1kmm
Directory /cvsroot/ircd-hybrid-7/contrib/dserv added to the repository


*** 20010105_49 by a1kmm
- Removed debug code I accidentally commited.


*** 20010105_48 by a1kmm
- Cleaned up m_server a bit to squit the right client on error.
- We now support a leaf{} block.


*** 20010105_47 by ejb
- fix IDs for parse()
- added sendto_channel_remote_prefix()
- make part use it.


*** 20010105_46 by davidt
sptr vs cptr, jeez, that was hard to figure out.

*** 20010105_45 by ejb
- remove hash debugging code


*** 20010105_44 by ejb
- make remote users actually get their ID set..


*** 20010105_43 by toot
dont show connection count in /stats u with shide


*** 20010105_42 by ejb
- dont ever put the nick into the ID field.


*** 20010105_41 by toot
no reason to block remote /whois now


*** 20010105_40 by davidt
LazyLink initial nick collsion stuff I did earlier..


*** 20010105_39 by ejb
- fix some more IDs stuff.


*** 20010105_38 by ejb
- fix parse.c format error


*** 20010105_37 by ejb
- finally fixed bug with IDs killing remote users.


*** 20010105_36 by a1kmm
Don't try and DNS resolve ConfItems with wildcards in them.


*** 20010105_35 by db
- added umode +e , requested by pryzm.. She wants a specialized
  +c connect monitor for watching for drones... rather than modify
  +c to give her the information she wants, I've added +e... 
  Possibly only useful to pryzm *sigh*



*** 20010105_34 by toot
. put quiet_on_ban option back in
. got rid of ircd.c compile warning


*** 20010105_33 by toot
fixed vchans for /knock.. still needs to send a notice to remote
chan members though


*** 20010105_32 by db
- This finally fixes host server masks.. though the match loop in here
  probably should move into s_conf.c



*** 20010105_31 by wcampbel
Updated .depend's WITHOUT -DOPENSSL


*** 20010105_30 by cosine
another DEBUGMODE bandaid


*** 20010105_29 by cosine
minor fix for DEBUGMODE #ifdef


*** 20010105_28 by ejb
- remove ID debugging code, fix.


*** 20010105_27 by ejb
- fixed IDs (removed USE_IDS, why was this added?)


*** 20010105_26 by toot
set a default knock_delay if its nto in ircd.conf


*** 20010105_25 by db
- you can't safely re-use bitmasks!



*** 20010105_24 by db
- removed BLOAT again add_hub_or_leaf was not necessary with
  new conf format, only with old.
- aconf->name is NAME of server only not hostname not IP but the
  actual name of the server on the net. switched them around in HUB/LEAF code



*** 20010105_23 by toot
. changed some ugly %lu formating back to %d (caused compile warnings before)
. use ircd.conf knock_delay instead of hard-coded 30 seconds, for m_knock


*** 20010105_22 by toot
. made +a umode propagate and admins can -a/+a themselves too, again.
  everything except /whois uses the conf flags as a check, rather than the umode.
. for local connects, always show idle time if shide is off, and always show opers,
  and show your Own idle time.


*** 20010105_21 by wcampbel
Document the usermode 'drone' '+e' and add support in oper_only_umodes
for it.


*** 20010105_20 by wcampbel
Removed references to HASH in opers.txt, and added README.HASH containing
the old HASH documentation


*** 20010105_19 by toot
don't show the local user count if it's just lies, cause of shide
skip it instead


*** 20010105_18 by toot
it's okay to show the Total server count with shide on


*** 20010105_17 by toot
updated s_conf.c
CVS was playing tricks on me :)


*** 20010105_16 by toot
updated opers.txt


*** 20010105_15 by toot
. took out -pedantic compile flag
. put conf_add_hub_or_leaf() back in for now, cause ircd_parser.y needs it
. use parse() to check param counts for m_client! :)
. added /modreload, (modunload and modload in one)


*** 20010105_14 by a1kmm
- Fixed H and L lines.


*** 20010105_13 by db
- removed more BLOAT conf_add_hub_or_leaf() is now gone.



*** 20010105_12 by db
- removed obsolete Qline struct



*** 20010105_11 by db
- fixed m_jupe.c so it will work without coring.

- fixed a possible nasty core in client.c, its possible a client
  will be on the unknown_list and be exited there, without being
  on a linklist... it will promptly core the server. oops.
  since it has no prev next pointers.

- patched m_hash.c so it will compile. its not very useful ATM




*** 20010105_10 by a1kmm
Separate C/N structures no longer exist, only one with status CONF_SERVER.


*** 20010105_9 by db
- fixed m_jupe.c so it works now. /squit jupe when done



*** 20010105_8 by spookey
 - adds match string to modlist


*** 20010105_7 by spookey
 - fixes compile warning


*** 20010105_6 by spookey
 - fixes core in m_pass (const char* not char*)
 - removes /usr/local/include/rsa.h from .depend (why was this here?)


*** 20010105_5 by db
- never commit until you have done a compile test. duh.



*** 20010105_4 by fl_
- remote connects are giving wallops properly, this should fix it


*** 20010105_3 by db
- in the aop case, it was trying to send an UID for a server
  missing IsServer(sptr) ? sptr->name :sptr->user->id 

- started adding umode +e code to watch possible drones



*** 20010105_2 by fl_
- we should sync oplists after that too..


*** 20010105_1 by fl_
- allow halfops to -h themselves


*** 20010104_40 by wcampbel
Moved m_hash.c from modules to contrib (it hasn't been installed for a while)
Also updated .depend's and documented the 3 modules we have in contrib


*** 20010104_39 by davidt
where'd this little irc_strncpy go....

*** 20010104_38 by davidt
oops, the rest of the sjoin fixes, along with a fix for not updating the
global client count.


*** 20010104_37 by a1kmm
Added check that parc is not too small for m_client.


*** 20010104_36 by davidt
Fix sjoin for +a channels, again

*** 20010104_35 by ejb
- make set_channel_mode support IDs (not fully tested)


*** 20010104_34 by davidt
Got rid of the insane list of MSG_* defines from msg.h

*** 20010104_33 by toot
added s_user.h in cleint.c to kill the compile warning


*** 20010104_32 by davidt
Fix ison for lazylinks

*** 20010104_31 by a1kmm
Added myself to the Hybrid-Team


*** 20010104_30 by fl_
- added the unfinished m_jupe.c to contrib/
- contrib/ stuff goes to path/modules, and isnt autoloaded 


*** 20010104_29 by davidt
Fix ISON for lazylinks.  cosmetic fix for LLNICK.


*** 20010104_28 by fl_
- gave contrib/ a makefile..


*** 20010104_27 by davidt
Another LazyLinks nick collide fix, this time for new nicks...


*** 20010104_26 by toot
-pedantic
fixed header in m_clearchan to say contrib


*** 20010104_25 by toot
moved clearchan to contrib, and made it admin only


*** 20010104_24 by davidt
Tidy up lazylink nickcollides partially..
we still get a collision if a new user is already known by the hub...
(but it'll just collide off the new user, not the existing one)


*** 20010104_23 by a1kmm
- Fixed more compile warnings.


*** 20010104_22 by a1kmm
- Fixing a whole lot of compile-warnings.


*** 20010104_21 by toot
. corrected a couple of comments/headers
. added /part reasons to m_part.c.. only work if the chan is -m (or you're opped)
. put back some old /version letters


*** 20010104_20 by wcampbel
Remove the Apache style conf file test code


*** 20010104_19 by wcampbel
Removed the old test data from MONTHS ago


*** 20010104_18 by db
- fixed too many arguments for format in m_gline.c
- fixed too few arguments for format in s_user.c and the conflict
- slight cleanup to m_nburst.c looks incomplete (David-T)



*** 20010104_17 by db
- split register_user() into register_local_user() and register_remote_user()
  also split do_user() into do_local_user() and do_remote_user()

- modified modules that used these functions

- resolved a silly conflict

- someone care to review this change?
     



*** 20010104_16 by a1kmm
- Fixed CRYPT_LINK_PASSWORD to work again in check_server


*** 20010104_15 by a1kmm
- Use GNU format checking features if __GNUC__ is defined - helps us find bugs in printf like send functions.


*** 20010104_14 by a1kmm
- Re-added missing templates in m_server.c
- #ifdef out id stuff for now - it breaks non-openssl builds.


*** 20010104_13 by a1kmm
- Okay, fixed the 'random' data bug - just a forgotten arg to sendto_realops_flags.


*** 20010104_12 by a1kmm
- Changed CLEARCHAN to work with vchans.
- Fixed up server kicks to work better and not give away the server doing it.
- Made CLEARCHAN make kicks come from a server.
- We now join the person doing a clearchan to the channel after kicking everyone, set the TS down by
  one, and set the modes to +ntsi.


*** 20010104_11 by davidt
oops, forgot to cvs add this..

*** 20010104_10 by davidt
Mass move of m_* prototypes from includes/handlers.h into the individual
m_*.c file.  There's no reason for them to be in a header file, since
they can't be used by anything other than the module.....


*** 20010104_9 by adrian


Tidy up my TODO entries a little more



*** 20010104_8 by wcampbel
Cleaned up the logic of STATS p
1. SHIDE on, non oper - currently will only notify opers if either
   stats_p_notice is on, or stats_notice is on, sends nothing back to
   the user
   COMMENTS PLEASE
2. SHIDE off, non oper - Act as before
For opers...act as before


*** 20010104_7 by adrian


We shouldn't just blindly return (0) if everything is ok. handle_message()
might have been telling us something, and in any case, that is what
CLIENT_EXITED / CLIENT_OK / CLIENT_PARSE_ERROR (or whatever it is) was
designed for ..



*** 20010104_6 by ejb
- oops


*** 20010104_5 by ejb
- oops, forgot to commit this.


*** 20010104_4 by ejb
- remove ID debug code, and fix a nasty bug.


*** 20010104_3 by ejb
- commit initial user ID (TS4) code.
  we support IDs, but a couple of things are missing, most notable ID collisions.
  we also don't actually do anything with the IDs yet.


*** 20010104_2 by a1kmm
- Cleaned up m_server and the associated find_server, we now check earlier for it.
- Fixed hostmasking.


*** 20010104_1 by db
- added clearchan
  The command will kick everyone out of a channel. 
  It should also lock the channel up...



*** 20010103_28 by davidt
Add note about 403 numerics to BUGS

*** 20010103_27 by davidt
Fix problems found by adrian where we were referencing free'd client data.



*** 20010103_26 by db
- return CLIENT_EXITED in all cases that a client is exited. things
  are then rosy again for banned clients.
  Next.



*** 20010103_25 by db
- ewwww there were two exit_client()'s on klined banned clients
  moved up where it should have been done. STILL buggy... but closer.



*** 20010103_24 by ejb
- made modules.c use dlink


*** 20010103_23 by davidt
Remove prefix from NICK message during connect burst

*** 20010103_22 by adrian


* add mem_frob(ptr, len) which will frob a block of RAM with 0xdeadbeef.
  Nice for debugging

* frob cptr memory once we've finished with it. This should help us trap
  bugs where we are referencing cptr/localptr RAM after its been freed,
  which is evil bad and wrong.


*** 20010103_21 by adrian


Re-register IO interest if the client isn't CLIENT_EXITED, rather than
if its CLIENT_OK. We can get a client parse error which doesn't mean we
stop listening to the client.



*** 20010103_20 by ejb
- better linked list handling in modules.c


*** 20010103_19 by davidt
Added some more info about problems with gettext.



*** 20010103_18 by davidt
Eeek, client_burst_if_needed should only check capabilities of local connections

*** 20010103_17 by davidt
Fix whois for LazyLinks


*** 20010103_16 by adrian


put the asserts back in. These catch real bugs in the code, and when
they get triggered they mean we need to fix something.



*** 20010103_15 by adrian


#preprocessor directives should start at col 0, not be indented.



*** 20010103_14 by davidt
Yet another cleanup of lazylink stuff.
Attempt to introduce clients where appropriate, before sending
things from them...


*** 20010103_13 by ejb
- rewrote load_*_module to make it work.


*** 20010103_12 by fl_
- fixes for whois:
- all "whois nick" replies look the same, same for "whois nick nick"
  regardless of where the target is


*** 20010103_11 by db
- ok, added sanity tests in the parser to not try to DupString NULL strings
  it won't work properly but at least it won't core.
- NICK should not send a prefix, to be consistent with previous versions



*** 20010103_10 by toot
set the vchan_id in a much more simplistic way
me so silly :P


*** 20010103_9 by madmax
made the comment about the old config not working more prominent too


*** 20010103_8 by madmax
I've tried to highlight the fact that you need to read INSTALL,
and to ./configure --prefix as much as humanly possible.  
From the number of people the changes have confused, i envision us
being told by a lot of people 'it compiles okay but wont run!'..


*** 20010103_7 by madmax
I was going to wait until we were ready to change the patch level.. but 
thought i'd commit these now before they got lost.
Just updated the files to reflect it being a beta release, and tidied stuff
up a bit.


*** 20010103_6 by madmax
Forgot to commit this (reference to BUGS file)


*** 20010103_5 by madmax
Added a list of known bugs for our beta release.. (and references to the file)


*** 20010103_4 by davidt
- Oops, fixed my last commit message in ChangeLog.
- Fixed m_join.c so it doesn't reveal who set the topic on +a channels.


*** 20010103_3 by davidt
- Fixed slight bug in lazylinks handling in m_topic.c
- Now tell nonops the topic was set by me.name on +a channels.

*** 20010103_2 by db
- yet another obsolete prototype gone



*** 20010103_1 by vx0
- modules.c:279 'char *err;' >-> 'const char *err;'


*** 20010102_35 by spookey
- removes AUTOCONN output lines (ANNOYING)


*** 20010102_34 by db
- updated configure setup.h.in



*** 20010102_33 by db
- committed cstone's contributed patch to fix modules under openbsd



*** 20010102_32 by db
- UNTESTED ignore fd < 0 instead of failing an assert *FOR NOW*
  adrian, might want to look at this one.



*** 20010102_31 by davidt
minor patch to stop BitchX coring over an extraneous space in /names output

*** 20010102_30 by a1kmm
Fixed a core causing bug in fdlist code.


*** 20010102_29 by davidt
Fix kill on nickchange with lazylinks

*** 20010102_28 by db
- backed out a changed until beta-2 , its broken hostmasking



*** 20010102_27 by davidt
Add (#if 0'd out) code not to introduce new NICK's to lazyleafs
immediately.  This will also make debugging LazyLeafs easier, since it
shows up the bugs elsewhere faster, without lots of squitting.
But after a beta.


*** 20010102_26 by db
- upped channel clean time for non vchans to 30 minutes
  I thought it was 30 before, it was only 15



*** 20010102_25 by davidt
Updated dependencies

*** 20010102_24 by davidt
I'm stupid, lcptr vs cptr...

*** 20010102_23 by davidt
*sigh*, fix sjoins _from_ lazylink leafs

*** 20010102_22 by davidt
Make SJOIN burst nicks where appropriate..

*** 20010102_21 by davidt
Fix modunload core bug..

*** 20010102_20 by davidt
Another go at fixing netjoins on +a channels... *sigh*

*** 20010102_19 by davidt
Fix .depend for FreeBSD

*** 20010102_18 by wcampbel
Updated some more docs


*** 20010102_17 by fl_
- reapplied the fix that got removed *growl*


*** 20010102_16 by davidt
- Fix SJOIN halfop handling for lazylinks..
- Fix clear_ban_lists to prevent spewing random memory at clients


*** 20010102_15 by wcampbel
Updated a number of docs


*** 20010102_14 by fl_
- fixes for davidt's patch
- use hide_or_not instead of ALL_CHANOPS in another case


*** 20010102_13 by davidt
Added back send_noncap_serv_butone

*** 20010102_12 by davidt
Don't ignore server notices in +g mode

*** 20010102_11 by davidt
Send halfops as @ not % in SJOIN to a non-CAP_HOPS server

*** 20010102_10 by madmax
Just some notes about it being an alpha release and suchlike.


*** 20010102_9 by madmax
Being pedantic - now reads 'hybrid-7(alpha)'
(hopefully not for long?)


*** 20010102_8 by madmax
Tidied up a bit, pointed out its an alpha release.


*** 20010102_7 by davidt
Fix /list #channame

*** 20010102_6 by a1kmm
Fixed up m_server a little to prevent the kiddies from killing recently established servers by dormant
unregistered connections.


*** 20010102_5 by a1kmm
Added a little extra paranoia to fix_key_old


*** 20010102_4 by a1kmm
Fixed convertconf not to core when not all fields are present.


*** 20010102_3 by db
- ircsprintf() returns the length of the string it formats, 
  I forgot. This means don't have to use an unnecessary strlen()



*** 20010102_2 by davidt
- Add back (fixed) logic to m_burst.c (otherwise LL cjoin breaks)
- Fix some more cases in m_join.c that reveal the vchan's true name..
- Fixed the comment in messages.tab for ERR_UNAVAILRESOURCE
- Fix cjoin_channel to find a unique vchannel name, or return
  ERR_UNAVAILRESOURCE


*** 20010102_1 by db
- removed some faulty logic in m_cburst.c, this cored us
  when the nick wasnt' present..



*** 20010101_56 by db
- our new parse.c splits everything up thats separated by a space
  unlike the old parse.c which stopped parsing into separate parv[]
  after maxargs?
- this will handle the RFC just fine, even epic works. Takes up to
  5 nicks as per the RFC



*** 20010101_55 by a1kmm
Fixed links so that when SHIDE=0 it works as before.


*** 20010101_54 by davidt
Refix the core bug so it catches both possible problems, Doh.

*** 20010101_53 by davidt
Fix possible core bug in lljoin...

*** 20010101_52 by davidt
removed test for length of string (which is checked in build_channel_list) against address of pointer.. oops?

*** 20010101_51 by wcampbel
gline.log.<date> should be in LOGPATH, not ETCPATH


*** 20010101_50 by a1kmm
Don't reload modules if they are already loaded and we see a module= in the config file.


*** 20010101_49 by davidt
Fix join 0 on vchans, and fix that stupid compiler warning for m_challenge.c

*** 20010101_48 by db
- parv[1] might be longer than max channel len if two channel names
  are catenated. better to check in build_channel_names



*** 20010101_47 by bysin
Why didnt anyone make sure parv[1] was > CHANNELLEN, i had a fun time buffer overflowing that.


*** 20010101_46 by ejb
- fix s_serv.c


*** 20010101_45 by davidt
Remove extra variable i forgot about

*** 20010101_44 by db
- ignore bogus TS from servers. pure and simple. TS0 is broken
  It =will= desync for a while. *TOUGH*



*** 20010101_43 by ejb
- DONT put all modules in example.conf, they are loaded on startup anyway.


*** 20010101_42 by davidt
*Sigh*. sorry. I missed a space. :(

*** 20010101_41 by davidt
Display <secret> for +s vchans in the vchan list.

*** 20010101_40 by a1kmm
better check realname too while we are at it...


*** 20010101_39 by a1kmm
Added a sanity test of user and hostname length from other servers.


*** 20010101_38 by wcampbel
Added some more conf variables to INFO


*** 20010101_37 by davidt
Fix a buffer overflow in send_mode_list

*** 20010101_36 by fl_
- sending "JOIN #channel" on its own would core the uplink: fixed


*** 20010101_35 by a1kmm
okay, now the cvs 'conflict' over m_whois.c should be completely resolved and madmax's comment out version
should stay...


*** 20010101_34 by a1kmm
Added module list to example.conf



*** 20010101_33 by wcampbel
Cleaned up the example.conf a little


*** 20010101_32 by davidt
Prevent non-human 'things' being sjoined to channels....

*** 20010101_31 by davidt
Don't allow servers to JOIN channels, eugh

*** 20010101_30 by davidt
Eliminate race condition from s_serv.c, where we could add a server to serv_list (for SJOINS, etc) without first bursting it)

*** 20010101_29 by fl_
- dont show how many local users we have if shide is on
  instead make the local user reply the same as the global one


*** 20010101_28 by db
- setting autoconnall to 0, should not affect the ability of others
  to connect to your server, or you to connect outgoing. If we want the
  capability of disabling connections to the server, there should be another
  set flags. Its a misnomer to double use autoconnall for that.



*** 20010101_27 by davidt
Add message_locale to doc/example.conf
Add vchans_oper_only to doc/example.conf, doc/whats-new.txt and
actually add the code to do it.
Fix modload, et all to send error messages if used by non ircops
(instead of just silently ignoring the command) 


*** 20010101_26 by madmax
The last patch broke /whois
(You could only whois people on the same server if your uplink didnt forward
the numerics - not something we want..)
Just commented out A1kmm's code.
We can come back to this once we've cut a beta


*** 20010101_25 by toot
'already registered' should be a numeric, not a notice


*** 20010101_24 by davidt
Oops.  cjoin should also work on non-lazylinks now :)

*** 20010101_23 by db
- ignore capab sent from remote server



*** 20010101_22 by davidt
Missed a change to cburst..

*** 20010101_21 by davidt
Massive attempt to cleanup vchans, and some problems with vchan+LL.
- change cjoin on LL to ask the hub
- change cburst to support cjoin as well as join (minor change)
- change lljoin to support cjoin
- change lljoin to support joining vchans
- fix opsyncing to use the correct channame in vchans
- various other things I've forgotten


*** 20010101_20 by a1kmm
Fixed whois to always route.
Now show idle times even when SHIDE=1.


*** 20010101_19 by vx0

Updated contributor names list


*** 20010101_18 by a1kmm
- Away is now better flood controlled.


*** 20010101_17 by fl_
- it should compile now..


*** 20010101_16 by fl_
- dont sent people a +e/+I list when they get opped in a +a chan


*** 20010101_15 by bysin
Added me cause I'm lame.


*** 20010101_14 by db
- delay initial startup of try_connections() to forestall nick collides
  because of servers that haven't noticed the server restart.



*** 20010101_13 by bysin
Oops, fixed buffer overflow again.


*** 20010101_12 by bysin
I fixed a buffer overflow in this.  Right before its gunna be released.  I hope this works.


*** 20010101_11 by db
- added isomer and riedel



*** 20010101_10 by madmax
Gave myself a TODO


*** 20010101_9 by davidt
Fix mode on vchans...

*** 20010101_8 by davidt
Fix vchan part to work properly with LazyLinks too... (oops)

*** 20010101_7 by davidt
Fix vchan part to work properly

*** 20010101_6 by davidt
stop collapse() coring on a null pattern

*** 20010101_5 by toot
only hide remote numeric origins if shide is on


*** 20010101_4 by toot
. finally, you can join +k vchans :)
. fixed /mode #chan giving weird replies
. removed some old commented code in channel.c


*** 20010101_3 by db
- just stuck an early draft of this into cvs



*** 20010101_2 by wcampbel
make depend needs to have the CFLAGS in addition to -MM.
This is for making sure that the error messages associated with gcc
not being able to find /usr/local/include/libintl.h don't crop up.


*** 20010101_1 by wcampbel
Updated my part of the TODO list


*** 20001231_31 by wcampbel
1. Added A1kmm's match.c patch (to fix gecos blocks)
2. Fix compiler error in m_part.c (chname -> name)


*** 20001231_30 by davidt
Uhmm.. or should part be the top chan name between servers?
argh. see bug #15


*** 20001231_29 by toot
removed a cvs tag from ChangeLog, and fixed some of my typos :P


*** 20001231_28 by davidt
parting a vchan should send vchan->chname to remote servers....

*** 20001231_27 by toot
fixed some formatting in m_whois


*** 20001231_26 by toot
it didn't :P
char *_version = "<dollar>Revision: 1.35 <dollar>"; looks a bit poo


*** 20001231_25 by toot
checking that Revision CVS tag works okay for module version numbers


*** 20001231_24 by spookey
 - #define CONNECTTIMEOUT  15      /* Recommended value: 30 */


*** 20001231_23 by toot
stopped /names showing member lists in a +s channel from outside
and made it skip +i people in -s chans from outside


*** 20001231_22 by wcampbel
ANONOPS -> AOPS


*** 20001231_21 by davidt
Add missing prototypes to stop gcc moaning.

*** 20001231_20 by db
- added spookey to Hybrid-team. 



*** 20001231_19 by davidt
Fixes to allow @#chan and +#chan to work correctly.


*** 20001231_18 by db
- really ANONOPS is way longer than any other capability we have
  lets shorten it to AOPS ok?



*** 20001231_17 by db
- optimized can_join a bit
  No need to generate an expensive to generate string twice, so added
  check_banned as a helper function for is_banned that way can share
  the strings from can_join
- make_nick_user_host was being called, then strcpy'ed. dumb. why not
  tell it where to generate the string in the first place? and remove
  a dumb strcpy?



*** 20001231_16 by spookey
 - fixes flood control... >= not >


*** 20001231_15 by db
- updated TODO



*** 20001231_14 by wcampbel
Document ANONOPS CAPAB


*** 20001231_13 by wcampbel
Document links_delay


*** 20001231_12 by wcampbel
Updated .depend's


*** 20001231_11 by wcampbel
Added Riedel's REHASH CHANNELS patch


*** 20001231_10 by lusky
- david (accidentally?) moved the %type's back to the top, they've got
  to be below the %tokens.


*** 20001231_9 by toot
. changed most remaining param counts so that parse() checks them
. servers don't send USER any more do they? - removed some checks
  which were only used for that anyway..
. removed a few more redundant checks, which parse() takes care of
. show "*" inplace of Nick for unregged users with no nick


*** 20001231_8 by spookey
 - minor cleaups


*** 20001231_7 by davidt
Attempt to fix various issues with channel modes.. although there are still a few bugs left :/

*** 20001231_6 by toot
. fixed a possible overflow in m_list with persistant vchans
. moved the vchan_id setting into remove_user_from_chan so the user
  is still in a dlink_list :P


*** 20001231_5 by lusky
- fixed make distclean for gnats


*** 20001231_4 by db
- hard to find typo in ircd_parser.y yyval instead of yylval
  caused it to core parsing message_local="string";




*** 20001231_3 by db
- this is some very old fugly hacked code we had in hybrid-6 to 
  allow multiple Q lined nicks ... never mind it was a hack, its
  gone. 

- also moved the %type block back in ircd_parser.y until debugged
  the set locale code. 



*** 20001231_2 by db
- fixed logic in m_stats.c pertaining to o_lines_oper_only



*** 20001231_1 by db
- added check for unknown type in proc_answer in res.c 
  only rudimentary logging added for now.
- check for enough parameters in m_invite.c core bad, not enough parms good.



*** 20001230_25 by fl_
- reverted back to old behaviour of only chanops seeing +e/+I


*** 20001230_24 by lusky
- more solaris fixes, should now build and install cleanly


*** 20001230_23 by db
- *red face* backed out a change I thought about making but forgot to
  remove a ')'



*** 20001230_22 by db
- quick hack for now (adrian, forgive me, for I have sinned)

    /* XXX NOT the right "solution" */
#if 0
    assert(fd >= 0);
#endif
    if(fd < 0)
      return;




*** 20001230_21 by davidt
Only resync the channel if required..

*** 20001230_20 by davidt
- Create a new capability: CAP_ANONOPS for servers that support +a
- Fix +a so it's only sent to servers supporting it
- Fix +a so that nonops still see modes they should, but as server modes.
- Fix sendto_channel_local to send NONOPS messages to voiced users too.


*** 20001230_19 by lusky
- check for strings.h for bzero() on solaris


*** 20001230_18 by lusky
- have autoconf detect whether -export-dynamic is needed for ld


*** 20001230_17 by db
- I hate broken tree's resolved a conflict.. weird conflict too
  looked identical the two sections



*** 20001230_16 by lusky
- solaris yacc is picky picky picky
- replace strsep() with strtoken()


*** 20001230_15 by lusky
- oops, forgot an arg to sprintf


*** 20001230_14 by lusky
- missed another setenv()


*** 20001230_13 by lusky
- eradicated setenv(), it's not portable.  specifically sol2.6 doesn't
  have it.


*** 20001230_12 by fl_
- Fix for IP klines 
- We now check to see if remote klines exist locally, before applying them


*** 20001230_11 by db
- removed ';' that were in the wrong spot, these caused bison and solaris
  yacc to have a fit.



*** 20001230_10 by db
- chptr->vchan_id will never be a NULL pointer so the test wasn't doing
  anything at all. Its declared as 
  char            vchan_id[NICKLEN*2];   /* use this for empty vchans */
  not a char *; One could do if[chptr->vchan_id[0]) but then once set
  vchan_id[0] would never be null either.



*** 20001230_9 by toot
added a paranoid check in pick_vchan_id


*** 20001230_8 by lusky
- use errno.h instead of sys/errno.h.  freebsd and redhat don't care, but
  solaris does.


*** 20001230_7 by toot
moved the code that set vchan_id up


*** 20001230_6 by lusky
- more compile warning fixes.  mmmm, socklen_t.  compiles on redhat6.1 now
  without warnings (if you fix the broken /usr/include/bits/socket.h
  by hand).


*** 20001230_5 by lusky
- more compile warning fixes, /modules compiles cleanly on freebsd3.4 now


*** 20001230_4 by lusky
- more cleanups
- fixes /usr/local/include/rsa.h snafu from last commit


*** 20001230_3 by db
- committing madmax's links patch before it gets lost 



*** 20001230_2 by lusky
- more cleanups, /src now compiles without warnings on fbsd3.4


*** 20001230_1 by lusky
more massive cleanups of compiler warnings


*** 20001229_28 by lusky
started cleanup of compiler warnings


*** 20001229_27 by lusky
- hack to make the developer CFLAGS the default.  You can still set CFLAGS in
  your environment before running configure if you want to override them.


*** 20001229_26 by lusky
added my IM pipedream to TODO


*** 20001229_25 by davidt
oops.  Stay compatable with ircd-hybrid-6...

*** 20001229_24 by davidt
Fix $$/$# -- still problems with LL, just like everything else..
I'll look into that [again] later..


*** 20001229_23 by lusky
- don't recurse into messages if we don't have gettext


*** 20001229_22 by wcampbel
Document problem with old openssl installed in /usr/local/lib failing
to link the RSA stuff used in Hybrid


*** 20001229_21 by davidt
Ignore errors installing message files.. hrm.. maybe leaving the .mo in the repo wasn't such a bad idea.. *sigh*

*** 20001229_20 by lusky
updated TODO


*** 20001229_19 by lusky
- added rm config.cache to make autoconf
- fixed configure to find gettext() in /usr/local/lib/libintl.a
- kludge in config.h so HAVE_GETTEXT follows HAVE_LIBINTL
- custom.mo shouldn't be in the respository
- removed HAVE_GETTEXT from m_info, USE_GETTEXT is what we care about


*** 20001229_18 by davidt
Stop LL leafs replying to MODEs from servers with another MODE..
this should never happen, but it is currently (see bug #7 on hybzilla).


*** 20001229_17 by fl_
- removed the sendto_match_noncap_servs(), as its now redundant
- if a user sets mode +h nick, and hes on a server that doesnt support
  halfops, he would be opped.  we still pass the +h as far as possible,
  but do nothing to that user



*** 20001229_16 by wcampbel
"Permission Denied-" -> "Permission Denied -"
This has been driving me crazy


*** 20001229_15 by wcampbel
Put in Riedel's revised operguide.txt, thanks a lot!


*** 20001229_14 by wcampbel
1. Added links_notice to example.conf
2. Corrected Riedel's nick in ChangeLog
3. Fixed some general {} settings in ircd_parser.y (stats_p_notice, glines)


*** 20001229_13 by wcampbel
Minor correction to send.txt


*** 20001229_12 by fl_

- Added sendto_match_noncap_servs to send.c, and documented it
- Send mode #channel +h nick as +h via sendto_match_cap_servs, and as +o
  via sendto_match_noncap_servs, thus keeping the channel synced
- Updated my todo


*** 20001229_11 by db
- fixed bug in m_sjoin.c that cored server. Non local servers being
  introduced via sjoin and given by sptr, do not have a LocalUser part
  hence, this field is NULL and will core if you try to refernce the caps
  field using IS_CAP()



*** 20001229_10 by fl_

- fixed a bug I made which caused a -o nick when they werent being deopped


*** 20001229_9 by fl_

- gave myself a todo list..


*** 20001229_8 by fl_

- +e/+I modes can now only be seen by chanops


*** 20001229_7 by davidt
Fix gettext() for FreeBSD (LDFLAGS="-L/usr/local/lib" ./configure).
Anyone with autoconf knowledge know how to make it check /usr/local/lib
automagically?


*** 20001229_6 by madmax
Links are now stored in the file in a format resembling normal links output
ie "servername uplink(me.name) :hops(1) info"
This makes it look a bit prettier in mirc etc ;)
Also it now outputs me.name in the links list (again for consistency).


*** 20001229_5 by toot
flame's right.. there's no need to send +e/+I when you get opped
in a +a chan.


*** 20001229_4 by toot
. hide H in version with hide_server
. use MAXMODEPARAMS rather than 4 in the +a sync stuff


*** 20001229_3 by db
- increased MessageFileLine length this should be malloced ;-/
- added server info to user seen /links



*** 20001229_2 by db
- fixed another bug in s_conf.c
  recheck_class() had the bad side effect of moving opers from oper
  class to their old class on a /rehash... It also had the side effect
  of dropping already made connections.. not cool Its not necessary
  to recheck classes as it happens... fixed.



*** 20001229_1 by db
- ok. this is the first cut at building an user readable /links
  from doing our own /links and storing in a file for off line use.



*** 20001228_38 by fl_

1. Added error message if user is unopped, and does a /mode #chan +e
2. +b/+d modes are no longer shown to be removed/placed when a user is
   deopped/opped in a +a channel, they can see the lists anyway so they
   dont need us to keep them in sync..
3. If you -h'd someone on a +a channel, they didnt see the -h: fixed
4. If the channel is +a, /mode #chan +d wont tell you who set the ban if
   youre unopped, same as +b

I wanted to remove the +e/+I mode from the sync too.. need to wait to
talk to david first tho. :)


*** 20001228_37 by wcampbel
1. Updated my TODO list
2. Update INFO to show HAVE_GETTEXT and SELECT_TYPE


*** 20001228_36 by wcampbel
Update of a couple documents


*** 20001228_35 by fl_
- fixes for servermasks in remote klines that include the local server


*** 20001228_34 by fl_


Added more documentation to doc/kline.txt


*** 20001228_33 by davidt
&& should be ||..

*** 20001228_32 by wcampbel
Forgot to document it in opers.txt...where's your bloody mind today Hwy?!


*** 20001228_31 by davidt
.collapse the signs for chanop-only modes..

*** 20001228_30 by wcampbel
Added o_lines_oper_only option to the configuration file


*** 20001228_29 by davidt
oops, got -/+ back to front

*** 20001228_28 by davidt
Try to keep +a channels synced up with the clients.
When a channel goes +a, tell everyone that the channel has been massdeoped
When it goes -a, tell everyone that the ops have been mass oped..
When an individual user is opped/deoped, tell only them.


*** 20001228_27 by db
- local array shoud be static. bad Diane bad bad bad



*** 20001228_26 by db
- ummm unitialized pointers should not be strcatted... bad bad bad
  bad coder...



*** 20001228_25 by spookey
 - Adds string lookup capability to modlist (QUOTE MODLIST [STRING])


*** 20001228_24 by bill

- fixed mode bug (thank you, Diane)
- I hear that a new messages/custom.mo wouldn't hurt :)


*** 20001228_23 by davidt
Attempt to sync the client up when it gets given ops on a +a channel..

*** 20001228_22 by davidt
Only hubs don't send info... leafs always send..

*** 20001228_21 by adrian


* Check to make sure a SIGHUP actually causes a rehash. The last time I tried
  it, the server stayed running, but the ircd stopped listening on ports.



*** 20001228_20 by adrian


Add my stuff to the code whats-new file. Can everyone add their own?



*** 20001228_19 by adrian


add a documentation index.txt file in doc/ so we can at least attempt to
show people what we have avaliable. Perhaps it should be called README,
I dunno.


*** 20001228_18 by adrian


* fix typo
* add 'active' because stats f displays active fd's, not all of them.



*** 20001228_17 by bill

- working on that MODE problem between servers still


*** 20001228_16 by ejb
- add links_notice to config.


*** 20001228_15 by toot
. started adding the ircd.conf options to /info (same order
  as in example.conf)  got as far as max_nick_changes.
. put back a "You are Dlined" notice that had run off 
. removed a couple of unused settings


*** 20001228_14 by bill

- added hyb7 +h modes to hyb6 +o modes


*** 20001228_13 by toot
show a couple of ircd.conf options in the /version line
G(glines) and H(hub) are there.. with room for more ;) 


*** 20001228_12 by davidt
Add nick_changes=yes; to example.conf

*** 20001228_11 by davidt
Add missing ()'s so /lusers only hides the info for NON-opers

*** 20001228_10 by bill

- added hyb6 compatibility checks for halfops (best solution is to tell remote s  ervers that they're regular ops)
- updated dependancy file accordingly


*** 20001228_9 by davidt
It would also core sending the failure message.. bleh.

*** 20001228_8 by davidt
/set autoconn with no params would core the server.

*** 20001228_7 by bill

- fixed typo


*** 20001228_6 by toot
cleaned up /stats e.. tab symbols just don't work with most irc clients


*** 20001228_5 by toot
. check /set, rather than ircd.conf option for hide_server in m_whois


*** 20001228_4 by db
- oops. I broke remote topic



*** 20001228_3 by lusky
removed a bunch of unneeded junk from configure script
fix for missing RTLD_NOW on openbsd


*** 20001228_2 by lusky
fixed some typos in ChangeLog (yes, you can edit ChangeLog even though
   it's automatically updated).
Major cleanup to Hybrid-team
version.c.SH now reads ../Hybrid-team
removed configure from Makefile.in and added new make autoconf option


*** 20001228_1 by lusky
fixed socklen_t check


*** 20001227_38 by wcampbel
1. Document some of the configure options (kqueue!!!)
2. Bring INFO up to date (show if OPENSSL is enabled or not, STATS_NOTICE
   no longer compiled in, so don't show it)


*** 20001227_37 by wcampbel
1. Updated my part of the TODO list
2. Synchronized Hybrid-team and version.c.SH (einride in one, flame in the 
   other, and Wohali's email address changed)


*** 20001227_36 by ejb
- make configure should run conifgure as well as building it
- make /restart require server name


*** 20001227_35 by davidt
Oops, do not use sendto_ll_.. for sjoin

*** 20001227_34 by davidt
I remember fixing this... wtf

*** 20001227_33 by ejb
- update my todo list


*** 20001227_32 by davidt
oops, I'm stupid.  this _does_ work.

*** 20001227_31 by ejb
- add readme for cintrib


*** 20001227_30 by davidt
Fix rather confusing message to opers when a server sends a numeric
directed at a server.
Fix exit_one_client so that we take LLs into account when a client quits.


*** 20001227_29 by ejb
Directory /cvsroot/ircd-hybrid-7/contrib added to the repository


*** 20001227_28 by davidt
Fix ping to prevent servers throwing 402 nosuchserver numerics at each other

*** 20001227_27 by db
- committed flames m_kline.c fix



*** 20001227_26 by db
- fixed bug stumbled across by mariab, how did this one get missed?



*** 20001227_25 by ejb
- check for socklen_t


*** 20001227_24 by ejb
- readd include/ to Makefile
- make configure be rebuilt automatically when needed.


*** 20001227_23 by wcampbel
Added Riedel's operguide.txt (Currently for Hyb5/6, in progress for Hyb7)


*** 20001227_22 by ejb
- oops, forgot to add this.


*** 20001227_21 by db
- oops, forgot to add this.


*** 20001227_20 by db
- removed include from Makefile.in for now



*** 20001227_19 by ejb
- install headers into ircd/include
- check for socklen_t (check doesnt work too well now, will fix later)


*** 20001227_18 by davidt
Allow remote servers to send notices

*** 20001227_17 by davidt
quick patch to make yes/on == 1 and no/off == 0.

*** 20001227_16 by wcampbel
Committed flame's remote connect WALLOPS fixes


*** 20001227_15 by db
- committed flames operwall changes



*** 20001227_14 by wcampbel
Updated .depend's again


*** 20001227_13 by davidt
Oops, fix for my last commit


*** 20001227_12 by davidt
Massive bunch of fixes for LazyLinks.
INVITE now works if a hub is trying to relay an INVITE to a LL leaf
which doesn't know about the channel yet.
TOPIC now works if a user on a LL leaf tries to get the topic for a
channel the leaf doesn't know about
Hubs now only send MODE changes to LL leafs that know about the user
coredump in LLJOIN fixed..
some other misc stuff too...


*** 20001227_11 by db
- wrong parmcount, cores each of unkline, undline, ungline



*** 20001227_10 by db
- use the parameter block, don't core on 0 parameters for dline



*** 20001227_9 by davidt
Fixed the off-by-one error in the paramcount


*** 20001227_8 by davidt
Added back /quote set msglocale, which vanished mysteriously when
the new table-based SET code was comitted.
Reworked the argument handling for the SET handlers in the process,
handlers can now take: char; char, int; or int; arguments.


*** 20001227_7 by db
- must use ClearOper() macro to deoper, otherwise handler is still set
  to oper handler. ooops



*** 20001227_6 by wcampbel
DNS and HTM no longer exist, document CJOIN in opers.txt


*** 20001227_5 by wcampbel
Removed references to the old conf format removed


*** 20001227_4 by davidt
Fix up messages/ to work with the new install stuff

*** 20001227_3 by db
- notify target if source is a half-op and target is an op



*** 20001227_2 by db
- topic change from server should appear to come from local server
  always.



*** 20001227_1 by db
- pathological case would cause a core. If someone fed back the
  same server as the server as "me" it would core since there would be
  no ->from... This bug looks like it would be in hybrid-5, hybrid-6
  and all 2.8 derivitatives



*** 20001226_10 by wcampbel
Document MD5 oper password support


*** 20001226_9 by db
- if test on name not className caused spoofs to lose their classes



*** 20001226_8 by db
- missing DupString() on cconf classname



*** 20001226_7 by bill

- fixed typos


*** 20001226_6 by db
- fixed bug in m_nick, leafs always should send their nick changes
  since a leaf always introduces all of its clients to their uplink
  but hubs should continue to watch they do not send nick changes for
  clients that have not been introduced yet to leafs.



*** 20001226_5 by db
- number of wrong counts in the parmcount table.. caused these to core
  parc inludes the source as well as arguments



*** 20001226_4 by db
- lljoin was checking for arg count, when thats no longer necessary
  given the new parser

- parser got the parc count off by one when checking for vality, off by one
  error.. also cleaned up formatting

- modules.c two functions were referring to basename() which had been 
  changed to irc_basename()

- s_serv.c was sending topic to servers that didn't see that server on
  channel, changed interface so s_serv.c bursts topic info to lazyleaf
  as well as setting topic

- changed m_topic.c to allow servers to set topic and topic info



*** 20001226_3 by db
- don't burst the TOPIC in s_serv.c until there is a ms_topic() handler
  the server isn't on channel so the leaf will send back an not on channel
  numeric to the server!

- cleaned up setting of fd_note in m_nick()... in both cases it
  is known the nick is local, as non local nicks are handled in separate
  function.



*** 20001226_2 by db
- fix core in m_list.c if /list of non-existent channel is done. oops



*** 20001226_1 by spookey
 - moved basename() to irc_basename() -- compatability issue with old glibc systems (string.h used to declare basename())


*** 20001225_20 by wcampbel
Updated dependencies


*** 20001225_19 by ejb
- fix knock paramcount
- make knock use +p to stop it, not +s


*** 20001225_18 by wcampbel
1. Noted that auth blocks with redirection MUST have a class
2. is- says anonops is hideops


*** 20001225_17 by db
- I'm not sure how this ever worked before..
  yylval.string should be DupString'ed in MOST cases before adding to conf
  link list

  UNTESTED folks, sorry have to do the Christmas day family visiting thing NOW



*** 20001225_16 by ejb
- allow remote whois.


*** 20001225_15 by toot
replaced some ConfigFileEntry.hide_server with GlobalSetOptions.hide_server


*** 20001225_14 by ejb
- split out some of parse() into a couple of new functions,
  handle_command() and string_to_array().


*** 20001225_13 by toot
. don't want it to say its listing pending_glines if there aren't any
. param counts should al be correct now


*** 20001225_12 by toot
. fixed some paramcounts in modules
. make GLINE_CLEANUP_TIME a bit more frequent


*** 20001225_11 by wcampbel
Document HUB CAPAB


*** 20001225_10 by wcampbel
Document ISUPPORT


*** 20001225_9 by db
- send on HUB capability if configured as HUB



*** 20001225_8 by wcampbel
1. Updated my TODO list
2. Updated whats-new.txt a little
3. Put a missing space in flame's name
4. Added a summary of the user and channel modes


*** 20001225_7 by db
- I'm convinced. Lets allow remote motd in non shide mode at least
  Its a module, so it can all be changed on the fly anyway.



*** 20001225_6 by db
- sending channel_member_names() to a server is not useful, sending it to the
  client that just joined, might be.



*** 20001225_5 by toot
. made glines and pending_glines into dlink_lists
. couple of minor cleanups/cosmetic changes to m_nick


*** 20001225_4 by db
- motd of non local servers should not be shown to users



*** 20001225_3 by db
- was missing nick in do_numeric in parse.c ... 401 was not
  (no such nick) was not being seen properly by client on LL server.



*** 20001225_2 by db
- ummmm parse isnt' handed a null terminated line, its handed the end of
  of the buffer as well as the start. The end of the buffer if its 
  rfc compliant, will be '\r' '\n' but no terminating '\0'
  so, take bufend look one back that should be a '\n', then blast it
  then look to see if there is a '\r' before it, if so blast it as well
  then thats it... end is now the valid end of the buffer 



*** 20001225_1 by db
- numeric sent to server should be announced what it is ...
- nick change while not on channel would not be propogated to a LL server
  causing those mysterious nick collides. oops.



*** 20001224_23 by db
- extra '\n' in log() not needed



*** 20001224_22 by wcampbel
1. Forgot to change the formatting in oper_only_umodes
2. Add 'rej' '+r' to oper_only_umodes
3. Created a new simple.conf

--snip--
# NOTE TO DEVELOPERS:  Do we set defaults for the variables in the general
#                      block?  If so, then I can leave out most of the things
#                      in here and make it simpler to configure.  If not,
#                      please let me know so I can document things clearly
--end--


*** 20001224_21 by db
- bufend was already there, so use it...



*** 20001224_20 by wcampbel
Add a little more documentation to is-'s oper_only_umodes


*** 20001224_19 by db
- removed unneeded match()
  and removed quite obsolete comments... 
  *sigh* This isn't an historical paper folks, those belong in museums
  not a modern ircd.



*** 20001224_18 by toot
reworded total recieved connections message.  and fixed it in /stats u


*** 20001224_17 by toot
fixed bug that made the date appear twice when klines where written


*** 20001224_16 by adrian


I hate my own grammar.



*** 20001224_15 by toot
SOD IT!!
made tklines into a dlink_list


*** 20001224_14 by adrian


Explain what we're not doing with the poll fd lists ..
Yes, I'll get there after some more feedback.. :-)



*** 20001224_13 by adrian


Stick in an #error in the code - I still haven't finished the poll() code,
so I haven't rewritten the select code ..



*** 20001224_12 by db
- removed lame test that was restarting irc.mcs.net for no reason..
  under heavy ddos the server was being lagged enough to restart..
  No real need for this test.



*** 20001224_11 by db
- remove last remnant of evil #ifdef CHROOT



*** 20001224_10 by adrian


Change some of the comments which aren't applicable now that the old-school
io loop is gone.



*** 20001224_9 by adrian


* move try_connections() into an event, where it should have been a long
  time ago. Its called every TRY_CONNECTIONS_TIME seconds, which right
  now is defined as 60 seconds

* Make most of ioloop() redundant. MMmmmm.. ioloop() looks sexy-slim now..



*** 20001224_8 by toot
. tkline expiry kept crashing.. redid it so it won't
. added VCHANS to 005 numeric


*** 20001224_7 by db
- tidied up isomer's parse.c mods... Then noted that someone was
  sending a numeric to "me" which led to...
- fixing who sends the MODE message in m_mode, it should be sptr->name
  not me.name
- Then noted a conflict in LOGPATH, which I resolved by changing 
  LOGPATH in ircd_parser.y ircd_lexer.l to T_LOGPATH
- removed with extreme prejudice all UID/GID CHROOT crap. my goodness
  efnet servers are dedicated now, and if you really insist, set up a jail
  or something.



*** 20001224_6 by wcampbel
Revised a couple documents


*** 20001224_5 by adrian


Create a LOGPATH which contains the logfile directory, and then
stick ircd.log in there instead of ETCPATH.

What *really* should happen is that these paths and filenames should
be defined in the configuration file, but... :-)



*** 20001224_4 by isomer
* rewrote do_numeric(), it nolonger accepts multiple targets (can't happen)
and hopefully has bugs removed. on the other hand tho, it's only been tested
in that it compiles...





*** 20001224_3 by ejb
- fixed bug whereby a module was not actually dlclose()d in unload_one_module,
  hence trying to reload a module would actually reload the old one
- fixed paramcount in accept
- added mo_version to version_msgtab


*** 20001224_2 by isomer
Changed the way mo_version works with respect to hunt_server



*** 20001224_1 by isomer
oops! forgot about opers!


*** 20001223_57 by wcampbel
Dependencies again....these need either manually done every time someone
changes a header, or automatically done.


*** 20001223_56 by isomer
* added 'show_isupport' and added to m_version (local only).



*** 20001223_55 by ejb
- update my TODO list


*** 20001223_54 by ejb
- finally fix the annoying parse error bug in ircd_parser.y


*** 20001223_53 by wcampbel
1. Updated .depend's
2. Added blank depend rules in doc, gnats, and tools Makefile.in's


*** 20001223_52 by ejb
- make ISUPPORT numeric support max_targets dynamically
- cleaned up gnats/Makefile.in a bit.


*** 20001223_51 by ejb
- some more paramcount fixes
- make +h's propagate (oops)


*** 20001223_50 by ejb
- cleanup and fix of parse.c, should fix a couple of bugs.


*** 20001223_49 by ejb
- documented max_targets, and made it default to 4.


*** 20001223_48 by ejb
- fix for another parse.c bug
- make max_targets an ircd.conf options


*** 20001223_47 by isomer
Doh! forgott supported.h (sorry toot!)



*** 20001223_46 by isomer
added 005 ISUPPORT support.



*** 20001223_45 by ejb
- added explanatory comment in parse()


*** 20001223_44 by ejb
- finally fix the broken longarg handling in parse.c



*** 20001223_43 by ejb
- fixed fname_* (oops, hi diane)


*** 20001223_42 by ejb
- support paths for module loading.


*** 20001223_41 by wcampbel
Document CAP_HOPS


*** 20001223_40 by ejb
- fix m_userhost paramcount


*** 20001223_39 by ejb
- added flame to Hybrid-team.


*** 20001223_38 by ejb
- readd 3rd argument to MYINFO, added it in custom.po as well this time.


*** 20001223_37 by wcampbel
might as well add myself too...


*** 20001223_36 by ejb
- use CAP_HOPS for half-ops


*** 20001223_35 by madmax
All server modes now show as coming from the current server.
This is now whether you are shiding or not - CS has always done it that way 
apparently, so nothing should break.


*** 20001223_34 by ejb
- add cap_hops, doesn't do anything yet.


*** 20001223_33 by ejb
- move oper_only_umodes into ircd.conf.


*** 20001223_32 by toot
disable SYSLOG by default
updated .depends


*** 20001223_31 by toot
made local kills look like global kills to users (flame)
-- they were already suposed to.. but wern't quite right :)


*** 20001223_30 by joant
Updating my email address

*** 20001223_29 by ejb
- fix a couple of paracounts.


*** 20001223_28 by toot
MYINFO had gone a bit weird.. synced it with custom.po's


*** 20001223_27 by madmax
Hopefully i'll justify my entry soon ;)


*** 20001223_26 by spookey
removes extra tab craziness, it drove me INSANE... =P


*** 20001223_25 by ejb
- fix off-by-one error in parse.c


*** 20001223_24 by toot
made tkline expiry into an event, and fixed some bugs with temp-klines..
there's still more bugs with them though


*** 20001223_23 by madmax
Fixes for operwall/locops (flame)


*** 20001223_22 by ejb
- fix a stupid core in parse.c.


*** 20001223_21 by ejb
- slightly neater fix for ISON, still has a bug:
  ISON a b :is-
  will still return is- is NOT on because of the :, which
  is blindly copied to the output .. can fix this if its a problem,
  is it likely to be ?


*** 20001223_20 by ejb
- slightly ugly fix to ISON problem committed.  someone might want to take a look
  at the code in parse.c..


*** 20001223_19 by ejb
- noted in whats-news.txt that the old ocnfig format is no longer
  supported.


*** 20001223_18 by madmax
Opers can now see idle times and servernames in whois when shide is on


*** 20001223_17 by toot
fixed my screw up with temp-klines


*** 20001223_16 by ejb
- applied flame's gline/kline diffs.


*** 20001223_15 by toot
empty (ie, persistant) vchans use the last person in the channel as
the ID, prefixed with an extra ! ..
so we get
#test has 2 possible virtual channels available
#test !toot !!toot_


*** 20001223_14 by ejb
- add OPER_ONLY_UMODES, umodes which only opers can set.


*** 20001223_13 by wcampbel
1. Make STATS for non-opers consistent...if it's an oper only STATS request,
   then always show ERR_NOPRIVILEGES.
2. Allow STATS x, does the same as X, no reason why it shouldn't
3. I forgot a couple STATS in the opers.txt documentation


*** 20001223_12 by wcampbel
1. Add the broken $$target and $#target to the TODO list
2. Channel Mode +z became +a, update whats-new.txt
3. Brought README.FIRST up to date


*** 20001223_11 by ejb
- move fname_* into ircd.conf.
- added fname_foperlog, not used yet.



*** 20001223_10 by madmax
Changed split reason when hidden to : "<servername> net.split" 


*** 20001223_9 by db
- show a fake name in the second field on links, this makes scripts
  and bx work better
- when deopering remove admin flag (madmax pointed this one out)



*** 20001223_8 by toot
. added undline/ungline to opers.txt
. log temp klines, and check for redundancy too
. fixed some weird stuff with tkline_time, it's always in minutes..
. added a bit more logging for server disconnections
. always show the full quit reason in +c
. check "if ((x))" in MyFree


*** 20001223_7 by adrian


Update the TODO file with the current state of affairs.



*** 20001223_6 by adrian


Fix 'make distclean' targets in various directories to actually

* not error out when someone types 'make distclean'
* delete Makefile


*** 20001223_5 by db
- added a rough document outlining how remote klines work
  for oper and server protocol.
  I know Walter or Joan can do better, but I think its better than
  nothing no?



*** 20001223_4 by db
- re-added "Ping timeout: nnn seconds" to time out code. 



*** 20001223_3 by db
- client that is notice'ed should not reply with an away.. noticed by Rodder



*** 20001223_2 by db
- fixed stupid bug in m_sjoin.c, lost a sendto_local_channel in the
  rewrite, which meant no MODE's were being sent... I "fixed" it previously
  in the wrong way, which resulted in weird five mode ops etc.



*** 20001223_1 by toot
. removed that pointless s_conf.h log
. changed +z to +a.. it's anonymous ops ;)
. "is now an operator.." notice doesn't need to show if they are global/local now
. slight fix to example.conf


*** 20001222_15 by db
- moved obsolete conf file examples into old
  purely for historical reasons



*** 20001222_14 by db
- simplified conf handling for yacc



*** 20001222_13 by db
- converted all use of IsGlobalOper and IsLocalOper to IsOper
  there is no local oper now



*** 20001222_12 by db
- removing local oper references, removing bloat...



*** 20001222_11 by db
- Ok, ALL the old support for old style confs is gone now, except for K/D lines
  That means IF YOU HAVEN'T CONVERTED FORMAT YET, DO IT NOW,
  OR IT WILL NOT RUN. capiche?
  I'll be able to simplify the parser in a bit a little more.



*** 20001222_10 by db
- ok. attach_cn_lines() was just plain wrong.
  The code was matching on hostname(ip) instead of servername
  One needs to look up by servername, then check if the hostname/ip matches..
  This explains why I had problem with multi servers on same host but different
  names.

  I think I got this right... but I am NOT sure if it works for hostmasked
  servers properly. that has to be verified asap. Might need a match()
  in the code.. 




*** 20001222_9 by wcampbel
1. Cleaned up a comment and trailing blank lines from m_oper.c
2. Added an md5 based mkpasswd.c, which works on FreeBSD 3.x/4.x and Linux
   glibc.  Known NOT to work on Solaris 2.6 and Cygwin.


*** 20001222_8 by wcampbel
1. Added an example of user and host in the shared section
2. Updated opers.txt some more
3. Added OMOTD to the REHASH help message
4. STATS P shouldn't show to non-opers


*** 20001222_7 by db
- tiny bug fix for logging



*** 20001222_6 by db
- massive addition to add extra parameter to struct Message
  this will enable us to have the parser handle parameter counts
  properly in all cases before it even gets to the module it is calling.



*** 20001222_5 by db
- use irccmp() not match in m_kline for "ON" parser duh
- use irccmp() not strncasecmp in m_set.c
- slight fix for stupid memory leak in class.c found by einride
- use POSIX non blocking now all the time in s_bsd.c
- added log entries for bad parse in s_conf.c
- cleaned up more comment blocks 



*** 20001222_4 by wcampbel
1. Don't invalidate entire blocks just because they have an error
2. Fixed SMALL bug with oper_admin


*** 20001222_3 by wcampbel
Document directed K-lines


*** 20001222_2 by db
- fixed logging botch for tklines



*** 20001222_1 by db
- modifed m_kline to add directed klines

  All the following should work

kline directed at a specific server
  /quote kline user@host ON server :reason 
  /quote kline [time] user@host on server :reason

kline directed at all servers
  /quote kline user@host on * :reason
  /quote kline [time] user@host on * :reason

original normal local klines

  /quote kline user@host :reason
  /quote kline [time] user@host :reason 



*** 20001221_21 by ejb
- moved maximum_links to ircd.conf


*** 20001221_20 by ejb
- RFC1035_ANAL is always defined now.


*** 20001221_19 by db
- stats v should not be shown to users
- neither should stats h



*** 20001221_18 by wcampbel
Brought convertconf up to date.  It now produces a valid -7 conf.
Anyone mind if I add some more test lines to the test ircd.conf in tools?


*** 20001221_17 by db
- non opers should not be able to do /stats ?



*** 20001221_16 by db
- removed local opers, its obsolete with oper flags besides
  users can probe which server an oper is on...



*** 20001221_15 by wcampbel
Removed global from example.conf as local opers no longer exist.
Added a "What's New" document giving a brief overview of the new Hybrid 
 featues.


*** 20001221_14 by wcampbel
Add some of the new oper commands to opers.txt


*** 20001221_13 by wcampbel
Document Diane's new Redirect options


*** 20001221_12 by db
- removed allow_bots from convertconf.c
- removed example of allow_bots ircd.conf.new



*** 20001221_11 by wcampbel
Documented all currently working options


*** 20001221_10 by db
- added redirserv redirport to auth {} block 
  I've been wanting this one a long time, finally epic supports it. yay.



*** 20001221_9 by wcampbel
Updated the dependencies


*** 20001221_8 by db
- some casts to keep the compiler whining down



*** 20001221_7 by db
- updated blalloc.c from einride



*** 20001221_6 by adrian


XXX UNTESTED UNTESTED UNTESTED UNTESTED

(Go a broken CVS tree. :-)

* change HANDLED_OK to CLIENT_OK. God knows why the two return values from
  parse_client_queued() (at least from ircd_defs.h) turned out to be
  CLIENT_EXITED or HANDLED_OK. Lets hear three cheers for great coding!

* Changed parsed_client_queued() to return CLIENT_OK if everythign went well
  (it was returning a numerical value..)

* Actually listen to the return values of parse_client_queued() in
  determining whether to schedule antoher comm_setselect() or
  reregister the client in the flush list.

A bug was found where a fd was being thrown onto the flush list in
flood_recalc() which would then trigger an assertion. This won't call
comm_setflush() if the client has just exited.

What *should* happen in comm_checktimeouts() is there should be an
assertion that the fd is open (flags.open) before calling the handler..
just to be anal.



*** 20001221_5 by db
- missing m_dmem.c file from einride



*** 20001221_4 by db
- missing memdebug.c from einride



*** 20001221_3 by db
- added missing memdebug.h passed on by einride



*** 20001221_2 by db
- added einride's memory debugging



*** 20001221_1 by db
- the modes not propagating on sjoin was my fault. 
  channel_modes() set the +ntz in modebuf, which I then promptly
  walked over... one has to leave those modes in then add the +o and +v



*** 20001220_28 by db
- cleanups



*** 20001220_27 by ejb
- some more +z stuff.


*** 20001220_26 by db
- removed prototype for quote_setchide
- cleaned up formatting in channel.c



*** 20001220_25 by ryan
!ptr && ptr->bleah?
wtf?.. don't think so.. try || :)


*** 20001220_24 by ejb
- fixed m_sjoin() for +Z



*** 20001220_23 by wcampbel
Added a couple things to the bottom


*** 20001220_22 by ejb
- make ms_sjoin notice +z



*** 20001220_21 by ryan
write_log now is sure that logfile is not NULL and that the buffer
isn't overflowed (sprintf -> snprintf)


*** 20001220_20 by db
- added sendto_realops on gline (flame)
- capitalized "ping timeout" to "Ping timeout"
 


*** 20001220_19 by ejb
 -made +z work properly


*** 20001220_18 by ejb
- fixed ircd_lexer (oops)


*** 20001220_17 by ejb
- removed hide_chanops from config since its not used anymore.



*** 20001220_16 by ejb
- added umode +z, hides ops on channel (replaces hide_chanops=yes)
- changed format of 004 numeric



*** 20001220_15 by wcampbel
example.conf is now correct for the current state of the parser.
All that is needed now is more documentation on the options


*** 20001220_14 by db
- patched m_gline.c from fl_
- patched ircd_parser from Walter Campbell



*** 20001220_13 by ejb
- added note about using `send-pr' to report bugs
- added note that cygwin is no longer support.


*** 20001220_12 by ejb
added GNATS support for ircd.
currently using a gnats db hosted on leguin.org.uk, can be changed
if needed.



*** 20001220_11 by ejb
Directory /cvsroot/ircd-hybrid-7/gnats added to the repository


*** 20001220_10 by db
- added notification to target when put on and taken off accept list



*** 20001220_9 by db
- fixed wallops so it doesn't add the "WALLOPS" message, uneeded.
- updated INSTALL and CIDR docs from Walter Campbell



*** 20001220_8 by db
- fixed stupid in m_wallops.c it was not showing oper wallops but was
  showing server wallops



*** 20001220_7 by db
- shared {} can now have user/host for user@host of oper allowed
  to place a remote kline from server given by name.

- updated the lazy link docs a bit, its badly written, fix.



*** 20001220_6 by db
- I hate furry logic when I'm tired. 



*** 20001220_5 by db
- TOPIC_UH is =gone= but was still in parser/lexer and m_topic.c
  removed. Also added code to hide the always present topic u@h
  if chide is on.



*** 20001220_4 by db
- I had interchanged name/host oops



*** 20001220_3 by cosine
connect timeout problem fixed


*** 20001220_2 by db
- fixed convertconf to bring it in line with current conf file format
  it does a reasonable first pass job, though you still might need to
  tweak..

- We were missing "shared" keyword in new conf file. This is vaguely worded
  to allow us to support "shared klines" "shared locops" etc. should
  we choose to do so... If I had time, I would extend it to allow
  specification of remote user@host as well... and whether it applies
  to klines/locops/unkline etc. shared resources...

- provided I hear back from adrian after a successful conversion of
  his conf file, I'm going to nuke most of the gook in oldparser.c
  so it only deals with 'D' and 'K' lines.. I'll likely rename it as well
  kdparser.c maybe..

- parse.c has a bug. but its late for me, I'll look at it after some sleep
  maybe is- and I can look at it together. The problem is simple...

ISON nick1 nick2 nick3...... nick20

all nicks at 15 to 20 should go into the last parv[]
not be truncated... at a space. Otherwise we break ISON for sure, and
likely other things...

- Adrian can you move logs into /logs from /etc ? pretty please? ;)

 


*** 20001220_1 by db
- don't send on a nick change if the nick hasnt' been seen on a lazy
  link server...



*** 20001219_11 by db
- fixed double free in invites
- fixed prefix botch in m_invite() using sendto_anywhere()
  but adding a prefix myself. oops. sendto_anywhere does its own prefixes.



*** 20001219_10 by db
- cosine...
	/* XXX THIS IS A STATIC */
#if 0
  comm_connect_callback(fd, COMM_OK);
#endif

in ircdauth.c

  It won't compile like that

- This looks like it works finally .... lazylinks

- removed no longer used option in example.conf
 



*** 20001219_9 by cosine
iauth is now working again


*** 20001219_8 by db
- lazylinks final form. New nicks introduced after the burst, are
  simply passed on. The reason is simple. SJOIN would have to be modifed
  to pass new nicks onto ll servers, and its a pita. SJOIN needs more
  rewriting before I attempt that. ugh. So for now, any new nicks that
  join the network, get propogated to the LL leaf as normal. The hub
  does not burst nicks at all, it bursts channel back ON request of 
  a cburst from the ll server, as it does so, it SJOIN's the nicks needed
  as well as SJOINing the channels requested. Nicks that are on the server
  but not sjoin'ed to a channel, will be propogated to the LL leaf
  when they join a channel, not before. i.e. if you are nick A on 
  hub HUBA you will not be nick propogated to the leaf until you join
  a channel, or you /quit and rejoin the network. Simple?
  Capiche?



*** 20001219_7 by ejb
- made modlist return a numeric
- put ms_quit back in (oops).


*** 20001219_6 by ejb
- added client_exit:
   *** Signoff: foo (Client Exit: foo)
- removed ms_quit.



*** 20001219_5 by db
- removed goto in channel.c dealing with invex



*** 20001219_4 by db
- This completes most of the full LL nick implementation...
  nicks unknown to a leaf LL must not have information sent to that LL
  only when introduced i.e. when they JOIN a channel or are /whois'ed
  /who'ed etc. are burst onto the LL leaf. 
  a /msg to a nick that only exists on the hub will fail ATM since
  m_message.c is not set up to burst the target nick onto the LL leaf.
  However, doing a /whois of the target first, will make the nick
  available. It will be simple to finish this part.. But after I get some
  sleep. 



*** 20001219_3 by db
- show the name of the server sending a CBURST if its not LL



*** 20001219_2 by db
- nick LL are almost there...
  Now, nick changes for nicks that the hub does not know about on a leaf
  ll server are not sent on to that leaf.
  This still means a /msg nick where nick is not known yet
  will fail, but a /whois will "burst" that nick onto the ll server...
  So, privmsg/notify should do a nick burst... ditto on ison
  Basically what now happens is, the ll server begins to become "aware"
  of nicks it needs to know about, just not all of them unless it asks
  the uplink...



*** 20001219_1 by ejb
- make invex code actually work.



*** 20001218_7 by db
- modifed lazylinks partially, to not send a full nick burst..
  still some work to do on this..
- added client_burst_if_needed() ... it checks to see if the given
  server pointer is a server, is a lazylink, and if it does not
  know about that given client, it bursts the nick.
- A nick that is not known on a leaf, will be nick collided ! if it
  changes nick. Thats next folks.. removing the sending of nick
  changes to leafs that don't know about that nick.
  


*** 20001218_6 by ejb
- remove whois_notice stupidity
- +a umode is now set automatically for admin=yes; opers, and cannot be changed.



*** 20001218_5 by db
- ok. redid the way the bitmaps were cleared for lazylinks.
  the old code walked all the global channels, clearing the
  lazyLinkChannelExists bitmap of the leaf servers bit.. Now the code
  keeps track of which channels/clients have these bits set, and only
  walks those lists when a lazy link server quits.
  This adds new lists to ircd.c, new bitmap to client struct, new call
  in m_cburst.c .. client.c modded to call remove_lazyLink_flags()
  new code added in s_serv.c to add remove_lazylink_flags() and to add
  add_lazylinkchannel() and add_lazylinkclient() functions to s_serv.c



*** 20001218_4 by bill

- removed compile-time warnings caused by fbputs()


*** 20001218_3 by db
- still more cleanups
- removed superflous sjoin code, it was already done by send_channel_modes
  duh.



*** 20001218_2 by bill

- forgot to remove a conflict


*** 20001218_1 by bill

- changed all file_open() and file_close() calls to fbopen() and fbclose()
- changed all write()s to fbputs()s
- updated dependancy file
- added strerror() msgs to failed file i/o logs/server notices
- moved FBFILE struct from fileio.c to fileio.h


*** 20001217_9 by db
- rewrote m_gline.c to use fbopen and friends consistently
  removed "safe_write()" entirely. BLOAT



*** 20001217_8 by db
- massive change but its really quite simple..
  mod_add_cmd was taking two params, when only one was really necessary.
  first was command name, second was the Message entry.. the command
  is available from msg->cmd, so why duplicate it? lead to errors
  ditto on mod_del_cmd()
  sooooo all modules had to be rewritten for this new world order...

- Also cleaned up a lot of missing definitions for functions..



*** 20001217_7 by cosine
just to get things compiling again


*** 20001217_6 by db
- added global uplink cptr valid for leafs ONLY



*** 20001217_5 by db
- added vhost support, should work now
  in doing, removed an extern not needed any more in s_bsd_kqueue.c
  s_bsd_poll.c and s_bsd_select.c... thats when I noticed... local[]

- first crack at cleaning up s_bsd_select.c so it will compile. I just
  removed local[] from it for now, the rest is adrian's MUAHHAHAHH!
  It still won't compile, but ... its a start



*** 20001217_4 by bill

- added _k9_ (jeremy, wowsers.) to credits as a contributer


*** 20001217_3 by db
- I ran it through lint, discovered a pile of unused variables unused
  parameters. Removed... and made a function static in channel.c
- added einride and hwy to credits, give them some vanity.
- fileio.c had an obvious bug, but we never used fbgetc() so it didn't 
  matter. pro is going to look at the ircu version, to see if we can
  fold that one back in without issues.



*** 20001217_2 by db
- removed the two pass exit procedure in check_klines check_pings
  it was =only= done in the first place to get around the local[] 
  re-arrangement nonsense in the original code. This is long gone..



*** 20001217_1 by db
- moved gline expiration to be an event started from ircd.c at startup
  right now its run every half hour. That should be sufficient.

- also cleanedup s_gline.c s_gline.h m_gline.c while at it. Removed
  unnecessary and obsolete extern definitions. Made a couple of functions
  static. Found a duplicate definition for glines in s_conf.c!

- Fixed LazyLink join to a non existing channel on the hub. The 
  hub has to actually create the channel but not SJOIN it to anything.
  Then the hub can mark this channel as a lazy link channel with the leaf
  being "interested" in knowing about the channel. The timestamp should be
  set to the highest possible time, so its always overruled. It also
  should be expired if necessary.i.e. lazy link server dies after doing
  cburst request but before received LLJOIN.
  Removed the useless lazylink references in m_join.c duh. 



*** 20001216_9 by db
- fixed join 0 grrrr
- m_lljoin should give member names when joining
- lazy links flag should be set when joining
 


*** 20001216_8 by db
- lazy link lljoin was relying on can_join which needed to be moved into
  channel.c from m_join.c
- applied einrides conf changes, which will remove the original I line
  conf from an oper replacing it with the new one.



*** 20001216_7 by db
- ok did some more clean up on LazyLinks connect works fine more or less
  The nicks are SJOIN'ed one nick at a time to the leaf, That should be
  fixed.
- new channel creation has a glitch somewhere, the LLJOIn isn't
  being seen by the client, and it has to do a double join. hrmmmpf



*** 20001216_6 by db
- remote lazy link /list was broken, missing ms_link in handler



*** 20001216_5 by db
        Included here is a patch which adds the function strip_tabs
        to irc_string.c; the function converts all found tabs to
        spaces, while copying the string.

        The reason I wrote this is because in h7, when HUPd or
        /REHASHd, the server will show opers any bad lines it
        finds in ircd.conf.  Most of these lines start with tab,
        so, displaying the actual tab character is irritating for
        users who use something other than an ircii derivative.

        It applies to ircd-hybrid-7-20001216-103810.tar.gz, which
        adrian gave me this morning.  I tested it, and it's being
        used on hybrid.best.net's test H7 server.

        Another function which might be useful would be one which
        squeezes excessive whitespace into just one space itself
        (eg. tr/ / /s (or "     " --> " ")).

-- 
| Jeremy Chadwick                                   yoshi@parodius.com |



*** 20001216_4 by db
- fixed lazy links. I was trying to use the extended "join new nick
  to network" SJOIN instead of the simpler "join this nick to channel" SJOIN
  oops. That would collide everyone. Sooo that involved a pile of 
  fixes and new functions to properly send SJOIN channel. Might be able
  to simplify reduce recyle functions later...

- Oh documented a few more globals in ircd.c and ircd.h, also removed
  a couple of references to no longer existing variables.. LRV etc.



*** 20001216_3 by adrian


Add a blank line after the distclean: tag, so make knows its a blank
target.



*** 20001216_2 by db
- ask for MODE on channel if LL



*** 20001216_1 by toot
. let opers see full /lusers report even if server-hide is on
. parse() can check the number of params for a lot of m_commands


*** 20001215_15 by db
- m_mode.c had some twisted logic. Corrected. *duh*
- did some variable renaming in channel.c chname instead of "real_name"
- fixed two bugs pointed out and corrected with Walter Campbell in
  I and D line handling. notably, the conf host string wasn't being updated.



*** 20001215_14 by db
- fix for gecos blocks submitted by Walter Campbell



*** 20001215_13 by db
- added patch contributed by Walter Campbell, it adds connectfreq
  to a class block. Note, it is a synonym for class_number_per_ip



*** 20001215_12 by db
- removed unused variables found with -Wunused
- removed an extra space in parse.c



*** 20001215_11 by db
- missing clean: target in Makefile.in for doc



*** 20001215_10 by db
- added GLINE_PATH gline.log missing from config.h ircd.c



*** 20001215_9 by db
- missing parc check in m_ungline



*** 20001215_8 by db
- committed Walter Campbells changes to INSTALL



*** 20001215_7 by db
- a few changes to hide ip's of servers even from opers, given the
  new world order *sigh* on EFnet...



*** 20001215_6 by db
- tiny tweak to send_capabilities to clean it up



*** 20001215_5 by db
- I didn't get it right. 
  So for now, just set the eob flag for later use. 



*** 20001215_4 by db
- I think I got this right.
  EOB message now sets flag in server struct saying its sent EOB,
  if EOB is set in struct in sjoin, warning message is sent out
  about HACK



*** 20001215_3 by toot
fixed some bent logic in whowas


*** 20001215_2 by db
- removed obsolete BUFFERPOOL from config.h and m_info.h



*** 20001215_1 by toot
replaced some stuff that'd gone missing in slow_lusers


*** 20001214_15 by db
- redid parse.c do_numeric, thats where our remote stats bug was..
  I was adding an extra ':' where I shouldn't have been. duh.



*** 20001214_14 by db
- don't count opers again in /stats L



*** 20001214_13 by toot
. moved dots_in_ident to an ircd.conf option
. removed some d_line remains..


*** 20001214_12 by db
- added modlist admins can now list all loaded modules.



*** 20001214_11 by spookey
Minor _version misplacement.. (above the #else ,  not below it =P)


*** 20001214_10 by toot
ripped out some more unused stuff


*** 20001214_9 by db
- missing show_opers in m_stats.c found by Walter Campbell
- duplicate end of stats in gline pointed out by toot



*** 20001214_8 by toot
undid accidental config.h change :P


*** 20001214_7 by toot
removed some unused things (quiet_on_ban, and moderate_nick_change left overs)


*** 20001214_6 by db
- missing show_opers(sptr) in m_stats.c found by Walter Campbell



*** 20001214_5 by db
- removed a bunch of useless B line stuff
- put sanity test into m_gline.c so it wont' core on a NULL glinefile



*** 20001214_4 by db
- YOU missed an #endif toot! ;)



*** 20001214_3 by db
- trivial move of basename() to save a free() if not an admin



*** 20001214_2 by toot
cleaned some PATH stuff a bit


*** 20001214_1 by db
- removed find_class(0) from m_kline.c was never used, no one ever
  referred to the class on a kline, BLOAT gone.
- /rehash caused opering clients to core server, traced to an incorrect
  find_class(0) 0 should return "default" class not 0. found by einride.
- first fixes to lazy links, don't use , it nick collides everyone
  still needs fixes



*** 20001213_16 by db
- HUB info does not belong in m_admin.c



*** 20001213_15 by db
- fixed typo spotted by Walter Campbel in oper_admin



*** 20001213_14 by db
- fixed small typo in the parser, spotted by Walter Campbell



*** 20001213_13 by spookey

  --disable-openssl enabled openssl... that didn't seem right..

*** 20001213_12 by db
- tiny update to send.txt, sendto_common_channels 



*** 20001213_11 by db
- Ok the mystery of the missing NICK has been solved. (hwy/toot?)
  If you weren't on a channel and you did a nick change, you never got
  a nick change from the server. oops. 
  Its poorly documented in the old sources... ick... sendto_common_channel
  says its not supposed to send to the originator, but yet it does ...
  *sigh*



*** 20001213_10 by db
- when msgtab went away, due to the hash table replacement,
  m_stats.c, m_help.c had to be rewritten. I had to add a new 
  report command in parse. I stumbled across an apparent compiler bug..
  the hash table is defined to be 387 entries, but the report function
  was walking in to the poll fd lists at 385... Something is screwy here
  perhaps a rounding error? In any case, thats why the weird +10 
  in parse.c msg_hash_table[MAX_MSG_HASH+10];



*** 20001213_9 by db
- ripped out the trie (tree parse) code that Roger wrote. Too hard to
  debug for now. Replaced with a simplistic (very) hash table. The hash
  function is =horrid= for now.



*** 20001213_8 by adrian


How'd I forget to pre-initialise linebuf_initialised to 0? Its implied
due to it being a global variable, but _still_ ..



*** 20001213_7 by db
- removed an obsolete line from the example.conf 
- added s_gline.c that I forgot



*** 20001213_6 by toot
fixed some makefile stuff


*** 20001213_5 by db
- I had changed RTLD_LAZY to RTLD_NOW in modules.c thus insisting
  on all names being resolved before loading. oops. should have done this
  earlier. pile of undeffed at run time names, mostly typos;
  but a few clear dependancies such as m_stats depending on stuff loaded
  only by m_gline ... sooo moved much of that in s_gline.c since
  s_conf.c is quite large enough thankyou.
- also redid m_invite.c so it will show the right channel name on an 
  invite to a vchan. removed the silly message to channel stuff on invites,
  it was referring to a no longer defined function anyway... BLOAT
  totally removed the need to be chanop before sending an invite, hence
  modified the lexer/parser to remove that option totally BLOAT
  removed the need to be +i before adding the invite block. who cares.
  BLOAT



*** 20001213_4 by db
- typo, it should be "server" not "servers" in class



*** 20001213_3 by db
- halfops wasn't being propogated by sjoin, so added quick change
  to pass the halfop along
- however... also added code to send halfops along as normal peons for now
  they still will have their halfops respected on their server, just
  no one else will notice. There should be a CAP_HALFOP added...
- tidied up and added more comments to m_stats.c



*** 20001213_2 by db
- urgh stupid typo sorry ! sorry sorry sorry!



*** 20001213_1 by db
- msg_tree_root has to be zero'ed in clear_msg_tree() or it causes
  odd problems esp. on redhat linux for some reason. NO idea why
  but the stray pointers left in it caused it to core nicely.



*** 20001212_9 by db
OH WHAT A BLASTED PITA
- Ok... a CONNECTING server must put the server its trying to connect to
  on the serv_list because its going to blindly send its server burst
  to its new uplink. But the server its connecting to is not strictly
  a server yet until the handshake is over ... oy
  SO, the connecting to server is put on the serv_list, so the connect
  burst will go through, but it might not be a server yet if the connection
  fails, so... I have to check on the server list as well as the unregisterd
  list to pull it off (in exit_client/client.c).. ugh ugh ugh...
- This breaks all the state information in ->state ugh. 
  A leaf server has a client (the one its connecting to) already in its
  serv_list (remember?) sooo it can no longer simply check for a non
  empty serv_list to allow a connection or not. NOOOO it now has to make
  sure that server in that list is the same one its trying to connect to.
  (in serv_establish/s_serv.c) UGH UGH UGH



*** 20001212_8 by adrian


Do build magick in the binary. Now, --prefix="foo" is reflected in DPATH
and is also reflected in the various PATH's there are.

The handling of the ETCDIR stuff is ugly and warrants instant death in
my eyes, but it works and it doesn't cause me to retch when I look at it
so I guess it can stay there until Someone Else(tm) fixes it.

Note that IRCD_PREFIX needs to be defined during the ircd and tools build.
I *did* try doing the squid thing - take config.h, pass a sed script over
it to map DPATH to @prefix@, and do it that way, but it might have made some
people throw up.

This completes tonights set of work which I just shouldn't have done.
Comments can be piped through cvs commit.




*** 20001212_7 by adrian


The very first step in sanifying the make and install process

* move opers.txt into doc like it bloody should have been
* make install work with each subdir's Makefile rules, rather than
  install_ircd
* create placeholders (blank) for ircd.motd and kline.conf

Its all far too complex to explain. Suffice to say, its neater.
Binaries and some of the config files (not the kline, motd) are
renamed to .old as a backup.

Now, do the binary ..



*** 20001212_6 by db
- folded in Walter Campbell's IPV6 patches



*** 20001212_5 by db
- verified the generated prefixes on a number of files
- umm the big bug was in serv_connect_callback() the newly connected =to=
  server was not being put on the serv_list... This mean that SJOIN's were
  not being propogated to a =connected to= server since the connectee
  had no idea it was supposed to.

  This was sorta obvious when /stats v returned 0 servers, and the 
  serv_list was 0



*** 20001212_4 by db
- fixed stupid bug in m_stats.c, acptr wasn't being set...



*** 20001212_3 by db
- oops. forgot to generate a prefix in sendnick_TS in s_serv.c



*** 20001212_2 by db
- don't core if a server is not found on the serv_list



*** 20001212_1 by db
- fixed m_trace.c so as to not use local[]



*** 20001211_15 by db
- fixed m_die.c to not use local[]



*** 20001211_14 by db
- not sure if I am closing all the fd's that should be closed here..
  the original code refers to connecting servers as well as unknown_clients
  perhaps connecting server fd's should be also closed?



*** 20001211_13 by db
- a client being made into a server, should be removed from the unknown_list
  this was happening in the new server establish code...
  This left an unknown client hanging around, not removed from unknown_list
  because it was now a server, not an unknown client.

- local removal was missed in m_stats.c, this meant /stats didn't work
  since it was never loaded. There are three other functions that have
  to be fixed as well... m_trace.c, m_die.c, m_close.c



*** 20001211_12 by db
- tiny comment fix in check_pings



*** 20001211_11 by db
- how did THAT get back in. removed local[] again *sigh*



*** 20001211_10 by db
- simple re-work to m_ison.c, rfc1489 is ambigious about how this should
  be handled...

The ISON command was implemented to provide  a  quick  and  efficient
   means  to get a response about whether a given nickname was currently
   on IRC. ISON only takes one (1) parameter: a space-separated list of
   nicks.  For  each  nickname in the list that is present, the server
   adds that to its reply string.  Thus the reply string may return
   empty (none  of  the given  nicks are present), an exact copy of the
   parameter string (all of them present) or as any other subset of the
   set of nicks  given  in  the parameter.  The only limit on the number
   of nicks that may be checked is that the combined length must not be
   too large as to cause the server to chop it off so it fits in 512
   characters.
...
   Examples:

   ISON phone trillian WiZ jarlek Avalon Angel Monstah
                                   ; Sample ISON request for 7 nicks.

...
  But the parser will break those up into parv[1] ......

  And the parser only presently handles 8 .. so Monstah wouldn't be parsed...
oops.

  Mirc apparently sends them "ISON nick1 nick2 nick3"
  But other clients must be sending them with a ':' to force parsing
of space separated nicks into one parv[1] (?)

  It appears that thats how hybrid-5 expects it. It has to come in as
"ISON : nick1 nick2 nick3" to force "nick1 nick2 nick3" into parv[1] !

  In any case, this code =should= handle both interpretations.  



*** 20001211_9 by db
- removed the last remnant of local[], was one hidden in s_serv.c
  the definition for it was hiding in s_bsd.c



*** 20001211_8 by db
- renamed send_channel_members to sendto_list_anywhere, to remain consistent
  in send.c with sendto_list_local. This really means we =could= set up
  the "GROUP" idea Roger postulated ages ago... Roger suggested something
  like this "NGROUP foo" "GROUP foo nick1,nick2,nick3" privmsg to 
  foo, sends to nick1,nick2,nick3 ... I suppose foo would have to have 
  disambiguitating prefix like $ so one could set up a group of users
  you wanted to talk to often..

- fixed s_stats.c to be consistent in only needing the client pointer
  passed, not both a client pointer and a nick.

- reverted to old CC options in modules -g -O2 etc.
  



*** 20001211_7 by db
- removed some unused variables



*** 20001211_6 by db
- unknown clients should be removed from the unknown_list on exit!
  or you get duplicates on the unknown_list and neat things like that.



*** 20001211_5 by db
- this gets rid of local[] 
  unknown clients are now placed into unknown_list, moved to
  serv_list (local servers only) and lclient_list (local client list)
  as appropriate. check_pings now scans the lclient_list, serv_list
  and then checks for unknown clients timing them out as appropriate.
  Now, the proper place to do PING checks is in s_bsd.c in
  comm_checktimeouts() using a timeout_handler (as pointed out by Adrian)
  ... Someone will have to check that unknown clients
  are also on this list, and get rid of that fixed sized fd_table...

- Seems I screwed up the inter-server NICK prefix and message , this
  caused all sorts of neat nick collides.



*** 20001211_4 by davidt
oops, didn't cvs add create_po..

*** 20001211_3 by davidt
attempted to tidy up config.h slightly

*** 20001211_2 by db
- removed unused variable



*** 20001211_1 by db
- m_eob.c was not reporting length of burst like it should have been
- m_squit.c I forgot to send out WALLOPS when squit matched local link
  NOT fully tested 'cause I need a remote server to split! 



*** 20001210_13 by db
- CAP_CHW works again between compatible CAP_CHW servers..
  Thats the /quote privmsg @#channel :message
  functionality borrowed from dalnet/ircnet?

Pending BUGS;
  - /msg $#hostmask is still broken across servers
  - /squit of a remote server appears to be broken

Pending re-work:
  - check_pings()/check_kline() should be reworked so as not to use a
    fixed size array...



*** 20001210_12 by db
- This fixes prefix on a nick change sent to local server.



*** 20001210_11 by db
- fixed length error in sendto_realops_flags



*** 20001210_10 by db
- re-wrote send_operwall, renamed as sendto_all_local_opers()
  this necessitated changes to send.c send.h send.txt
  m_connect.c m_locops.c m_operwall.c m_squit.c m_wallops.c
- cleaned up check_string() in ircd.c added more comments



*** 20001210_9 by db
- updated docs in send.txt
- fixed parser as per walter campbells patch



*** 20001210_8 by db
- cleaned up m_gline.c, STILL untested.
- removed unnecessary lines in ircd_parser.y due to removed botcheck
- only show stats 'G' to opers
- updated opers.txt, client.c to show leaving servers as well as 
  being introduced servers.
- cleanup_channels() wasn't being restarted when server was a hub,
  it should be always run now, to expire persistent channels.



*** 20001210_7 by db
- missed a place where send_trim() should have been used



*** 20001210_6 by db
- as promised, tidied up send.c added to send.txt document



*** 20001210_5 by db
- went through and removed a bunch of unused variables
- fixed sendto_channel_butone, need to generate both local and remote
  prefixes in this one. The function will need tidying up later.
- updated send.txt to include info on prefixes.



*** 20001210_4 by db
- Was missing proper prefix for normal privmsg to local channel



*** 20001210_3 by db
- removed last remnant of oratime



*** 20001210_2 by db
- new text file describing the send.c re-work.



*** 20001210_1 by db
- sendto_prefix_one is =gone=
- sendto_one should be used for local clients only, with prefix
  pre-built at time of use.
- sendto_anywhere is a somewhat saner replacement for sendto_prefix_one 
  (I think) it should be used ONLY when target client is unknown whether
  its local or remote, it will build the appropriate prefix itself in 
  that case. This makes it less efficient than sendto_one..
- I kludged send_message_remote() for now... adrian you might want
  to look at that... maybe we can get away with just always calling
  send_message() or add a short common function or something...
  send_message() should be for local clients (not servers(? only(?)
  perhaps i.e. send_message_local() and send_message_remote()
  sendto_one should be renamed sendto_local() (sendto_local_client)
  sendto_remote (sendto_remote_client) sendto_anywhere() sends to either...
  Too tired right now..

BUGS pending...
1) the horrid /msg $#host.mask to clients on remote servers is =broken= for now.
   (it works locally)
2) sendto @# chanop style messages is =broken= to remote servers for now.
3) Probably more *yawn* 
  


*** 20001209_17 by db
- oops, the missing .depend files



*** 20001209_16 by db
- rewrote sendto_realops in doing so I decided to combine sendto_realops_flags
  and sendto_realops()... I could have macro'ed sendto_realops() to
  call "sendto_realops_flags(FLAGS_ALL..." but that level of obsfuscuation
  I don't like.. soooooo I converted all sendto_realops to use
  sendto_realops_flags(FLAGS_ALL ... *fun*
- I removed two unused files for now, one to do with ZIPLINKS one
  to do with timings.. it wasn't used, thats what CVS tree is for, so there.



*** 20001209_15 by db
- removed little used function... will have to replace functionality
  for remote send of KNOCK and msg @#channel code...



*** 20001209_14 by db
- I was using ->user instead of ->username in prefix. *DUH*
- removed pretty much identical function in send.c (MORE BLOAT GONE!)
  using another function to do the same job. (sendto_list())



*** 20001209_13 by db
- ok. in the new world order... prefixes are generated at the top level
  instead of being grunged out in send.c... This gets rid of incredible
  idiotic connipations that were happening in send.c... I've only done 
  this for =LOCAL= sent to server messages so far, hence ALL uses of
  sendto_channel_local you must work out your own prefix. Its not hard,
  and is worth the bother. This modified a bunch of modules.

- I have also preformatted the stupid string to be sent to each client
  in sendto_channel_local AT the top instead of re-formatting it each
  and every time a message is sent to a client. like *duh*



*** 20001209_12 by db
- quick fix to fix prefixes on LOCAL channels only...
  prefix adding was =hidden= in underlying send.c functions. 
  NOT a good idea IMO.. this makes its harder to optimize code...
  fughly anyway, I think I got the major prefixes fixed for now.. 



*** 20001209_11 by db
- ummmm no check for parc in mo_undline leads to core if no args given



*** 20001209_10 by bill

- added duration to EOB snotice


*** 20001209_9 by db
- rationalized use of serial numbers for unique sending to client
  this removes yet another array "sentalong" yay.
  This also makes server_burst use the same serial # idea instead of
  nickissent byte flag.
- I note that prefixes really should be sent for local channel JOIN's
  ooops. sendto_prefix is =fugly= though. lemme think about it.
  meanwhile, all JOIN's by remote clients look "weird" as they are
  missing their user@host prefixes...



*** 20001209_8 by bill

- changed NONWILDCHARS to 2


*** 20001209_7 by db
- tiny fixes to fix typo's 



*** 20001209_6 by db
- removed redundant flag in client struct, if localClient is non NULL
  then its a local Client. simple. no need for an extra local_client int flag.
- removed bloat from client struct, no longer being used pointers removed.



*** 20001209_5 by db
- renamed yet another poorly named function...
  sendto_channel_remote makes more sense than sendto_match_serv 
  its sending stuff to a channel remotely folks *sheesH*



*** 20001209_4 by db
- removed unused extra parameter in sendto_channel_local
  I think I got them, all ;) if not it will just core mysteriously.. ;)



*** 20001209_3 by db
- removed obsolete #ifdef's in m_info.h
- removed obsolete comments in m_unkline.c
- removed SLAVE_SERVER junk fro m_locops.c
- removed obsolete #ifdef junk in s_debug.c



*** 20001209_2 by db
- renamed confusing sendto_channel_butserv to sendto_channel_local
  it reflects better what the stupid function does
- changed all references to src/m_xxx.c file names in modules to
  read modules/m_xxx.c
- removed yet another #ifdef this time one in m_info.h



*** 20001209_1 by db
- added server greet message (# since restart)
- fixed stupid in m_sjoin, you can have more than 4 ops/nicks per sjoin *oops*



*** 20001208_17 by db
- m_who is less broken for single nick who, but it looks broken to me
  still... checked on efnet, it looks broken.



*** 20001208_16 by db
- added m_eob to modules, this means changes to handlers.h, msg.h, Makefile.in
- also had to modify s_serv.c to send EOB message
- fixed stupid typo in m_admin.c, it was claiming to be m_version.c



*** 20001208_15 by db
- sped up local op code...



*** 20001208_14 by db
- sped up m_sjoin.c somewhat... also fixed a bug where the code
  would relink the same vchan over and over again to the root. oops.
  This resulted in 277 #ircd-coders !nympho !shig !shig !shig !shig !shig !shig !shig !shig
  oops.
  Still have to deal with empty vchans...



*** 20001208_13 by toot
depend updates


*** 20001208_12 by db
- removed unnecessary strcat in m_whois



*** 20001208_11 by db
- Show the top channel name on a subchannel 



*** 20001208_10 by db
- report throttling as top channel name if in vchan



*** 20001208_9 by db
- on /mode #channel show the root channel's TS if on a vchan



*** 20001208_8 by db
- fixed remote join bug, it was joining the root channel instead of the
  vchan on remote servers due to the wrong name being passed to the SJOIN



*** 20001208_7 by toot
gline_file isn't used anywhere.  and it was also the one
making the '1 rule not reduced' error :)


*** 20001208_6 by db
- hide idle time in whois if in server hide



*** 20001208_5 by toot
. added 'h' to MYINFO mode list
. made network_name/desc an ircd.conf option.
. fixed the reading of idletime, hide_chanops and hide_server from ircd.conf


*** 20001208_4 by db
- UNGLINE was missing from init for m_unkline.c



*** 20001208_3 by db
- cleaned up m_gline.c module considerably, but still untested.
  Need to enable it locally =AND= have three servers at least to 
  test properly with. It looks like it =should= work...



*** 20001208_2 by db
- missing ':' in sent KLINE would break up reason field in parser



*** 20001208_1 by db
- quick #ifdef of excess flood for tonight. its late
- redid send_modelist
- channels that exist for less than 30 minutes are not persistent
- redid m_sjoin



*** 20001207_17 by adrian


* add bufhead->numlines and linebuf_numlines() - this implements line count
  tracking so you can see how many lines are being used (complete/incomplete)
  in the linebuf. Now people can implement linecount flooding.

* update bufhead->len correctly. It was being done in linebuf_flush() but
  not linebuf_get() which meant that the recvq would grow, and the flood
  protection (which used linebuf_line() rather than linebuf_allocline()
  until about 5 minutes ago) would eventually kick off a user.

  Now the tracking is done in linebuf_done_line() where it should have been
  all along. Honestly, the crack I must've been smoking then ..



*** 20001207_16 by db
- fixed example.conf connect example



*** 20001207_15 by db
- removed botcheck which is obsolete, this gets rid of the one rule
  never reduced error in the parser...
- updated the example.conf to include server links, important that..



*** 20001207_14 by adrian


Use linebuf_alloclen() rather than linebuf_len() for flood tracking.
This should be done anyway, to stop people taking up inordinate amounts of
memory by flooding lines with only a few characters, which can be just
as annoying.



*** 20001207_13 by db
- non op trying to set a channel limit should get a not chanop message



*** 20001207_12 by db
- fixed two bugs. one bug in m_join.c prevented JOIN 0 from being 
  detected.
- second bug was one I introduced into send.c when I added lazylinks
  I put a test for a NULL chptr into the wrong spot... This probably
  affected other commands then just JOIN 0...



*** 20001207_11 by db
- class is a string not an int now (testline)
- redid m_sjoin... erg we are going to have to do some serious sanity
  checking on send.c sendto_channel_butserv tries to be "helpful"
  and uses vsendto_prefix_one() which promptly tries to put the
  proper prefix on the string. ugh. I already KNOW what prefix I want
  I don't need this overhead. time to re-examine asap



*** 20001207_10 by db
- fixed stupid in channel.c with ban sending... used banptr forgot
  the ->banstr oops.
- removed totally unused variable in s_user.c LastWallopsTime...
  wallops is no longer paced. rah rah.



*** 20001207_9 by db
- first cut at cleaning up m_gline.c its still fugly... but cleaner
- added CAP_GLN for capable of gline servers. I didn't realize this
  wasn't here before. ugh.



*** 20001207_8 by db
- fixed m_stats.c so /stats E,F as non oper gives No permission error



*** 20001207_7 by db
- m_message.c would core if the channel was +m and you tried to
  message it. duh



*** 20001207_6 by db
- missing parc test in m_knock.c caused it to core on knock with 
  no args. spotted by poptix...



*** 20001207_5 by db
- missed committing new conf file because I forgot to rename it from
  ircd.conf to example.conf grrr



*** 20001207_4 by db
- Like a surgeon who leaves a scalpel inside a patient, I left some
  debugging code inside m_names.c ... some extra sendto_realops...
  *blush* at least the patient hasn't died ...



*** 20001207_3 by db
- added example of new style conf file (finally)
- renamed old ircd.conf example as ircd_old.conf



*** 20001207_2 by db
- fixed m_sjoin.c for vchans finally. They work just fine now.



*** 20001207_1 by db
- fixed obvious bug in sjoin code for vchannels. its still broken
  for remote joins, but getting there.
- allow halfops to +imtsp channels like full ops



*** 20001206_13 by db
- reverted previous m_kline.c change in favour of...
- letting s_conf.c figure out if the oper placing the kline is remote oper
  or not, and logging it appropriately.



*** 20001206_12 by db
- cleaned up m_server.c some more. ugh. it was horrid



*** 20001206_11 by db
- riedel's patch to keep from adding nicks twice to an accept list



*** 20001206_10 by db
- redoing RPL_VCHANLIST so last %s is gone, since I'm building
  up the channel sublist myself



*** 20001206_9 by db
- m_accept was using the wrong numeric for "no such nick"



*** 20001206_8 by db
- ummm there is a bug where an struct Confitem aconf will have a NULL
  c_class (pointer to class) this will core the server in attach_iline
  this should be fixed, meanwhile... validate the pointer is non NULL
  before trying to dereference it for now.



*** 20001206_7 by db
- transposed user/host in m_kline.c



*** 20001206_6 by db
- m_capab.c was missing an MFLG_UNREG hence was never being called
  in some cases. oops



*** 20001206_5 by db
- cleaned up m_server.c, removed some redundant code



*** 20001206_4 by db
- "CAP_KLN" string was missing in s_serv.c



*** 20001206_3 by db
- added mr_capab to handlers.h 
- changed m_capab to use mr_capab, remember capabilities are sent
  while client is still unregistered
- fixed another parser bug pointed out by Walter Campbell
- added sanity test to del_all_accepts



*** 20001206_2 by db
- reworked anti channel flooding to allow chanops/voice to flood
  their own channel with impunity. This will allow them to at least
  set +m if the channel really is flooded!
- fixed parser error spotted by Walter Campbel (Hwy101)



*** 20001206_1 by db
- on_accept_list can be on a remote client, having it on the localClient
  part will lead to a core..
- hacked out a portion of adrian's flood control for now.. to get
  the darn thing to do a server link. I'll look at it in the morning
  when I am awake.



*** 20001205_10 by db
- updated TODO
- c lines were blasted when ZIPLINKS were removed, put them back
  as normal C lines for now
- up check ping event time to 30 seconds
- close fbfile after parsing in .include
- check for NULL find on strchr('\n') in initconf



*** 20001205_9 by db
- moved check for flood attack on channel after check can_send
  


*** 20001205_8 by db
- ok, added channel throttling tested both channel throttling and message
  throttling, both appear to work. Removed FLOODTIME, default to always
  one second for now. 



*** 20001205_7 by db
- redid m_set.c precalculate newval etc.



*** 20001205_6 by db
- committed Jeremy Chadwicks (best.net) m_set table driven code
- sprinkled some asserts into linebuf.c
- fixed typo in m_admin.c



*** 20001205_5 by db
- cleaned up class.c adding more comment blocks
- cleaned up s_conf.c to actually use nice defines instead of cryptic #'s
- fixed typo in linebuf.c



*** 20001205_4 by toot
removed zlib from configure, and updated version number


*** 20001205_3 by db
- updated opers.txt for h7, its more or less right now
- added new 'u' flag for opers, show unauth clients on that flag instead
  of 'c' flag
- moved 'u' flag to 'g' for CALLERID
- upped flooding parms slightly some more... still set too low I think
- changed DRONE_FLOOD etc. to plain FLOOD... This is generic anti
  flooding code for the =recipient=



*** 20001205_2 by db
- cleaned up these functions, two arguments when 1 is quite enough
  this makes them consistent with other functions that only pass
  the struct Client *sptr. No need to also pass the nick.
- changed wording on vchan's at toyota's suggestion.



*** 20001205_1 by db
- added rest of accept code.
  client puts themselves into +u mode, this disallows casual messages
  to that client. The source gets a "am on server side ignore" from the
  target, the target gets a message saying source has messaged them, 
  but paced to once a minute.
  a client in +u mode (or any other mode actually) can add clients
  it will accept messages from using /quote accept nick
  delete them using /quote accept -nick (perhaps /quote delete nick would
  make more sense?) a list with /quote accept *



*** 20001204_17 by db
- found the cause of the blalloc bit already cleared error..
  dlink_node was already been cleared in remove_user_from_channel
  exit_one_client was trying to also free it.
- added sendto_cap_serv_butone for sending to capable servers
  added rudimentary remote kline code to use this. NOT TESTED
  until I get a remote server up.



*** 20001204_16 by db
- removed duplicate function from m_kline.c replaced with function
  already in place but unused in s_conf.c duh. can we say BLOAT?



*** 20001204_15 by db
- fixed bug in parse_client_queued to do with opered clients.
  code was nver resetting lcptr->sent_parsed = 0 and actually_read = 0
  so poor oper would no longer be listened to after a while...
  Replaced goto with a if (!IsPrivileged... macro... 
- removed last remnants of USER_UH defines ... GONE



*** 20001204_14 by db
- don't devoice/voice if chanop



*** 20001204_13 by db
- identity of who set a ban should be hidden in channel op hide mode



*** 20001204_12 by db
- empty vchans shown on list have no clients to key off of,
  return a timestamp for now. You can't join them still since 
  the join code doesnt' know anything about joining on a ts key.



*** 20001204_11 by db
- class.c get_client_class returns a string class name now
  It was trying to use a struct ConfItem as a class pointer. oops.
  As conf's now have a pointer to the class name anyway, its easier
  to pull it from the conf anyway. If its NULL, return 'default'
  string for now.



*** 20001204_10 by db
- lost a 433 (nickname in use error) somewhere in the way,
  put it back in.. m_nick.c



*** 20001204_9 by db
- had logic wrong in can_send



*** 20001204_8 by db
This is a patch which implements client send flood protection.
This is the type of flood where someone goes

/join #foo
/exec -o cat bigfile.txt

and they quit with "Excess Flood"  .

Note that if a client floods, its allow_read value will decrease. If they then
stop flooding, their allow_read value will increase regardless of whether
there is any pending data .. this flushes the output quicker if and only
if they stop flooding.

I've managed to cause this thing to go tits up a few ways when having
a client flooding a channel and it gets killed:

* a blfree bitmap error. Diane, Can you please check out why ? :-)
  I think this is related to your Slink death ..

* Hrm. the "client connecting" notification seems to panic if I'm an oper and
  see someone connecting to my local server.

* various strange deaths in the parser.. this one confuses me

* If a client gets killed for flooding, sometimes you'll see one or two
  lines *from* that client appear immediately after the exit. This is most
  probably my problem and its going to be a queue flushing issue ..

Can someone please tidy this up over the next week and commit it? I'd
like to have a hybrid-7 beta out, and i'm now going to be minus some serious
time until Christmas.

Thanks!

committed for now...

----- Forwarded message from Adrian Chadd <adrian@nympho.cacheboy.net> -----



*** 20001204_7 by db
- +m moderated channel logic was missing oops.
- removed count of servers in server hide mode in /lusers
- /links will show current server with hop count of 0, everyone else with 1
  in server hide mode to all but opers
- allow half ops to set topic
- removed zlib, better to use system installed lib



*** 20001204_6 by db
- ripped out LIMIT_UH for now. BLOAT BLOAT BLOAT
  in preparation for doing IP throttling ...
- ripped out #ifdef for invisible off or on, that should be in  
  conf anyway. ugh



*** 20001204_5 by db
- redid clear_channel_list code to handle possible buffer overflows
  limiting to 3 mode changes isn't sufficient *sigh*
  I think I got this right, unable to test without another server to link to
  and I'm too tired. ;)
  N.B. this code is very similar to send_mode_list... perhaps can
  combine the two functions. ...



*** 20001204_4 by db
- fixed vchan support, added new back pointer to channel struct
  only set non NULL on sub vchans. This makes it easy ...
- Bugs, what happens when a vchan is peristently kept? There is no longer
  an unique ID to use,since it has no users.



*** 20001204_3 by db
- fixed stupid in channel.c where a non op could generate a mode -o
  message on channel, but it didnt' do anything. Mis-placed if...



*** 20001204_2 by db
- added half ops.. BitchX freaks with it, but epic is fine.
  figures. anyway, we can #ifdef this out in production if we want.



*** 20001204_1 by db
- fixed m_kline.c code
- removed all traces of restricted I line code, thats better handled
  using half ops anyway.
- removed horrible '|' oper only messages in mtrie_conf.c
- fixed /stats K in m_stats.c for opers
- redid send_mode_list in channel.c to account for possible buffer overflow
  even with 3 bans per channel..



*** 20001203_13 by db
- fixed bug in m_names.c removed redundant/duplicate code in m_names.c
  which was already in channel.c



*** 20001203_12 by db
- removed DEBUG code from dlink



*** 20001203_11 by db
- removed REJECT_HOLD that should be replaced with IP throttling
- moved safe_write into fileio.c for now, changed to use fbopen() etc.
  let caller close the FBFILE 
- replaced vchan double link list in channel struct with dlink_list
- Still pending bugs in m_names.c, its displaying channels twice



*** 20001203_10 by db
- modified code to use dlink_node/dlink_list for oper_list serv_list
  and lclient_list (local clients) this gets rid of my evil double link
  list code mess, cleans up the code a lot more still..
  I think we really need to have another global (sigh) for the current
  uplink Client pointer for leafs...



*** 20001203_9 by adrian


Add a note about the new Slink replacement and how it needs to be sped up.



*** 20001203_8 by adrian


* ziplinks is gone for the time being
* david-t tidied up calling fd_note() in the right places



*** 20001203_7 by adrian


Add my stuff



*** 20001203_6 by db
- removed zlib



*** 20001203_5 by db
- simplified dlinkMoveList code 



*** 20001203_4 by db
- cleaned up m_nick.c again. HEY! the docs in the comments are wrong.
  surprise surprise.



*** 20001203_3 by db
- oopsie in m_nick.c wrong order of things... gah this code is 
  still a mess ;-(



*** 20001203_2 by db
- cleaned up m_nick.c some more... removed obsolete checks
  moved some tests where they make more sense for the new world order



*** 20001203_1 by db
- tidied up m_nick.c more in modules
  removed a nick <-> server test, replaced it with a simpler strchr(nick,'.')
  test. nicks can NEVER have a dot in them, and servers must ALWAYS
  have a dot in their name.
- cleaned up all functions in m_nick.c checking for specific paramater
  counts as the protocol specifies..



*** 20001202_13 by db
- fixed dlinkMoveList, there are three cases to contend with
  1) empty from list 2) empty to list 3) move the spaghetti pointers around



*** 20001202_12 by db
- fixed DEBUG_BLOCK_ALLOCATOR for free_dlink_node case so it will
  no longer core in sprintf.. all the free calls are "wrapped" 
  in ircd_def.h .. to include a file name and line number, without
  free_dlink_node being wrapped, it tried to print a non-existent filename
  oops

- I removed the "wrapped" free_link in ircd_def.h as well no longer used.
  which reminds me...

- LIMIT_UH code in the new world order is currently =broken= until
  it understands how to properly use dlink_node etc. Someone else
  bored and care to fix?

- Added reference counting to dlink_node =for now= *ICK* barf its an
  #ifdef .. I don't want it going out into production like that either adrian.
  I'll remove before the beta cut.



*** 20001202_11 by toot
small bugfix in m_who


*** 20001202_10 by toot
made vchan_map in to a dlink_list,
not tested loads, but it seems to work


*** 20001202_9 by db
- made list_length a generic function moved into tools.c
  renamed as dlink_list_length()



*** 20001202_8 by db
- add code to move a list from one to the other, this makes
  de-opping an entire channel a simple job of moving lists over from
  the chanop list to the peon list.



*** 20001202_7 by db
- real fix for channel.c change_channel_membrship
- fixed missing prototypes in tools.h that would have found previous bug



*** 20001202_6 by toot
typo in m_admin.. blah :)


*** 20001202_5 by toot
. let unregistered clients use /admin, but non hunting
. non-opers can do /time locally.


*** 20001202_4 by toot
fixed some compile errors/typos


*** 20001202_3 by db
- recoded send_members in channel.c so it actually works
  its still a dogs breakfast... but =better=



*** 20001202_2 by db
- connect bursts are still broken, but it works enough to 
  be usable. More debugging to do.
- cleaned up m_nick.c a tiny bit more. what a steeeninkng mess



*** 20001202_1 by db
- change_channel_membership was screwing up, since dlinkDelete does
  not zero the dlink_list->head pointer in all cases. *sigh* dunno
  what I did wrong. anyway, this hack fixes it for now.



*** 20001201_8 by db
- fixed m_who.c
- optimized m_sjoin.c a bit



*** 20001201_7 by db
- fix to whois... this function needs review... it "feels" wrong... sigh



*** 20001201_6 by db
- fixed m_names.c missing reply_to_send = 1



*** 20001201_5 by db
- tidy up LITTLE_I_LINE code remove #ifdef's



*** 20001201_4 by db
- massive commit, this removes ALL SLink's ick
  NOTE that not everything is working yet, notably server link..
  but this doesn't core right away. ;) and appears to run.



*** 20001201_3 by davidt
fixed gettext support a bit, and added some docs

*** 20001201_2 by adrian


aiee! clear the socket timeout *before* calling the timeout handler.
If we clear it after, we miss any timeouts set by the timeout handler.
(think multiple-ping checks ..)


*** 20001201_1 by adrian


add a flush list, which looks precisely like a socket timeout as it is
right now, but its designed to be used if we want to flush data out
at a certain time rather than immedidately.

Think "flood protection".

Note that this is implemented inside the comm_checktimeouts() loop.
This is done because we want to eventually only have exactly *one*
walk of the entire fd list/clients once a second, rather than multiple.



*** 20001130_22 by db
- majorly reworked m_sjoin.c remove_our_ops and channel.c send_mode_list
  because of the original RFC that started this stupidity off, trying to
  do four modes at a time is risky due to possible buffer overflow ;-(
  Taking the time to strlen() before adding to output buffer seems
  CPU intensive to me. soooo back to 3 mode changes per. This should
  speed up sjoin's a lot now.



*** 20001130_21 by db
- rewrote send_mode_list in channel.c The original was pathetic
  strcat this strcpy that. UGH. This should run much faster.



*** 20001130_20 by db
- fixed broken messages stuff for now I'll double check with David tomorrow
- redid how m_sjoin.c did a remove ops



*** 20001130_19 by davidt
m_error.so wasn't being built.

*** 20001130_18 by db
- removed CUSTOM_ERR define no longer needed
- removed offsetof no longer needed



*** 20001130_17 by davidt
Removed CUSTOM_ERR, and changed it to use gettext(), which allows the
message files to be changed at run time, currently using
/quote set MSGLOCALE ... ('custom' for the custom messages, or anything else
to use the standard ircd messages).
Also, added general_message_locale to the new config file.
If gettext() isn't available, it should just use the standard ircd messages.


*** 20001130_16 by db
- fixed core bug in m_names.c
  


*** 20001130_15 by adrian


move read_packet() and parse_client_queued() into packet.c.
s_bsd.c is meant to be a place where BSD socket type stuff
happens, not parsing client messages.

This is the precursor tidyup which will make implementing the recvq
flooding code talk..



*** 20001130_14 by db
- removed the evil local struct Client hack and added a new LocalUser
  "localClient" part. If non NULL, this client struct is a local client..
  I suppose we can now get rid of local_flag?



*** 20001130_13 by adrian


* kill client[] buffer in the Client struct. We don't need this at all
  with the advent of the linebuf
* Tidy up a couple of assert()s to be more tasteful to me
* note that the count; entry in the Client struct is now only used to
  denote local/remote clients with some evil splitting of the client struct
  and memory allocation. This is evil and should be killed at someone's
  earliest convienence and replaced with a LocalClient struct which attaches
  to the end of a struct Client ..




*** 20001130_12 by adrian


* added an Id tag
* we needed to keep those bzero()'s. Hrm, I wonder why ...
  What happened was that we'd have get a line in, and then immediately flush
  some previously printed garbage. Weird.


*** 20001130_11 by db
- similar bug to parse.c in modules.c when increasing moduletable



*** 20001130_10 by db
- added two new parms to parser hide_server hide_chanops yes or no
- added possible fix (untested by adrian?) to parse.



*** 20001130_9 by adrian


We don't need to bzero, now that the memory routines return the memory
zero'ed for us ..



*** 20001130_8 by db
- removed memset() 0 after MyMalloc its done already 



*** 20001130_7 by db
- no need to memset to zero in channel.c now either



*** 20001130_6 by db
- MessageTree stuff should be in parse.h not msg.h
- Seeing as MyMalloc now zeros memory, no need to do it in blalloc



*** 20001130_5 by adrian


bzero() the memory we get from malloc() before returning. This is a good
thing(tm), and it means we can possibly start removing bzero/memset's
from around the code.



*** 20001130_4 by db
- fixed kick so nonops see user kicking themselves in chanop hide mode
- don't show uplink on links and hopcount if in server hide mode



*** 20001130_3 by db
- committed the chanop hiding code. wheeee
  still needs testing



*** 20001130_2 by db
- server names should not be given in /squit messages if
  server hide is turned on



*** 20001130_1 by db
- squished bug in m_names.c which caused the module to suddenly
  throw up when names without a paramter was given. I forgot
  the case where a client had no channels it was on, trying to 
  indirect through a NULL struct Link is bad for the modules health.



*** 20001129_10 by db
- fixed m_squit.c
- account for LazyLink's in channel.c destroy_channel()
  can be used for both persistent channels and lazy links now
  removing more BLOAT
- -O2 in Makefile.in for modules was doing weirdnesses, hard coded to -g for now



*** 20001129_9 by db
- fixed persistent channels
- fixed IsSetCallerId typo



*** 20001129_8 by db
- pile of cleanups mostly in comments
- added persistent channels tentatively for now, finesse it later
- redid s_user.c code to clean that up



*** 20001129_7 by davidt
Directory /cvsroot/ircd-hybrid-7/messages added to the repository


*** 20001129_6 by db
- renamed misnamed log_user_connect -> log_user_exit
- move X line check into separate function (LIKE IT SHOULD HAVE BEEN
  ALL ALONG)
 



*** 20001129_5 by db
- reworked register_user
  moved all check for conf/kline notification etc. back into s_conf.c
  where I think maybe it belongs, in any case, this cleans up register_user
  no more **char preason. *ugh*
- removed the kludge '|' handling in reasons. *ugh*

  Who knows what evil lies in ircd code...



*** 20001129_4 by db
- redid luser code, removed cache, if this is still needed after all the
  bug fixes done (!) then add an event to recalculate luser counts.

- added user_welcome() function to s_user.c to start factoring this up
  I hate monolithic functions...

  What evil functions lurks in the heart of ircd?, the shad0w knows.




*** 20001129_3 by db
- cleaned up user and oper file logging. use fbopen etc.
  use eventAdd to close user log for resync



*** 20001129_2 by db
- removed more #define's
- cleaned up client.c/client.h some more



*** 20001129_1 by db
- I removed isbot tests. those are quite obsolete and were BLOAT
- I added skeleton for server side ignore new user mode +u
- This adds a new command module "m_accept"
  This code needs to be finished...
- removed rehash gline rehash tkline BLOAT
- tidied up linebuf.c to use \r and \n like K&R intended



*** 20001128_11 by adrian


Revoke FDLIST_BUSYCLIENT for the time being - we need to sort out
how we place things in the fd lists, and we need to keep the flow
of FD events at a steady rate.

The trouble right now is that if we don't have any idle fd's being
triggered, we end up waiting an entire second for their IO to
complete. This is too long. :-)



*** 20001128_10 by db
- removed unused FLUD code



*** 20001128_9 by db
- ripped out FLUD, right idea, wrong approach.



*** 20001128_8 by db
To quote RFC1459.txt

The NOTICE message is used similarly to PRIVMSG.  The difference
   between NOTICE and PRIVMSG is that automatic replies must never be
   sent in response to a NOTICE message.  This rule applies to servers
   too - they must not send any error reply back to the client on
   receipt of a notice.  The object of this rule is to avoid loops
   between a client automatically sending something in response to
   something it received.  This is typically used by automatons (clients
   with either an AI or other interactive program controlling their
   actions) which are always seen to be replying lest they end up in a
   loop with another automaton.

NOTICE now no longer replies with "NO SUCH NICK" if a nick recipient
does not exist etc.



*** 20001128_7 by db
- fixed m_message to work properly. i.e. oper $# messages work
  NO_SUCH_NICK now work properly



*** 20001128_6 by davidt
Fixed broken build

*** 20001128_5 by db
- removed another #ifdef 



*** 20001128_4 by db
- oopsies in modules.c should be max_mods not num_mods



*** 20001128_3 by db
- removed more bloat bloat bloat



*** 20001128_2 by db
- synced up doc changes



*** 20001128_1 by db
- synced in CIDR.txt doc from hybrid-6 tree
  gah! I am looking forward to the death of the h6 tree. it sucks.



*** 20001127_11 by db
- fixed reference to version in module, its a **char pointer. 



*** 20001127_10 by db
- fixed a few typos



*** 20001127_9 by bill

 - added _moddeinit()


*** 20001127_8 by db
- fixed modload/modunload yes. they work now



*** 20001127_7 by db
- added deinit



*** 20001127_6 by db
- modunload now works. But all modules need to be updated to add a deinit
  function *sigh* I did m_admin.c, 59 more to go



*** 20001127_5 by db
- fixed parse.c and modules.c



*** 20001127_4 by adrian


We should only allow a buffer to be obtained via linebuf_get() if it
is terminated!



*** 20001127_3 by adrian


Add initial documenation of the new linebuf code
(god I love documenting ..)



*** 20001127_2 by db
- interim check in, I hate checking in partially debugged code
  but I have to do some real work for a bit,
  /modunload cores ..



*** 20001127_1 by db
- fixed modules code to use version string as well
- fixed parse to use prefix tree code
- modload modunload hooks in place, need admin flags 
- fixed m_help to use original msgtab 



*** 20001126_10 by db
- got tired of a compile warning



*** 20001126_9 by db
- re-enabled send_operwall



*** 20001126_8 by db
- .depend included references to in6.h which ltnx didn't have oops.
- committed bysin's whois fix



*** 20001126_7 by db
- Seeing as there is next to nothing left of irc2.8 I'm removing
  it from the patchlevel.



*** 20001126_6 by adrian


Hrm, return the number of lines parsed by linebuf_parse() - this'll be
used later on by some anti-flood code at a later date.



*** 20001126_5 by adrian


We don't need these. YAY.



*** 20001126_4 by adrian


Adrian's totally massive evil dbuf die and linebuf code.

* dbuf.c and dbuf.h have gone. Byebye.
* some of the stuff in s_debug.c which reports dbuf stats has been
  #if 0'ed for the time being
* linebuf flushing (ie write()ing to a socket) is now done through
  linebuf_flush() which does the state keeping, saving a whole lot of
  dbuf map/delete and tracking that existed before
* dopacket() was killed, since we now handle line-by-line parsing of both
  server *and* client recvq buffers. dopacket() did some CRLF-type splitting
  magic because a single buffer when doing ZIPLINKS could possibly be
  more than on ircd line.
* deliver_it() was also killed, since we don't need that extra complexity.
* A lot of linebuf fixes are brought in because well, we needed them!


How the linebuf stuff is used (in a nutshell)

* linebuf_put() is called to put a complete line into a buffer. It has
  to be a line.
* linebuf_parse() is called to put one or more lines into a buffer.
  Incomplete lines and multiple lines are handled.
* When a line is terminated, it is appended with a CR/LF/NUL .

  NOTE that the NUL isn't counted in the length!


Ok - this code is very very alpha. It works, and I can link to another
hybrid server. There are a lot of extras I have to add to this code
before it can be used in a public network, like:

* fixing flood protection to take into account alloclen rather than len.
  This is more relevant to memory usage
* fix the flood protection to only appear in one place (ie after
  linebuf_parse() ) rather than the 10935083405 places it exists now
* I should add multiple-size support in the linebuf code, because we might
  end up wanting to support > 512 line buffers for server connections
* .. and yes, we should really test this to break it, to make sure I haven't
  forgotten anything.



*** 20001126_3 by bill

va'ified send_operwall
added zlib/ and iauth/ to SUBDIRS in Makefile


*** 20001126_2 by db
- fixed m_kline.c



*** 20001126_1 by db
- more cleanups



*** 20001125_5 by db
- tempoary check in (still works) of another massive cleanup...
  more to come



*** 20001125_4 by db
- more bloat removed.



*** 20001125_3 by toot
don't need to check if they're an oper in mo_testline


*** 20001125_2 by ryan

added RPATH for ircd.rsa (for oper keyfiles)


*** 20001125_1 by toot
. moved mo_testline into a module
. added idletime setting for use in ircd.conf


*** 20001124_5 by bill

 - changed DPATH and the like from "/usr/ejb/ircd/" to "/usr/local/ircd/"
   maybe ejb could just ln -sf /usr/ejb /usr/local?


*** 20001124_4 by db
- removed more unused junk



*** 20001124_3 by db
- clean up to this module 



*** 20001124_2 by db
- more cleanups, removed m_htm.c



*** 20001124_1 by db
- more cleanups



*** 20001123_6 by db
- added version strings



*** 20001123_5 by db
- added version tags



*** 20001123_4 by db
- more versions



*** 20001123_3 by db
- added version



*** 20001123_2 by db
- more fixes



*** 20001123_1 by db
- fixed m_userhost



*** 20001121_3 by adrian


Add in the beginnings of my new and hopefully improved dbuf replacement.

The general idea here is that we *should* be pre-parsing buffers into lines
so we can later throw references around.

src/dbuf.c throws data into the dbuf and parses it when its coming out.
This code parses data into lines when it comes in, so its already
in a per-line format (minus the trailing CRLFs) when we come to parsing
it.

Its building, but I haven't tested it yet. THAT is next.




*** 20001121_2 by adrian

Actually create a tools module with stuff that is abused reguarly,
and rip some of squid's dlink-list management stuff.

I'll commit some code which uses them soon, so people have something
to work with.

This should remove a *lot* of ugliness/duplication in dlink list
management. :)



*** 20001121_1 by db
- general cleanups continue, just a few this time
- ltrace removed for now, it can go back in later



*** 20001119_2 by davidt
modularised m_motd, so /MOTD works once again.
motd.c still contains various file reading/sending commands, which are
used elsewhere, although motd.c probably isn't the best name any more.


*** 20001119_1 by davidt
fixes for poll.  It seems to work, although there's probably a bug lurking
in there somewhere...


*** 20001118_3 by toot
removed all those OLD_* defines in set_mode()


*** 20001118_2 by toot
End of /NAMES list was missing in one place.
fixed compile warning in ltrace


*** 20001118_1 by davidt
fix for gcc warnings, and do a fd_note on nickchanges.


*** 20001117_2 by davidt
- added missing _modinit function to m_gline.c
- removed #ifdef LTRACE from m_ltrace.c 
- fixed m_challenge.c to make a non-broken module if we aren't using
  OPENSSL


*** 20001117_1 by toot
. made a separate ircd.conf setting to block nickchanges when banned,
  and block them in +m chans too, unless opped
. fixed a typo i made in can_send() :P


*** 20001116_7 by toot
(quiet_on_ban stuff)
  +o/+v should be able to speak even if banned
  only check local connections, to save CPU, and avoid "desync" messages on mixed nets
  take account of +e's

it's safe to send more than 3 +b/e/d/I modes on a netjoin, so use upto MAXMODEPARAMS


*** 20001116_6 by toot
removed mo_knock, m_knock is fine for opers.


*** 20001116_5 by toot
use the topic setters nickname in the !list, if available


*** 20001116_4 by davidt
- Fixed a small bug in m_message.c, where @@<chan>, @+<chan>, +@<chan>,
  and ++<chan> would all be treated as +<chan>.  Now @@ and ++ are treated
  as invalid, @+ and @+ are treated as +
- Made sendto_channel_type's check for MODE_VOICE before MODE_CHANOP.
- m_notice.c and m_privmsg.c are obsolete (merged into m_message.c),
  and weren't being built anyway.


*** 20001116_3 by davidt
- Figured out how to create a .so without the .tmp file..

this tree seems to compile/run correctly for me on Linux, hopefully
I didn't break anything elsewhere..


*** 20001116_2 by davidt
- modules/Makefile.in modified to work with gmake (like src/Makefile.in)
- src/Makefile.in @DL_OPEN@ removed, since configure doesn't use this
  any more.
- modules/Makefile in removed, since it should be generated by configure
  like src/Makefile


*** 20001116_1 by davidt
Removed uneeded malloc in modules.c (and the corresponding bogus free,
which caused ircd to core when loading modules)


*** 20001115_5 by lusky
backed down to previous configure script


*** 20001115_4 by adrian


When a FD goes inactive, make sure its moved onto the NONE fdlist.



*** 20001115_3 by db
- removed /rehash dump for one reason... and one reason only BLOAT



*** 20001115_2 by lusky
added missing commit comments


*** 20001115_1 by db
- oops. just noticed I forgot to cvs add these *sigh* sorry



*** 20001114_5 by spookey
- configure & autoconf/configure.in & src/Makefile.in updated for -ldl
  linking with IRC (added DL_DEFINE stuff to IRCDLIBS and defined it if 
  it's a linux machine)
- src/s_bsd_poll.c added the glibc compatibility fixes



*** 20001114_4 by db
- small change to parse.c, this makes more sense to me
- added configure change suggested by David-T, this still needs to
  be made into the configure script by someone who knows how to do
  such things...



*** 20001114_3 by db
- seriously, why was this struct sitting around not doing anything useful?
  was it to entertain me?



*** 20001114_2 by db
- m_whowas.c was missing from modules, 'cause it was hiding like a bad
  little boy inside src/whowas.c... unfortuantely, m_whowas.c has a 
  dependancy on whowas.c ... carnal knowledge of the hash table etc. but
  no worse then m_whois.c on client structs etc. blah. Anyway, move
  stuff from whowas.c into m_whowas.c in modules..

- Added NOTICE fix up mention in TODO list



*** 20001114_1 by db
- A long time ago, in an ircd far far away, there was one a function called
  m_message.c which did both m_privmsg and m_notice. When the evil bleep
  bleep from another ircd universe invaded us, we split that into
  m_privmsg.c and m_notice.c ... I really don't see the point, they
  share too much functionality, they both do the same thing blah blah blah.
  Its really miserable fixing something in m_privmsg.c only to duplicate
  the work in m_notice.c as well.




*** 20001113_5 by db
- fixed mistake found by David-T an = should have been an |=



*** 20001113_4 by db
- buffer size was incorrect and incorrectly commented



*** 20001113_3 by db
- fix to s_conf.c *sigh*



*** 20001113_2 by db
- use more common functions whenever possible. grrr 



*** 20001113_1 by db
- cleaned up m_whois.c a bit more
- moved find_user_link from list.c into channel.c thats the only place it
  was being used anyway.
- removed no longer used #ifdef from config.h
- redid the semantics for channel_chanop_or_voice to work on channel mode
  flags rather than Link



*** 20001111_6 by db
- more cleanup on m_kline.c
  with iauth, kline file locking etc. will be handled by iauthd anyway..
  We'll need a local link list of klines to place as they are handed to 
iauthd eventually...

- fixed small bug in s_conf.c removed another #ifdef



*** 20001111_5 by db
- more clean ups on m_kline.c, I'll make this sane yet!



*** 20001111_4 by ejb
- fix up Makefiles a bit so they actually work
- finally remove src/m_*.c
- remove /list sendq crud



*** 20001111_3 by db
- simplified mo_dline a bit



*** 20001111_2 by db
- interim checkin of m_kline.c, first pass of clean up



*** 20001111_1 by db
- initial rewrite of m_list.c moved some code into channel.c for the moment.
  is- can do a better job on this later (HI!)

- m_admin now only available locally if unregistered (rodder's fix in 6)
  this allows one to figure out just who the loser is thats connecting
  to your server without having to register... yet gets rid of the 
  stupid nick collide "feature"

- modules/Makefile should really be generated from configure no? for now
  I've modified modules/Makefile to generate m_list.so again since I've
  moved some of the depedancies out of m_list.c
  is- can figure out what to do with this later. (HI again!) at least
  the code is sane now. (I've left code #if 0 out in m_list.c so it
  can go back in later)



*** 20001110_3 by db
- added missing m_list.c in Makefile.in



*** 20001110_2 by db
- channel specific stuff should stay in channel.c ya ya ya 
  anyway, m_join.so was having a nit pick fit over names_on_this_channel()
  which of course, was way over in m_names.so.... so I have renamed
  the function to channel_member_names() and placed it into channel.c
  Ignore the mods to src/m_join.c duh. everything m_* in src goes away...

  Eventually in an universe far far away, channel becomes channel.so
  which means, it will have to have a list of dependancies on it to unload
  and reload or something, or maybe just unload all the m_ functions and
  reload autoload? Sometime in an alternate universe...




*** 20001110_1 by db
- nasty DoS 
  if user enters long prefix, it puts the parser into an infinite loop

:aaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaaa bb
will hang the ircd



*** 20001109_7 by ejb

some fixes in makefile


*** 20001109_6 by ejb
ok basic modules support is almost complete now.
there's a strange bug where some commands make it
exit(1), when i've fixed that all we need is
m_modload, and module UNloading support ..

then maybe modularise more stuff, that's all for
the future though.



*** 20001109_5 by ejb
modules appear to be mostly working now, apart from a small problem with
the mtree that means it won't recognise any commands.
m_error and m_list are now built as part of the core for now..
still no make install for modules/




*** 20001109_4 by db
- only ctcp flud check if local client *oops* This was a side effect
  of combinging ms_privmsg/ms_notice back into one...



*** 20001109_3 by ejb
finished converting modules/*, just some work to do in src/ to make
it compile and stuff now.



*** 20001109_2 by db
- remember, mo_close is only called if an oper, no need to double check



*** 20001109_1 by ejb
convert a few more m_functions, only 8 left to do now.  most of them
will compile, although a couple will not and src/ircd will still not
link.  as i said, will try to fix that tonight.



*** 20001108_8 by ejb
Initial commit of loadable modules support.  right now we can
load modules, but not unload them.  support for adding commands
via modules is there, and about 50% of the m_*.c has been ported.
currently ircd will neither compile nor link properly, but i 
wanted to commit this as soon as possible.. from now on if you
modify m_*.c please edit the version in modules/ rather than
in src/, since src/m_*.c will disappear soon.

i'll try to make another commit tomorrow that fixes compilation,
and allows ircd to be used ..

also we need a modules.txt that explains how to write modules.

so, if you need a working ircd now, sorry, you'll have to wait
until tomorrow :/

(btw if anyone feels like porting the rest of modules/m_*.c (i've done
up to m_operwall.c so far), just look at one of the existing ones
as an example, all you need is the struct Message and _modinit()
function).  as for global symbols defined in modules (this is why
ircd won't link right now), i have a solution to this which i can
hopefully also commit tomorrow.



*** 20001108_7 by ejb
Directory /cvsroot/ircd-hybrid-7/modules added to the repository


*** 20001108_6 by adrian


* Adding socket timeout information
* remove FD list code, since its in a seperate file
* cosmetic changes



*** 20001108_5 by adrian


Break out the documentation in network.txt into seperate files for
filedescriptor management and file management.



*** 20001108_4 by adrian


Enforce FD limits in file_open()



*** 20001108_3 by adrian


Updates on the network code documentation. Add documentation for the FD lists
and FD management code.



*** 20001108_2 by adrian


Initial non-optimised version of my fd list code.

The idea is that for the most part, we can detect busy and idle clients
at IO register time (and, at the outside, we can re-decide when we get
a ping back from a client..)

The FD list is passed through comm_setselect() as its second argument.
There will be some weirdnesses where FDs shift lists frequently, but I
will play with this code soon.

Read include/fdlist.h for the list of FD lists.



*** 20001108_1 by adrian


Added initial documentation for the event code.



*** 20001107_9 by ryan

added myself. oops :)


*** 20001107_8 by db
- in the new world order, if you reach a mo_ function you are an oper
  No need to double check.



*** 20001107_7 by adrian


A network code overview. Very brief (only comm_setselect() is covered
right now), but I'll be adding to it real soon.



*** 20001107_6 by ejb
added support for /undline and /ungline (ported from toot's
patch to -6)



*** 20001107_5 by ejb
we now propagate /away if the state is changing - ie if they were
away before and are marking unaway, or vise verse.



*** 20001107_4 by db
- this should add back the lameo weird oper privmsg masks
  but it doesn't work. No matter, debug tomorrow ;) it still compiles

  I'm going to "steal" the ircu new mask format for opers, its saner...
  I believe everything is prefixed with $ for special oper thingies
  Isomer, care to help out on this one?



*** 20001107_3 by db
- reworked ison slightly. *sigh* dunno what kind of drugs I was on



*** 20001107_2 by db
- bah moved changes over to m_notice.c



*** 20001107_1 by db
- added back anti drone flood code. *sigh* Though I suspect this all
  has to be modified in the grand scheme of things eventually...

  Still have to re-add oper prefix privmsg support.



*** 20001106_18 by db
- slight tweak to m_privmsg code to allow sending of errors to client
  


*** 20001106_17 by db
- rewrote m_privmsg.c more or less completely.
  Still TODO re-add the additional privileged things opers get
  copy this code in m_notice.c
  TEST TEST TEST I think it works...



*** 20001106_16 by db
- split m_sjoin.c up a bit more, added vchan support for remote clients
  I want to revisit this code. The problem is, remote servers can have
  more allocated channels per user, and we have a fixed sized vchan map ;-(
  So, whats fine locally may be too small for a remote user. Perhaps the
  vchan map should be a link list? or we suffer with scanning all vchans
  for remote clients?

- moved vchan map into all clients even remote, section. blech. read
  comments above.

- cleaned up m_cjoin a bit



*** 20001106_15 by adrian


We don't need to flush a socket buffer when we've already done it.
REJECT_HOLD is fun code .. and yes, it was my screwup.



*** 20001106_14 by adrian


use autoconf'ed CFLAGS, rather than enforcing inheriting it from the
top level Makefile. This allows 'make' in src/ work *properly*.



*** 20001106_13 by adrian


Make sure we remove the query from the pending DNS requets when we actually
get the reply.

I forgot this line when I ripped out some of the remaining DNS cache code
:-)



*** 20001106_12 by adrian


Only add a client to the AuthClientList if we're doing iauth.



*** 20001106_11 by db
- don't list secret channels in vchan ! list



*** 20001106_10 by db
- cryptic code must die if(!--maxmatches) ...
- minor cleanups



*** 20001106_9 by adrian


I hate doing it, but here it is. One blind commit to rip out ziplinks
from hybrid-7, as they will be re-implemented later on as an external
process rather than be in the code.

the actual zip files haven't been removed, since I'm probably going to
reuse them very soon now.

This hasn't been tested. It compiles. I will do more testing this evening,
and probably do some much needed tidyups to the client/server send and
receive code.



*** 20001106_8 by adrian


fd limit checking is done in comm_open() now, so remove a superflous check.
This has the added advantage of killing an incorrect close() which should
have been an fd_close(), but it doesn't matter much now ..



*** 20001106_7 by db
- reworked even more code
  I removed remote m_away entirely for now
- fixed serious botch in channel.s with channel_mode



*** 20001106_6 by adrian


Thanks to is- for pointing out the *correct* fix: default: <build target>
Reverted the previous patch, and set default:    all


*** 20001106_5 by adrian


Rearrange the Makefile targets so 'make' in src does the right thing(tm).



*** 20001106_4 by adrian


Finally kill the DNS cache code altogether from the API. gethost_byname()
and gethost_byaddr() now are void functions, rather than struct DNSReply *
functions. If we want to implement a DNS cache, we can do it later with
some callback trickery without having to always check the result and do
trickery in all the client code. (Which makes things hard to follow :-)

The users of gethost_ were converted to assume the callback will be made
at some future time. Note that we can't simply call the callback inside
gethost_ because it'd break things. (What you'd do is have a function
called res_callbackhits() before comm_select() is invoked to do the DNS
callbacks for any cache hits..)



*** 20001106_3 by db
- even more cleanups
  removed a pile of unused #ifdef's lets move these into runtime config
  or EVEN better loadable modules. (hint is- hint hint hint)

  And oh yes, show oper passwords on failure wasn't is-'s fault. happy now?

  Ok, sjoin from remote server for a vchan is going to be interesting.
currently our vchan map is only kept for local clients. duh.
find_vchan() won't work on a remote client. duh. (vhan_map)
The question now is, do we extend vchan_map to remote clients as well
and fill in the map on sjoins? or figure out its a remote client
and walk the vchan link list instead for remote clients?
*sigh* The map is definitely faster for local clients, as it is filled
in in m_join and m_part etc....
Actually, the idea of caching them as found for remote clients 
sounds like the best compromise...

  


*** 20001106_2 by db
- removed prototype that no longer existed
- fixed comment in hash.c
- reworked yet another inconsistent function



*** 20001106_1 by db
- made some functions consistent in use... i.e. always start with chptr
- removed some dead functions
- removed del_invite add_invite from channel.c moved to m_invite.c

  I think I got this right. There were functions that had chptr
first, then others that had sptr first.. inconsistent... 

  Removed a few no longer used or defined functions. duh
  


*** 20001105_12 by ryan

Added Id tags to rsa_respond (oops)


*** 20001105_11 by ryan


This is the example client implimentation of RSA authentication for opers


*** 20001105_10 by ryan
Directory /cvsroot/ircd-hybrid-7/tools/rsa_respond added to the repository


*** 20001105_9 by toot
David-T's patch that add vchan support to KNOCK, and fixes the flood control


*** 20001105_8 by db
- clean ups to m_join.c
- resolved conflict in s_conf.h



*** 20001105_7 by adrian


Tidyups of src/s_auth.c .

Submitted by: David Taylor <davidt@yadt.co.uk>


*** 20001105_6 by adrian


Kill #ifdef IDLE_CHECK, since someone did it in mtrie.conf ..



*** 20001105_5 by db
- redid m_join.c its still evil, but not quite as bad



*** 20001105_4 by db
- removed a bunch of stuff. JUPE_CHANNEL is gone
  Its really not needed with vchans
- removed more SPLIT_MODE cruft, also not needed



*** 20001105_3 by db
- fixed stupid in m_oper.c, it wouldn't have honoured O from other servers..

- removed show oper password on fail... The reason is nasty.. When
  Europeans got hackered recently, irc.hemmet etc.... The kiddies were 
  opered up with hacked O lines.. A few opers accidentally used the 
  O line passwords for other servers on the hacked server... showing the
  kiddies their O line passwords for yet more servers... This is a 
  bad idea completely. *sigh* Yes, maybe it should be up to the admins, 
  but it is just a bad idea I think. Sorry is- 



*** 20001105_2 by db
- redid m_oper.c to clean that up a bit 
- changed the header in m_challenge.c from m_version.c to m_challenge.c



*** 20001105_1 by db
- slight cleanups to m_part.c
- added vchan support to m_whois.c m_who.c
- added fughly hack to parse... more than one unregistered message
  results it no more unregistered messages...



*** 20001104_11 by db
- fixed botch I introduced with vchans, when I rewrote m_names.c



*** 20001104_10 by db
- fixed m_who.c to be completely vchan aware



*** 20001104_9 by ryan

RSA implimented.  /quote CHALLENGE (with --enable-openssl)
now we just need some clever way to make /oper accept the response :)


*** 20001104_8 by db
- added vchans.txt doc



*** 20001104_7 by db
- rewrite of m_oper.c to clean it up a tad



*** 20001104_6 by db
- cleaned up m_nick.c a bit. ms_nick still needs a lot more work
  but at least its not doggie doo-doo any more. ms_nick is still too long.
  The fd_note function looks expensive to use in production... adrian?



*** 20001104_5 by ryan


Added initial RSA support (challenge/response stuff)
nothing is actually built without specifying --enable-openssl (which results
in rsa.c compiling and the ircd being linked with -lcrypto)


*** 20001104_4 by ryan

Modified configure.in and regenerated ./configure, Modified Makefile.in
in preperation for optional openssl support (for RSA authentication of opers)


*** 20001104_3 by adrian


* add fd_note() which changes the FD description
* add fd_dump() which dumps the current opened FD list to the given
  client
* add /stats F / /stats f support from opers to dump the current
  open sockets. This could do with more info being dumped, but its fun
  for debugging right now.
* add Server: and Nick: in front of the server and nick connections
  so /stats F looks useful
* .. and finally, use fd_note() in src/m_nick.c to set the nickname
  description whenever the client sets its nick.

IsLocal() isn't functional. Grr.



*** 20001104_2 by adrian


* set the socket to non-blocking in comm_open(), and fail the socket
  creation if this fails. All network sockets should be non-blocking
  in this ircd!

* add comm_accept() - a mirror of accept() but enforcing non-blockingness
  and FD limits also

* modify listener.c to use comm_accept() instead of accept() and fd_open() .



*** 20001104_1 by db
- some cleanups
- Still need to add back in lazy link support
- Still need to add back in vchan support



*** 20001103_8 by adrian


with REJECT_HOLD, we read() from the fd to flush the buffer, instead of
ignoring it. This is event-IO friendly, and it will stop triggering unwanted
read IO events.



*** 20001103_7 by adrian


Implementing comm_open(). This is designed to be a socket() and
fd_open() wrapper which limits the number of possible open FDs to
MASTER_MAX (for the time being - better suggestions please :)

So now, you should be either using file_open() / fbopen(), or
comm_open(), and *NOT* any other calls if you can avoid it.
I haven't wrapped dup/dup2/pipe, since the ircd currently does not
use them.



*** 20001103_6 by adrian


* move highest_fd into fdlist.h and out of s_bsd.h for the time
  being
* add a number_fd variable giving us the number of file descriptors
  currently open. This will become useful for limiting socket creation
  and so forth when we're trying to avoid over-flowing the number of
  file descriptors open ..



*** 20001103_5 by adrian


Kill fdlist_add and fdlist_delete, since we're not using them anymore.



*** 20001103_4 by adrian


local[] is already defined in s_bsd.c, so there is no reason to have
it defined in the poll and kqueue modules.


*** 20001103_3 by adrian

Call init_netio() earlier than anything which could
call comm_setselect(). This is why the resolver wasn't
working with kqueue, because we didn't have the kqueue fd open
at the time the resolver fd was comm_setselect()ed .



*** 20001103_2 by adrian


Tidy up the logging during a connection attempt - print a connect message
*before* calling serv_connect(), because it can generate an error itself,
sending the error to the client *before* sending the activated line.
(This is a side-effect of callbacks, btw. We could get around it, but this
just seems clearer to me.)



*** 20001103_1 by db
- reworked m_names.c
- added fix by rodder from hybrid-6 for log botch



*** 20001102_12 by adrian


Add in the initial kqueue implementation. Note that DNS breaks under anything
before 4.1-REL because of a bug in kqueue() (if I remember right).

This code is very simple, and has no debugging. I'll be (ab)using it
in about a week after I've tidied up some other bits of code, but I thought
I'd give you guys something to play with. :)



*** 20001102_11 by adrian


tidy up the code in serv_connect(), which basically is some formatting
changes and a comment change to reflect a function name change.



*** 20001102_10 by adrian


when serv_connect_callback() isn't COMM_OK: 

Log to opers the actual error, rather than it going as a wallop or
something. This makes it appear with the connect messages to opers,
which IMHO is where it *should* be going.



*** 20001102_9 by adrian


Fix the timeout code so its added when we do a non-DNS connect(), and
cleared when we call the callback so it doesn't trigger wrongly.



*** 20001102_8 by bill


iauth/ was missed in SUBDIRS


*** 20001102_7 by adrian


.. oops, forgot an #include for close() .



*** 20001102_6 by adrian


* convert send_queued_write() to a global so we can use it in other places ..
* .. like close_connection(), to flush data before the socket closes

This now means peopl get their quit messages back before the FD closes! :P



*** 20001102_5 by adrian


fd_close() is meant to close() the fd, rather than squid's which doesn't
(this is because its got more sane file_open/close and comm_open/close
code ..)

This fixes the fd leak and non-closing fd problems.



*** 20001102_4 by adrian


Initial change over of the server connect() code to use the new world
order(tm).

* Fix a couple of stupidities in my last commit of comm_strerror
* Strip the server connection stuff out of s_bsd.c and move it into
  two functions in s_serv.c - 
  + serv_connect() - initiate a connection to a server (replacing
    connect_server()
  + serv_connect_callback() - completion from comm_connect_tcp() 

Note that there doesn't seem to be checking to see if a /connect server
is actually in the process of being connect'ed. This should happen!

The code works and connects to the server(s) on startup, but /squit and
/connect's fail. I've found that clients that /quit dont have their
sockets closed .. I have to figure that out, which might solve this.




*** 20001102_3 by toot
. fixed a possible over flow when listing available vchans
. have it show the nickname of who's been there longest


*** 20001102_2 by adrian


Add a routine to output string versions of the COMM_ status



*** 20001102_1 by adrian


oops, forgot to return; after the COMM_ERR_BIND, which meant it still
tried to connect..



*** 20001101_6 by adrian


.. and remember that a retried connect() can return EISCONN which
means the socket is already connect()ed, and its not actually an
error.

This makes the auth code work again. Yay. :)




*** 20001101_5 by adrian


Converting the ident auth code over to use comm_connect_tcp().
Note that this code doesn't entirely work yet, but it doesn't NOT work
(go on, parse that)

* rip the bind() / connect() code out of s_auth.c and use
  comm_connect_tcp() instead

* change send_auth_query() into a CNCB - it is called once 
  comm_connect_tcp() completes in order, and handles errors from
  it before attempting to write to the socket.

* fix comm_connect_tcp() to actually work ! :
  + actually *remember* to record the port
  + don't do DNS lookups on IPs when you want an IP, instead attempt to
    convert it to a in_addr, and if it fails try to look it up with
    gethost_byname()

* Remove all the auth descriptor stuff from send_message(), leaving only
  server connect()s



*** 20001101_4 by adrian


Add a 'local' parameter to comm_connect_tcp() to specify what to bind()
to locally. Currently if NULL is passed no bind() is performed, but later
on this will change to bind() to the virtual server IP if one is
configured.



*** 20001101_3 by adrian


Make the auth read is now done through comm_setselect(), rather than
through read_message(). This means that all read_message() does now
is handle completion of auth and server connect()s, which is next to go.



*** 20001101_2 by adrian


tidy up the auth code to use the block allocator rather than mymalloc/myfree



*** 20001101_1 by adrian


more comm_connect() code. This again hasn't been tested.

* finished comm_connect_tryconnect() to do what it should
* deal with the DNS return
* add more COMM_ERRs, so that the code trying to connect can do better
  debugging



*** 20001031_9 by db
- If you are going to change macros to look "prettier" finish the job
  *glares at bleep* We had macros that duplicated functionality
  confusing at the least...



*** 20001031_8 by adrian


Add some more code to implement comm_connect_tcp(). Its not functional
yet, but its getting there.



*** 20001031_7 by db
- preliminary cleanup of m_whois.c
  I messed up previous commit. YES I tested, but missed the duplicate
  in the scroll. *grr* fixed.



*** 20001031_6 by db
- slight cleanup to m_part.c
- major cleanup to m_whois.c



*** 20001031_5 by adrian


Remove the unneeded nextdnscheck variable, as we've turned it into a
periodic event now.



*** 20001031_4 by adrian


A temporary hack to make sure we're reading data once a server
connection has completed. It will go away when I finish this
replacement comm_connect_tcp() code.

Server connections *should* work now. They seem to work for me :)



*** 20001031_3 by adrian


Whatever the crack was that convinced me calling eventAdd()
from somewhere *before* eventInit() was called, never ever
come close to me again.


*** 20001031_2 by adrian


Initial timeout fd stuff. There is no code that uses it yet, but its there
and running for when I (am about to) do.

The idea is that you register a callback to be called after a given time
period has elapsed. This is good for things like checking ping returns,
where you set the timeout period on the fd to be 2*ping, and when you get
a PONG you reset the timeout period. If the socket ever times out, you
get a ping timeout.

Its also going to be used for the up-coming non-blocking connect() code,
where a socket timeout kicks in to prevent a connect() taking too long
to run.

Once check_pings() has been split up, this and the poll/select/etc loop should
be the only two places that walking the entire fd_table[] array is allowed.



*** 20001031_1 by adrian


We should be registering a COMM_SELECT_READ, not WRITE.
The only reason this was working was because the socket was ready
for writing also at the correct time it was ready for reading ..
uhm, sad. :-)



*** 20001030_11 by db
- more mods to clean up m_stats.c
- slight cleanup in m_user.c



*** 20001030_10 by adrian


Eek, don't re-register a read if cptr->fd == -1, ie she's shutting down.



*** 20001030_9 by adrian


* kill the priority code
* kill the burst mode code (there are still bits and pieces of the variables
  somewhere still.. :)
* call read_message() with a delay of 0, and call comm_select() with delay
  rather than 1. This makes the ircd snappier again ..



*** 20001030_8 by adrian


kill npollfds and use highest_fd in its place, which is just as good.



*** 20001030_7 by adrian


Optimise the read code. When a connection graduates from the auth state
and is upgraded to a client, its added via comm_setselect() to start
reading data.

* read_packet() has been turned into a PF, so it can be called when a
  FD is ready for reading.

* read_packet() has been stripped quite a bit - we *assume* that there
  will be data returned from the read. If not, thats a socket error

* error handling has been moved into read_packet() instead of its return
  value

* note that the data is put into the dbuf as fast as possible, rather than
  being evil and waiting. I'll fix the DoSability of this code at a later
  date, and without ignoring reads. :-P



*** 20001030_6 by adrian


Big big write optimisation, taking client and server writes into the
new network loop:

* flush_sendq_except() is gone. This was called when data was
  added to a dbuf and a new one needed allocating, probably to
  increase network throughput and decrease dbuf usage. It should
  not be needed now.

* send_queued() has been turned into send_queued_write() which is
  an IO callback now.

* send_message() will now *always* schedule a COMM_SELECT_WRITE
  regardless of how small the sendq is. This should up the
  network throughput and reduce the CPU a little.

* send_queued_write() should be rescheduling a COMM_SELECT_WRITE 
  if the dbuf chain hasn't been drained fully. I'm still 
  researching this to make sure the variable 'more' is set in
  the right places.

* fd shutdown code in s_bsd.c called send_queued() to flush dbufs
  before killing the FD. This obviously can't be done now.
  As noted in a comment, when close handlers are implemented
  correctly, the dbuf will be flushed (or attempted to) before
  the FD closes totally, so we just ignore it here for now.

* Make the old-style poll code not register and check write
  events for FDs that need data written. So now, the only
  thing that can trigger a client/server FD write in the old-style
  poll code is the completion of a connect(). All server/client
  FD writes are done through comm_select() in the new world order.

send_message() could probably attempt to call send_queued_write()
rather than waiting for the fd to be ready for writing, but this
is an optimisation for another time. (And easy too, since the
original code for send_message() called send_queued() anyway,
so there shouldn't be any problems there .. :)



*** 20001030_5 by db
- added tiny stats parse function (damn you Isomer!)



*** 20001030_4 by db
- more cleanups to m_stats.c code 
  both handlers call do_normal_stats
  oper handler calls do_priv_stats normal handler calls do_non_priv_stats
  This should make it way easier to assign appropriate privs



*** 20001030_3 by db
- moved events reporting from /quote events to /stats E
  I think it belongs there since /stats z is memory report
  I'd eventually like to have oper only /stats such as
  /stats events, /stats memory , /stats memory klines
  This could lend itself well to gersh's new malloc memory reporting code...



*** 20001030_2 by db
- reworked m_stats.c some more. no need for valid_stats flag. ick



*** 20001030_1 by db
- cleaned up m_stats.c just a little
  I like Isomers idea of renaming things a bit more, but this is
  a start...



*** 20001029_5 by db
- finally moved check_client from s_bsd.c, where it really never seemed
  to me to belong, moved into s_conf.c 



*** 20001029_4 by db
- viconf.c modified to match hybrid-6 patch, added vimotd check



*** 20001029_3 by lusky
fix for mIRC NAT+spoofedI DCC send problem (userhost now returns sockhost
for acptr==sptr).


*** 20001029_2 by db
- m_sjoin.c is still a mess, but starting to split it up into
  manageable pieces. 



*** 20001029_1 by adrian


Kill the flush_*() routines in send.c, since they add an extra level
of complexity and hackiness to where the code *should* be tidy (and
well, I'm going to tidy).

The closing-ircd-flush will be fixed once close handlers are implemented.
They will be soon.



*** 20001028_8 by adrian


Attempt to indent send_message() because I am about to start hacking
on this code, and this indenting wasn't helping..



*** 20001028_7 by adrian


Neatening up the formatting a little bit. There's no concept of 'valid
callback' here in this codebase.



*** 20001028_6 by db
- typo in s_serv.c in vchan handling
  oopsies



*** 20001028_5 by db
- most of the work is done in m_sjoin, it =should= send the mode
  join messages etc. to the right vchan names now.



*** 20001028_4 by db
- ok, did preliminary mods on sjoin to support vchans.
  This function is a pile of festering pus..
  Anyway, it should more or less work but its untested. Still to be
  done is the mods to the sendto_channel etc. so they all send the right
  join messages to the vchans as appropriate.



*** 20001028_3 by db
- rewrote burst code, added new function to do the actual burst. 'bout time.
  rewrote the burst code to send vchans as sub chans of top level channels.
  Next need to redo SJOIN to paste 'em back into sub vchans from burst



*** 20001028_2 by db
- adds /quote events which will list the event queue
  I'd rather add a generic "debug" function later on i.e. something like
  "/quote debug events" "/quote debug memory" etc. etc. but this will
  do for now...



*** 20001028_1 by adrian


move check_pings() into an event, and tidy up a random comment.
check_pings() is now called once a second to make sure we catch all
pings that should be pong'ed, since nextping isn't reset anywhere
in the code anymore. This isn't entirely optimal, but it will do
until I've tidied up the rest of the network code. When this is
done, I'll optimise check_pings() so it doesn't have to do so much
work to decide whether a client/server should have responded.



*** 20001027_1 by toot
made vchan notices into numeric replies.  276-278 don't seem to be used for anything in
any ircd i checked, so went for them


*** 20001026_6 by adrian


Add an explanation to errno ..



*** 20001026_5 by db
- check_klines() has to be called after placing tklines as well



*** 20001026_4 by adrian


Tidy up Dianora's event-ing of the channel_cleanup() code:

* change the declaration of channel_cleanup() so it matches the EVH
  function prototype

* Change the call to eventAdd() to not need the typecast to EVH ..
* .. to pass NULL instead of 0 ..
* .. and split across two lines so the line isn't > 80 characters




*** 20001026_3 by db
- removed checkpings to localize it in ircd.c only



*** 20001026_2 by db
- messed up 4am commit. Here is the changes to config.h



*** 20001026_1 by db
- cleaned up kline code in client.c
- missing check_klines in m_kline.c



*** 20001025_10 by db
- split check_pings into two (like it should have been all along)
  check_pings checks for ping timeouts
  check_kline checks for klines
  both call common exit routine
  m_kline has to call check_kline after placing a kline. It would be
  better if it was put on the nice event queue incase a tcm or oper
  places several klines in a row. But then, opers freak when a kline
  doesn't happen instantly.



*** 20001025_9 by adrian


ResolverFileDescriptor isn't a global FD anymore, so don't declare it
as one.



*** 20001025_8 by adrian


Convert the auth timeout checking to be once a second. I can't see this
sucking too badly because timeout_auth_queries_event() doesn't walk
the entire fd array - instead it walks AuthPollList.



*** 20001025_7 by db
- added evenAdd for cleanup_channels



*** 20001025_6 by adrian


tidy up the highest_fd handling. Now, the handling is done through
fd_open() / fd_close(), reducing the number of places tracking is
done.



*** 20001025_5 by db
- why I deleted that crucial code I don't know
  anyway, privmsgs to channels now works again.



*** 20001025_4 by adrian


Move the listener code to use comm_setselect(). 

* accept_connection() has changed to become a PF function for use
  with comm_setselect()
* When a listener is created, comm_setselect() is called to make
  the initial IO on the FD work
* reworked read_message() in s_bsd_poll.c to deal with no listen sockets

All read_message() does now (!) is handle auth and client/server sockets.
Here's an excerpt from the code explaining the major real change
that happened:

   * Since we're going to rip this code out anyway, the current "hack"
   * will suffice to keep things going. The only two things this loop
   * services now is the auth and client/server fds (resolver and
   * listener FDs are done through the new-style interface) . So,
   * we loop again through the poll_fdarray[] array from scratch again
   * and fd's that are not -1 are ready for us to do read-type events
   * with. The pollfd_array[i].fd = -1; in the auth fd loop stops us
   * from looking at the auth fds as client/server fds which would be
   * a Bad Thing(tm) right now. :-)    -- adrian

* We have to recheck the incoming connection code to ratelimit the number
  of incoming connections/sec to stop connection flooders. Uhm, there was
  some code in read_message() from comstud to do this, I'll move it out
  into accept_connection() once read_message() has gone away.



*** 20001025_3 by adrian


Just set the nonblocking flag when we set a socket non-blocking ..



*** 20001025_2 by adrian


Use the pre-munged poll flags for network IO, rather than creating
our own set of POLL* flags.



*** 20001025_1 by db
- removed NO_JOIN_ON_SPLIT
- cleaned up m_join.c a bit
- removed a pile of uneeded #ifdef's



*** 20001024_4 by adrian


Commit the tidyup of the resolver network code (notice I said *network* :) 
-->

* move init_resolver() to a more useful init place and out of init_netio()
* make the DNS timeout checking an event which is triggered once a second.
  I figure that when I rewrite the event system soon to work on milliseconds
  rather than seconds we might revisit this, but doing it once a second
  actually might be better. Dunno yet..
* add comm_setselect() calls in the resolver init and just after the
  recvfrom() to re-register interest in IO.
* remove the evilness in read_message() which does the IO on
  ResolverFileDescriptor, making resolver IO happen through the new network
  IO system

Notes:

* I have *NO* idea how the DNS write flushing works just yet, I guess I'm
  about to find out.

* The resolver might take a little longer - this is simply the by-product
  of shoehorning in the comm_select() call (if there is no other pending
  IO, read_message() can delay for a bit, since the resolver fd isn't
  covered there.) Once read_message() disappears, so will the delays.
  (or I might just fix it somehow..)



*** 20001024_3 by adrian


Remember to initialise the event subsystem early so we can use it.



*** 20001024_2 by adrian


Arrays start at 0, not 1 in C. When we find out the lowest numbered fd,
we need to make sure npollfds is one more than that value, otherwise the
last filedescriptor won't get polled.



*** 20001024_1 by adrian


Commit the fd state tidyup and new IO loop code.

* I've killed GlobalFDList and replaced it with an array of fd structs.         
  (fde_t). This has the fd state (opened, closed, pending io requests,          
  type, description, etc).                                                      
* I've added fd state tracking stuff (fd_open / fd_close).                      
* I've added file fd state tracking stuff (file_open / file_close)              
* I've tidied up logfile permissions in a place or two                          

There's a little weirdness - if you want to include s_bsd.h, you need
to include fdlist.h as well. This will go away eventually ..



*** 20001023_7 by ryan

changed around order things are done to prevent non-base channel pointer
from being used where base channel pointer should be


*** 20001023_6 by db
- modified cjoin to use the ##channel_name as given in original spec
  this should help us slightly in m_sjoin.c
- started cleaning up m_sjoin.c
- duplicated voodoo code into mo_join.. in m_join.c
  handlers still need a lot of cleanup due to the duplicated code...



*** 20001023_5 by toot
fixed channel.c/remove_empty_channels() so it compiled with 
PRESERVE_CHANNELS #defined


*** 20001023_4 by adrian


Added a port of squid's event system. This is a very simple mechanism
to schedule events to happen in some given time period. The main
function you'll be using is:

eventAdd(const char *text, EVH *func, void *data, time_t when, int weight)

where when is the number of seconds you want to have the event run (so
if you want it running a second from now, you'd set when to be 1.)

Read event.c for a more precise description.

What has changed:

* changed this over to use the Block allocator rather than squid's mempools
* disabled debug reporting until I figure out a nice way (ie how the rest
  of the ircd does it) of doing this
* made the time offsets integer, rather than double like they are in squid
* the logic in io_loop() has been changed to allow this to slide in.

Note that eventAddIsh()'s logic on random offsets might be a bit .. off.
I'll come back to this once I've tidied up bits of the code.

I will also be tidying up io_loop() now an event scheduling mechanism
exists, making it much, much less twisted. So any breaks there will
(hopefully) be temporary.



*** 20001023_3 by adrian





first split of the network code into per-commloop modules. The autoconf
magic came from the squid commloops work by Adrian Chadd (me) and
Benno Rice (benno@holocaine.net).

the poll and select specific stuff was moved into s_bsd_poll.c and
s_bsd_select.c . The chosen file is done through some autoconf magic
and variable substitution in src/Makefile.in. I haven't changed any
code itself, simply un-staticized things and shifted things into
seperate files. This is done to preserve some form of CVS sanity.

A noteable here is that I"ve moved the FD_SETSIZE detection for
select() into s_bsd_select.c rather than ircd.c, since this is a more
logical place to check (and die) if FD_SETSIZE < MAXCONNECTIONS.

The autoconf configuration is done using the following options to
configure:

--enable-poll / --disable-poll : Enable or disable the use of poll()
--enable-select / --disable-select : ENable or disable the use of select()

Note that the current autoconf magic checks if poll() exists - since
we aren't using USE_POLL now, we define ac_cv_func_poll/select/whatever
and this is used further into the autoconf magic to decide the
substitutions to do.



*** 20001023_2 by adrian


* add myself as a core member. Uh, thanks again Diane
* add Toby to Hybrid-team, because he wasn't there



*** 20001023_1 by db
- oopsies in fix_key



*** 20001022_6 by db
- committed desrt's patches to add magic voodoo to invite on vchan
  /invite to vchan puts you on right vchan without the !nick key being
  needed.



*** 20001022_5 by toot
fixed spelling of my name in version.c.SH :)


*** 20001022_4 by db
- added patches for invite by  Ryan Lortie <desertangel@mindless.com> (desrt)
- updated contributors/core group



*** 20001022_3 by db
- removed chan_id
- Can't reject long channels for interoperability reasons



*** 20001022_2 by toot
bysin's patch to check for a overly long channel name in /join too.
or you could end up with a channel you couldn't /cjoin..


*** 20001022_1 by db
- ok, sub1_from_channel went through all the work to figure out if the
  root channel could be removed if a sub channel was removed, only it uh
  forgot to make sure it was empty first. (oh oh) This meant that
  the root channel also got removed from the hash when a client left
  the sub chan. oops



*** 20001021_7 by db
- applied bysin's two patches 



*** 20001021_6 by toot
free topic_info when the channel's deleted


*** 20001021_5 by toot
. renamed free_bans_exceptions_denies to free_channel_masks, and had it
  free invite exceptions too.
. remove_empty_channels() wasn't freeing +d (or +I)


*** 20001021_4 by bill

/usr/local/ircd/ IS the default, not /usr/ejb/whatever


*** 20001021_3 by lusky
put DPATH and SPATH back to defaults


*** 20001021_2 by bill


fixed bug in MODE (MODE #non-existant-chan caused segfault)
made attempted JOIN to a juped channel specify between user or oper


*** 20001021_1 by lusky
fix for duplicate 401's for kick #validchan invalnick
ServerStats->is_ref is incremented twice on an X-line
  which is set to 1 (jdc)
STATS P notifications were not sent to opers (jdc)
stats l/L target to FLAGS_SPY (if STATS_NOTICE) (jdc)
uname info only displayed to opers
If X-line port field is 2, reject client but do not send
  a notification to opers
STATS y/Y now oper-only
did NOT add any of the other conf line display restrictions, I think
  we should integrate control of those on a per-line basis in the new
  conf format.


*** 20001020_1 by toot
msg nick with no text made it core..
privmsg/notice give different errors depending what args are missing, so
they check it instead of parse()


*** 20001019_5 by toot
/list #channel was showing the wrong key :P


*** 20001019_4 by toot
cleaned m_list slightly..


*** 20001019_3 by toot
. /join just skips over a subchan you're already in, instead of giving an error.
. /list shows vchans as #chan<!key> if there's subchans for it..


*** 20001019_2 by db
- removed the dns cache built into res.c
- will have to fill out cres_mem with something more appropriate



*** 20001019_1 by lusky
dns cache entries were never fully expiring, stayed in the hashtable forever


*** 20001018_1 by db
- fixed core with who of client not on a channel. ooops
- fixed mo_privmsg
- fixed @# style channel messages 



*** 20001017_1 by lusky
fixed a bug tickled by sending a bogus SERVER command from hacked server
auditted leakage of IP address from get_client_name calls


*** 20001016_10 by db
- prelim changes for m_topic



*** 20001016_9 by toot
now it will remove the basechan when there's no vchans left under it


*** 20001016_8 by toot
. this should remove the basechan after deleting its last vchan, but didn't
. don't bother to show possible vchans if they're already
  in one of them.
. there's one case where the root is empty, and there's only one
  vchan.. just have them join that vchan.
. displays the last nick to join each vchannel for now, and won't show empty vchans


*** 20001016_7 by toot
map_vchan checks root channel too


*** 20001016_6 by db
- semi fixed whois



*** 20001016_5 by toot
. don't allow JOIN to a 'real' subchan name
. some extra brackets in privmsg/notice to kill a compile warning
. mpw JOIN #chan !nick will work on any nick in the channel, just need to
  update show_vchans


*** 20001016_4 by db
- global who should work when its a wild card mask



*** 20001016_3 by db
- fixed bug in m_who



*** 20001016_2 by db
- added prelim vchan support to notice as well
- still have to do @# type of vchan 



*** 20001016_1 by db
- fixed stupid bug with vchan == chptr i.e. top level chptr == vchan
  that would result in it never being removed, since vchan == chptr (top chan)
  would never result in a match ... this led to rework of privmsg to channel

- kick appears to work now on vchan



*** 20001015_5 by db
- m_who.c what a MESS



*** 20001015_4 by db
- the m_mode changes needed
  this allows you to mode +o etc. on sub chans. wheeeeeee



*** 20001015_3 by db
- m_names now recognizes vchan names



*** 20001015_2 by db
- slightly rewrote m_names. its still a stinking mess but getting there
- added function call to make vchan names listing easier



*** 20001015_1 by toot
some more fixes to join/cjoin


*** 20001014_11 by toot
another fix to m_names call in m*_join


*** 20001014_10 by toot
. move add_vchan_to_client lower down, incase of bans etc in m_join
. hopefully m_names works now after /join #chan !id
. put a del_vchan_from_client in remove_user_from_channel


*** 20001014_9 by db
- fixed bug in add_vchan_to_client_cache, reversed two args while at it
- made m_privmsg message right channel 
- m_join also has to update cache



*** 20001014_8 by db
- added code to remove chan from client cache, not used yet
- added checks to ensure client doesn't join twice a subchan, not tested yet
- corrected conflict introduced by me
- added another macro for top level vchan detect



*** 20001014_7 by toot
. fixed typo in s_user.c
. made RPL_WHOISADMIN numeric consistent with dalnet
. changed a ->flags pointer that should have been ->umodes in m_whois


*** 20001014_6 by toot
forgot to change that parv to parc>2


*** 20001014_5 by toot
. don't allow CJOIN to a non-base channel
. don't list sub-channels if they try to /join a sub-channel's
  'long' name
. added an extra arg to m_names so it works after a CJOIN
  (there might be a better way to do this)


*** 20001014_4 by db
- moved show_vchans and find_vchan into vchannel.c



*** 20001014_3 by db
- mod Makefile.in to  add new vchannel.c
- added new vchannel.c for vchan support
- added new vchannel.h for vchan support
- added vchan cache call in m_cjoin.c



*** 20001014_2 by db
- m_names() after cjoin (toot)



*** 20001014_1 by db
- fixed cjoin so you actually look like you are joining the subchan now



*** 20001013_3 by db
- numeric 247 (uptime) got trashed in table. (HOW?) would cause server
  to core on /stats u



*** 20001013_2 by db
- cleaner sub1 fix for vchans



*** 20001013_1 by bill

Added null chptr checking to set_channel_modes()


*** 20001012_2 by db
- fixed bug in sub1_from_channel for vchans



*** 20001012_1 by db
- folded in work toot (Toby Verrall) to7@antipope.fsnet.co.uk
  did for first rough proof of concept vchans. We'll have to go in and
  #ifdef these later.



*** 20001011_1 by lusky
fix for *@*.foo.com I:lines being broken by a user@host.foo.com I:lines
change chptr->vchans to chptr->vchan_flag in channel.c to get this tree
  to compile.  not sure if this is correct.


*** 20001006_4 by db
Make virtual channels doubly linked.



*** 20001006_3 by lusky
updated autoconf and Makefile.in to support flex when available


*** 20001006_2 by lusky
deleted ChangeLog.old and include/defs.h


*** 20001006_1 by lusky
updated Makefile.in's to support parallel make ala -6
fixed up cjoin a little so it would compile
synced up changes from -6rc4 to -6rc5(20001005_3):
 added CVS Id tags to numerous files
 brought Hybrid-team and version.c.SH
 deleted ChangeLog.old and include/defs.h
 Fixed misnamed va var in sendto_realops()
 changed ltrace to be consistant with trace for non-opers
 mode channel +e now returns an error to non-chanops
 unauth connection notices now include servername/port (jdc)
 changed "juping locally" to "locally juping" (gp)
 typo in stats z display (gp)
 typo in channel jupe oper notice (db)
 new config.h option ALLOW_DOT_IN_IDENT


*** 20001003_1 by db
- initial changes to add cjoin for vchan support
 


*** 20000930_1 by db
- started adding VCHAN code. I



*** 20000929_1 by ejb
merged toot's patch to resync with -6rc4

*** 20000926_1 by ejb
- added myself to core team list in version.c.SH
- added ircnet's +I invite exceptions
- remove {add,del}_*id(), replaced with a single function
  add_id and del_id, removes code duplication.
- added seperate error_sents for +I and +d in channel.c.
- removed some false BAN_INFO ifdefs



*** 20000907_1 by ejb
initial stab at IPv6 .. it doesn't compile with IPV6 defined yet..



*** 20000813_1 by ejb
Large commit, folding in a number of changes i made over the weekend.
- add n!u@h for topic_info ala ircnet.
- stats p notice.
- removed some old non-TS cruft.
- unreg users can't send version.
- added +a umode, shows oper is admin in whois 
  if they are 'admin=yes'.
- users can see the topic of a -s channel they aren't
  on (but can't set it even if it is -t, to prevent
  topic floods *sigh*)
- many changes in parse.c .. fixed a few bugs, rewrote
  the argument parser code, added support for catching
  users passing not enough parms before the m_ function
  is even called.
- you can now set in ircd.conf whether channels have to
  be +i for an invite to work.
- added a numeric (504) for sending to users trying to
  invite remote users to +i channels.
- started changing m_* functions to not check parc anymore,
  in most cases parse() has already handled this.
- move glines from config.h to ircd.conf
plus a lot of other stuff i probably forgot.



*** 20000731_1 by db
- Added Pie-Man changes, added him to list of contributors



*** 20000724_1 by db
- commiting in changes made by pie-man (ins oper)



*** 20000719_1 by db
- redid to use handlers. untested, but it copmiles at least



*** 20000525_1 by wnder
a strncpy --> strncpy_irc
fix for a potential dereference of bad ptr in vsendto_prefix_one (db)


*** 20000516_1 by wnder
 Fix for % in user's ident bug


*** 20000407_1 by db
- unused variable never caught, uneeded va_end caused solaris compiler
  to not compile



*** 20000405_1 by db
- committing some quick hacks for verifying block allocator
  is not leaking.
  These should be #ifdef'ed perhaps in future.
  when an oper does /stats $
  four files will be written to DPATH
  which will contain hex values of allocated memory for each client

  local_block_allocator_client_list.txt from block allocator
  local_client_list.txt                 from link list

  remote_block_allocator_client_list.txt from block allocator
  remote_client_list.txt                 from link list

  code external to the ircd is needed to verify consistency



*** 20000404_2 by db
- clean ups to parser



*** 20000404_1 by db
- fixed memory leak in parser code. strdup in lexer never freed
  found by Krome from ircnet



*** 20000402_10 by db
- MAX_SETBACK_TIME added



*** 20000402_9 by db
- more cleanups to parser
- make sure 'O' is converted to global=yes in convertconf



*** 20000402_8 by db
- clean: in Makefile remove .c files for parser
- cleaned up serverinfo code
- make sure network order not host order for local ip



*** 20000402_7 by db
- further cleanups to remove #ifdef's 



*** 20000402_6 by db
- removed last remnant of cidr_ban (sorry is)



*** 20000402_5 by db
- broke ZIP_LINKS forgot to remove all #ifdef's on SENDQ_ALWAYS
  "is" and "Perly" found it



*** 20000402_4 by db
- changed comment in res.c also trimmed if down to match undernet's



*** 20000402_3 by db
- changed CONFIG_H_LEVEL_6 to CONFIG_H_LEVEL_7
- updated config.h.dist to match config.h



*** 20000402_2 by db
- Pointed out by "is" with non standard p vs. s this else if is wrong
  "is" <ejb@debian.org>



*** 20000402_1 by db
- This bug caused only the first connection in a class to be tried
  i.e. if you had several C: lines in one =class= only the first
  C: line was ever used. This is code that was #ifdef'd out from original
  hybrid-5                    



*** 20000401_1 by db
- removal of #define kludge for GlobalSetOptions



*** 20000330_1 by db
- large resync , folding in a number of changes contributed by is
  This moves some config.h items into the conf file



*** 20000319_1 by lusky
Changed my email address, this is a test commit (jrl)


*** 20000209_1 by db
- fixed goof with removing of an #ifdef for TOPIC_INFO 
  patch done by is- 



*** 20000201_3 by db
- synced up convertconf to current parser format



*** 20000201_2 by tomh

Fix UMR picked up by purify:
****  Purify instrumented ircd (pid 11725)  ****
UMR: Uninitialized memory read (15 times):
  * This is occurring while in:
        read_message   [s_bsd.c:909]
        main           [ircd.c:688]
        _start         [crt1.o]
  * Reading 4 bytes from 0xefffe5ac on the stack.
  * Address 0xefffe5ac is local variable "poll_fds" in function read_message.



*** 20000201_1 by db
- converted separate user/host forms to user="user@host.part"; forms
  it looks nicer, and easier for admins to work with I think. Plus recommended
  by the #coder-com crew. ok.
- fixed stupid in initconf where it missed # commented out lines and
  tried to parse old format as new...
- folded in the old -5 nick collide code already folded into the -6 tree.
  its #ifdef'ed for future fixes...



*** 20000131_1 by db
- improvements to connect section. allow multiple hub_masks etc.



*** 20000124_3 by db
- first work on logging section, 
  logging level can be set from new conf file format now.



*** 20000124_2 by db
- updated convertconf



*** 20000124_1 by db
- removed #ifdef for ZIP_LINKS
  I hate #ifdef's



*** 20000123_2 by db
- added fbunputc mimics unputc (Sorry Tom)
- single conf file, is either old style or new style determined
  at initconf time (Again, sorry Tom)
  Could have done it simpler, but this is safer for now...



*** 20000123_1 by db
- cleaned up some "bare" 512 defines. added new IRCD_BUFSIZE define
- added better error recovery to parser, 
- added better error reporting.
- tentative new conf format mostly finished, will "warp" it a bit
  more to match Kev's proposed format as possible, given undernet vs.
  efnet differences..
- need to handle ircd.conf form as the new format as default,
  and fall back to old format as needed. i.e. kludge code still to 
  be removed in source...



*** 20000122_1 by db
- more cleanup on new conf file parser..
  using "auth" instead of "client" as per Kev's document..



*** 20000121_1 by db
- preliminary serverinfo section done



*** 20000120_1 by db
- CONNECT in new parser works, needs full testing



*** 20000117_3 by db
- added a few more sections



*** 20000117_2 by db
- Added quarantine



*** 20000117_1 by db
- continuing with new parser code... listen/operator tested



*** 20000116_7 by db
- bunch of changes in order to have class names not numbers. *sigh*
  I toyed with the idea of keeping class #'s and having class_names
  to class #' mapping somewhere, but thats just getting silly.. sooo....
  Here we are...



*** 20000116_6 by db
- make_class should return a 0'ed class to be safe



*** 20000116_5 by db
- prelim. change before I start on class names



*** 20000116_4 by db
- oper section complete except for class operations..



*** 20000116_3 by db
- checkpoint with operator section mostly working...
  class code has to be rewritten still



*** 20000116_2 by db
- oops. I changed Makefile rather than Makefile.in



*** 20000116_1 by db
- copyright touch ups
- missing -ll in Makefile



*** 20000115_3 by db
- The lex/yacc files...



*** 20000115_2 by db
- first very rough working lex/yacc under ircd-hybrid..
  parser doesn't actually do anything.... yet...
  Tom, we could use a fileio pushback, to push back a line thats
  "not for us"



*** 20000115_1 by db
- more cleanups to parse code



*** 20000113_3 by db
- someone forgot to add a file. wonder who



*** 20000113_2 by db
- externalized the old parser, unfortunately, this means a lot
  more of the s_conf interface is visible ;-(, can do better in the future...
  This is in preparation for new parser inclusion.
  This will (ick) allow us to use both old conf files and new format conf files
  for backwards compatibility. (I'm not terribly happy about this, but...
  Hi Tom!)



*** 20000113_1 by db
- updated client/deny sections to use new IP_TYPE
- fixed union to use struct ip_value



*** 20000112_1 by db
- returned to ';' at end of each section, this is actually easier to
  recover from errors; just scan for ';'
- updated convertconf to produce test file
- added IP token to lexer and to client section



*** 20000111_11 by db
- added DENY 



*** 20000111_10 by db
- more work on yacc/lex parser
  added "kill" open to discussion, but efnet has "K" and "D" lines
  


*** 20000111_9 by db
- changes to bring it into line with Kev's sample conf just a tiny bit
- removed that dumb ';' at end of sections



*** 20000111_8 by db
- tiny cleanup to Makefile
  Copyright notice fixed 



*** 20000111_7 by db
- added preliminary yacc/lex test parser code



*** 20000111_6 by db
Directory /usr/hybrid/ircd-hybrid-7/src/test/newconf added to the repository


*** 20000111_5 by db
- oops port in connect was quoted



*** 20000111_4 by db
- more tiny tweaks



*** 20000111_3 by db
- tweaks to new conf format



*** 20000111_2 by db
- sample ircd.conf and its converted ircd.conf.new 



*** 20000111_1 by db
- Now pretty much handles a "normal" conf file.. output is
  a "new" style conf format file, with details still to be hashed out.
  Do we want to handle multiple C/N's ? multiple H lines? *sigh* yes
  Thats next, but not yet.
 


*** 20000110_4 by db
- tiny tweak much more to do



*** 20000110_3 by db
- Nearly done. TODO Finish off I lines (I line prefixes)
  HUB or LEAF control set in old M line



*** 20000110_2 by db
- updated Makefile, fleshed out convertconf more



*** 20000110_1 by db
- small cleanup to s_conf.c before the bigger one



*** 20000109_12 by wnder
woopsies


*** 20000109_11 by wnder
Added documentation of the iauth protocol


*** 20000109_10 by db
- bit more fleshing out of convertconf.c



*** 20000109_9 by db
- first rough outline of conversion program to convert old style
  to new style conf file format. No Makefile, incomplete still.



*** 20000109_8 by db
- more cleanups, made consistent... no need for MSG_PRIVMSG/MSG_NOTICE
  other m_ files don't do that



*** 20000109_7 by db
- cleanups



*** 20000109_6 by db
- m_mode bursts/looks for channel mode on uplink in LazyLinks code



*** 20000109_5 by db
- removed uneeded #include



*** 20000109_4 by db
- forgot to remove now unused m_message.c



*** 20000109_3 by db
- split m_privmsg and m_notice into two files. My rationale for doing this
  is: slightly faster, no more if(notice) in code, m_privmsg/m_notice
  rarely change anyway.



*** 20000109_2 by wnder
Added support for when SerialNumber rolls over to 0


*** 20000109_1 by db
- as fbgets is re-entrant, redid .include code. Much nicer



*** 20000108_5 by wnder
Implemented serial number method to keep track of searched nodes.
(hi diane!!)


*** 20000108_4 by db
- LazyLinks /list on leaf is sent to its uplink now
- still bug to track down with leaf connected to hub, hub joins net
  leaf does not see channel bursts properly



*** 20000108_3 by wnder
Implemented unsortable I/K lines


*** 20000108_2 by db
- still slowly working in LazyLinks version 2 code. nick collides
  have to be handled by the LazyLinks uplink, for now sending back
  KILL's (which were removed!) as needed...



*** 20000108_1 by wnder
fixed missing #include "s_conf.h"


*** 20000107_4 by db
- sticky / key



*** 20000107_3 by db
- don't core if chptr == NULL in sendto_match_servs()
  shouldn't normally ever happen, but does in LL 



*** 20000107_2 by db
- closer version of LazyLinks version 2



*** 20000107_1 by db
- split out m_user.c m_nick.c, modified s_user.c s_user.h Makefile.in
  LazyLinks is in unworkable state in this version.



*** 20000106_1 by db
- fixed bug introduced in ReplaceQuotes, '\#' was not handled correctly.



*** 20000105_16 by db
- all over the place



*** 20000105_15 by db
- yet another hidden HUB in .h



*** 20000105_14 by db
- removed more pesky #ifdef HUB hidden in .h files



*** 20000105_13 by db
- always initialize serverMask



*** 20000105_12 by db
- HUB removed, server determines if its HUB or LEAF by looking
  at (Now unused) port line in M line. If its a 1, its a HUB, if
  its missing or anything else, its a LEAF.
  Can be queried from /admin
  Yes, its a hack for now.



*** 20000105_11 by db
- removed HUB from config.h etc. now in a config entry



*** 20000105_10 by db
- allow single dot in user names to allow for "first.last" user name style



*** 20000105_9 by db
- removed unneeded include



*** 20000105_8 by db
- oops. missed comment in m_lljoin.c



*** 20000105_7 by db
- oops. removed comments belonging to channel.c only



*** 20000105_6 by db
- committing the split out m_cburst.c m_drop.c m_lljoin.c



*** 20000105_5 by db
- split out m_drop.c m_cburst.c m_lljoin.c



*** 20000105_4 by db
- further cleanups to s_conf.c



*** 20000105_3 by db
- Further cleanups to s_conf.c



*** 20000105_2 by db
- fixed missing Y line detection code which got broken in clean up



*** 20000105_1 by db
- cleanups to dbuf code. Try to flush connections if dbuf list is
  empty then try to allocate.
- tiny start on new channel hierarchy scheme.



*** 20000104_6 by wnder
Prettied up source files by converting tabs to spaces


*** 20000104_5 by db
- fixed DEBUG error in s_conf.c



*** 20000104_4 by db
- also report how many malloc()'ed dbufs there were max



*** 20000104_3 by db
- changed slightly wording in LazyLinks As Implemented doc
- removed more DEBUGLL debug cruft
- simplified m_join CBURST call



*** 20000104_2 by db
- added "Lazy Links As Implemented in Hybrid" doc



*** 20000104_1 by db
- removed more #ifdef's removed BAN_INFO BAN_UH



*** 20000103_7 by db
- mods to try to flush connections if dbufs are used up



*** 20000103_6 by db
- it all works now (LL). channel cleanup etc. 



*** 20000103_5 by db
- this version doesn't core as often. *sigh*
  cleanup channels code needs to be gone over again, its stable
  without.
- removed some cruft and useless comments from client.c



*** 20000103_4 by db
- *sigh* code got lost in the shuffle
  fix stats c so n lines show as n not N
  fix spacing on 333 numeric to match others




*** 20000103_3 by db
- removed last vestige of TOPIC_WHO define



*** 20000103_2 by db
- fixed a typo in ircd.c



*** 20000103_1 by db
- Folded in Perly's cleanup channel code. The idea is to remove
  channels from the lazylinks leaf server if no local members are on them
  and they haven't been used by anyone locally in a "while" where
  "while" is set in s_serv.h CLEANUP_CHANNELS_TIME seconds.
  I've redone the destroy channel code. It should work, but its untested.
  CLEANUP_CHANNELS_TIME is set way low still for debugging,
  its currently 30 seconds. In production it could range from 15 to 60 minutes
  I'd guess.



*** 20000102_9 by db
- key handling was broken in m_cburst



*** 20000102_8 by db
- oops got an if backwards key when NULL cores it



*** 20000102_7 by db
- try to negotiate a non LL connect if serverMask's get all used up
- report all serverMask's used up. That will mean a recode ;-)



*** 20000102_6 by db
- fixed a bug in m_join.c
- cleaned up LL channel key handling
- don't assign serverMask's to non LL servers



*** 20000102_5 by db
- added LazyLinks.txt document outlining original Lazy Links protocol
  its been modified for -7
- ensure serverMask of 0 just causes restoreUnusedServerMask to return



*** 20000102_4 by db
- First working Lazy Links implementation
  still needs debugging/testing etc.



*** 20000102_3 by db
- bug reported by Colten Edwards in m_userhost.c



*** 20000102_2 by db
- oops bogus code in m_sjoin.c



*** 20000102_1 by db
- few tidy ups in prelim LL code



*** 20000101_4 by db
- implemented DROP, not tested, not used yet.



*** 20000101_3 by db
- Preliminary rough cut at Lazy Links, still a lot of mopping up to do
  'n' in c/n's means try lazy link, 'N' means do normal.



*** 20000101_2 by db
- Cleanups to allow DEBUGMODE to compile



*** 20000101_1 by db
- cleanup of LITTLE_I_LINES #ifdef



*** 19991231_4 by db
- renamed channel to GLobalChannelList in jupe channel code



*** 19991231_3 by db
- more cleanup of s_conf.c



*** 19991231_2 by db
- Preliminary cleanups on s_conf.c



*** 19991231_1 by db
- missing NULL assignment would cause double free's and eventual
  core on malformed U: lines.



*** 19991230_11 by wnder
more iauth fixups - this should finish it!


*** 19991230_10 by wnder
IAuth fixups


*** 19991230_9 by db
- oopsies in opcount code spotted by Perly.. flag has to be used
  before set...



*** 19991230_8 by db
- more missed updates local_cptr_list -> LocalClientList



*** 19991230_7 by db
- missed a opcount-- in m_sjoin.c
- missed an #endif for IAUTH



*** 19991230_6 by db
- Added chanop counter to Channel struct, keep track of current op count
  use instead of that nasty loop in SJOIN code



*** 19991230_5 by db
- folding back in USE_IAUTH code



*** 19991230_4 by db
- completion of mop up of resync with -6 tree. Compiles again



*** 19991230_3 by db
- mop up of resync of -7 with -6



*** 19991230_2 by db
- mop up -7 tree resync with -6



*** 19991230_1 by db
resync with current ircd-hybrid-6 tree



*** 19991217_1 by db
1) folded in d line fix from -6
2) folded in res.c core bug fix from -6



*** 19991109_1 by db
- changes to sendto_one_type to not send @# style of message to non
  CHW servers
- m_userhost old behaviour restored, but rewritten. Need to support
  up to 5 userhost requests, this fixes ircle clients which depend on
  this behaviour.



*** 19991022_1 by db
- disallow -ve limit on mode #channel +l 



*** 19991017_2 by db
- missing mask check in IP kline code. no idea why.



*** 19991017_1 by db
- removed (+) cruft as this was a Tanerism



*** 19991013_10 by tomh
Removed CONNECTFAST garbage, it was causing production boxes to load up on
SYNs on the primary port and killing poll performance.


*** 19991013_9 by lusky
fixed m_ison to put trailing space on 303 responses
CONNECTFAST is always defined for USE_POLL now, was causing very poor
  accept performance on heavily loaded non-Solaris machines using poll()


*** 19991013_8 by tomh
put USE_POLL back in setup.h.in, removed stuff that wasn't needed


*** 19991013_7 by lusky
syncd config.h.dist to config.h


*** 19991013_6 by wnder
missing macros


*** 19991013_5 by lusky
updated opers.txt to include set log


*** 19991013_4 by db
- fixed misnomer



*** 19991013_3 by db
- corrected table in s_log.c for log level to string



*** 19991013_2 by db
- added strings to m_set LOG



*** 19991013_1 by db
- botched wild card matching fixed



*** 19991011_1 by db
  It turns out, that cptr->fd is <0 in some cases when its being used, just
as Q described. I was confused at first, because it sounded like he
was saying cptr was =freed= then being used. It appears its still a valid
pointer, but its fd has been closed...

  The ideal solution would be to make sure the cptr is removed from the 
channel link list before the code even gets to sendto_common_channels()

  In any case, using an fd < 0 in this section is a BAD THING 



*** 19991009_1 by db
- better fix for umode code



*** 19990925_1 by db
- simpler mode letter to bit mask table lookup, safer



*** 19990924_2 by db
- yet another ->name instead of ->user this one in report_tklines



*** 19990924_1 by db
- This patch corrects a case where a normal user can oper themselves. oops.
- It also corrects a possible core due to a bogus H or L line. (neph)



*** 19990914_1 by wnder
IAuth updates:
 * mtree.c is (hopefully) approaching it's final stages - much
   more bulletproof now.


*** 19990913_1 by wnder
IAuth updates:
 * added a new mtree module - handles I: and K: lines. Please
   throw all sorts of odd combinations at it to give it a good
   run - highly experimental :-)


*** 19990912_2 by wnder
IAuth updates:
 * got "I line is full" check working
 * ircd now sends iauth it's list of classes (Y:) upon
   connection


*** 19990912_1 by wnder
IAuth updates:
 * bug fix in iauth connection code
 * register_user() has been replaced with:
   GreetUser()            - for local clients
   register_remote_user() - for remote clients
   (all under #ifdef USE_IAUTH)


*** 19990911_1 by tomh
add fd check to other #ifdef SENDQALWAYS


*** 19990910_6 by tomh
types cleanup
NOTE: the interface in s_zip.c is a little borked, the length field should
not be used to convey error results


*** 19990910_5 by tomh
type cleanups, remove bogus casts


*** 19990910_4 by tomh
type cleanups


*** 19990910_3 by tomh
change poll.h to sys/poll.h


*** 19990910_2 by wnder
IAuth changes:
 * the listen port is now dynamically configurable (iauth.conf)
   - I'll have to do something similar to ircd.conf
 * k/i/q lines (read at run-time from iauth.conf)


*** 19990910_1 by wnder
IAuth changes:
 * fully functional and tested: K, I, Q lines (D and G to come)
 * non-blocking connect to IAuth server
 * _every_ change i made is under #define USE_IAUTH


*** 19990909_26 by tomh
ewps make sentinel char* instead of void*


*** 19990909_25 by tomh
change (void*)1 to valid sentinel pointer


*** 19990909_24 by tomh
type fixes


*** 19990909_23 by tomh
cleanups


*** 19990909_22 by tomh
missing header


*** 19990909_21 by tomh
change return type for get_sendq, remove redundant casts


*** 19990909_20 by tomh
change return type for get_sendq


*** 19990909_19 by tomh
remove (char*)NULL casts, pointless


*** 19990909_18 by tomh
remove non-ansi prototype for crypt


*** 19990909_17 by tomh
change int to size_t in accept_connection


*** 19990909_16 by tomh
non-ansi prototype for sync_channels


*** 19990909_15 by tomh
remove redundant initializer


*** 19990909_14 by tomh
cleanup types, bug fix


*** 19990909_13 by tomh
replaced wrong type


*** 19990909_12 by tomh
remove misplaced cast


*** 19990909_11 by tomh
remove inappropriate casts in MyFree, rename class c_class


*** 19990909_10 by lusky
killpath fixes (jl)
check for client instead of connect in m_links


*** 19990909_9 by tomh
missing include


*** 19990909_8 by tomh
more type fixups


*** 19990909_7 by tomh
fix bug in dopacket return values


*** 19990909_6 by tomh
incorrect type usage


*** 19990909_5 by tomh
removed non-ansi prototypes for flud code from
we need to review this sort of thing better, sigh


*** 19990909_4 by tomh
add missing header


*** 19990909_3 by wnder
everything seems to be working again - just took out iauth/
from Makefile


*** 19990909_2 by wnder
more #ifdef USE_IAUTH stuff


*** 19990909_1 by wnder
Ok, sorry for the broken compile - I put all the iauth code
in the ircd tree under #ifdef USE_IAUTH so hopefully nothing
else will be affected until it's good and ready - i'll do a
checkout after this to make sure everything's fine.


*** 19990908_2 by lusky
fixes to userhost, changed to -5 style


*** 19990908_1 by wnder
IAuth changes:
 * put dns and ident back into s_auth.c
 * added kline check to iauth


*** 19990907_2 by tomh
move dbuf cleanup to free_client, fix send.c bug


*** 19990907_1 by lusky
killpath is now opers only
+k/-k compatiblity issues
Makefile distclean cleanup for iauth


*** 19990906_4 by tomh
little logic fix


*** 19990906_3 by tomh
little logic tweaks


*** 19990906_2 by tomh
read dbufs right into client buffer


*** 19990906_1 by db
- -k should remove key only if matching key or its a *
  thats a bug. 



*** 19990904_1 by tomh
change (start < end && IsEol(*start)) to (start < end)


*** 19990903_2 by wnder
IAuth now does dns queries


*** 19990903_1 by tomh
bug fix


*** 19990902_8 by tomh
rewrite dbuf.c


*** 19990902_7 by wnder
test


*** 19990902_6 by wnder
oops


*** 19990902_5 by wnder
ircd needs these changes to work with iauth - as of right now,
ircd attempts a connection to 127.0.0.1 port 4444 where it
expects the IAuth server to be - you just need to run
-7/iauth/source/iauth first so it listens on 4444. In the future,
the iauth host/port will be dynamically configurable.


*** 19990902_4 by wnder
ident support


*** 19990902_3 by wnder
minor fix


*** 19990902_2 by wnder
IAuth updates: Got ident query working


*** 19990902_1 by lusky
added check for '#' in username and hostname of /quote kline


*** 19990901_10 by wnder
goes with ircdauth.c


*** 19990901_9 by wnder
ircd module to allow communication with iauth


*** 19990901_8 by wnder
IAuth needs a makefile too!


*** 19990901_7 by wnder
more iauth stuff


*** 19990901_6 by wnder
Changes to accomodate iauth


*** 19990901_5 by wnder
Iauth headers


*** 19990901_4 by wnder
IAuth source files : as of right now IAuth accepts authentication
queries of the form: DoAuth <ID> <ip address> and returns an
answer of the form: DoneAuth <ID> <username> <hostname>.
Ident/DNS have not been completed yet.


*** 19990901_3 by wnder
Directory /usr/hybrid/ircd-hybrid-7/iauth/source added to the repository


*** 19990901_2 by wnder
Directory /usr/hybrid/ircd-hybrid-7/iauth/include added to the repository


*** 19990901_1 by wnder
Directory /usr/hybrid/ircd-hybrid-7/iauth added to the repository


*** 19990831_7 by tomh
cleanup dbuf interface, code will follow


*** 19990831_6 by tomh
break out m_nick


*** 19990831_5 by tomh
Changed MyFree to automatically set the pointer to zero after freeing it.
#define MyFree(x) do { if ((x)) { free((x)); (x) = 0; } while (0)
The assignment is cheap, and it should eliminate double free issues.


*** 19990831_4 by tomh
break out m_user


*** 19990831_3 by tomh
use development CFLAGS, change for release


*** 19990831_2 by wnder
standard gnu copyright


*** 19990831_1 by wnder
New macro: IsEol() which looks for \r or \n characters


*** 19990830_2 by db
- left over aconf->user gets freed twice, causing some malloc packages
  to leave their lunch all over the disk.... NULL things after every
  free silly... -db 



*** 19990830_1 by lusky
jk's umode +O fix


*** 19990826_1 by lusky
turned on ANTI_DRONE_FLOOD by default
sync'd config.h.dist
include class.h in m_message.c


*** 19990825_3 by lusky
cleaned up tools/Makefile.in
added CVS Id tags to a many files


*** 19990825_2 by db
- Don't be lazy *BAD* Diane, BAD BAD BAD



*** 19990825_1 by db
- fixed stupid in s_conf.c
- reconciled -7 with -6 tree



*** 19990821_2 by tomh
removed unused struct member


*** 19990821_1 by tomh
break out m_hash from hash.c


*** 19990820_1 by tomh
client struct rearangements


*** 19990819_10 by tomh
fixups for missing stuff when disabled features are turned on


*** 19990819_9 by tomh
rename channel to GlobalChannelList


*** 19990819_8 by tomh
little cleanups


*** 19990819_7 by tomh
broke out the rest of the commands from channel.c


*** 19990819_6 by khuon
Added the missing include for common.h



*** 19990819_5 by tomh
new files, work in progress


*** 19990819_4 by tomh
Directory /usr/hybrid/ircd-hybrid-7/src/conf added to the repository


*** 19990819_3 by db
- cosmetic change, U lines without a password appear with * instead of <NULL>



*** 19990819_2 by tomh
split out m_join.c


*** 19990819_1 by tomh
add new m_command (m_join), sort msg strings


*** 19990818_3 by tomh
call release_client_dns_reply for servers too


*** 19990818_2 by db
- fixes for U and X lines



*** 19990818_1 by db
- fixed compile errors with SLAVE_SERVERS
- fixed coring problem with SLAVE_SERVERS



*** 19990817_2 by lusky
fixed LIMIT_UH and IDLE_CHECK which were using old structs


*** 19990817_1 by db
- Hide path on kill from "victim"
- Hide path on kill from oper to non opers



*** 19990816_4 by tomh
bug fix for reverse dns mismatch


*** 19990816_3 by tomh
clean up dn_expand result checks


*** 19990816_2 by lusky
removed redundant "New highest connections" server notice


*** 19990816_1 by tomh
bullet proof resolver against bogus replies


*** 19990815_6 by tomh
more fixes for memory counting


*** 19990815_5 by tomh
fixup cryptic message, remove XxxAccess


*** 19990815_4 by tomh
removed FLAGS_CHKACCESS


*** 19990815_3 by tomh
more memory count bug fixes, fix SYSLOG_USERS bug


*** 19990815_2 by tomh
cleanup memory counting code, still more to do


*** 19990815_1 by tomh
cleanup memory counting code


*** 19990813_2 by tomh
remove redundant check


*** 19990813_1 by tomh
count fix


*** 19990812_1 by tomh
hash function fix


*** 19990811_2 by lusky
throttle accept errors in listener.c
oper motd rehash bug fix from perly
ensure that SERVER must come before SVINFO (jl)
neglected to detach_conf for umode -o (jl)


*** 19990811_1 by tomh
fake direction bug fix


*** 19990810_4 by tomh
removed unneeded include


*** 19990810_3 by lusky
fixed bug with NO_JOIN_ON_SPLIT on a coldstart
added include for stdlib.h to mkpasswd.c
moved rcs Id into comments in fixklines.c


*** 19990810_2 by db
- %lu screws up idle times as seen by a lot of scripts, notably bitchx *sigh*



*** 19990810_1 by db
- FLAGS_SPY was being checked against old flags, its now umodes *sigh*



*** 19990809_3 by db
- missed the user mode +b for bots
- applied neph's operwall/wallops pacing patch



*** 19990809_2 by db
- fixes to allow SLAVE_SERVER to work
- RPL_MYINFO should report the user modes and channel modes available
  we've added +x user mode and +d channel mode



*** 19990809_1 by db
- missing #include breaks SLAVE_SERVERS



*** 19990806_1 by sean
Diane's freaky patch


*** 19990805_4 by db
- fixed rehash dump, would core on bad admin line



*** 19990805_3 by db
- user_mode allowed decrement of oper count even if client was not opered to begin with



*** 19990805_2 by db
- botch in client.h, umodes were moved to umodes in client, forgot
  to redefine the macros for SetInvisible etc. this broke remote
  setting of +i on clients. major bug.



*** 19990805_1 by db
- bug in stats Q line found by Dustin Marquess (Jailbird)



*** 19990804_3 by tomh
fix luser count bug


*** 19990804_2 by db
- fixed broken m_unkline.c it would unkline everything. duh



*** 19990804_1 by db
- fixes IP Klines not showing host



*** 19990803_2 by db
- updated .depend
- added m_set for LOG



*** 19990803_1 by db
- oops. USE_ALLOW_OP was never defined. use NO_CHANOPS_WHEN_SPLIT instead
  This one has to go into the -6 tree before release as well.



*** 19990802_9 by tomh
missed a log thing in m_kill somehow


*** 19990802_8 by tomh
missed one


*** 19990802_7 by tomh
remove struct.h includes, new .depend


*** 19990802_6 by tomh
removed unused data member from client struct


*** 19990802_5 by tomh
changed 2 headed function calls, removed unused data member in client struct


*** 19990802_4 by db
- goofed the 216 reply



*** 19990802_3 by db
- bug in mtrie_conf.c causing ~ klines not to work



*** 19990802_2 by db
- major bug in s_conf.c to do with reading of kline.conf



*** 19990802_1 by db
- removed struct.h



*** 19990801_19 by lusky
testing to see that the serial number isn't jumping


*** 19990801_18 by lusky
ChangeLog should be automated now.  Also the serial number should
no longer jump more than one because of a commit of multiple subdirs.
Please be descriptive and unique in your commit comments.


19990801_17 by lusky
I think it's working this time.

version hybrid-7-current 1999-08-01 to present
* Restarted changelog
-Rodder

$Id$
